"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4082],{98165:function(e,t,r){r.d(t,{Z:function(){return i}});var n=r(87462),s=r(62435),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z"}}]},name:"sync",theme:"outlined"},o=r(84089),c=function(e,t){return s.createElement(o.Z,(0,n.Z)({},e,{ref:t,icon:a}))};var i=s.forwardRef(c)},63434:function(e,t,r){var n=r(1413),s=r(91),a=r(22270),o=r(84567),c=r(62435),i=r(90789),l=r(56499),u=r(86074),d=["options","fieldProps","proFieldProps","valueEnum"],p=c.forwardRef((function(e,t){var r=e.options,o=e.fieldProps,c=e.proFieldProps,i=e.valueEnum,p=(0,s.Z)(e,d);return(0,u.jsx)(l.Z,(0,n.Z)({ref:t,valueType:"checkbox",valueEnum:(0,a.h)(i,void 0),fieldProps:(0,n.Z)({options:r},o),lightProps:(0,n.Z)({labelFormatter:function(){return(0,u.jsx)(l.Z,(0,n.Z)({ref:t,valueType:"checkbox",mode:"read",valueEnum:(0,a.h)(i,void 0),filedConfig:{customLightMode:!0},fieldProps:(0,n.Z)({options:r},o),proFieldProps:c},p))}},p.lightProps),proFieldProps:c},p))})),f=c.forwardRef((function(e,t){var r=e.fieldProps,s=e.children;return(0,u.jsx)(o.Z,(0,n.Z)((0,n.Z)({ref:t},r),{},{children:s}))})),m=(0,i.G)(f,{valuePropName:"checked"});m.Group=p,t.Z=m},64317:function(e,t,r){var n=r(1413),s=r(91),a=r(22270),o=r(62435),c=r(66758),i=r(56499),l=r(86074),u=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],d=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],p=function(e,t){var r=e.fieldProps,d=e.children,p=e.params,f=e.proFieldProps,m=e.mode,h=e.valueEnum,x=e.request,v=e.showSearch,b=e.options,g=(0,s.Z)(e,u),j=(0,o.useContext)(c.Z);return(0,l.jsx)(i.Z,(0,n.Z)((0,n.Z)({valueEnum:(0,a.h)(h),request:x,params:p,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,n.Z)({options:b,mode:m,showSearch:v,getPopupContainer:j.getPopupContainer},r),ref:t,proFieldProps:f},g),{},{children:d}))},f=o.forwardRef((function(e,t){var r=e.fieldProps,u=e.children,p=e.params,f=e.proFieldProps,m=e.mode,h=e.valueEnum,x=e.request,v=e.options,b=(0,s.Z)(e,d),g=(0,n.Z)({options:v,mode:m||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},r),j=(0,o.useContext)(c.Z);return(0,l.jsx)(i.Z,(0,n.Z)((0,n.Z)({valueEnum:(0,a.h)(h),request:x,params:p,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,n.Z)({getPopupContainer:j.getPopupContainer},g),ref:t,proFieldProps:f},b),{},{children:u}))})),m=o.forwardRef(p);m.SearchSelect=f,m.displayName="ProFormComponent",t.Z=m},52735:function(e,t,r){r.r(t);var n=r(19632),s=r.n(n),a=r(97857),o=r.n(a),c=r(15009),i=r.n(c),l=r(99289),u=r.n(l),d=r(5574),p=r.n(d),f=r(97930),m=r(40956),h=r(64119),x=r(87603),v=r(25035),b=r(98165),g=r(11774),j=r(38345),k=r(97269),S=r(64317),w=r(63434),Z=r(31199),_=r(5966),y=r(59530),N=r(80507),C=r(45360),P=r(83062),A=r(7134),F=r(66309),E=r(15867),M=r(9669),T=r.n(M),Y=r(27484),D=r.n(Y),R=r(70178),z=r.n(R),L=r(62435),V=r(51409),q=r(86074);D().extend(z());var H=[];t.default=function(){var e=(0,y.useDispatch)(),t=C.ZP.useMessage(),r=p()(t,2),n=r[0],a=r[1],c=(0,y.useSelector)((function(e){return e.global.contractKit})),l=(0,y.useSelector)((function(e){return e.global.account})),d=(0,y.useSelector)((function(e){return e.global.session})),M=(0,y.useSelector)((function(e){return e.global.privateKey})),Y=(0,y.useSelector)((function(e){return e.ppp.valueEnum})),R=(0,y.useSelector)((function(e){return e.ppp.projects})),z=(0,y.useSelector)((function(e){return e.ppp.vipAccounts})),O=(0,y.useSelector)((function(e){return e.ppp.accessAccounts})),I=(0,L.useState)(0),U=p()(I,2),W=U[0],$=U[1],G=(0,L.useState)(0),J=p()(G,2),K=J[0],B=J[1],Q=(0,L.useState)(0),X=p()(Q,2),ee=X[0],te=X[1],re=(0,L.useState)(0),ne=p()(re,2),se=ne[0],ae=ne[1],oe=(0,L.useState)(0),ce=p()(oe,2),ie=ce[0],le=ce[1],ue=(0,L.useState)([]),de=p()(ue,2),pe=de[0],fe=de[1],me=(0,L.useState)(""),he=p()(me,2),xe=he[0],ve=he[1],be=(0,L.useState)(0),ge=(p()(be,2)[1],(0,L.useState)(0)),je=p()(ge,2),ke=je[0],Se=je[1],we=(0,L.useState)(!1),Ze=p()(we,2),_e=Ze[0],ye=Ze[1],Ne=(0,L.useState)({}),Ce=p()(Ne,2),Pe=Ce[0],Ae=Ce[1],Fe=(0,L.useState)({}),Ee=p()(Fe,2),Me=Ee[0],Te=Ee[1],Ye=(0,L.useState)(!1),De=p()(Ye,2),Re=De[0],ze=De[1],Le=(0,L.useState)(!1),Ve=p()(Le,2),qe=Ve[0],He=Ve[1],Oe=(0,L.useState)(!1),Ie=p()(Oe,2),Ue=Ie[0],We=Ie[1],$e=(0,L.useState)(!1),Ge=p()($e,2),Je=Ge[0],Ke=Ge[1],Be=(0,L.useState)([]),Qe=p()(Be,2),Xe=Qe[0],et=Qe[1],tt=(0,L.useState)(!1),rt=p()(tt,2),nt=rt[0],st=rt[1],at=(0,y.useIntl)(),ot=at.formatMessage({id:"coffee.inputException"}),ct=at.formatMessage({id:"msig.intlTransactionEmpty"}),it=at.formatMessage({id:"common.intlPleaseConnectWallet"}),lt=at.formatMessage({id:"common.intlPleaseConnectNetwork"}),ut=(0,L.useRef)([]),dt=(0,L.useRef)(!1),pt=(0,L.useRef)({}),ft=(0,L.useRef)(),mt=(0,L.useRef)(0),ht=(0,L.useRef)(!0),xt=(0,L.useCallback)((function(){var e=0,t=0,r=0,n=0;for(var s in pt.current)"success"===pt.current[s].status?t+=1:"error"===pt.current[s].status?r+=1:"processing"===pt.current[s].status?n+=1:"default"===pt.current[s].status&&(e+=1);$(t),B(r),te(n),ae(e)}),[]),vt=(0,L.useCallback)((function(e){var t=D()(e).valueOf();Se(t)}),[]),bt=(0,L.useCallback)(function(){var e=u()(i()().mark((function e(t){var r,n;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],n=D()().format("YYYY-MM-DDTHH:mm:ss.SSS"),H.push({time:n}),t.forEach((function(e){if("success"!==pt.current[e.cid].status&&"processing"!==pt.current[e.cid].status&&("error"!==pt.current[e.cid].status||!pt.current[e.cid].message.includes("asset not found"))){var t=new Promise((function(t){pt.current[e.cid].status="processing",xt(),d.client.v1.chain.push_transaction(e.signedTransaction).then((function(r){r&&r.processed&&"executed"===r.processed.receipt.status?(pt.current[e.cid].status="success",xt(),t(!0)):("success"!==pt.current[e.cid].status&&(pt.current[e.cid].status="error",H.push({cid:e.cid,error:JSON.stringify(r),pos:"then"}),console.log(r),xt()),t(!1))})).catch((function(r){if("success"!==pt.current[e.cid].status){if(pt.current[e.cid].status="error",xt(),H.push({cid:e.cid,error:JSON.stringify(r),pos:"catch"}),r instanceof Error)if(r.message.includes("eosio_assert_message assertion failure"))r.details[0].message.includes("asset not found")&&(pt.current[e.cid].message="asset not found");console.log(r)}t(!1)}))}));r.push(t)}}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[d,xt]),gt=(0,L.useCallback)(function(){var e=u()(i()().mark((function e(t){var r,s,a,o,u,p,f,m,x,v,b,g,j,k,S,w,Z,_,y,C,P,A,F,E,M,T;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,d&&d.broadcast){e.next=6;break}return n.error("".concat(it)),e.abrupt("return");case 6:if(l){e.next=9;break}return n.error("".concat(lt)),e.abrupt("return");case 9:if("owner"===(s=d.permissionLevel.permission.toString())||"active"===s){e.next=13;break}return n.error("permission权限必须是owner或者active"),e.abrupt("return");case 13:return He(!0),a=t.pidAuto,o=t.countAuto,u=t.disorderAuto,p=t.startAuto,f=t.endAuto,m=Number(a.split("-")[1]),x=d.actor.toString(),e.next=19,c.load("dfs3protocol");case 19:return v=e.sent,e.next=22,d.client.v1.chain.get_table_rows({code:"dfs3protocol",table:"registry",scope:"dfs3protocol",key_type:"i64",index_position:"secondary",lower_bound:N.zM.from(m),upper_bound:N.zM.from(m),limit:1e3});case 22:return b=e.sent,g=b.rows,j=v.table("projects"),e.next=27,j.all({scope:"dfs3protocol",from:m,to:m});case 27:if(k=e.sent,S=k[0].init_nft_price.value,w=k[0].init_nft_price.symbol.name,Z=k[0].sec_per_round.toNumber(),_=k[0].last_round.toString(),_=D().utc(_).local().format("YYYY-MM-DDTHH:mm:ss"),y=D()(_).add(Z,"seconds").format("YYYY-MM-DDTHH:mm:ss"),"DFS"===w||"USDT"===w||"ORDI"===w){e.next=38;break}return n.error("不支持当前项目"),He(!1),e.abrupt("return");case 38:if(!(p>g.length)){e.next=42;break}return n.error("开始序号超过当前项目最大值".concat(g.length)),He(!1),e.abrupt("return");case 42:if(!f){e.next=51;break}if(!(p>f)){e.next=47;break}return n.error("开始序号超过结束序号"),He(!1),e.abrupt("return");case 47:C=g.length>f?f:g.length,g=g.slice(p-1,C),e.next=52;break;case 51:g=g.slice(p-1);case 52:P=0,A=0,u&&g.sort((function(){return Math.random()-.5})),F=0;case 56:if(!(F<g.length)){e.next=73;break}if(E=g[F].owner,M=Number(g[F].current_price.split(" ")[0]),E!==x){e.next=61;break}return e.abrupt("continue",70);case 61:if(!(M>=2*S)){e.next=63;break}return e.abrupt("continue",70);case 63:if(!(P>=o)){e.next=65;break}return e.abrupt("break",73);case 65:if(!(P>=3e3)){e.next=67;break}return e.abrupt("break",73);case 67:P+=1,A+=M;case 70:++F,e.next=56;break;case 73:return T=z.includes(x)?A.toFixed(8)+" "+w:(1.005*A).toFixed(8)+" "+w,null===(r=ft.current)||void 0===r||r.setFieldValue("amountAuto",T),ve(y),dt.current=!1,Ke(!0),He(!1),e.abrupt("return",!0);case 82:e.prev=82,e.t0=e.catch(0),He(!1),(0,h.Tv)(e.t0,n);case 86:case"end":return e.stop()}}),e,null,[[0,82]])})));return function(t){return e.apply(this,arguments)}}(),[vt,l,c,d,z]),jt=(0,L.useCallback)((function(){var e,t=ut.current;if(0===t.length)return n.error(ct),console.log(ct),!1;var r=null===(e=ft.current)||void 0===e?void 0:e.getFieldsValue(),s=r.repeatAuto,a=r.intervalAuto;try{console.log("handleCountDownFinishAuto",D()().format()),H.push({position:"handleCountDownFinishAuto",time:D()().format()}),bt(t);for(var o=1;o<s;o++)(0,V.iK)(bt,a*o,t);return!0}catch(e){(0,h.Tv)(e,n)}}),[pe,bt]),kt=(0,L.useCallback)((function(){var e;null===(e=ft.current)||void 0===e||e.resetFields(),B(0),$(0),te(0),ae(0),fe([]),Se(0),pt.current={},Te({}),Ae({}),le(0),xt(),dt.current=!1,ht.current=!0}),[xt]),St=(0,L.useCallback)(function(){var t=u()(i()().mark((function t(r){var s,a,o,c,l,u,d,p,f,x;return i()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.load("dfs3protocol");case 3:return a=t.sent,o=a.table("projects"),c=a.table("stat"),t.next=8,o.all({scope:"dfs3protocol"});case 8:return l=t.sent,t.next=11,c.all({scope:"dfs3protocol"});case 11:return u=t.sent,t.next=14,T().get("https://api.dfs.land/dfschain/pppvolume2");case 14:200!==(d=t.sent).status&&n.error("获取pppvolume2数据失败"),p=d.data,f=[],l.forEach((function(e){p.hasOwnProperty(e.id.toString())&&f.push(e)})),f.sort((function(e,t){var r=e.id.toString(),n=t.id.toString();return p[n].volume_24h-p[r].volume_24h})),x={},f.forEach((function(e){var t=e.nft_img,r=e.id.toString(),n=e.project_name,s=e.creator.toString();x["pid-"+r]="".concat(r,"-").concat(n,"-").concat(s,"-").concat(t)})),null===(s=ft.current)||void 0===s||s.setFieldValue("pidAuto",""),e(m.N.setValueEnum(x)),e(m.N.setProjects(l)),e(m.N.setStats(u)),We(!1),t.next=33;break;case 29:t.prev=29,t.t0=t.catch(0),We(!1),(0,h.Tv)(t.t0,n);case 33:case"end":return t.stop()}}),t,null,[[0,29]])})));return function(e){return t.apply(this,arguments)}}(),[]),wt=(0,L.useCallback)((function(){return d&&d.broadcast?l?(We(!0),void St(c)):(n.error("".concat(lt)),!1):(n.error("".concat(it)),!1)}),[d,l,St,c]),Zt=(0,L.useCallback)(u()(i()().mark((function e(){var t,r,s,a,o;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(pe.length){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,ze(!0),t={},r=[],s=Pe.pid,e.next=9,d.client.v1.chain.get_table_rows({code:"dfs3protocol",table:"registry",scope:"dfs3protocol",key_type:"name",index_position:"tertiary",lower_bound:l.accountName,upper_bound:l.accountName,limit:2e3});case 9:a=e.sent,a.rows.filter((function(e){return e.pid===s})).forEach((function(e){r.push(e.cid)})),o=0,pe.forEach((function(e){var n=e.cid;r.includes(n)?t[n]="default":(t[n]="success",o+=1)})),le(o),Te(t),ze(!1),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(2),ze(!1),(0,h.Tv)(e.t0,n);case 23:case"end":return e.stop()}}),e,null,[[2,19]])}))),[c,n,Pe,pe,d]),_t=(0,L.useCallback)(function(){var e=u()(i()().mark((function e(t){var r,n,s,a,o,c;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.hasOwnProperty("pidAuto")){e.next=14;break}return st(!0),r=Number(t.pidAuto.split("-")[1]),e.next=5,d.client.v1.chain.get_table_rows({code:"dfs3protocol",table:"registry",scope:"dfs3protocol",key_type:"name",index_position:"tertiary",lower_bound:l.accountName,upper_bound:l.accountName,limit:2e3});case 5:n=e.sent,(s=n.rows.filter((function(e){return e.pid===r}))).sort((function(e,t){return e.last_trade.localeCompare(t.last_trade)})),a=R.filter((function(e){return e.id.toNumber()===r}))[0],o=a.sec_to_burn_nft.toNumber(),c=[],s.forEach((function(e){var t=e.id.toString(),r=e.cid.toString(),n=D().utc(e.last_trade).add(o,"seconds").local().format("YYYY-MM-DDTHH:mm:ss");c.push({label:(0,q.jsxs)("div",{className:"flex justify-between w-[300px]",children:[(0,q.jsxs)("div",{children:["#",r]}),(0,q.jsxs)("div",{children:["销毁时间：",n]})]}),value:t+"-"+r,time:n})})),st(!1),et(c);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[l,d,R]),yt=(0,L.useCallback)(u()(i()().mark((function e(){var t,r,a,u,f,m,x,v,b,g,j,k,S,w,Z,_,y,C,P,A,F,E,T,Y,R,L,V,q,H,O,I,U,W,G,J,K,Q,X,ee,re,ne,se,oe,ce,ie,ue,de,pe,me,he,xe,ve,be,ge,je,ke,Se;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,d&&d.broadcast){e.next=7;break}return n.error("".concat(it)),console.log(it),e.abrupt("return");case 7:if(l){e.next=11;break}return n.error("".concat(lt)),console.log(lt),e.abrupt("return");case 11:if("owner"===(a=d.permissionLevel.permission.toString())||"active"===a){e.next=16;break}return n.error("permission权限必须是owner或者active"),console.log("permission权限必须是owner或者active"),e.abrupt("return");case 16:return He(!0),u=null===(t=ft.current)||void 0===t?void 0:t.getFieldsValue(),f=u.pidAuto,m=u.countAuto,x=u.disorderAuto,v=u.startAuto,b=u.endAuto,g=Number(f.split("-")[1]),j=d.actor.toString(),e.next=22,c.load("dfs3protocol");case 22:return k=e.sent,e.next=25,d.client.v1.chain.get_table_rows({code:"dfs3protocol",table:"registry",scope:"dfs3protocol",key_type:"i64",index_position:"secondary",lower_bound:N.zM.from(g),upper_bound:N.zM.from(g),limit:1e3});case 25:return S=e.sent,w=S.rows,Z=k.table("projects"),e.next=30,Z.all({scope:"dfs3protocol",from:g,to:g});case 30:if(_=e.sent,y=_[0].creator.toString(),C=_[0].nft_name.toString(),P=_[0].project_name,A=_[0].init_nft_price.value,F=_[0].init_nft_price.symbol.name,E="","DFS"!==F){e.next=41;break}E="eosio.token",e.next=53;break;case 41:if("USDT"!==F){e.next=45;break}E="usdtusdtusdt",e.next=53;break;case 45:if("ORDI"!==F){e.next=49;break}E="ordiordiordi",e.next=53;break;case 49:return n.error("不支持当前项目"),He(!1),console.log("不支持当前项目"),e.abrupt("return");case 53:if(!(v>w.length)){e.next=58;break}return n.error("开始序号超过当前项目最大值".concat(w.length)),He(!1),console.log("开始序号超过当前项目最大值".concat(w.length)),e.abrupt("return");case 58:if(!b){e.next=67;break}if(!(v>b)){e.next=63;break}return n.error("开始序号超过结束序号"),He(!1),e.abrupt("return");case 63:T=w.length>b?b:w.length,w=w.slice(v-1,T),e.next=68;break;case 67:w=w.slice(v-1);case 68:return Y={account:"dfsfreecpu11",name:"freecpu",authorization:[{actor:"dfs.service",permission:"cpu"},d.permissionLevel],data:h._9.from({user:j})},R=N.aU.from(Y),e.next=72,d.client.v1.chain.get_info();case 72:L=e.sent,V=L.getTransactionHeader(),q=D()(),H=[],O={},I=0,U="",W=0,x&&w.sort((function(){return Math.random()-.5})),G=0;case 82:if(!(G<w.length)){e.next=130;break}if(J=w[G].owner,K=Number(w[G].current_price.split(" ")[0]),J!==j){e.next=87;break}return e.abrupt("continue",127);case 87:if(!(K>=2*A)){e.next=89;break}return e.abrupt("continue",127);case 89:if(!(I>=m)){e.next=91;break}return e.abrupt("break",130);case 91:if(!(I>=3e3)){e.next=93;break}return e.abrupt("break",130);case 93:return U=D()(q).add(3600-I++,"seconds").utc().format("YYYY-MM-DDTHH:mm:ss"),Q=w[G].current_price,X=N.xR.from(Q),ee=X.value,re=X.symbol,ne=N.xR.from(.003*ee,re),se="buy:"+w[G].id.toString(),W+=ee,oe={account:E,name:"transfer",authorization:[d.permissionLevel],data:h.FE.from({from:j,to:"dfs3protocol",quantity:Q,memo:se})},ce=N.aU.from(oe),ie={account:E,name:"transfer",authorization:[d.permissionLevel],data:h.FE.from({from:j,to:"davidaccount",quantity:ne,memo:"fee"})},ue=N.aU.from(ie),de=void 0,pe=void 0,me=[],he=z.includes(j)?[R,ce]:[R,ce,ue],de=N.YW.from(o()(o()({},V),{},{expiration:U,actions:he})),me[0]=M.signDigest(de.signingDigest(d.chain.id.toString())),e.next=113,(0,h.zI)(d.transact({transaction:de},{broadcast:!1,transactPlugins:[]}));case 113:if(xe=e.sent,ve=p()(xe,2),be=ve[0],ge=ve[1],!be){e.next=122;break}return n.error(be),He(!1),console.log(be),e.abrupt("return");case 122:pe=N.uQ.from(o()(o()({},de),{},{signatures:[].concat(me,s()(ge.signatures))})),je=w[G].cid,ke=w[G].id,O[je]={status:"default",message:""},H.push({signedTransaction:pe,cid:je,nftid:ke,amount:ee,from:j});case 127:++G,e.next=82;break;case 130:Se=z.includes(j)?W.toFixed(8)+" "+F:(1.005*W).toFixed(8)+" "+F,null===(r=ft.current)||void 0===r||r.setFieldValue("amountAuto",Se),pt.current=O,Te({}),B(0),$(0),te(0),ae(H.length),fe(H),ut.current=H,le(0),Ae({pid:g,creator:y,nft_name:C,project_name:P}),le(0),n.success("创建完成"),He(!1),console.log("创建完成"),e.next=153;break;case 148:e.prev=148,e.t0=e.catch(0),He(!1),(0,h.Tv)(e.t0,n),console.log(e.t0);case 153:case"end":return e.stop()}}),e,null,[[0,148]])}))),[c,d,l,z]),Nt=(0,L.useCallback)((function(e){var t;e<18e5&&!dt.current&&(dt.current=!0,yt());var r=null===(t=ft.current)||void 0===t?void 0:t.getFieldValue("leadTimeAuto");r&&e<r&&ht.current&&(ht.current=!1,bt(ut.current),console.log(D()().format(),"handleCountdownChangeAuto",e),H.push({position:"handleCountdownChangeAuto",time:D()().format(),value:e}))}),[yt,bt]),Ct=(0,L.useCallback)((function(){Ke(!1),Se(0),(0,V.gr)(mt.current),ht.current=!0}),[]),Pt=(0,L.useCallback)((function(){if(_e){if(l){var e=l.accountName.toString();return!!O.includes(e)||(ye(!1),!1)}return!0}if(l){var t=l.accountName.toString();return!!O.includes(t)&&(ye(!0),!0)}return!1}),[l,_e,O]),At=(0,L.useCallback)((function(){var e=D()().format("YYYY-MM-DDTHH:mm:ss"),t=JSON.stringify(H,null,2),r="data:,".concat(t),n=document.createElement("a");n.href=r,n.download="log_".concat(e,".json"),n.click()}),[]),Ft=(0,L.useCallback)((function(){B(0),$(0),te(0),ae(0),fe([]),Se(0),pt.current={},Te({}),Ae({}),le(0),xt(),dt.current=!1,ht.current=!0}),[xt]);return(0,L.useEffect)((function(){!c||Object.keys(Y).length||Ue||(We(!0),St(c))}),[St,Y,c,Ue]),(0,q.jsx)(g._z,{className:"",ghost:!0,children:Pt()?(0,q.jsxs)("div",{className:"flex flex-wrap justify-center gap-5",children:[(0,q.jsxs)(j.Z,{title:(0,q.jsx)("div",{className:" font-semibold text-lg hardline",children:"使用说明"}),style:{maxWidth:"500px"},children:[(0,q.jsx)("div",{children:"1. 操作步骤如下："}),(0,q.jsxs)("div",{className:"ml-3",children:['a）进入"工具-简易钱包"页面 ',(0,q.jsx)(x.Z,{})," ","导入私钥 ",(0,q.jsx)(x.Z,{})," 点击右上角钱包图标"," ",(0,q.jsx)(x.Z,{})," 选择账号连接"]}),(0,q.jsxs)("div",{className:"ml-3",children:['b）进入"PPP-自动销毁"页面'," ",(0,q.jsx)(x.Z,{}),' 选择"自动交易"表格'," ",(0,q.jsx)(x.Z,{})," 选择项目 ",(0,q.jsx)(x.Z,{})," ","选择图片 ",(0,q.jsx)(x.Z,{})," 点击启动按钮"]}),(0,q.jsx)("div",{className:"mt-3",children:"2. 注意事项："}),(0,q.jsx)("div",{className:"ml-3",children:"a）自动交易方式需要用户导入私钥才可以正常执行。私钥只保存在浏览器的数据库中，不会上传到服务器，请评估好风险后再使用。"}),(0,q.jsx)("div",{className:"mt-3",children:"3. 费用说明："}),(0,q.jsx)("div",{className:"ml-3",children:"免费使用。"})]}),(0,q.jsxs)(j.Z,{title:(0,q.jsxs)("div",{className:" font-semibold text-lg hardline",children:["自动交易",(0,q.jsx)(P.Z,{placement:"topLeft",title:'需要在"工具-简易钱包"页面中导入私钥，然后点击右上角的钱包图标进行连接后，才能正常使用',children:(0,q.jsx)(v.Z,{className:"ml-[8px] hover:cursor-pointer",style:{color:"#1677ff"}})})]}),style:{maxWidth:"500px"},children:[(0,q.jsxs)(k.A,{formRef:ft,onFinish:gt,onValuesChange:_t,onReset:kt,loading:qe,disabled:Je,layout:"vertical",initialValues:{disorderAuto:!0,startAuto:1,repeatAuto:10,intervalAuto:1e3,leadTimeAuto:0,loop:!0},submitter:{searchConfig:{submitText:"启动"},render:function(e,t){return[t[1],t[0]]}},children:[(0,q.jsx)(S.Z,{name:"pidAuto",label:(0,q.jsxs)("div",{children:["项目",(0,q.jsx)(b.Z,{spin:Ue,className:"ml-[8px] hover:cursor-pointer",style:{color:"#1677ff"},onClick:wt})]}),valueEnum:Y,placeholder:"",rules:[{required:!0,whitespace:!0,message:"".concat(ot),pattern:/^.+$/}],fieldProps:{size:"large",autoFocus:!1,showSearch:!0,onChange:Ft,filterOption:function(e,t){var r=t.label.split("-"),n=p()(r,3),s=n[0],a=n[1],o=n[2];return(s.padStart(3,"0")+a+o).toLowerCase().includes(e.toLowerCase())},optionItemRender:function(e){var t=e.label.split("-"),r=p()(t,4),n=r[0],s=r[1],a=r[2],o=r[3];return(0,q.jsxs)("div",{className:"flex items-center",children:[(0,q.jsx)("div",{className:"mr-2",children:n.padStart(3,"0")}),(0,q.jsx)(A.C,{className:"mr-2",size:"default",src:o}),(0,q.jsxs)("div",{children:[s," @",a]})]})}}}),(0,q.jsx)(w.Z.Group,{name:"burnAuto",label:(0,q.jsxs)("div",{children:[(0,q.jsx)("span",{children:"图片 "}),Xe.length?"(".concat(Xe.length,")"):"",(0,q.jsx)(b.Z,{spin:nt,className:"ml-[5px]",style:{color:"#1677ff"}})]}),options:Xe,rules:[{required:!0,whitespace:!0,message:"".concat(ot),pattern:/.*/}]}),(0,q.jsx)(Z.Z,{label:(0,q.jsxs)("div",{children:["整体重复发送次数",(0,q.jsx)(P.Z,{placement:"topLeft",title:"整体全部发送完成算一次，这里指定重复次数。重复发送失败了，不会影响金额",children:(0,q.jsx)(v.Z,{className:"ml-[8px] hover:cursor-pointer",style:{color:"#1677ff"}})})]}),name:"repeatAuto",placeholder:"",min:1,rules:[{required:!0,message:"".concat(ot),whitespace:!0,pattern:/^\d+$/}],fieldProps:{autoFocus:!1,size:"large",defaultValue:10}}),(0,q.jsx)(Z.Z,{label:(0,q.jsxs)("div",{children:["整体重复发送间隔(ms)",(0,q.jsx)(P.Z,{placement:"topLeft",title:"整体全部发送完成算一次，这里指定重复的间隔时间",children:(0,q.jsx)(v.Z,{className:"ml-[8px] hover:cursor-pointer",style:{color:"#1677ff"}})})]}),name:"intervalAuto",placeholder:"",min:300,rules:[{required:!0,message:"".concat(ot),whitespace:!0,pattern:/^\d+$/}],fieldProps:{autoFocus:!1,size:"large",defaultValue:1e3}}),(0,q.jsx)(Z.Z,{label:(0,q.jsxs)("div",{children:["提前发送时间(ms)",(0,q.jsx)(P.Z,{placement:"topLeft",title:"在下一轮开始前多少毫秒发送交易",children:(0,q.jsx)(v.Z,{className:"ml-[8px] hover:cursor-pointer",style:{color:"#1677ff"}})})]}),name:"leadTimeAuto",placeholder:"",max:2e3,min:0,rules:[{required:!0,message:"".concat(ot),whitespace:!0,pattern:/^\d+$/}],fieldProps:{autoFocus:!1,size:"large",defaultValue:0}}),(0,q.jsx)(_.Z,{name:"amountAuto",label:(0,q.jsxs)("div",{children:["总金额",(0,q.jsx)(P.Z,{placement:"topLeft",title:"此次全部交易所需要的总金额，包含手续费。",children:(0,q.jsx)(v.Z,{className:"ml-[8px] hover:cursor-pointer",style:{color:"#1677ff"}})})]}),placeholder:"自动生成，无需输入",fieldProps:{size:"large",autoFocus:!1,defaultValue:"",readOnly:!0}}),(0,q.jsx)(k.A.Item,{label:(0,q.jsxs)("div",{className:" font-semibold text-lg ",children:[(0,q.jsx)("span",{className:"hardline",children:"倒计时 "}),Pe.pid?"(".concat(Pe.pid,"-").concat(Pe.project_name," @").concat(Pe.creator,")"):""]}),children:(0,q.jsxs)("div",{className:"flex items-center gap-x-5",children:[(0,q.jsx)(f.Wo,{className:"text-2xl",value:ke,onFinish:jt,onChange:Nt}),(0,q.jsx)("div",{className:"text-xl",children:"".concat(xe)})]})}),(0,q.jsxs)(k.A.Item,{label:(0,q.jsxs)("div",{className:" font-semibold text-lg hardline",children:[(0,q.jsx)("span",{children:"结果 "}),pe.length?"(".concat(pe.length,")"):""]}),children:[(0,q.jsx)("div",{children:"成功：".concat(W,"，失败：").concat(K,"，处理中：").concat(ee,"，待处理：").concat(se)}),!!pe.length&&(0,q.jsx)("div",{className:"flex flex-wrap gap-5 mt-3",children:Object.keys(pt.current).map((function(e,t){return(0,q.jsx)(F.Z,{color:pt.current[e].status,children:"#".concat(e)},t)}))})]}),(0,q.jsxs)(k.A.Item,{label:(0,q.jsx)("div",{className:" font-semibold text-lg hardline",children:(0,q.jsxs)("div",{children:[(0,q.jsx)("span",{children:"校对 "}),pe.length?"(".concat(pe.length,")"):"",(0,q.jsx)(P.Z,{placement:"topLeft",title:"交易结束后，可点击校对按钮，判断交易结果是否跟链上数据匹配",children:(0,q.jsx)(v.Z,{className:"ml-[8px] hover:cursor-pointer",style:{color:"#1677ff"}})})]})}),children:[(0,q.jsx)("div",{children:"拥有：".concat(ie)}),!!pe.length&&(0,q.jsx)("div",{className:"flex flex-wrap gap-5 mt-3",children:Object.keys(Me).map((function(e,t){return(0,q.jsx)(F.Z,{color:Me[e],children:"#".concat(e)},t)}))})]})]}),(0,q.jsxs)("div",{className:"mt-2 ",children:[(0,q.jsx)(E.ZP,{type:"primary",className:"mr-2",onClick:Ct,children:"停止"}),(0,q.jsx)(E.ZP,{className:"mr-2",loading:Re,onClick:Zt,children:"校对"}),(0,q.jsx)(E.ZP,{onClick:At,children:"日志"}),","]})]}),a]}):(0,q.jsx)("div",{children:"此工具为收费功能，有需要请联系开发者。"})})}}}]);