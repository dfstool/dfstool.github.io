"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[255],{18301:function(e,r,t){t.r(r),t.d(r,{default:function(){return R}});var s=t(15009),n=t.n(s),a=t(99289),c=t.n(a),o=t(5574),i=t.n(o),u=t(19632),l=t.n(u),m=t(80107),p=t(64119),d=t(52688),f=t(5966),b=t(97269),h=t(59530),g=t(80507),x=t(45360),v=t(15867),y=t(71230),j=t(15746),S=t(62435),P=t(86074),k=function(){var e=(0,h.useDispatch)(),r=(0,h.useSelector)((function(e){return e.contract.batchActions})),t=(0,h.useSelector)((function(e){return e.global.session})),s=(0,h.useSelector)((function(e){return e.global.account})),a=x.ZP.useMessage(),o=i()(a,2),u=o[0],l=o[1],d=(0,h.useIntl)(),f=d.formatMessage({id:"contract.intlBatchActions"}),g=d.formatMessage({id:"common.intlTxSuccess"}),v=d.formatMessage({id:"common.intlTxFail"}),y=d.formatMessage({id:"common.intlPleaseConnectWallet"}),j=d.formatMessage({id:"common.intlPleaseConnectNetwork"}),k=(0,S.useCallback)(c()(n()().mark((function e(){var a,c,o,l,m;return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.broadcast){e.next=5;break}return u.error("".concat(y)),e.abrupt("return");case 5:if(s){e.next=8;break}return u.error("".concat(j)),e.abrupt("return");case 8:return a=[],r.forEach((function(e){a.push(JSON.parse(e.typedAction))})),e.next=12,(0,p.zI)(t.transact({actions:a}));case 12:c=e.sent,o=i()(c,2),l=o[0],m=o[1],l?u.error(l):m&&m.response?u.success("".concat(g)):u.error("".concat(v));case 17:case"end":return e.stop()}}),e)}))),[t,s,r]),w=(0,S.useCallback)((function(t){var s=r.filter((function(e,r){return r!==t}));e(m.N.setBatchActions(s))}),[r]),N=(0,S.useCallback)((function(){e(m.N.setBatchActions([]))}),[]);return(0,P.jsxs)("div",{className:"tab-action",children:[(0,P.jsx)("div",{className:"hardline text-lg font-semibold mb-3 mt-3",children:"".concat(f,"(").concat(r.length,")")}),(0,P.jsx)("div",{className:"px-[13px]",children:r.map((function(e,r){return(0,P.jsx)("div",{className:"mb-2",children:(0,P.jsxs)("div",{style:{background:"#e6f4ff",border:"1px solid #91caff",boxSizing:"border-box",margin:"0",padding:"8px 12px",color:"rgba(0, 0, 0, 0.88)",fontSize:"14px",lineHeight:"1.5714285714285714",listStyle:"none",position:"relative",display:"flex",alignItems:"center",wordWrap:"break-word",borderRadius:"8px"},children:[(0,P.jsx)("div",{style:{flex:1,minWidth:0,boxSizing:"border-box"},children:e.untypedAction}),(0,P.jsx)("button",{type:"button",onClick:function(){return w(r)},style:{marginInlineStart:"8px",padding:0,overflow:"hidden",fontSize:"12px",lineHeight:"12px",backgroundColor:"transparent",border:"none",outline:"none",cursor:"pointer"},children:(0,P.jsx)("span",{style:{color:"rgba(0, 0, 0, 0.45)",transition:"color 0.2s"},children:(0,P.jsx)("svg",{fillRule:"evenodd",viewBox:"64 64 896 896",focusable:"false",width:"1em",height:"1em",fill:"currentColor",children:(0,P.jsx)("path",{d:"M799.86 166.31c.02 0 .04.02.08.06l57.69 57.7c.04.03.05.05.06.08a.12.12 0 010 .06c0 .03-.02.05-.06.09L569.93 512l287.7 287.7c.04.04.05.06.06.09a.12.12 0 010 .07c0 .02-.02.04-.06.08l-57.7 57.69c-.03.04-.05.05-.07.06a.12.12 0 01-.07 0c-.03 0-.05-.02-.09-.06L512 569.93l-287.7 287.7c-.04.04-.06.05-.09.06a.12.12 0 01-.07 0c-.02 0-.04-.02-.08-.06l-57.69-57.7c-.04-.03-.05-.05-.06-.07a.12.12 0 010-.07c0-.03.02-.05.06-.09L454.07 512l-287.7-287.7c-.04-.04-.05-.06-.06-.09a.12.12 0 010-.07c0-.02.02-.04.06-.08l57.7-57.69c.03-.04.05-.05.07-.06a.12.12 0 01.07 0c.03 0 .05.02.09.06L512 454.07l287.7-287.7c.04-.04.06-.05.09-.06a.12.12 0 01.07 0z"})})})})]})},r)}))}),(0,P.jsx)(b.A,{className:"pl-[13px]",layout:"vertical",onFinish:c()(n()().mark((function e(){return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",k());case 1:case"end":return e.stop()}}),e)}))),onReset:N}),l]})},w=(0,S.memo)(k),N=function(){var e,r=(0,S.useRef)(),t=(0,h.useDispatch)(),s=(0,S.useState)(new Set),a=i()(s,1)[0],o=(0,h.useSelector)((function(e){return e.contract.abi})),u=(0,h.useSelector)((function(e){return e.contract.actionSelection})),k=(0,h.useSelector)((function(e){return e.contract.actionType})),N=(0,h.useSelector)((function(e){return e.global.session})),C=(0,h.useSelector)((function(e){return e.global.account})),_=(0,h.useSelector)((function(e){return e.contract.contract})),O=(0,h.useSelector)((function(e){return e.contract.batchActions})),A=x.ZP.useMessage(),T=i()(A,2),M=T[0],Z=T[1],z=(0,h.useIntl)(),I=z.formatMessage({id:"common.intlCopySuccess"}),B=z.formatMessage({id:"contract.intlSelectAction"}),E=z.formatMessage({id:"contract.intlEnterData"}),J=z.formatMessage({id:"common.intlCopy"}),D=z.formatMessage({id:"common.intlTxSuccess"}),F=z.formatMessage({id:"common.intlTxFail"}),R=z.formatMessage({id:"common.intlPleaseConnectWallet"}),$=z.formatMessage({id:"common.intlPleaseConnectNetwork"}),L=z.formatMessage({id:"contract.intlAdd"}),K=(0,S.useCallback)((function(e,r){var t=/(\$|\?)$/g,s=/^[a-z1-5.]{1,12}$/,n=/^\d+$/,c=/^-?\d+$/,o=/^(-?\d+)(.\d+)?$/,i=/^([0-9a-fA-F][0-9a-fA-F])+$/;if(t.test(e.message)&&!r)return Promise.resolve();switch(e.message.replace(t,"")){case"string":return Promise.resolve("");case"name":try{return s.test(r)?Promise.resolve(g.VG.from(r)):Promise.reject(e.message=String(s))}catch(r){return Promise.reject(e.message=r.message)}case"asset":try{return Promise.resolve(g.xR.from(r))}catch(r){return Promise.reject(e.message=r.message)}case"checksum160":try{return Promise.resolve(g.b9.from(r))}catch(r){return Promise.reject(e.message=r.message)}case"checksum256":try{return Promise.resolve(g.Nz.from(r))}catch(r){return Promise.reject(e.message=r.message)}case"checksum512":try{return Promise.resolve(g.W4.from(r))}catch(r){return Promise.reject(e.message=r.message)}case"uint8":try{return n.test(r)?Promise.resolve(g._A.from(r)):Promise.reject(e.message=String(n))}catch(r){return Promise.reject(e.message=r.message)}case"uint16":try{return n.test(r)?Promise.resolve(g.j8.from(r)):Promise.reject(e.message=String(n))}catch(r){return Promise.reject(e.message=r.message)}case"uint32":try{return n.test(r)?Promise.resolve(g.xH.from(r)):Promise.reject(e.message=String(n))}catch(r){return Promise.reject(e.message=r.message)}case"uint64":try{return n.test(r)?Promise.resolve(g.zM.from(r)):Promise.reject(e.message=String(n))}catch(r){return Promise.reject(e.message=r.message)}case"uint128":try{return n.test(r)?Promise.resolve(g.pB.from(r)):Promise.reject(e.message=String(n))}catch(r){return Promise.reject(e.message=r.message)}case"varuint":try{return n.test(r)?Promise.resolve(g.mj.from(r)):Promise.reject(e.message=String(n))}catch(r){return Promise.reject(e.message=r.message)}case"varuint16":try{return n.test(r)?Promise.resolve(g.mj.from(r)):Promise.reject(e.message=String(n))}catch(r){return Promise.reject(e.message=r.message)}case"varuint32":try{return n.test(r)?Promise.resolve(g.mj.from(r)):Promise.reject(e.message=String(n))}catch(r){return Promise.reject(e.message=r.message)}case"varuint64":try{return n.test(r)?Promise.resolve(g.mj.from(r)):Promise.reject(e.message=String(n))}catch(r){return Promise.reject(e.message=r.message)}case"varuint128":try{return n.test(r)?Promise.resolve(g.mj.from(r)):Promise.reject(e.message=String(n))}catch(r){return Promise.reject(e.message=r.message)}case"int8":try{return c.test(r)?Promise.resolve(g.tJ.from(r)):Promise.reject(e.message=String(n))}catch(r){return Promise.reject(e.message=r.message)}case"int16":try{return c.test(r)?Promise.resolve(g.k6.from(r)):Promise.reject(e.message=String(n))}catch(r){return Promise.reject(e.message=r.message)}case"int32":try{return c.test(r)?Promise.resolve(g.Vq.from(r)):Promise.reject(e.message=String(n))}catch(r){return Promise.reject(e.message=r.message)}case"int64":try{return c.test(r)?Promise.resolve(g.ni.from(r)):Promise.reject(e.message=String(n))}catch(r){return Promise.reject(e.message=r.message)}case"int128":try{return c.test(r)?Promise.resolve(g.Gm.from(r)):Promise.reject(e.message=String(n))}catch(r){return Promise.reject(e.message=r.message)}case"varint":try{return c.test(r)?Promise.resolve(g.yN.from(r)):Promise.reject(e.message=String(n))}catch(r){return Promise.reject(e.message=r.message)}case"varint16":try{return c.test(r)?Promise.resolve(g.yN.from(r)):Promise.reject(e.message=String(n))}catch(r){return Promise.reject(e.message=r.message)}case"varint32":try{return c.test(r)?Promise.resolve(g.yN.from(r)):Promise.reject(e.message=String(n))}catch(r){return Promise.reject(e.message=r.message)}case"varint64":try{return c.test(r)?Promise.resolve(g.yN.from(r)):Promise.reject(e.message=String(n))}catch(r){return Promise.reject(e.message=r.message)}case"varint128":try{return c.test(r)?Promise.resolve(g.yN.from(r)):Promise.reject(e.message=String(n))}catch(r){return Promise.reject(e.message=r.message)}case"float32":try{return o.test(r)?Promise.resolve(g.yA.from(r)):Promise.reject(e.message=String(o))}catch(r){return Promise.reject(e.message=r.message)}case"float64":try{return o.test(r)?Promise.resolve(g.Dh.from(r)):Promise.reject(e.message=String(o))}catch(r){return Promise.reject(e.message=r.message)}case"bytes":try{return i.test(r)?Promise.resolve(g.Jj.from(r)):Promise.reject(e.message=String(i))}catch(r){return Promise.reject(e.message=r.message)}case"block_timestamp_type":try{return n.test(r)?Promise.resolve(g.wm.from(Number(r))):Promise.reject(e.message=String(n))}catch(r){return Promise.reject(e.message=r.message)}case"time_point":try{return n.test(r)?Promise.resolve(g.hI.from(Number(r))):Promise.reject(e.message=String(n))}catch(r){return Promise.reject(e.message=r.message)}case"time_point_sec":try{return n.test(r)?Promise.resolve(g.AQ.from(Number(r))):Promise.reject(e.message=String(n))}catch(r){return Promise.reject(e.message=r.message)}case"public_key":try{return Promise.resolve(g.nh.from(r))}catch(r){return Promise.reject(e.message=r.message)}default:try{return JSON.parse(r),a.add(e.field),Promise.resolve()}catch(r){return Promise.reject(e.message=r.message)}}}),[u,a]),V=(0,S.useCallback)((function(e){switch(e.replace(/(\$|\?)$/g,"")){case"name":return"Enter account name...";case"asset":return"example: 1.00000000 DFS";case"uint8":case"uint16":case"uint32":case"uint64":case"uint128":case"varuint":case"varuint16":case"varuint32":case"varuint64":case"varuint128":case"int8":case"int16":case"int32":case"int64":case"int128":case"varint":case"varint16":case"varint32":case"varint64":case"varint128":case"float32":case"float64":return"Enter number...";case"string":return"Enter string...";case"permission_level":return'example: {"actor": "foo", "permission": "active"}';case"bytes":return"example: 1234abcdff";case"checksum256":return"example: 73e4385a2708e6d7048834fbc1079f2fabb17b3c125b146af438971e90716c4d";case"authority":return'example: {"threshold": 1, "keys": [{"key": "EOS6RrvujLQN1x5Tacbep1KAk8zzKpSThAQXBCKYFfGUYeABhJRin", "weight": 1}], "accounts": [], "waits": []}';case"name[]":return'example: ["david", "mary"]';case"asset[]":return'example: ["1.00000000 DFS", "2.00000000 USDT"]';case"uint8[]":case"uint16[]":case"uint32[]":case"uint64[]":case"uint128[]":case"varuint[]":case"varuint16[]":case"varuint32[]":case"varuint64[]":case"varuint128[]":return"example: [12, 34]";case"int8[]":case"int16[]":case"int32[]":case"int64[]":case"int128[]":case"varint[]":case"varint16[]":case"varint32[]":case"varint64[]":case"varint128[]":return"example: [12, -34]";case"float32[]":case"float64[]":return"example: [12.12, -34.34]";case"string[]":return'example: ["abc", "def"]';case"permission_level[]":return'example: [{"actor": "foo", "permission": "active"}, {"actor": "foo", "permission": "active"}]';case"bytes[]":return'example: ["123abc", "456def"]';case"checksum256[]":return'example: ["73e4385a2708e6d7048834fbc1079f2fabb17b3c125b146af438971e90716c4d", "73e4385a2708e6d7048834fbc1079f2fabb17b3c125b146af438971e90716c4d"]';default:return"Enter ".concat(e,"...")}}),[]),G=(0,S.useCallback)((function(){var e,r=null==o||null===(e=o.structs)||void 0===e?void 0:e.find((function(e){return e.name===k})),t=null==r?void 0:r.fields,s=/.+(\$|\?)$/;return null==t?void 0:t.map((function(e,r){return"bool"===e.type?(0,P.jsx)(d.Z,{name:e.name,label:(0,P.jsx)("span",{className:"font-semibold",children:e.name})},r):(0,P.jsx)(f.Z,{placeholder:V(e.type),name:e.name,label:(0,P.jsx)("span",{className:"font-semibold",children:e.name}),rules:[{required:!s.test(e.type),message:e.type,validator:K}],hasFeedback:!0,fieldProps:{allowClear:!0,autoFocus:!1,addonAfter:e.type,size:"large"}},r)}))}),[o,u,k]),U=(0,S.useCallback)(function(){var e=c()(n()().mark((function e(r){var t,s,c,l,m,d,f;return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(N&&N.broadcast){e.next=5;break}return M.error("".concat(R)),e.abrupt("return");case 5:if(C){e.next=8;break}return M.error("".concat($)),e.abrupt("return");case 8:return t=Object.assign({},r),Object.keys(t).forEach((function(e){a.has(e)&&(t[e]=JSON.parse(t[e]))})),s={account:_,name:u,authorization:[N.permissionLevel],data:t},c=g.aU.from(s,o),e.next=14,(0,p.zI)(N.transact({actions:[c]}));case 14:l=e.sent,m=i()(l,2),d=m[0],f=m[1],d?M.error(d):f&&f.response?M.success("".concat(D)):M.error("".concat(F));case 19:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),[u,o,a,_,N,C]),W=(0,S.useCallback)(c()(n()().mark((function e(){var t,s,c,o;return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(t=r.current)||void 0===t?void 0:t.getFieldsValue(),c=Object.assign({},s),Object.keys(c).forEach((function(e){a.has(e)&&(c[e]=JSON.parse(c[e]))})),N.broadcast){e.next=8;break}return e.next=6,window.navigator.clipboard.writeText(JSON.stringify(c));case 6:e.next=11;break;case 8:return o={account:_,name:u,authorization:[{actor:N.actor,permission:N.permission}],data:c},e.next=11,window.navigator.clipboard.writeText(JSON.stringify(o));case 11:M.success("".concat(I));case 12:case"end":return e.stop()}}),e)}))),[M,N,_,u]),H=(0,S.useCallback)(c()(n()().mark((function e(){var s,c,i,p,d;return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(N&&N.broadcast){e.next=5;break}return M.error("".concat(R)),e.abrupt("return");case 5:if(C){e.next=8;break}return M.error("".concat($)),e.abrupt("return");case 8:c=null===(s=r.current)||void 0===s?void 0:s.getFieldsValue(),i=Object.assign({},c),Object.keys(i).forEach((function(e){a.has(e)&&(i[e]=JSON.parse(i[e]))})),p={account:_,name:u,authorization:[{actor:N.actor,permission:N.permission}],data:i},d=g.aU.from(p,o),t(m.N.setBatchActions([].concat(l()(O),[{untypedAction:JSON.stringify(p),typedAction:JSON.stringify(d)}])));case 14:case"end":return e.stop()}}),e)}))),[M,o,N,C,_,u,O]);return(0,P.jsxs)("div",{className:"tab-action",children:[(0,P.jsx)("div",{className:"hardline text-lg font-semibold mb-3",children:B}),(0,P.jsx)("div",{className:"flex flex-start flex-wrap pl-[13px]",children:null==o||null===(e=o.actions)||void 0===e?void 0:e.map((function(e,r){return(0,P.jsx)(v.ZP,{className:"w-[150px] mr-2 mb-2",ghost:u!==e.name.toString(),type:"primary",size:"large",onClick:function(){t(m.N.setActionSelection(e.name.toString())),t(m.N.setActionType(e.type.toString()))},children:e.name.toString()},r)}))}),!!u&&(0,P.jsxs)("div",{children:[(0,P.jsx)("div",{className:"hardline text-lg font-semibold mb-2 mt-3",children:E}),(0,P.jsx)(y.Z,{gutter:10,className:"w-full",children:(0,P.jsx)(j.Z,{lg:{span:"12"},md:{span:"20"},sm:{span:"20"},xs:{span:"24"},children:(0,P.jsx)(b.A,{formRef:r,className:"pl-[13px]",layout:"vertical",onFinish:function(){var e=c()(n()().mark((function e(r){return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",U(r));case 1:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),submitter:{render:function(e,r){return[r[1],r[0],(0,P.jsx)(v.ZP,{onClick:W,children:J},"copy"),(0,P.jsx)(v.ZP,{onClick:H,children:L},"add")]}},children:G()})})})]}),!!O.length&&(0,P.jsx)(w,{}),Z]})},C=(0,S.memo)(N),_=t(97857),O=t.n(_),A=t(64317),T=t(92340),M=t(72269),Z=t(96486),z=function(){var e,r=(0,h.useDispatch)(),t=(0,S.useRef)(),s=(0,h.useSelector)((function(e){return e.contract.abi})),a=(0,h.useSelector)((function(e){return e.contract.contract})),o=(0,h.useSelector)((function(e){return e.global.session})),u=(0,h.useSelector)((function(e){return e.contract.tableSelection})),l=(0,h.useSelector)((function(e){return e.contract.tableDataSource})),g=(0,h.useSelector)((function(e){return e.contract.tableColumns})),y=(0,h.useSelector)((function(e){return e.contract.tableByScope})),j=(0,h.useSelector)((function(e){return e.contract.tableParams})),k=(0,h.useSelector)((function(e){return e.contract.tableByScopeParams})),w=x.ZP.useMessage(),N=i()(w,2),C=N[0],_=N[1],z=(0,h.useIntl)(),I=z.formatMessage({id:"common.intlCopySuccess"}),B=z.formatMessage({id:"contract.intlSelectTable"}),E=z.formatMessage({id:"contract.intlEnterParameters"}),J=z.formatMessage({id:"common.intlCopy"}),D=z.formatMessage({id:"contract.intlTableResult"}),F=z.formatMessage({id:"contract.intlNoData"}),R=(0,S.useCallback)(function(){var e=c()(n()().mark((function e(t){var s,a,c,u,l,d,f,b;return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=[],a=[],e.next=4,(0,p.zI)(o.client.v1.chain.get_table_rows(t));case 4:if(c=e.sent,u=i()(c,2),l=u[0],d=u[1],!l){e.next=11;break}return C.error(l),e.abrupt("return");case 11:if((f=d.rows).length){e.next=16;break}return r(m.N.setTableColumns(s)),r(m.N.setTableDataSource(f)),e.abrupt("return");case 16:t.json?(b=Object.keys(f[0]),s.push({title:"#",dataIndex:"key",key:"key",width:"50px",align:"center",render:function(e,r,t){return(0,P.jsx)("span",{children:t+1})}}),b.forEach((function(e){s.push({title:e,dataIndex:e,key:e,render:function(r,t){return(0,Z.isObject)(t[e])?(0,P.jsx)("span",{children:JSON.stringify(t[e])}):(0,P.jsx)("span",{children:t[e]})}})})),t.show_payer?(s.push({title:"payer",dataIndex:"payer",key:"payer",render:function(e,r){return(0,P.jsx)("span",{children:r.payer})}}),f.forEach((function(e,r){e.hasOwnProperty("key")||(f[r].key=r),a.push(O()(O()({},f[r]),{},{payer:d.ram_payers[r].toString()}))}))):f.forEach((function(e,r){e.hasOwnProperty("key")||(f[r].key=r),a.push(O()({},f[r]))}))):(s.push({title:"#",dataIndex:"key",key:"key",width:"50px",align:"center",render:function(e,r,t){return(0,P.jsx)("span",{children:t+1})}}),s.push({title:"bytes",dataIndex:"bytes",key:"bytes",render:function(e,r){return(0,P.jsx)("span",{children:r.bytes})}}),t.show_payer?(s.push({title:"payer",dataIndex:"payer",key:"payer",render:function(e,r){return(0,P.jsx)("span",{children:r.payer})}}),f.forEach((function(e,r){a.push({key:r,bytes:e,payer:d.ram_payers[r].toString()})}))):f.forEach((function(e,r){a.push({key:r,bytes:e})}))),r(m.N.setTableColumns(s)),r(m.N.setTableDataSource(a));case 19:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),[o,C]),$=(0,S.useCallback)(function(){var e=c()(n()().mark((function e(t){var s,a,c,u,l,d,f,b;return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=[],a=[],e.next=4,(0,p.zI)(o.client.v1.chain.get_table_by_scope(t));case 4:if(c=e.sent,u=i()(c,2),l=u[0],d=u[1],!l){e.next=11;break}return C.error(l),e.abrupt("return");case 11:if((f=JSON.parse(JSON.stringify(d.rows))).length){e.next=16;break}return r(m.N.setTableColumns(s)),r(m.N.setTableDataSource(f)),e.abrupt("return");case 16:b=Object.keys(f[0]),s.push({title:"#",dataIndex:"key",key:"key",width:"50px",align:"center",render:function(e,r,t){return(0,P.jsx)("span",{children:t+1})}}),b.forEach((function(e){s.push({title:e,dataIndex:e,key:e,render:function(r,t){return(0,Z.isObject)(t[e])?(0,P.jsx)("span",{children:JSON.stringify(t[e])}):(0,P.jsx)("span",{children:t[e]})}})})),f.forEach((function(e,r){e.hasOwnProperty("key")||(f[r].key=r),a.push(O()({},f[r]))})),r(m.N.setTableColumns(s)),r(m.N.setTableDataSource(a));case 22:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),[o,C]),L=(0,S.useCallback)(c()(n()().mark((function e(){return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y?$(k):R(j);case 1:case"end":return e.stop()}}),e)}))),[j,k,y,R,$]),K=(0,S.useCallback)((function(e){var t=O()(O()({},j),{},{code:a,table:e.name.toString(),scope:j.scope?j.scope:a}),s=O()(O()({},k),{},{code:a,table:e.name.toString()});r(m.N.setTableSelection(e.name.toString())),r(m.N.setTableParams(t)),r(m.N.setTableByScopeParams(s)),y?$(s):R(t)}),[a,R,$,j,k]),V=(0,S.useCallback)((function(e){r(m.N.setTableByScope(e)),u&&(e?$(k):R(j))}),[u,j,k]),G=(0,S.useCallback)((function(e,t){if(y){var s={};e.hasOwnProperty("lower_bound2")?s.lower_bound=e.lower_bound2:e.hasOwnProperty("upper_bound2")?s.upper_bound=e.upper_bound2:e.hasOwnProperty("limit2")?s.limit=e.limit2:e.hasOwnProperty("reverse2")&&(s.reverse=e.reverse2),r(m.N.setTableByScopeParams(O()(O()({},k),s)))}else r(m.N.setTableParams(O()(O()({},j),t)))}),[y,j,k]),U=(0,S.useCallback)(c()(n()().mark((function e(){var r;return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},y?Object.keys(k).forEach((function(e){k[e]&&(r[e]=k[e])})):Object.keys(j).forEach((function(e){j[e]&&(r[e]=j[e])})),e.next=4,window.navigator.clipboard.writeText(JSON.stringify(r));case 4:C.success("".concat(I));case 5:case"end":return e.stop()}}),e)}))),[C,y,j,k]);return(0,P.jsxs)("div",{className:"tab-table",children:[(0,P.jsxs)("div",{className:"hardline text-lg font-semibold mb-3",children:[(0,P.jsx)("span",{children:B}),(0,P.jsx)("span",{className:"ml-[30px] mr-3",children:"Table by Scope"}),(0,P.jsx)(M.Z,{value:y,onChange:V})]}),(0,P.jsx)("div",{className:"flex flex-start flex-wrap pl-[13px]",children:null==s||null===(e=s.tables)||void 0===e?void 0:e.map((function(e,r){return(0,P.jsx)(v.ZP,{className:"w-[150px] mr-2 mb-2",ghost:u!==e.name.toString(),type:"primary",size:"large",onClick:function(){return K(e)},children:e.name.toString()},r)}))}),!!u&&(0,P.jsxs)("div",{children:[(0,P.jsx)("div",{className:"hardline text-lg font-semibold mb-2 mt-3",children:E}),(0,P.jsx)(b.A,{initialValues:{scope:void 0===j.scope?a:j.scope,lower_bound:j.lower_bound,upper_bound:j.upper_bound,limit:j.limit,reverse:j.reverse,index_position:j.index_position,json:j.json,show_payer:j.show_payer,lower_bound2:k.lower_bound,upper_bound2:k.upper_bound,limit2:k.limit,reverse2:k.reverse},className:"pl-[13px]",formRef:t,layout:"vertical",onValuesChange:G,onFinish:c()(n()().mark((function e(){return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",L());case 1:case"end":return e.stop()}}),e)}))),submitter:{render:function(e,r){return[r[1],r[0],(0,P.jsx)(v.ZP,{onClick:U,children:J},"copy")]}},children:y?(0,P.jsxs)(b.A.Group,{children:[(0,P.jsx)(f.Z,{name:"lower_bound2",label:"Lower Bound",placeholder:"Search...",fieldProps:{autoFocus:!1}}),(0,P.jsx)(f.Z,{name:"upper_bound2",label:"Upper Bound",placeholder:"Search..."}),(0,P.jsx)(f.Z,{name:"limit2",label:"Limit",placeholder:"Search...",transform:function(e){return Number(e)},fieldProps:{type:"number"}}),(0,P.jsx)(d.Z,{name:"reverse2",label:"Reverse",fieldProps:{onClick:function(){var e;return null===(e=t.current)||void 0===e?void 0:e.submit()}}})]}):(0,P.jsxs)(b.A.Group,{children:[(0,P.jsx)(f.Z,{name:"scope",label:"Scope",placeholder:"Search...",fieldProps:{defaultValue:"".concat(a),autoFocus:!1}}),(0,P.jsx)(f.Z,{name:"lower_bound",label:"Lower Bound",placeholder:"Search..."}),(0,P.jsx)(f.Z,{name:"upper_bound",label:"Upper Bound",placeholder:"Search..."}),(0,P.jsx)(f.Z,{name:"limit",label:"Limit",placeholder:"Search...",transform:function(e){return Number(e)},fieldProps:{type:"number"}}),(0,P.jsx)(A.Z,{name:"Index Position",label:"index_position",placeholder:"Search...",options:["primary","secondary","tertiary","fourth","fifth","sixth","seventh","eighth","ninth","tenth"]}),(0,P.jsxs)(b.A.Group,{children:[(0,P.jsx)(d.Z,{name:"reverse",label:"Reverse",fieldProps:{onClick:function(){var e;return null===(e=t.current)||void 0===e?void 0:e.submit()}}}),(0,P.jsx)(d.Z,{name:"show_payer",label:"Show Payer",fieldProps:{onClick:function(){var e;return null===(e=t.current)||void 0===e?void 0:e.submit()}}}),(0,P.jsx)(d.Z,{name:"json",label:"JSON",fieldProps:{defaultValue:!0,onClick:function(){var e;return null===(e=t.current)||void 0===e?void 0:e.submit()}}})]})]})}),(0,P.jsx)("div",{className:"hardline text-lg font-semibold mb-2 mt-3",children:D}),l.length?(0,P.jsx)(T.Z,{scroll:{x:!0},size:"small",columns:g,dataSource:l,defaultData:[],search:!1,options:!1,pagination:!1}):(0,P.jsx)("div",{className:"text-base pl-[13px]",children:F})]}),_]})},I=(0,S.memo)(z),B=t(11774),E=t(38345),J=t(69677),D=t(92398),F=t(79123),R=(t(20034),function(){var e=x.ZP.useMessage(),r=i()(e,2),t=r[0],s=r[1],a=(0,h.useDispatch)(),o=(0,h.useSelector)((function(e){return e.global.session})),u=(0,h.useSelector)((function(e){return e.global.contractKit})),l=(0,h.useSelector)((function(e){return e.contract.rawAbi})),d=(0,h.useSelector)((function(e){return e.contract.contract})),f=(0,h.useSelector)((function(e){return e.contract.tableSelection})),b=(0,h.useSelector)((function(e){return e.contract.actionSelection})),g=(0,h.useSelector)((function(e){return e.contract.activeKey})),v=(0,S.useState)(""),y=i()(v,2),j=y[0],k=y[1],w=(0,S.useState)(!1),N=i()(w,2),_=N[0],O=N[1],A=(0,h.useSearchParams)(),T=i()(A,2),M=T[0],z=T[1],R=(0,h.useIntl)(),$=R.formatMessage({id:"contract.intlContract"}),L=R.formatMessage({id:"contract.intlSearch"}),K=R.formatMessage({id:"contract.intlAccountFormatError"}),V=R.formatMessage({id:"contract.intlNonContractAccount"}),G=R.formatMessage({id:"contract.intlSearchContract"}),U=(0,S.useCallback)(function(){var e=c()(n()().mark((function e(r,s){var a,c,u,l;return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(/^[a-z1-5.]{1,12}$/.test(r)){e.next=8;break}if(r||s.hasOwnProperty("type")){e.next=4;break}return e.abrupt("return",!0);case 4:return t.error("".concat(K)),e.abrupt("return",!1);case 8:return e.next=10,(0,p.zI)(o.client.v1.chain.get_abi(r));case 10:if(a=e.sent,c=i()(a,2),u=c[0],l=c[1],!u){e.next=17;break}return t.error(u),e.abrupt("return",!1);case 17:if(u||!l.hasOwnProperty("abi")){e.next=21;break}return e.abrupt("return",!0);case 21:return t.error("".concat(V)),e.abrupt("return",!1);case 23:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),[o,t]),W=(0,S.useCallback)(function(){var e=c()(n()().mark((function e(r,s){var c,o,l,d,f,b;return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u){e.next=15;break}return O(!0),e.next=4,U(r,s);case 4:if(e.sent){e.next=7;break}return O(!1),e.abrupt("return");case 7:return e.next=9,(0,p.zI)(u.load(r));case 9:c=e.sent,o=i()(c,2),l=o[0],d=o[1],l?t.error(l):(f=d.abi.toJSON(),b=JSON.stringify(f),b=JSON.parse(b),a(m.N.setContract(r)),a(m.N.setABI(f)),a(m.N.setRawABI(b)),a(m.N.setActionType("")),a(m.N.setActionSelection("")),a(m.N.setTableSelection("")),a(m.N.setTableDataSource([])),a(m.N.setTableColumns([])),a(m.N.setTableByScope(!1)),a(m.N.setTableParams({code:"",table:"",scope:void 0,lower_bound:void 0,upper_bound:void 0,limit:100,reverse:void 0,index_position:void 0,json:!0,show_payer:void 0})),a(m.N.setTableByScopeParams({code:"",table:"",lower_bound:void 0,upper_bound:void 0,limit:100,reverse:void 0}))),O(!1);case 15:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),[u,U,t]),H=(0,S.useCallback)((0,Z.debounce)(function(){var e=c()(n()().mark((function e(r){var t,s,a,c,u;return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.target.value,/^[a-z1-5.]{1,12}$/.test(t)){e.next=6;break}0===t.trim().length?k(""):k("error"),e.next=13;break;case 6:return e.next=8,(0,p.zI)(o.client.v1.chain.get_abi(t));case 8:s=e.sent,a=i()(s,2),c=a[0],u=a[1],!c&&u.hasOwnProperty("abi")?k(""):k("error");case 13:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),1e3),[o]),Q=(0,S.useMemo)((function(){return"tables"===g&&f?d+"::"+f:"actions"===g&&b?d+"::"+b:d||""}),[g,f,b,d]),q=[{key:"tables",label:(0,P.jsx)("span",{className:"text-lg font-semibold",children:"Tables"}),children:!!l&&(0,P.jsx)(I,{})},{key:"actions",label:(0,P.jsx)("span",{className:"text-lg font-semibold",children:"Actions"}),children:!!l&&(0,P.jsx)(C,{})},{key:"abi",label:(0,P.jsx)("span",{className:"text-lg font-semibold",children:"ABI"}),children:!!l&&(0,P.jsx)(F.ZP,{className:" text-lg",src:l,collapsed:3,displaySize:!0,enableClipboard:!1})},{key:"tip",label:(0,P.jsx)("span",{className:"text-lg font-semibold",children:Q}),disabled:!0}];return(0,S.useEffect)((function(){var e=M.get("search");e&&(W(e,""),z({}))}),[W]),(0,P.jsxs)(B._z,{className:"contract",ghost:!0,children:[(0,P.jsxs)(E.Z,{children:[(0,P.jsx)("div",{className:"hardline text-lg font-semibold mb-3",children:G}),(0,P.jsx)(J.Z.Search,{className:"pl-[13px] ",loading:_,addonBefore:$,placeholder:"Search...",allowClear:!0,enterButton:L,size:"large",status:j,onSearch:W,onChange:H}),(0,P.jsx)(D.Z,{className:"mt-2",defaultActiveKey:"tables",items:q,activeKey:g,onChange:function(e){return a(m.N.setActiveKey(e))}})]}),s]})})}}]);