"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[910],{32227:function(e,t,n){n.r(t);var a=n(15009),s=n.n(a),r=n(99289),i=n.n(r),l=n(5574),c=n.n(l),u=n(2507),o=n(64119),d=n(11774),f=n(38345),x=n(59530),h=n(45360),v=n(2487),j=n(62435),m=n(86074);t.default=function(){var e=(0,x.useDispatch)(),t=h.ZP.useMessage(),n=c()(t,2),a=n[0],r=n[1],l=(0,x.useSelector)((function(e){return e.global.contractKit})),p=(0,j.useState)(!1),y=c()(p,2),b=y[0],g=y[1],S=(0,x.useSelector)((function(e){return e.global.crowdDataSource})),k=(0,j.useState)(0),w=c()(k,2),_=w[0],N=w[1],q=(0,j.useState)(0),C=c()(q,2),F=C[0],D=C[1],Z=(0,j.useState)(0),E=c()(Z,2),I=E[0],A=E[1],M=(0,j.useCallback)(function(){var t=i()(s()().mark((function t(n){var r,i,l,c,d,f,x,h;return s()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=0,t.next=4,n.load("crowdfunding");case 4:return i=t.sent,t.next=7,n.load("linklinklink");case 7:return l=t.sent,c=i.table("orders"),d=l.table("prices"),t.next=12,d.all();case 12:return f=t.sent,t.next=15,c.all();case 15:x=t.sent,(h=x.sort((function(e,t){return t.in_quantity.value-e.in_quantity.value}))).forEach((function(e,t){h[t].rank=t+1,r+=e.in_quantity.value})),h.forEach((function(e,t){h[t].ratio=e.in_quantity.value/r})),A(r*f[0].price1_last),D(r),N(h.length),e(u.N.setCrowdDataSource(h)),g(!1),t.next=30;break;case 26:t.prev=26,t.t0=t.catch(0),g(!1),(0,o.Tv)(t.t0,a);case 30:case"end":return t.stop()}}),t,null,[[0,26]])})));return function(e){return t.apply(this,arguments)}}(),[a]);return(0,j.useEffect)((function(){l?(S.length?g(!1):g(!0),M(l)):g(!0)}),[l,M]),(0,m.jsx)(d._z,{className:"",ghost:!0,children:(0,m.jsx)("div",{className:"flex justify-center",children:(0,m.jsxs)(f.Z,{className:"flex justify-center",title:(0,m.jsx)("div",{className:"text-xl font-semibold",children:"众筹排行榜"}),headerBordered:!0,headStyle:{justifyContent:"center"},style:{width:"500px"},children:[(0,m.jsxs)("div",{className:"text-base font-semibold",children:["用户数：",_]}),(0,m.jsxs)("div",{className:"text-base font-semibold",children:["已众筹：",F.toFixed(0)," DFS / $",(0,o.CE)(I)]}),(0,m.jsx)(v.Z,{dataSource:S,loading:b,renderItem:function(e){return(0,m.jsxs)(v.Z.Item,{children:[(0,m.jsx)(v.Z.Item.Meta,{title:"".concat(e.rank,". ")+e.owner.toString(),description:"占比："+(100*e.ratio).toFixed(2)+"%"}),(0,m.jsxs)("div",{className:"font-semibold",children:[(0,m.jsxs)("div",{style:{textAlign:"right"},children:[e.in_quantity.value>1?e.in_quantity.value.toFixed(0):e.in_quantity.value," ","DFS"]}),(0,m.jsxs)("div",{style:{textAlign:"right"},children:[(4e10*e.ratio).toFixed(0)," JIU"]})]})]})}}),r]})})})}}}]);