"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[910],{32227:function(e,t,n){n.r(t);var s=n(15009),a=n.n(s),r=n(99289),i=n.n(r),c=n(5574),l=n.n(c),u=n(2507),o=n(64119),d=n(11774),f=n(38345),x=n(59530),h=n(45360),v=n(2487),m=n(62435),b=n(86074);t.default=function(){var e=(0,x.useDispatch)(),t=h.ZP.useMessage(),n=l()(t,2),s=n[0],r=n[1],c=(0,x.useNavigate)(),j=(0,x.useSelector)((function(e){return e.global.contractKit})),p=(0,m.useState)(!1),g=l()(p,2),y=g[0],k=g[1],S=(0,x.useSelector)((function(e){return e.global.crowdDataSource})),w=(0,m.useState)(0),N=l()(w,2),_=N[0],q=N[1],C=(0,m.useState)(0),F=l()(C,2),D=F[0],Z=F[1],E=(0,m.useState)(0),I=l()(E,2),A=I[0],M=I[1],z=(0,m.useCallback)(function(){var t=i()(a()().mark((function t(n){var r,i,c,l,d,f,x,h;return a()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=0,t.next=4,n.load("crowdfunding");case 4:return i=t.sent,t.next=7,n.load("linklinklink");case 7:return c=t.sent,l=i.table("orders"),d=c.table("prices"),t.next=12,d.all();case 12:return f=t.sent,t.next=15,l.all();case 15:x=t.sent,(h=x.sort((function(e,t){return t.in_quantity.value-e.in_quantity.value}))).forEach((function(e,t){h[t].rank=t+1,r+=e.in_quantity.value})),h.forEach((function(e,t){h[t].ratio=e.in_quantity.value/r})),M(r*f[0].price1_last),Z(r),q(h.length),e(u.N.setCrowdDataSource(h)),k(!1),t.next=30;break;case 26:t.prev=26,t.t0=t.catch(0),k(!1),(0,o.Tv)(t.t0,s);case 30:case"end":return t.stop()}}),t,null,[[0,26]])})));return function(e){return t.apply(this,arguments)}}(),[s]);return(0,m.useEffect)((function(){j?(S.length?k(!1):k(!0),z(j)):k(!0)}),[j,z]),(0,b.jsx)(d._z,{className:"",ghost:!0,children:(0,b.jsx)("div",{className:"flex justify-center",children:(0,b.jsxs)(f.Z,{className:"flex justify-center",title:(0,b.jsx)("div",{className:"text-xl font-semibold",children:"众筹排行榜"}),headerBordered:!0,headStyle:{justifyContent:"center"},style:{width:"500px"},children:[(0,b.jsxs)("div",{className:"text-base font-semibold",children:["用户数：",_]}),(0,b.jsxs)("div",{className:"text-base font-semibold",children:["已众筹：",D.toFixed(0)," DFS / $",(0,o.CE)(A)]}),(0,b.jsxs)("div",{className:"text-base font-semibold",children:["合约账号：",(0,b.jsx)("span",{className:" cursor-pointer",onClick:function(){return c("/account?search=crowdfunding&tab=info")},children:"crowdfunding"})]}),(0,b.jsx)(v.Z,{dataSource:S,loading:y,renderItem:function(e){return(0,b.jsxs)(v.Z.Item,{children:[(0,b.jsx)(v.Z.Item.Meta,{title:"".concat(e.rank,". ")+e.owner.toString(),description:"占比："+(100*e.ratio).toFixed(2)+"%"}),(0,b.jsxs)("div",{className:"font-semibold",children:[(0,b.jsxs)("div",{style:{textAlign:"right"},children:[e.in_quantity.value>1?e.in_quantity.value.toFixed(0):e.in_quantity.value," ","DFS"]}),(0,b.jsxs)("div",{style:{textAlign:"right"},children:[(4e10*e.ratio).toFixed(0)," JIU"]})]})]})}}),r]})})})}}}]);