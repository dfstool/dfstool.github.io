"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7496],{31566:function(e,t,a){a.r(t);var n=a(15009),r=a.n(n),o=a(99289),s=a.n(o),c=a(5574),u=a.n(c),i=a(64119),l=a(37476),m=a(5966),f=a(59530),p=a(45360),d=a(62435),g=a(86074),v=d.forwardRef((function(e,t){var a=(0,f.useSelector)((function(e){return e.global.session})),n=(0,f.useSelector)((function(e){return e.global.contractKit})),o=(0,f.useSelector)((function(e){return e.global.account})),c=p.ZP.useMessage(),v=u()(c,2),b=v[0],h=v[1],k=(0,d.useState)(),x=u()(k,2),w=x[0],C=x[1],M=(0,f.useIntl)(),z=M.formatMessage({id:"tools.autoclaim.intlEmailAddress"}),S=M.formatMessage({id:"tools.autoclaim.intlEmail"}),Z=M.formatMessage({id:"coffee.inputException"}),y=M.formatMessage({id:"common.intlTxSuccess"}),A=M.formatMessage({id:"common.intlTxFail"}),F=M.formatMessage({id:"common.intlPleaseConnectWallet"}),P=M.formatMessage({id:"common.intlPleaseConnectNetwork"}),T=(0,d.useRef)(),E=(0,d.useState)(!1),I=u()(E,2),R=I[0],_=I[1],j=(0,d.useCallback)((function(e){C(e),setTimeout((function(){var t;return null===(t=T.current)||void 0===t?void 0:t.setFieldValue("value",e.email)}),100),_(!0)}),[]);(0,d.useImperativeHandle)(t,(function(){return{handleOpen:j}}));var O=(0,d.useCallback)(function(){var t=s()(r()().mark((function t(s){var c,l,m,f,p;return r()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,a&&a.broadcast){t.next=6;break}return b.error("".concat(F)),t.abrupt("return");case 6:if(o){t.next=9;break}return b.error("".concat(P)),t.abrupt("return");case 9:return c={action:{account:"autoclaimbot",name:"email",authorization:[a.permissionLevel],data:{account:a.actor,type:w.type,email:s.value}}},t.next=12,(0,i.zI)(a.transact(c));case 12:return l=t.sent,m=u()(l,2),f=m[0],p=m[1],f?b.error(f):p&&p.response?(b.success("".concat(y)),setTimeout((function(){e.handleClaims(o,n)}),500)):b.error("".concat(A)),t.abrupt("return",!0);case 20:t.prev=20,t.t0=t.catch(0),console.log(t.t0.message),b.error(t.t0.message);case 24:case"end":return t.stop()}}),t,null,[[0,20]])})));return function(e){return t.apply(this,arguments)}}(),[d.memo,a,o,n,w,e]);return(0,g.jsxs)(l.Y,{formRef:T,title:S,open:R,onFinish:O,onOpenChange:function(e){_(e)},layout:"vertical",width:"450px",children:[(0,g.jsx)(m.Z,{name:"value",label:z,placeholder:z,rules:[{required:!0,message:"".concat(Z),whitespace:!0,pattern:/^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/}],fieldProps:{size:"large",autoFocus:!1}}),h]})}));t.default=(0,d.memo)(v)}}]);