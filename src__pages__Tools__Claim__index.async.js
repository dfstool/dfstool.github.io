"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[896],{73316:function(e,t,n){n.r(t);var r=n(15009),a=n.n(r),c=n(99289),s=n.n(c),o=n(5574),i=n.n(o),u=n(64119),l=n(11774),f=n(59530),d=n(45360),p=n(4393),m=n(57953),x=n(62435),b=n(86074);t.default=function(){var e=d.ZP.useMessage(),t=i()(e,2),n=t[0],r=t[1],c=(0,f.useSelector)((function(e){return e.global.session})),o=(0,f.useSelector)((function(e){return e.global.account})),v=(0,f.useSelector)((function(e){return e.global.contractKit})),h=(0,x.useState)("0.00000000 DFS"),g=i()(h,2),k=g[0],S=g[1],N=(0,x.useState)("0.00000000 DFS"),j=i()(N,2),w=j[0],C=j[1],y=(0,x.useState)("0.00000000 DFS"),M=i()(y,2),T=M[0],Z=M[1],F=(0,x.useState)(!1),D=i()(F,2),z=D[0],_=D[1],I=(0,x.useState)(!1),L=i()(I,2),P=L[0],E=L[1],q=(0,x.useState)(!1),K=i()(q,2),W=K[0],A=K[1],B=(0,f.useIntl)(),G=B.formatMessage({id:"account.intlLiq"}),H=B.formatMessage({id:"node.intlNode"}),J=B.formatMessage({id:"account.intlInvite"}),O=B.formatMessage({id:"account.intlClaim"}),Q=B.formatMessage({id:"ecosystem.update"}),R=B.formatMessage({id:"common.intlPleaseConnectWallet"}),U=B.formatMessage({id:"common.intlPleaseConnectNetwork"}),V=B.formatMessage({id:"tools.claim.intlNoLiqPool"}),X=B.formatMessage({id:"common.intlTransferSuccess"}),Y=B.formatMessage({id:"common.intlTransferFail"}),$=B.formatMessage({id:"tools.claim.intlNonNode"}),ee=B.formatMessage({id:"tools.claim.intlNonPromoters"}),te=(0,x.useCallback)(function(){var e=s()(a()().mark((function e(t){var r;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,_(!0),e.next=4,t.client.v1.chain.get_currency_balance("eosio.token","dfsminingout","DFS");case 4:r=e.sent,_(!1),S(r[0].toString()),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),_(!1),(0,u.Tv)(e.t0,n);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),[n]),ne=(0,x.useCallback)(function(){var e=s()(a()().mark((function e(t){var r,c,s,l,f,d,p,m,x,b;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.broadcast){e.next=5;break}return n.error("".concat(R)),e.abrupt("return");case 5:if(o){e.next=8;break}return n.error("".concat(U)),e.abrupt("return");case 8:return e.prev=8,_(!0),e.next=12,v.load("loglogloglog");case 12:return r=e.sent,c=r.table("liqs"),e.next=16,c.all({scope:o.accountName.toString()});case 16:if(s=e.sent,l=[],s.forEach((function(e){console.log(e.bal0.symbol.toString()),"DFS"!==e.bal0.symbol.name&&"DFS"!==e.bal1.symbol.name||l.push(e.mid.toNumber())})),l.length){e.next=23;break}n.error(V),e.next=34;break;case 23:return f=[],l.forEach((function(e){f.push({account:"dfsfairfarms",name:"claim",authorization:[t.permissionLevel],data:{mid:e,user:o.accountName.toString()}})})),d={actions:f},e.next=28,(0,u.zI)(t.transact(d));case 28:p=e.sent,m=i()(p,2),x=m[0],b=m[1],x?n.error(x):b&&b.response?n.success("".concat(X)):n.error("".concat(Y)),setTimeout((function(){te(t)}),500);case 34:_(!1),e.next=41;break;case 37:e.prev=37,e.t0=e.catch(8),_(!1),(0,u.Tv)(e.t0,n);case 41:case"end":return e.stop()}}),e,null,[[8,37]])})));return function(t){return e.apply(this,arguments)}}(),[o,v,te]),re=(0,x.useCallback)(function(){var e=s()(a()().mark((function e(t){var r;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,E(!0),e.next=4,t.client.v1.chain.get_currency_balance("eosio.token","dfsbpsvoters","DFS");case 4:r=e.sent,E(!1),C(r[0].toString()),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),E(!1),(0,u.Tv)(e.t0,n);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),[n]),ae=(0,x.useCallback)(function(){var e=s()(a()().mark((function e(t){var r,c,s,l,f,d,p;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.broadcast){e.next=5;break}return n.error("".concat(R)),e.abrupt("return");case 5:if(o){e.next=8;break}return n.error("".concat(U)),e.abrupt("return");case 8:return e.prev=8,E(!0),e.next=12,v.load("dfsbpsvoters");case 12:return r=e.sent,c=r.table("bpinfos"),e.next=16,c.all({scope:"dfsbpsvoters",from:o.accountName.toString(),to:o.accountName.toString()});case 16:if(e.sent.length){e.next=21;break}n.error($),e.next=30;break;case 21:return s={action:{account:"dfsbpsvoters",name:"claim",authorization:[t.permissionLevel],data:{producer:o.accountName.toString()}}},e.next=24,(0,u.zI)(t.transact(s));case 24:l=e.sent,f=i()(l,2),d=f[0],p=f[1],d?n.error(d):p&&p.response?n.success("".concat(X)):n.error("".concat(Y)),setTimeout((function(){re(t)}),500);case 30:E(!1),e.next=37;break;case 33:e.prev=33,e.t0=e.catch(8),E(!1),(0,u.Tv)(e.t0,n);case 37:case"end":return e.stop()}}),e,null,[[8,33]])})));return function(t){return e.apply(this,arguments)}}(),[o,v,re]),ce=(0,x.useCallback)(function(){var e=s()(a()().mark((function e(t){var r,c,s,i;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o){e.next=3;break}return Z(U),e.abrupt("return");case 3:return e.prev=3,A(!0),e.next=7,t.load("dfsrefdfsref");case 7:return r=e.sent,c=r.table("referrers"),e.next=11,c.all({scope:"dfsrefdfsref",from:o.accountName.toString(),to:o.accountName.toString()});case 11:(s=e.sent).length?(i=s[0].unclaimed_reward.toString(),Z(i)):Z("0.00000000 DFS"),A(!1),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(3),A(!1),(0,u.Tv)(e.t0,n);case 20:case"end":return e.stop()}}),e,null,[[3,16]])})));return function(t){return e.apply(this,arguments)}}(),[o]),se=(0,x.useCallback)(function(){var e=s()(a()().mark((function e(t){var r,c,s,l,f,d,p;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.broadcast){e.next=5;break}return n.error("".concat(R)),e.abrupt("return");case 5:if(o){e.next=8;break}return n.error("".concat(U)),e.abrupt("return");case 8:return e.prev=8,A(!0),e.next=12,v.load("dfsrefdfsref");case 12:return r=e.sent,c=r.table("referrers"),e.next=16,c.all({scope:"dfsrefdfsref",from:o.accountName.toString(),to:o.accountName.toString()});case 16:if(e.sent.length){e.next=21;break}n.error(ee),e.next=30;break;case 21:return s={action:{account:"dfsrefdfsref",name:"claim",authorization:[t.permissionLevel],data:{user:o.accountName.toString()}}},e.next=24,(0,u.zI)(t.transact(s));case 24:l=e.sent,f=i()(l,2),d=f[0],p=f[1],d?n.error(d):p&&p.response?n.success("".concat(X)):n.error("".concat(Y)),setTimeout((function(){ce(v)}),500);case 30:A(!1),e.next=37;break;case 33:e.prev=33,e.t0=e.catch(8),A(!1),(0,u.Tv)(e.t0,n);case 37:case"end":return e.stop()}}),e,null,[[8,33]])})));return function(t){return e.apply(this,arguments)}}(),[o,v,ce]);return(0,x.useEffect)((function(){c&&v&&(te(c),re(c))}),[c,v,te,re]),(0,x.useEffect)((function(){c&&v&&ce(v)}),[c,v,ce]),(0,b.jsx)(l._z,{className:"claim",ghost:!0,children:(0,b.jsxs)("div",{className:"flex flex-wrap justify-around",children:[(0,b.jsx)(p.Z,{className:" w-[400px] mb-3 text-center",title:(0,b.jsx)("div",{className:"text-center",children:G}),actions:[(0,b.jsx)("div",{onClick:function(){return te(c)},children:(0,b.jsx)(m.Z,{spinning:z,children:Q})},"1"),(0,b.jsx)("div",{onClick:function(){return ne(c)},children:(0,b.jsx)(m.Z,{spinning:z,children:O})},"2")],children:k}),(0,b.jsx)(p.Z,{className:" w-[400px] mb-3 text-center",title:(0,b.jsx)("div",{className:"text-center",children:H}),actions:[(0,b.jsx)("div",{onClick:function(){return re(c)},children:(0,b.jsx)(m.Z,{spinning:P,children:Q})},"1"),(0,b.jsx)("div",{onClick:function(){return ae(c)},children:(0,b.jsx)(m.Z,{spinning:P,children:O})},"2")],children:w}),(0,b.jsx)(p.Z,{className:" w-[400px] mb-3 text-center",title:(0,b.jsx)("div",{className:"text-center",children:J}),actions:[(0,b.jsx)("div",{onClick:function(){return ce(v)},children:(0,b.jsx)(m.Z,{spinning:W,children:Q})},"1"),(0,b.jsx)("div",{onClick:function(){return se(c)},children:(0,b.jsx)(m.Z,{spinning:W,children:O})},"2")],children:T}),r]})})}}}]);