(self.webpackChunk=self.webpackChunk||[]).push([[6277],{98165:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(87462),a=r(62435),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z"}}]},name:"sync",theme:"outlined"},o=r(84089),c=function(e,t){return a.createElement(o.Z,(0,n.Z)({},e,{ref:t,icon:s}))};var i=a.forwardRef(c)},64317:function(e,t,r){"use strict";var n=r(1413),a=r(91),s=r(22270),o=r(62435),c=r(66758),i=r(56499),l=r(86074),u=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],d=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],f=function(e,t){var r=e.fieldProps,d=e.children,f=e.params,p=e.proFieldProps,m=e.mode,h=e.valueEnum,x=e.request,v=e.showSearch,b=e.options,g=(0,a.Z)(e,u),j=(0,o.useContext)(c.Z);return(0,l.jsx)(i.Z,(0,n.Z)((0,n.Z)({valueEnum:(0,s.h)(h),request:x,params:f,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,n.Z)({options:b,mode:m,showSearch:v,getPopupContainer:j.getPopupContainer},r),ref:t,proFieldProps:p},g),{},{children:d}))},p=o.forwardRef((function(e,t){var r=e.fieldProps,u=e.children,f=e.params,p=e.proFieldProps,m=e.mode,h=e.valueEnum,x=e.request,v=e.options,b=(0,a.Z)(e,d),g=(0,n.Z)({options:v,mode:m||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},r),j=(0,o.useContext)(c.Z);return(0,l.jsx)(i.Z,(0,n.Z)((0,n.Z)({valueEnum:(0,s.h)(h),request:x,params:f,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,n.Z)({getPopupContainer:j.getPopupContainer},g),ref:t,proFieldProps:p},b),{},{children:u}))})),m=o.forwardRef(f);m.SearchSelect=p,m.displayName="ProFormComponent",t.Z=m},91604:function(e,t,r){"use strict";r.d(t,{Z:function(){return x}});var n=r(1413),a=r(87462),s=r(62435),o={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M885.2 446.3l-.2-.8-112.2-285.1c-5-16.1-19.9-27.2-36.8-27.2H281.2c-17 0-32.1 11.3-36.9 27.6L139.4 443l-.3.7-.2.8c-1.3 4.9-1.7 9.9-1 14.8-.1 1.6-.2 3.2-.2 4.8V830a60.9 60.9 0 0060.8 60.8h627.2c33.5 0 60.8-27.3 60.9-60.8V464.1c0-1.3 0-2.6-.1-3.7.4-4.9 0-9.6-1.3-14.1zm-295.8-43l-.3 15.7c-.8 44.9-31.8 75.1-77.1 75.1-22.1 0-41.1-7.1-54.8-20.6S436 441.2 435.6 419l-.3-15.7H229.5L309 210h399.2l81.7 193.3H589.4zm-375 76.8h157.3c24.3 57.1 76 90.8 140.4 90.8 33.7 0 65-9.4 90.3-27.2 22.2-15.6 39.5-37.4 50.7-63.6h156.5V814H214.4V480.1z"}}]},name:"inbox",theme:"outlined"},c=r(84089),i=function(e,t){return s.createElement(c.Z,(0,a.Z)({},e,{ref:t,icon:o}))};var l=s.forwardRef(i),u=r(28459),d=r(2058),f=r(9105),p=r(90789),m=r(86074),h=s.forwardRef((function(e,t){var r=e.fieldProps,a=e.title,o=void 0===a?"单击或拖动文件到此区域进行上传":a,c=e.icon,i=void 0===c?(0,m.jsx)(l,{}):c,p=e.description,h=void 0===p?"支持单次或批量上传":p,x=e.action,v=e.accept,b=e.onChange,g=e.value,j=e.children,k=e.max,S=e.proFieldProps,y=(0,s.useContext)(u.ZP.ConfigContext),Z=(0,s.useContext)(f.A),w=(null==S?void 0:S.mode)||Z.mode||"edit",N=y.getPrefixCls("upload"),C=(void 0===k||!g||(null==g?void 0:g.length)<k)&&"read"!==w&&!0!==(null==S?void 0:S.readonly);return(0,m.jsxs)(d.Z.Dragger,(0,n.Z)((0,n.Z)({ref:t,name:"files",action:x,accept:v,fileList:g},r),{},{onChange:function(e){null==b||b(e),null!=r&&r.onChange&&(null==r||r.onChange(e))},style:(0,n.Z)((0,n.Z)({},null==r?void 0:r.style),{},{display:C?void 0:"none"}),children:[(0,m.jsx)("p",{className:"".concat(N,"-drag-icon"),children:i}),(0,m.jsx)("p",{className:"".concat(N,"-text"),children:o}),(0,m.jsx)("p",{className:"".concat(N,"-hint"),children:h}),j?(0,m.jsx)("div",{className:"".concat(N,"-extra"),style:{padding:16},children:j}):null]}))})),x=(0,p.G)(h,{getValueFromEvent:function(e){return e.fileList}})},218:function(e,t,r){"use strict";r.d(t,{s:function(){return f}});var n=r(5574),a=r.n(n),s=r(37476),o=r(90672),c=r(59530),i=r(45360),l=r(62435),u=r(86074),d=l.forwardRef((function(e,t){var r=i.ZP.useMessage(),n=a()(r,2),d=n[0],f=n[1],p=(0,l.useRef)(),m=(0,l.useState)(!1),h=a()(m,2),x=h[0],v=h[1],b=(0,l.useState)(""),g=a()(b,2),j=g[0],k=g[1],S=(0,l.useState)(""),y=a()(S,2),Z=y[0],w=y[1],N=(0,c.useIntl)(),C=N.formatMessage({id:"msig.intlPreviewFail"}),F=N.formatMessage({id:"msig.intlClose"}),_=(0,l.useCallback)((function(e){var t=new FileReader;t.readAsText(e.originFileObj),t.onload=function(){try{var r,n=JSON.parse(t.result);if(n)null===(r=p.current)||void 0===r||r.setFieldValue("content",JSON.stringify(n,null,2)),k(JSON.stringify(n,null,2)),w(e.name),v(!0);else d.error("".concat(C))}catch(e){d.error("".concat(C))}}}),[]);return(0,l.useImperativeHandle)(t,(function(){return{handleOpen:_}})),(0,u.jsxs)(s.Y,{formRef:p,title:(0,u.jsx)("div",{className:"mt-3",children:Z}),open:x,onOpenChange:function(e){v(e)},layout:"vertical",width:"700px",modalProps:{style:{top:25}},submitter:{searchConfig:{resetText:F},render:function(e,t){return[t[0]]}},children:[(0,u.jsx)(o.Z,{name:"content",fieldProps:{autoSize:{minRows:5},allowClear:!1,autoFocus:!1,onChange:void 0,value:j,size:"large"}}),f]})})),f=(0,l.memo)(d)},2010:function(e,t,r){"use strict";r.r(t);var n=r(64599),a=r.n(n),s=r(19632),o=r.n(s),c=r(97857),i=r.n(c),l=r(15009),u=r.n(l),d=r(99289),f=r.n(d),p=r(5574),m=r.n(p),h=r(218),x=r(40956),v=r(64119),b=r(87603),g=r(98165),j=r(25035),k=r(11774),S=r(38345),y=r(97269),Z=r(64317),w=r(31199),N=r(52688),C=r(5966),F=r(91604),_=r(59530),P=r(80507),A=r(45360),T=r(7134),L=r(83062),V=r(15867),M=r(55054),z=r(66309),R=r(9669),Y=r.n(R),D=r(27484),E=r.n(D),q=r(70178),O=r.n(q),H=r(62435),I=r(86074);E().extend(O());var $=["dfsnetworkio","dfsnetworkbp","testaccount1","testaccount2","testaccount3"];t.default=function(){var e=(0,_.useDispatch)(),t=A.ZP.useMessage(),r=m()(t,2),n=r[0],s=r[1],c=(0,_.useSelector)((function(e){return e.global.contractKit})),l=(0,_.useSelector)((function(e){return e.global.account})),d=(0,_.useSelector)((function(e){return e.global.session})),p=(0,_.useSelector)((function(e){return e.global.privateKey})),R=(0,_.useSelector)((function(e){return e.ppp.valueEnum})),D=(0,_.useSelector)((function(e){return e.ppp.projects})),q=(0,_.useSelector)((function(e){return e.ppp.stats})),O=(0,H.useState)([]),U=m()(O,2),J=U[0],Q=U[1],W=(0,H.useState)(0),B=m()(W,2),K=B[0],G=B[1],X=(0,H.useState)(0),ee=m()(X,2),te=ee[0],re=ee[1],ne=(0,H.useState)(0),ae=m()(ne,2),se=ae[0],oe=ae[1],ce=(0,H.useState)(0),ie=m()(ce,2),le=ie[0],ue=ie[1],de=(0,H.useState)(0),fe=m()(de,2),pe=fe[0],me=fe[1],he=(0,H.useState)(0),xe=m()(he,2),ve=xe[0],be=xe[1],ge=(0,H.useState)(0),je=m()(ge,2),ke=je[0],Se=je[1],ye=(0,H.useState)(0),Ze=m()(ye,2),we=Ze[0],Ne=Ze[1],Ce=(0,H.useState)(0),Fe=m()(Ce,2),_e=Fe[0],Pe=Fe[1],Ae=(0,H.useState)(0),Te=m()(Ae,2),Le=Te[0],Ve=Te[1],Me=(0,H.useState)([]),ze=m()(Me,2),Re=ze[0],Ye=ze[1],De=(0,H.useState)([]),Ee=m()(De,2),qe=Ee[0],Oe=Ee[1],He=(0,H.useState)(""),Ie=m()(He,2),$e=Ie[0],Ue=Ie[1],Je=(0,H.useState)(""),Qe=m()(Je,2),We=Qe[0],Be=Qe[1],Ke=(0,H.useState)(0),Ge=m()(Ke,2)[1],Xe=(0,H.useState)(0),et=m()(Xe,2)[1],tt=(0,H.useState)(0),rt=m()(tt,2),nt=rt[0],at=rt[1],st=(0,H.useState)(0),ot=m()(st,2),ct=ot[0],it=ot[1],lt=(0,H.useState)(!1),ut=m()(lt,2),dt=ut[0],ft=ut[1],pt=(0,H.useState)({}),mt=m()(pt,2),ht=mt[0],xt=mt[1],vt=(0,H.useState)({}),bt=m()(vt,2),gt=bt[0],jt=bt[1],kt=(0,H.useState)({}),St=m()(kt,2),yt=St[0],Zt=St[1],wt=(0,H.useState)({}),Nt=m()(wt,2),Ct=Nt[0],Ft=Nt[1],_t=(0,H.useState)(!1),Pt=m()(_t,2),At=Pt[0],Tt=Pt[1],Lt=(0,H.useState)(!1),Vt=m()(Lt,2),Mt=Vt[0],zt=Vt[1],Rt=(0,H.useState)(!1),Yt=m()(Rt,2),Dt=Yt[0],Et=Yt[1],qt=(0,H.useState)(!1),Ot=m()(qt,2),Ht=Ot[0],It=Ot[1],$t=(0,H.useState)(!1),Ut=m()($t,2),Jt=Ut[0],Qt=Ut[1],Wt=(0,H.useState)(!1),Bt=m()(Wt,2),Kt=Bt[0],Gt=Bt[1],Xt=(0,_.useIntl)(),er=Xt.formatMessage({id:"coffee.inputException"}),tr=Xt.formatMessage({id:"msig.intlSendTransaction"}),rr=Xt.formatMessage({id:"msig.intlSend"}),nr=Xt.formatMessage({id:"msig.intlUploadFail"}),ar=Xt.formatMessage({id:"msig.intlUploadSuccess"}),sr=Xt.formatMessage({id:"msig.intlTransactionEmpty"}),or=Xt.formatMessage({id:"common.intlPleaseConnectWallet"}),cr=Xt.formatMessage({id:"common.intlPleaseConnectNetwork"}),ir=(0,H.useRef)([]),lr=(0,H.useRef)(!1),ur=(0,H.useRef)({}),dr=(0,H.useRef)({}),fr=(0,H.useRef)(),pr=(0,H.useRef)(),mr=(0,H.useRef)(),hr=(0,H.useRef)(),xr=(0,H.useRef)(0),vr=(0,H.useCallback)((function(){var e=0,t=0,r=0,n=0;for(var a in ur.current)"success"===ur.current[a]?t+=1:"error"===ur.current[a]?r+=1:"processing"===ur.current[a]?n+=1:"default"===ur.current[a]&&(e+=1);G(t),re(r),oe(n),ue(e)}),[]),br=(0,H.useCallback)((function(){var e=0,t=0,r=0,n=0;for(var a in dr.current)"success"===dr.current[a]?t+=1:"error"===dr.current[a]?r+=1:"processing"===dr.current[a]?n+=1:"default"===dr.current[a]&&(e+=1);me(t),be(r),Se(n),Ne(e)}),[]),gr=(0,H.useCallback)((function(e,t){var r=E()(e).add(t,"seconds").valueOf();it(r)}),[]),jr=(0,H.useCallback)(function(){var e=f()(u()().mark((function e(t){var r;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],t.forEach((function(e){if("success"!==ur.current[e.cid]&&"processing"!==ur.current[e.cid]){var t=new Promise((function(t){ur.current[e.cid]="processing",vr(),d.client.v1.chain.push_transaction(e.signedTransaction).then((function(r){r&&r.processed&&"executed"===r.processed.receipt.status?(ur.current[e.cid]="success",vr(),t(!0)):("success"!==ur.current[e.cid]&&(ur.current[e.cid]="error",vr()),t(!1))})).catch((function(){"success"!==ur.current[e.cid]&&(ur.current[e.cid]="error",vr()),t(!1)}))}));r.push(t)}}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[d,vr]),kr=(0,H.useCallback)(function(){var e=f()(u()().mark((function e(t){var r;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],t.forEach((function(e){if("success"!==dr.current[e.cid]&&"processing"!==dr.current[e.cid]){var t=new Promise((function(t){dr.current[e.cid]="processing",br(),d.client.v1.chain.push_transaction(e.signedTransaction).then((function(r){r&&r.processed&&"executed"===r.processed.receipt.status?(dr.current[e.cid]="success",br(),t(!0)):("success"!==dr.current[e.cid]&&(dr.current[e.cid]="error",br()),t(!1))})).catch((function(){"success"!==dr.current[e.cid]&&(dr.current[e.cid]="error",br()),t(!1)}))}));r.push(t)}}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[d,br]),Sr=(0,H.useCallback)(function(){var e=f()(u()().mark((function e(t){var r,a,s,f,h,x,b,g,j,k,S,y,Z,w,N,C,F,_,A,T,L,V,M,z,R,Y,q,O,H,I,U,J,Q,W,B,K,G,X,ee,te,re,ne,ae,se,oe,ce,ie,le,ue,de,fe,pe,me,he,xe,ve,be,ge,je;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,d&&d.broadcast){e.next=6;break}return n.error("".concat(or)),e.abrupt("return");case 6:if(l){e.next=9;break}return n.error("".concat(cr)),e.abrupt("return");case 9:if("owner"===(a=d.permissionLevel.permission.toString())||"active"===a){e.next=13;break}return n.error("permission权限必须是owner或者active"),e.abrupt("return");case 13:return Et(!0),s=t.pidCreate,f=t.countCreate,h=t.disorderCreate,x=t.split,b=t.startCreate,g=t.endCreate,j=Number(s.split("-")[1]),k=d.actor.toString(),e.next=19,c.load("dfs3protocol");case 19:return S=e.sent,y=S.table("registry"),e.next=23,y.all({scope:"dfs3protocol",from:j,to:j,index_position:"secondary",key_type:"i64"});case 23:if(Z=e.sent,w=D.filter((function(e){return e.id.toNumber()===j})),N=w[0].creator.toString(),C=w[0].nft_name.toString(),F=w[0].project_name,_=w[0].init_nft_price.value,A=w[0].init_nft_price.symbol.name,T=w[0].sec_per_round.toNumber(),L=w[0].last_round.toString(),L=E().utc(L).local().format("YYYY-MM-DDTHH:mm:ss"),V="","DFS"!==A){e.next=38;break}V="eosio.token",e.next=49;break;case 38:if("USDT"!==A){e.next=42;break}V="usdtusdtusdt",e.next=49;break;case 42:if("ORDI"!==A){e.next=46;break}V="ordiordiordi",e.next=49;break;case 46:return n.error("不支持当前项目"),Et(!1),e.abrupt("return");case 49:if(!(b>Z.length)){e.next=53;break}return n.error("开始序号超过当前项目最大值".concat(Z.length)),Et(!1),e.abrupt("return");case 53:if(!g){e.next=62;break}if(!(b>g)){e.next=58;break}return n.error("开始序号超过结束序号"),Et(!1),e.abrupt("return");case 58:M=Z.length>g?g:Z.length,Z=Z.slice(b-1,M),e.next=63;break;case 62:Z=Z.slice(b-1);case 63:return z={account:"dfsfreecpu11",name:"freecpu",authorization:[{actor:"dfs.service",permission:"cpu"},d.permissionLevel],data:v._9.from({user:k})},R=P.aU.from(z),e.next=67,d.client.v1.chain.get_info();case 67:Y=e.sent,q=Y.getTransactionHeader(),O=E()(),H=[],I=0,U="",J=0,h&&Z.sort((function(){return Math.random()-.5})),Q=0;case 76:if(!(Q<Z.length)){e.next=121;break}if(W=Z[Q].owner.toString(),B=Z[Q].current_price.value,W!==k){e.next=81;break}return e.abrupt("continue",118);case 81:if(!(B>=2*_)){e.next=83;break}return e.abrupt("continue",118);case 83:if(!(I>=f)){e.next=85;break}return e.abrupt("break",121);case 85:if(!(I>=3e3)){e.next=87;break}return e.abrupt("break",121);case 87:return U=E()(O).add(3600-I++,"seconds").utc().format("YYYY-MM-DDTHH:mm:ss"),K=Z[Q].current_price.toString(),G=Z[Q].current_price.value,X=Z[Q].current_price.symbol,ee=P.xR.from(.005*G,X),te="buy:"+Z[Q].id.toString(),J+=G,re={account:V,name:"transfer",authorization:[d.permissionLevel],data:v.FE.from({from:k,to:"dfs3protocol",quantity:K,memo:te})},ne=P.aU.from(re),ae={account:V,name:"transfer",authorization:[d.permissionLevel],data:v.FE.from({from:k,to:"davidaccount",quantity:ee,memo:"fee"})},se=P.aU.from(ae),oe=void 0,ce=void 0,ie=[],le=$.includes(k)?[R,ne]:[R,ne,se],oe=P.YW.from(i()(i()({},q),{},{expiration:U,actions:le})),ie[0]=p.signDigest(oe.signingDigest(d.chain.id.toString())),e.next=106,(0,v.zI)(d.transact({transaction:oe},{broadcast:!1,transactPlugins:[]}));case 106:if(ue=e.sent,de=m()(ue,2),fe=de[0],pe=de[1],!fe){e.next=114;break}return n.error(fe),Et(!1),e.abrupt("return",!1);case 114:ce=P.uQ.from(i()(i()({},oe),{},{signatures:[].concat(ie,o()(pe.signatures))})),me=Z[Q].cid.toNumber(),he=Z[Q].id.toNumber(),H.push({signedTransaction:ce,cid:me,nftid:he,amount:G,from:k});case 118:++Q,e.next=76;break;case 121:xe=1,ve=Math.ceil(H.length/x),be=E()().format("YYYY-MM-DDTHH:mm:ss"),ge=u()().mark((function e(){var t,r,n,a,s,o,c,i,l;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=0,r=[],n=[],(a=H.splice(0,ve)).forEach((function(e){r.push(e.cid),n.push(e.nftid),t+=e.amount})),s=$.includes(k)?t.toFixed(8)+" "+A:(1.005*t).toFixed(8)+" "+A,r.sort(),n.sort(),o={infos:{pid:j,creator:N,project_name:F,nft_name:C,token_symbol:A,last_round:L,sec_per_round:T,from:k,split:x,disorder:h,start:r[0],end:r[r.length-1],count:a.length,amount:s,cid_array:r,nftid_array:n},transactions:a},c=JSON.stringify(o,null,2),i="data:,".concat(c),(l=document.createElement("a")).href=i,l.download="".concat(k,"_").concat(j,"_").concat(I,"-").concat(xe++,"_").concat(C,"_").concat(N,"_").concat(be,".json"),l.click();case 15:case"end":return e.stop()}}),e)}));case 125:if(!H.length){e.next=129;break}return e.delegateYield(ge(),"t0",127);case 127:e.next=125;break;case 129:return je=$.includes(k)?J.toFixed(8)+" "+A:(1.005*J).toFixed(8)+" "+A,null===(r=fr.current)||void 0===r||r.setFieldValue("amountCreate",je),n.success("创建完成"),Et(!1),e.abrupt("return",!0);case 136:e.prev=136,e.t1=e.catch(0),Et(!1),(0,v.Tv)(e.t1,n);case 140:return e.abrupt("return",!0);case 141:case"end":return e.stop()}}),e,null,[[0,136]])})));return function(t){return e.apply(this,arguments)}}(),[c,d,l,D]),yr=(0,H.useCallback)(function(){var e=f()(u()().mark((function e(t){var r;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==Re.length){e.next=3;break}return n.error(sr),e.abrupt("return",!1);case 3:return r=t.disorderSend,e.prev=4,r?Re.sort((function(){return Math.random()-.5})):Re.sort((function(e,t){return e.cid-t.cid})),jr(Re),e.abrupt("return",!0);case 10:e.prev=10,e.t0=e.catch(4),(0,v.Tv)(e.t0,n);case 13:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t){return e.apply(this,arguments)}}(),[Re,jr]),Zr=(0,H.useCallback)(function(){var e=f()(u()().mark((function e(t){var r,a,s,o,i,f,p,m,h,x,b,g,j,k,S,y,Z,w,N,C,F,_,P,A,T,L;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,d&&d.broadcast){e.next=6;break}return n.error("".concat(or)),e.abrupt("return");case 6:if(l){e.next=9;break}return n.error("".concat(cr)),e.abrupt("return");case 9:if("owner"===(a=d.permissionLevel.permission.toString())||"active"===a){e.next=13;break}return n.error("permission权限必须是owner或者active"),e.abrupt("return");case 13:return It(!0),s=t.pidAuto,o=t.countAuto,i=t.disorderAuto,f=t.startAuto,p=t.endAuto,m=Number(s.split("-")[1]),h=d.actor.toString(),e.next=19,c.load("dfs3protocol");case 19:return x=e.sent,b=x.table("registry"),e.next=23,b.all({scope:"dfs3protocol",from:m,to:m,index_position:"secondary",key_type:"i64"});case 23:if(g=e.sent,j=D.filter((function(e){return e.id.toNumber()===m})),k=j[0].init_nft_price.value,S=j[0].init_nft_price.symbol.name,y=j[0].sec_per_round.toNumber(),Z=j[0].last_round.toString(),Z=E().utc(Z).local().format("YYYY-MM-DDTHH:mm:ss"),w=E()(Z).add(y,"seconds").format("YYYY-MM-DDTHH:mm:ss"),"DFS"===S||"USDT"===S||"ORDI"===S){e.next=35;break}return n.error("不支持当前项目"),It(!1),e.abrupt("return");case 35:if(!(f>g.length)){e.next=39;break}return n.error("开始序号超过当前项目最大值".concat(g.length)),It(!1),e.abrupt("return");case 39:if(!p){e.next=48;break}if(!(f>p)){e.next=44;break}return n.error("开始序号超过结束序号"),It(!1),e.abrupt("return");case 44:N=g.length>p?p:g.length,g=g.slice(f-1,N),e.next=49;break;case 48:g=g.slice(f-1);case 49:C=0,F=0,i&&g.sort((function(){return Math.random()-.5})),_=0;case 53:if(!(_<g.length)){e.next=70;break}if(P=g[_].owner.toString(),A=g[_].current_price.value,P!==h){e.next=58;break}return e.abrupt("continue",67);case 58:if(!(A>=2*k)){e.next=60;break}return e.abrupt("continue",67);case 60:if(!(C>=o)){e.next=62;break}return e.abrupt("break",70);case 62:if(!(C>=3e3)){e.next=64;break}return e.abrupt("break",70);case 64:C+=1,T=g[_].current_price.value,F+=T;case 67:++_,e.next=53;break;case 70:return L=$.includes(h)?F.toFixed(8)+" "+S:(1.005*F).toFixed(8)+" "+S,null===(r=mr.current)||void 0===r||r.setFieldValue("amountAuto",L),Be(w),gr(Z,y),lr.current=!1,Gt(!0),e.abrupt("return",!0);case 79:e.prev=79,e.t0=e.catch(0),(0,v.Tv)(e.t0,n);case 82:case"end":return e.stop()}}),e,null,[[0,79]])})));return function(t){return e.apply(this,arguments)}}(),[gr,l,c,d]),wr=(0,H.useCallback)((function(e,t){var r=E()(e).add(t,"seconds").valueOf();at(r)}),[]),Nr=(0,H.useCallback)((function(){var e;if(null!==(e=pr.current)&&void 0!==e&&e.getFieldValue("auto")){if(0===Re.length)return n.error(sr),!1;var t=pr.current.getFieldsValue(),r=t.disorderSend,a=t.repeatSend,s=t.intervalSend;try{r?Re.sort((function(){return Math.random()-.5})):Re.sort((function(e,t){return e.cid-t.cid})),jr(Re);for(var o=1;o<a;o++)setTimeout(jr,s*o,Re);return!0}catch(e){(0,v.Tv)(e,n)}}}),[Re,jr]),Cr=(0,H.useCallback)((function(){var e,t=ir.current;if(0===t.length)return n.error(sr),console.log(sr),!1;var r=null===(e=mr.current)||void 0===e?void 0:e.getFieldsValue(),a=r.disorderAuto,s=r.repeatAuto,o=r.intervalAuto,c=r.loop;try{a?t.sort((function(){return Math.random()-.5})):t.sort((function(e,t){return e.cid-t.cid})),kr(t);for(var i=1;i<s;i++)setTimeout(kr,o*i,t);return c&&(xr.current=setTimeout((function(){var e;return null===(e=mr.current)||void 0===e?void 0:e.submit()}),6e5)),!0}catch(e){(0,v.Tv)(e,n)}}),[qe,kr]),Fr=(0,H.useCallback)(function(){var e=f()(u()().mark((function e(t){var r,s,o,c,i,l,d,f,p,m,h,x,b,g,j;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=15;break}return ur.current={},Zt({}),re(0),G(0),oe(0),ue(0),Ye([]),Ue(""),at(0),Ge(0),xt({}),Pe(0),null===(r=pr.current)||void 0===r||r.setFieldValue("amountSend",""),e.abrupt("return");case 15:e.prev=15,o=[],c=new Set,i=[],l={},d=0,f={infos:{},transactions:[]},p=a()(t),e.prev=23,h=u()().mark((function e(){var t,r;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.value,e.next=3,new Promise((function(e){var r=new FileReader;r.readAsText(t.originFileObj),r.onload=function(){return e(r.result)}}));case 3:r=e.sent,(f=JSON.parse(r)).transactions.forEach((function(e){c.has(e.cid)||(i.push(e),c.add(e.cid))}));case 6:case"end":return e.stop()}}),e)})),p.s();case 26:if((m=p.n()).done){e.next=30;break}return e.delegateYield(h(),"t0",28);case 28:e.next=26;break;case 30:e.next=35;break;case 32:e.prev=32,e.t1=e.catch(23),p.e(e.t1);case 35:return e.prev=35,p.f(),e.finish(35);case 38:x=f.infos.last_round,b=f.infos.sec_per_round,g=E()(x).add(b,"seconds").format("YYYY-MM-DDTHH:mm:ss"),wr(x,b),j=f.infos.token_symbol,i.forEach((function(e){var t=P.uQ.from(e.signedTransaction);o.push({cid:e.cid,nftid:e.nftid,amount:e.amount,from:e.from,signedTransaction:t}),l[e.cid]="default",d+=e.amount})),null===(s=pr.current)||void 0===s||s.setFieldValue("amountSend",d.toFixed(8)+" "+j),ur.current=l,Zt({}),re(0),G(0),oe(0),ue(o.length),Ye(o),Ue(g),Ge(b),xt(f.infos),Pe(0),e.next=61;break;case 58:e.prev=58,e.t2=e.catch(15),(0,v.Tv)(e.t2,n);case 61:case"end":return e.stop()}}),e,null,[[15,58],[23,32,35,38]])})));return function(t){return e.apply(this,arguments)}}(),[wr]),_r=(0,H.useCallback)(function(){var e=f()(u()().mark((function e(t){var r;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("removed"!==t.file.status){e.next=4;break}return Q(t.fileList),Fr(t.fileList),e.abrupt("return");case 4:(r=new FileReader).readAsText(t.fileList[t.fileList.length-1].originFileObj),r.onload=function(){try{JSON.parse(r.result)?(Q(t.fileList),Fr(t.fileList),n.success("".concat(ar))):n.error("".concat(nr))}catch(e){(0,v.Tv)(e,n)}};case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[Fr]),Pr=(0,H.useCallback)((function(){var e;null===(e=pr.current)||void 0===e||e.resetFields(),Q([]),re(0),G(0),oe(0),ue(0),Ye([]),Ue(""),at(0),Ge(0),ur.current={},Zt({}),xt({}),Pe(0),vr()}),[vr]),Ar=(0,H.useCallback)((function(){var e;null===(e=mr.current)||void 0===e||e.resetFields(),be(0),me(0),Se(0),Ne(0),Oe([]),Be(""),it(0),et(0),dr.current={},Ft({}),jt({}),Ve(0),br(),lr.current=!1}),[br]),Tr=(0,H.useCallback)(function(){var t=f()(u()().mark((function t(r){var a,s,o,c,i,l,d,f,p,m,h;return u()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.load("dfs3protocol");case 3:return o=t.sent,c=o.table("projects"),i=o.table("stat"),t.next=8,c.all({scope:"dfs3protocol"});case 8:return l=t.sent,t.next=11,i.all({scope:"dfs3protocol"});case 11:return d=t.sent,t.next=14,Y().get("https://api.dfs.land/dfschain/pppvolume2");case 14:200!==(f=t.sent).status&&n.error("获取pppvolume2数据失败"),p=f.data,m=[],l.forEach((function(e){p.hasOwnProperty(e.id.toString())&&m.push(e)})),m.sort((function(e,t){var r=e.id.toString(),n=t.id.toString();return p[n].volume_24h-p[r].volume_24h})),h={},m.forEach((function(e){var t=e.nft_img,r=e.id.toString(),n=e.project_name,a=e.creator.toString();h["pid-"+r]="".concat(r,"-").concat(n,"-").concat(a,"-").concat(t)})),null===(a=fr.current)||void 0===a||a.setFieldValue("pidCreate",""),null===(s=mr.current)||void 0===s||s.setFieldValue("pidAuto",""),e(x.N.setValueEnum(h)),e(x.N.setProjects(l)),e(x.N.setStats(d)),Qt(!1),t.next=34;break;case 30:t.prev=30,t.t0=t.catch(0),Qt(!1),(0,v.Tv)(t.t0,n);case 34:case"end":return t.stop()}}),t,null,[[0,30]])})));return function(e){return t.apply(this,arguments)}}(),[]),Lr=(0,H.useCallback)((function(){return d&&d.broadcast?l?(Qt(!0),void Tr(c)):(n.error("".concat(cr)),!1):(n.error("".concat(or)),!1)}),[d,l,Tr,c]),Vr=(0,H.useCallback)(f()(u()().mark((function e(){var t,r,a,s,o;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Re.length){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,Tt(!0),t={},e.next=7,c.load("dfs3protocol");case 7:return r=e.sent,a=r.table("registry"),e.next=11,a.all({scope:"dfs3protocol",from:ht.pid,to:ht.pid,index_position:"secondary",key_type:"i64"});case 11:s=e.sent,o=0,Re.forEach((function(e){var r=e.from,n=e.cid;s.filter((function(t){return t.cid.toNumber()===e.cid}))[0].owner.toString()===r?(t[n]="success",o+=1):t[n]="default"})),Pe(o),Zt(t),Tt(!1),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(2),Tt(!1),(0,v.Tv)(e.t0,n);case 23:case"end":return e.stop()}}),e,null,[[2,19]])}))),[c,n,ht,Re]),Mr=(0,H.useCallback)(f()(u()().mark((function e(){var t,r,a,s,o;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(qe.length){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,zt(!0),t={},e.next=7,c.load("dfs3protocol");case 7:return r=e.sent,a=r.table("registry"),e.next=11,a.all({scope:"dfs3protocol",from:gt.pid,to:gt.pid,index_position:"secondary",key_type:"i64"});case 11:s=e.sent,o=0,qe.forEach((function(e){var r=e.from,n=e.cid;s.filter((function(t){return t.cid.toNumber()===e.cid}))[0].owner.toString()===r?(t[n]="success",o+=1):t[n]="default"})),Ve(o),Ft(t),zt(!1),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(2),zt(!1),(0,v.Tv)(e.t0,n);case 23:case"end":return e.stop()}}),e,null,[[2,19]])}))),[c,n,gt,qe]),zr=(0,H.useCallback)((function(e){if(e.hasOwnProperty("countCreate")){var t,r,a=null===(t=fr.current)||void 0===t?void 0:t.getFieldValue("pidCreate");if(!a)return;var s,o=e.countCreate,c=a.split("-")[1],i=q.filter((function(e){return e.cid.toString()===c}))[0].supply.toNumber();if(o>i)return n.error("购买数量超过当前项目最大值".concat(i)),void(null===(s=fr.current)||void 0===s||s.setFieldValue("startCreate",1));var l=Math.ceil(Math.random()*(i-o));null===(r=fr.current)||void 0===r||r.setFieldValue("startCreate",l)}}),[q,n]),Rr=(0,H.useCallback)((function(e){if(e.hasOwnProperty("countAuto")){var t,r,a=null===(t=mr.current)||void 0===t?void 0:t.getFieldValue("pidAuto");if(!a)return;var s,o=e.countAuto,c=a.split("-")[1],i=q.filter((function(e){return e.cid.toString()===c}))[0].supply.toNumber();if(o>i)return n.error("购买数量超过当前项目最大值".concat(i)),void(null===(s=mr.current)||void 0===s||s.setFieldValue("startAuto",1));var l=Math.ceil(Math.random()*(i-o));null===(r=mr.current)||void 0===r||r.setFieldValue("startAuto",l)}}),[q,n]),Yr=(0,H.useCallback)(f()(u()().mark((function e(){var t,r,a,s,f,h,x,b,g,j,k,S,y,Z,w,N,C,F,_,A,T,L,V,M,z,R,Y,q,O,H,I,U,J,Q,W,B,K,G,X,ee,te,re,ne,ae,se,oe,ce,ie,le,ue,de,fe,pe,he,xe;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,d&&d.broadcast){e.next=7;break}return n.error("".concat(or)),console.log(or),e.abrupt("return");case 7:if(l){e.next=11;break}return n.error("".concat(cr)),console.log(cr),e.abrupt("return");case 11:if("owner"===(a=d.permissionLevel.permission.toString())||"active"===a){e.next=16;break}return n.error("permission权限必须是owner或者active"),console.log("permission权限必须是owner或者active"),e.abrupt("return");case 16:return It(!0),s=null===(t=mr.current)||void 0===t?void 0:t.getFieldsValue(),f=s.pidAuto,h=s.countAuto,x=s.disorderAuto,b=s.startAuto,g=s.endAuto,j=Number(f.split("-")[1]),k=d.actor.toString(),e.next=22,c.load("dfs3protocol");case 22:return S=e.sent,y=S.table("registry"),e.next=26,y.all({scope:"dfs3protocol",from:j,to:j,index_position:"secondary",key_type:"i64"});case 26:if(Z=e.sent,w=D.filter((function(e){return e.id.toNumber()===j})),N=w[0].creator.toString(),C=w[0].nft_name.toString(),F=w[0].project_name,_=w[0].init_nft_price.value,A=w[0].init_nft_price.symbol.name,T="","DFS"!==A){e.next=38;break}T="eosio.token",e.next=50;break;case 38:if("USDT"!==A){e.next=42;break}T="usdtusdtusdt",e.next=50;break;case 42:if("ORDI"!==A){e.next=46;break}T="ordiordiordi",e.next=50;break;case 46:return n.error("不支持当前项目"),It(!1),console.log("不支持当前项目"),e.abrupt("return");case 50:if(!(b>Z.length)){e.next=55;break}return n.error("开始序号超过当前项目最大值".concat(Z.length)),It(!1),console.log("开始序号超过当前项目最大值".concat(Z.length)),e.abrupt("return");case 55:if(!g){e.next=64;break}if(!(b>g)){e.next=60;break}return n.error("开始序号超过结束序号"),It(!1),e.abrupt("return");case 60:L=Z.length>g?g:Z.length,Z=Z.slice(b-1,L),e.next=65;break;case 64:Z=Z.slice(b-1);case 65:return V={account:"dfsfreecpu11",name:"freecpu",authorization:[{actor:"dfs.service",permission:"cpu"},d.permissionLevel],data:v._9.from({user:k})},M=P.aU.from(V),e.next=69,d.client.v1.chain.get_info();case 69:z=e.sent,R=z.getTransactionHeader(),Y=E()(),q=[],O={},H=0,I="",U=0,x&&Z.sort((function(){return Math.random()-.5})),J=0;case 79:if(!(J<Z.length)){e.next=126;break}if(Q=Z[J].owner.toString(),W=Z[J].current_price.value,Q!==k){e.next=84;break}return e.abrupt("continue",123);case 84:if(!(W>=2*_)){e.next=86;break}return e.abrupt("continue",123);case 86:if(!(H>=h)){e.next=88;break}return e.abrupt("break",126);case 88:if(!(H>=3e3)){e.next=90;break}return e.abrupt("break",126);case 90:return I=E()(Y).add(3600-H++,"seconds").utc().format("YYYY-MM-DDTHH:mm:ss"),B=Z[J].current_price.toString(),K=Z[J].current_price.value,G=Z[J].current_price.symbol,X=P.xR.from(.005*K,G),ee="buy:"+Z[J].id.toString(),U+=K,te={account:T,name:"transfer",authorization:[d.permissionLevel],data:v.FE.from({from:k,to:"dfs3protocol",quantity:B,memo:ee})},re=P.aU.from(te),ne={account:T,name:"transfer",authorization:[d.permissionLevel],data:v.FE.from({from:k,to:"davidaccount",quantity:X,memo:"fee"})},ae=P.aU.from(ne),se=void 0,oe=void 0,ce=[],ie=$.includes(k)?[M,re]:[M,re,ae],se=P.YW.from(i()(i()({},R),{},{expiration:I,actions:ie})),ce[0]=p.signDigest(se.signingDigest(d.chain.id.toString())),e.next=109,(0,v.zI)(d.transact({transaction:se},{broadcast:!1,transactPlugins:[]}));case 109:if(le=e.sent,ue=m()(le,2),de=ue[0],fe=ue[1],!de){e.next=118;break}return n.error(de),It(!1),console.log(de),e.abrupt("return");case 118:oe=P.uQ.from(i()(i()({},se),{},{signatures:[].concat(ce,o()(fe.signatures))})),pe=Z[J].cid.toNumber(),he=Z[J].id.toNumber(),O[pe]="default",q.push({signedTransaction:oe,cid:pe,nftid:he,amount:K,from:k});case 123:++J,e.next=79;break;case 126:xe=$.includes(k)?U.toFixed(8)+" "+A:(1.005*U).toFixed(8)+" "+A,null===(r=mr.current)||void 0===r||r.setFieldValue("amountAuto",xe),dr.current=O,Ft({}),be(0),me(0),Se(0),Ne(q.length),Oe(q),ir.current=q,Ve(0),jt({pid:j,creator:N,nft_name:C,project_name:F}),Ve(0),n.success("创建完成"),It(!1),console.log("创建完成"),e.next=149;break;case 144:e.prev=144,e.t0=e.catch(0),It(!1),(0,v.Tv)(e.t0,n),console.log(e.t0);case 149:case"end":return e.stop()}}),e,null,[[0,144]])}))),[c,d,l]),Dr=(0,H.useCallback)((function(e){e<18e5&&!lr.current&&(lr.current=!0,Yr())}),[Yr]),Er=(0,H.useCallback)((function(){Gt(!1),it(0),xr.current&&clearTimeout(xr.current)}),[]),qr=(0,H.useCallback)((function(){var e=["dfsnetworkio","dfsnetworkbp","testaccount1","testaccount2","testaccount3","jiudaojiudao","manjianetvip","manjianetmkt","beacqvxxtryr","iloveugzhiyi"];if(dt){if(l){var t=l.accountName.toString();return!!e.includes(t)||(ft(!1),!1)}return!0}if(l){var r=l.accountName.toString();return!!e.includes(r)&&(ft(!0),!0)}return!1}),[l,dt]);return(0,H.useEffect)((function(){!c||Object.keys(R).length||Jt||(Qt(!0),Tr(c))}),[Tr,R,c,Jt]),(0,I.jsx)(k._z,{className:"",ghost:!0,children:qr()?(0,I.jsxs)("div",{className:"flex flex-wrap justify-start gap-5 items-start",children:[(0,I.jsxs)(S.Z,{children:[(0,I.jsx)("div",{className:"mb-2 font-semibold",children:"使用说明："}),(0,I.jsx)("div",{children:"1. 操作方式如下："}),(0,I.jsx)("div",{className:"ml-3",children:"a）批量交易："}),(0,I.jsxs)("div",{className:"ml-8",children:["连接钱包 ",(0,I.jsx)(b.Z,{})," 创建交易 ",(0,I.jsx)(b.Z,{})," ","发送交易"]}),(0,I.jsxs)("div",{className:"ml-12",children:["创建交易： 选择项目 ",(0,I.jsx)(b.Z,{})," 输入购买数量"," ",(0,I.jsx)(b.Z,{})," 点击创建按钮 ",(0,I.jsx)(b.Z,{})," ","保存交易文件"]}),(0,I.jsxs)("div",{className:"ml-12",children:["发送交易：上传交易文件 ",(0,I.jsx)(b.Z,{})," 等待倒计时结束"]}),(0,I.jsx)("div",{className:"ml-3",children:"b）自动交易："}),(0,I.jsxs)("div",{className:"ml-8",children:['进入"工具-简易钱包"页面 ',(0,I.jsx)(b.Z,{})," 导入私钥"," ",(0,I.jsx)(b.Z,{})," 点击右上角钱包图标 ",(0,I.jsx)(b.Z,{})," ","选择账号连接"]}),(0,I.jsxs)("div",{className:"ml-8",children:['进入"工具-PPP"页面 ',(0,I.jsx)(b.Z,{})," ",'选择"自动交易"表格 ',(0,I.jsx)(b.Z,{})," 选择项目"," ",(0,I.jsx)(b.Z,{})," 输入购买数量 ",(0,I.jsx)(b.Z,{})," ","点击启动按钮"]}),(0,I.jsx)("div",{children:"2. 注意事项："}),(0,I.jsx)("div",{className:"ml-3",children:"a）批量交易方式中，交易文件的有效时间是一个小时，所以要在购买前一个小时内提前生成；"}),(0,I.jsx)("div",{className:"ml-3",children:"b）批量交易方式中，交易文件的生成过程中，需要用户重复进行多次签名，虽然繁琐，但很安全，无需用户导入私钥；"}),(0,I.jsx)("div",{className:"ml-3",children:"c）自动交易方式中，需要用户导入私钥才可以正常执行。私钥只保存在浏览器的数据库中，不会上传到服务器，请评估好风险后再使用。"}),(0,I.jsx)("div",{children:"3. 费用说明："}),(0,I.jsx)("div",{className:"ml-3",children:"使用工具抢到的NFT，每个收取0.5%费用。例如工具抢到一个价值为100 DFS的NFT，则工具会收取0.5 DFS作为费用，抢购成功了，才会收取。"})]}),(0,I.jsx)(S.Z,{title:(0,I.jsx)("div",{className:" font-semibold text-lg hardline",children:"创建交易"}),style:{width:"400px"},children:(0,I.jsxs)(y.A,{formRef:fr,onFinish:Sr,onValuesChange:zr,layout:"vertical",loading:Dt,initialValues:{disorderCreate:!0,split:1,startCreate:1},submitter:{searchConfig:{submitText:"创建"},render:function(e,t){return[t[1],t[0]]}},children:[(0,I.jsx)(Z.Z,{name:"pidCreate",label:(0,I.jsxs)("div",{children:["项目",(0,I.jsx)(g.Z,{spin:Jt,className:"ml-[8px] hover:cursor-pointer",style:{color:"#1677ff"},onClick:Lr})]}),valueEnum:R,placeholder:"",rules:[{required:!0,whitespace:!0,message:"".concat(er),pattern:/^.+$/}],fieldProps:{size:"large",autoFocus:!1,showSearch:!0,filterOption:function(e,t){var r=t.label.split("-"),n=m()(r,3),a=n[0],s=n[1],o=n[2];return(a.padStart(3,"0")+s+o).toLowerCase().includes(e.toLowerCase())},optionItemRender:function(e){var t=e.label.split("-"),r=m()(t,4),n=r[0],a=r[1],s=r[2],o=r[3];return(0,I.jsxs)("div",{className:"flex items-center",children:[(0,I.jsx)("div",{className:"mr-2",children:n.padStart(3,"0")}),(0,I.jsx)(T.C,{className:"mr-2",size:"default",src:o}),(0,I.jsxs)("div",{children:[a," @",s]})]})}}}),(0,I.jsx)(w.Z,{label:"购买数量",name:"countCreate",placeholder:"",min:1,rules:[{required:!0,message:"".concat(er),whitespace:!0,pattern:/^\d+$/}],fieldProps:{autoFocus:!1,size:"large"}}),(0,I.jsx)(w.Z,{label:(0,I.jsxs)("div",{children:["开始序号#",(0,I.jsx)(L.Z,{placement:"topLeft",title:"从具体某个序号开始进行购买",children:(0,I.jsx)(j.Z,{className:"ml-[8px] hover:cursor-pointer",style:{color:"#1677ff"}})})]}),name:"startCreate",placeholder:"",min:1,rules:[{required:!0,message:"".concat(er),whitespace:!0,pattern:/^\d+$/}],fieldProps:{autoFocus:!1,size:"large",defaultValue:1}}),(0,I.jsx)(w.Z,{label:(0,I.jsxs)("div",{children:["结束序号#",(0,I.jsx)(L.Z,{placement:"topLeft",title:"只购买当前序号之前的NFT",children:(0,I.jsx)(j.Z,{className:"ml-[8px] hover:cursor-pointer",style:{color:"#1677ff"}})})]}),name:"endCreate",placeholder:"可选，默认是当前序号的最大值",min:1,rules:[{required:!1,message:"".concat(er),whitespace:!0,pattern:/^\d+$/}],fieldProps:{autoFocus:!1,size:"large"}}),(0,I.jsx)(w.Z,{label:(0,I.jsxs)("div",{children:["拆分文件数量",(0,I.jsx)(L.Z,{placement:"topLeft",title:"将所有交易信息拆分成多个文件来保存",children:(0,I.jsx)(j.Z,{className:"ml-[8px] hover:cursor-pointer",style:{color:"#1677ff"}})})]}),name:"split",placeholder:"",min:1,rules:[{required:!0,message:"".concat(er),whitespace:!0,pattern:/^\d+$/}],fieldProps:{autoFocus:!1,size:"large",defaultValue:1}}),(0,I.jsx)(N.Z,{name:"disorderCreate",label:(0,I.jsxs)("div",{children:["是否乱序",(0,I.jsx)(L.Z,{placement:"topLeft",title:"是否以乱序的方式来进行购买",children:(0,I.jsx)(j.Z,{className:"ml-[8px] hover:cursor-pointer",style:{color:"#1677ff"}})})]}),rules:[{required:!0,message:"".concat(er),whitespace:!0,pattern:/^true|false$/}],fieldProps:{autoFocus:!1,defaultValue:!0}}),(0,I.jsx)(C.Z,{name:"amountCreate",label:(0,I.jsxs)("div",{children:["总金额",(0,I.jsx)(L.Z,{placement:"topLeft",title:"此次全部交易所需要的总金额，包含手续费。",children:(0,I.jsx)(j.Z,{className:"ml-[8px] hover:cursor-pointer",style:{color:"#1677ff"}})})]}),placeholder:"自动生成，无需输入",fieldProps:{size:"large",autoFocus:!1,defaultValue:"",readOnly:!0}}),(0,I.jsx)("div",{className:" text-red-600 text-lg mb-3",children:"注意：交易文件只在一个小时内有效！"}),s]})}),(0,I.jsx)(S.Z,{title:(0,I.jsx)("div",{className:" font-semibold text-lg hardline",children:tr}),style:{width:"400px"},children:(0,I.jsxs)(y.A,{formRef:pr,onFinish:yr,onReset:Pr,submitter:{searchConfig:{submitText:rr},render:function(e,t){return[t[1],(0,I.jsx)(V.ZP,{loading:At,onClick:Vr,children:"校对"},"check"),t[0]]}},initialValues:{disorderSend:!0,auto:!0,repeatSend:10,intervalSend:1e3},children:[(0,I.jsx)(F.Z,{label:"交易文件",name:"transactionInfo",action:"upload.do",fieldProps:{accept:".json",onChange:_r,beforeUpload:function(){return!1},listType:"picture",onPreview:function(e){return hr.current.handleOpen(e)},fileList:J},rules:[{required:!0,whitespace:!0,message:"".concat(er),pattern:/.*/}]}),(0,I.jsx)(w.Z,{label:(0,I.jsxs)("div",{children:["整体重复发送次数",(0,I.jsx)(L.Z,{placement:"topLeft",title:"整体全部发送完成算一次，这里指定重复次数。重复发送失败了，不会影响金额",children:(0,I.jsx)(j.Z,{className:"ml-[8px] hover:cursor-pointer",style:{color:"#1677ff"}})})]}),name:"repeatSend",placeholder:"",min:1,max:20,rules:[{required:!0,message:"".concat(er),whitespace:!0,pattern:/^\d+$/}],fieldProps:{autoFocus:!1,size:"large",defaultValue:10}}),(0,I.jsx)(w.Z,{label:(0,I.jsxs)("div",{children:["整体重复发送间隔(ms)",(0,I.jsx)(L.Z,{placement:"topLeft",title:"整体全部发送完成算一次，这里指定重复的间隔时间",children:(0,I.jsx)(j.Z,{className:"ml-[8px] hover:cursor-pointer",style:{color:"#1677ff"}})})]}),name:"intervalSend",placeholder:"",min:300,rules:[{required:!0,message:"".concat(er),whitespace:!0,pattern:/^\d+$/}],fieldProps:{autoFocus:!1,size:"large",defaultValue:1e3}}),(0,I.jsx)(N.Z,{name:"disorderSend",label:(0,I.jsxs)("div",{children:["是否乱序",(0,I.jsx)(L.Z,{placement:"topLeft",title:"是否以乱序的方式来发送交易",children:(0,I.jsx)(j.Z,{className:"ml-[8px] hover:cursor-pointer",style:{color:"#1677ff"}})})]}),rules:[{required:!0,message:"".concat(er),whitespace:!0,pattern:/^true|false$/}],fieldProps:{autoFocus:!1,defaultValue:!0}}),(0,I.jsx)(N.Z,{name:"auto",label:(0,I.jsxs)("div",{children:["是否自动发送",(0,I.jsx)(L.Z,{placement:"topLeft",title:"倒计时结束后，是否自动发送交易。开启与否，不影响手动操作来发",children:(0,I.jsx)(j.Z,{className:"ml-[8px] hover:cursor-pointer",style:{color:"#1677ff"}})})]}),rules:[{required:!0,message:"".concat(er),whitespace:!0,pattern:/^true|false$/}],fieldProps:{autoFocus:!1,defaultValue:!0}}),(0,I.jsx)(C.Z,{name:"amountSend",label:(0,I.jsxs)("div",{children:["总金额",(0,I.jsx)(L.Z,{placement:"topLeft",title:"此次全部交易所需要的总金额，包含手续费",children:(0,I.jsx)(j.Z,{className:"ml-[8px] hover:cursor-pointer",style:{color:"#1677ff"}})})]}),placeholder:"自动生成，无需输入",fieldProps:{size:"large",autoFocus:!1,defaultValue:"",readOnly:!0}}),(0,I.jsx)(y.A.Item,{label:(0,I.jsxs)("div",{className:" font-semibold text-lg ",children:[(0,I.jsx)("span",{className:"hardline",children:"倒计时 "}),ht.pid?"(".concat(ht.pid,"-").concat(ht.project_name," @").concat(ht.creator,")"):""]}),children:(0,I.jsxs)("div",{className:"flex items-center gap-x-5",children:[(0,I.jsx)(M.Z.Countdown,{value:nt,onFinish:Nr}),(0,I.jsx)("div",{className:"text-xl",children:"".concat($e)})]})}),(0,I.jsxs)(y.A.Item,{label:(0,I.jsxs)("div",{className:" font-semibold text-lg hardline",children:[(0,I.jsx)("span",{children:"结果 "}),Re.length?"(".concat(Re.length,")"):""]}),children:[(0,I.jsx)("div",{children:"成功：".concat(K,"，失败：").concat(te,"，处理中：").concat(se,"，待处理：").concat(le)}),!!Re.length&&(0,I.jsx)("div",{className:"flex flex-wrap gap-5 mt-3",children:Object.keys(ur.current).map((function(e,t){return(0,I.jsx)(z.Z,{color:ur.current[e],children:"#".concat(e)},t)}))})]}),(0,I.jsxs)(y.A.Item,{label:(0,I.jsx)("div",{className:" font-semibold text-lg hardline",children:(0,I.jsxs)("div",{children:[(0,I.jsx)("span",{children:"校对 "}),Re.length?"(".concat(Re.length,")"):"",(0,I.jsx)(L.Z,{placement:"topLeft",title:"交易结束后，可点击校对按钮，判断交易结果是否跟链上数据匹配",children:(0,I.jsx)(j.Z,{className:"ml-[8px] hover:cursor-pointer",style:{color:"#1677ff"}})})]})}),children:[(0,I.jsx)("div",{children:"拥有：".concat(_e)}),!!Re.length&&(0,I.jsx)("div",{className:"flex flex-wrap gap-5 mt-3",children:Object.keys(yt).map((function(e,t){return(0,I.jsx)(z.Z,{color:yt[e],children:"#".concat(e)},t)}))})]})]})}),(0,I.jsxs)(S.Z,{title:(0,I.jsxs)("div",{className:" font-semibold text-lg hardline",children:["自动交易",(0,I.jsx)(L.Z,{placement:"topLeft",title:'需要在"工具-简易钱包"页面中导入私钥，然后点击右上角的钱包图标进行连接后，才能正常使用',children:(0,I.jsx)(j.Z,{className:"ml-[8px] hover:cursor-pointer",style:{color:"#1677ff"}})})]}),style:{width:"400px"},children:[(0,I.jsxs)(y.A,{formRef:mr,onFinish:Zr,onValuesChange:Rr,onReset:Ar,loading:Ht,disabled:Kt,layout:"vertical",initialValues:{disorderAuto:!0,startAuto:1,repeatAuto:10,intervalAuto:1e3,loop:!0},submitter:{searchConfig:{submitText:"启动"},render:function(e,t){return[t[1],t[0]]}},children:[(0,I.jsx)(Z.Z,{name:"pidAuto",label:(0,I.jsxs)("div",{children:["项目",(0,I.jsx)(g.Z,{spin:Jt,className:"ml-[8px] hover:cursor-pointer",style:{color:"#1677ff"},onClick:Lr})]}),valueEnum:R,placeholder:"",rules:[{required:!0,whitespace:!0,message:"".concat(er),pattern:/^.+$/}],fieldProps:{size:"large",autoFocus:!1,showSearch:!0,filterOption:function(e,t){var r=t.label.split("-"),n=m()(r,3),a=n[0],s=n[1],o=n[2];return(a.padStart(3,"0")+s+o).toLowerCase().includes(e.toLowerCase())},optionItemRender:function(e){var t=e.label.split("-"),r=m()(t,4),n=r[0],a=r[1],s=r[2],o=r[3];return(0,I.jsxs)("div",{className:"flex items-center",children:[(0,I.jsx)("div",{className:"mr-2",children:n.padStart(3,"0")}),(0,I.jsx)(T.C,{className:"mr-2",size:"default",src:o}),(0,I.jsxs)("div",{children:[a," @",s]})]})}}}),(0,I.jsx)(w.Z,{label:"购买数量",name:"countAuto",placeholder:"",min:1,rules:[{required:!0,message:"".concat(er),whitespace:!0,pattern:/^\d+$/}],fieldProps:{autoFocus:!1,size:"large"}}),(0,I.jsx)(w.Z,{label:(0,I.jsxs)("div",{children:["开始序号#",(0,I.jsx)(L.Z,{placement:"topLeft",title:"从具体某个序号开始进行购买",children:(0,I.jsx)(j.Z,{className:"ml-[8px] hover:cursor-pointer",style:{color:"#1677ff"}})})]}),name:"startAuto",placeholder:"",min:1,rules:[{required:!0,message:"".concat(er),whitespace:!0,pattern:/^\d+$/}],fieldProps:{autoFocus:!1,size:"large",defaultValue:1}}),(0,I.jsx)(w.Z,{label:(0,I.jsxs)("div",{children:["结束序号#",(0,I.jsx)(L.Z,{placement:"topLeft",title:"只购买当前序号之前的NFT",children:(0,I.jsx)(j.Z,{className:"ml-[8px] hover:cursor-pointer",style:{color:"#1677ff"}})})]}),name:"endAuto",placeholder:"可选，默认是当前序号的最大值",min:1,rules:[{required:!1,message:"".concat(er),whitespace:!0,pattern:/^\d+$/}],fieldProps:{autoFocus:!1,size:"large"}}),(0,I.jsx)(w.Z,{label:(0,I.jsxs)("div",{children:["整体重复发送次数",(0,I.jsx)(L.Z,{placement:"topLeft",title:"整体全部发送完成算一次，这里指定重复次数。重复发送失败了，不会影响金额",children:(0,I.jsx)(j.Z,{className:"ml-[8px] hover:cursor-pointer",style:{color:"#1677ff"}})})]}),name:"repeatAuto",placeholder:"",min:1,max:20,rules:[{required:!0,message:"".concat(er),whitespace:!0,pattern:/^\d+$/}],fieldProps:{autoFocus:!1,size:"large",defaultValue:10}}),(0,I.jsx)(w.Z,{label:(0,I.jsxs)("div",{children:["整体重复发送间隔(ms)",(0,I.jsx)(L.Z,{placement:"topLeft",title:"整体全部发送完成算一次，这里指定重复的间隔时间",children:(0,I.jsx)(j.Z,{className:"ml-[8px] hover:cursor-pointer",style:{color:"#1677ff"}})})]}),name:"intervalAuto",placeholder:"",min:300,rules:[{required:!0,message:"".concat(er),whitespace:!0,pattern:/^\d+$/}],fieldProps:{autoFocus:!1,size:"large",defaultValue:1e3}}),(0,I.jsx)(N.Z,{name:"disorderAuto",label:(0,I.jsxs)("div",{children:["是否乱序",(0,I.jsx)(L.Z,{placement:"topLeft",title:"是否以乱序的方式来发送交易",children:(0,I.jsx)(j.Z,{className:"ml-[8px] hover:cursor-pointer",style:{color:"#1677ff"}})})]}),rules:[{required:!0,message:"".concat(er),whitespace:!0,pattern:/^true|false$/}],fieldProps:{autoFocus:!1,defaultValue:!0}}),(0,I.jsx)(N.Z,{name:"loop",label:(0,I.jsxs)("div",{children:["是否循环运行",(0,I.jsx)(L.Z,{placement:"topLeft",title:"当前轮次运行完后，是否进行下一轮运行",children:(0,I.jsx)(j.Z,{className:"ml-[8px] hover:cursor-pointer",style:{color:"#1677ff"}})})]}),rules:[{required:!0,message:"".concat(er),whitespace:!0,pattern:/^true|false$/}],fieldProps:{autoFocus:!1,defaultValue:!0}}),(0,I.jsx)(C.Z,{name:"amountAuto",label:(0,I.jsxs)("div",{children:["总金额",(0,I.jsx)(L.Z,{placement:"topLeft",title:"此次全部交易所需要的总金额，包含手续费。",children:(0,I.jsx)(j.Z,{className:"ml-[8px] hover:cursor-pointer",style:{color:"#1677ff"}})})]}),placeholder:"自动生成，无需输入",fieldProps:{size:"large",autoFocus:!1,defaultValue:"",readOnly:!0}}),(0,I.jsx)(y.A.Item,{label:(0,I.jsxs)("div",{className:" font-semibold text-lg ",children:[(0,I.jsx)("span",{className:"hardline",children:"倒计时 "}),gt.pid?"(".concat(gt.pid,"-").concat(gt.project_name," @").concat(gt.creator,")"):""]}),children:(0,I.jsxs)("div",{className:"flex items-center gap-x-5",children:[(0,I.jsx)(M.Z.Countdown,{value:ct,onFinish:Cr,onChange:Dr}),(0,I.jsx)("div",{className:"text-xl",children:"".concat(We)})]})}),(0,I.jsxs)(y.A.Item,{label:(0,I.jsxs)("div",{className:" font-semibold text-lg hardline",children:[(0,I.jsx)("span",{children:"结果 "}),qe.length?"(".concat(qe.length,")"):""]}),children:[(0,I.jsx)("div",{children:"成功：".concat(pe,"，失败：").concat(ve,"，处理中：").concat(ke,"，待处理：").concat(we)}),!!qe.length&&(0,I.jsx)("div",{className:"flex flex-wrap gap-5 mt-3",children:Object.keys(dr.current).map((function(e,t){return(0,I.jsx)(z.Z,{color:dr.current[e],children:"#".concat(e)},t)}))})]}),(0,I.jsxs)(y.A.Item,{label:(0,I.jsx)("div",{className:" font-semibold text-lg hardline",children:(0,I.jsxs)("div",{children:[(0,I.jsx)("span",{children:"校对 "}),qe.length?"(".concat(qe.length,")"):"",(0,I.jsx)(L.Z,{placement:"topLeft",title:"交易结束后，可点击校对按钮，判断交易结果是否跟链上数据匹配",children:(0,I.jsx)(j.Z,{className:"ml-[8px] hover:cursor-pointer",style:{color:"#1677ff"}})})]})}),children:[(0,I.jsx)("div",{children:"拥有：".concat(Le)}),!!qe.length&&(0,I.jsx)("div",{className:"flex flex-wrap gap-5 mt-3",children:Object.keys(Ct).map((function(e,t){return(0,I.jsx)(z.Z,{color:Ct[e],children:"#".concat(e)},t)}))})]})]}),(0,I.jsxs)("div",{className:"mt-2 ",children:[(0,I.jsx)(V.ZP,{type:"primary",className:"mr-2",onClick:Er,children:"停止"}),(0,I.jsx)(V.ZP,{loading:Mt,onClick:Mr,children:"校对"})]})]}),s,(0,I.jsx)(h.s,{ref:hr})]}):(0,I.jsx)(I.Fragment,{})})}},64599:function(e,t,r){var n=r(96263);e.exports=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=n(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var a=0,s=function(){};return{s:s,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return c=e.done,e},e:function(e){i=!0,o=e},f:function(){try{c||null==r.return||r.return()}finally{if(i)throw o}}}},e.exports.__esModule=!0,e.exports.default=e.exports}}]);
