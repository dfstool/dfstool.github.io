"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[545],{98747:function(e,n,t){t.d(n,{gb:function(){return w},ot:function(){return y.Z},_h:function(){return O.Z}});var r=t(15009),s=t.n(r),a=t(99289),c=t.n(a),i=t(5574),l=t.n(i),o=t(64119),u=t(37476),d=t(98097),f=t(59530),x=t(45360),p=t(27484),h=t.n(p),v=t(38823),m=t.n(v),j=t(70178),g=t.n(j),S=t(62435),b=t(86074);h().extend(g()),h().extend(m());var k=S.forwardRef((function(e,n){var t=x.ZP.useMessage(),r=l()(t,2),a=r[0],i=r[1],p=(0,f.useSelector)((function(e){return e.global.contractKit})),v=(0,S.useState)(),m=l()(v,2),j=m[0],g=m[1],k=(0,S.useState)(),w=l()(k,2),y=w[0],O=w[1],D=(0,S.useRef)(),N=(0,S.useState)(!1),F=l()(N,2),C=F[0],I=F[1],Z=(0,S.useState)(!0),_=l()(Z,2),M=_[0],K=_[1],R=(0,S.useCallback)(function(){var e=c()(s()().mark((function e(n,t){var r,c,i;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.load("dfsweb3desoc");case 3:return r=e.sent,c=r.table("profiles"),e.next=7,c.all({scope:"dfsweb3desoc",from:t.voter.toString(),to:t.voter.toString()});case 7:i=e.sent,g(i[0]),K(!1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),(0,o.Tv)(e.t0,a);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(n,t){return e.apply(this,arguments)}}(),[a]),T=(0,S.useCallback)((function(e){R(p,e),O(e),I(!0)}),[p]);(0,S.useImperativeHandle)(n,(function(){return{handleOpen:T}}));var z=(0,S.useCallback)(c()(s()().mark((function e(){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)}))),[]),E=(0,S.useCallback)((function(e){return e?"DFSNode.Online - 广州"===e?"DFSOnline-广州@":"DFSNode.Online - 杭州"===e?"DFSOnline-杭州@":"DFSNode.Online - 香港"===e?"DFSOnline-香港@":"DFSNode.Online - 张家口"===e?"DFSOnline-张家口@":"DFSNode.Online - 呼和浩特"===e?"DFSOnline-呼和浩特@":"DFS-美国弗吉尼亚-Node"===e?"DFS-美国弗吉尼亚@":"DFS-北京节点（持续在线）"===e?"DFS-北京节点@":"DFS-广州（持续在线）"===e?"DFS-广州@":e+"@":""}),[]),P=(0,S.useMemo)((function(){return[{title:"sex",dataIndex:"sex",key:"sex",render:function(e,n){return Object.keys(n).length?(0,b.jsx)("span",{children:n.sex.toNumber()}):(0,b.jsx)("span",{children:"null"})}},{title:"cover",dataIndex:"cover",key:"cover",render:function(e,n){return Object.keys(n).length?(0,b.jsx)("span",{children:n.cover}):(0,b.jsx)("span",{children:"null"})}},{title:"desc",dataIndex:"desc",key:"desc",render:function(e,n){return Object.keys(n).length?(0,b.jsx)("span",{children:n.desc}):(0,b.jsx)("span",{children:"null"})}},{title:"avatar",dataIndex:"avatar",key:"avatar",render:function(e,n){return Object.keys(n).length?(0,b.jsx)("span",{children:n.avatar}):(0,b.jsx)("span",{children:"null"})}},{title:"join",dataIndex:"join",key:"join",render:function(e,n){return Object.keys(n).length?(0,b.jsx)("span",{children:h().utc(n.join.toString()).local().format()}):(0,b.jsx)("span",{children:"null"})}},{title:"update",dataIndex:"update",key:"update",render:function(e,n){return Object.keys(n).length?(0,b.jsx)("span",{children:h().utc(n.update.toString()).local().format()}):(0,b.jsx)("span",{children:"null"})}}]}),[]);return(0,b.jsxs)(u.Y,{formRef:D,title:"",open:C,onFinish:z,onOpenChange:function(e){I(e)},layout:"horizontal",width:"350px",submitter:!1,children:[(0,b.jsx)(d.vY,{title:(0,b.jsx)("div",{className:"flex items-center",children:(0,b.jsx)("div",{className:"",children:E(null==j?void 0:j.nick)+(null==y?void 0:y.voter.toString())})}),loading:M,column:1,dataSource:j,columns:P}),i]})})),w=(0,S.memo)(k),y=t(95260),O=t(98531)},50390:function(e,n,t){t.r(n);var r=t(15009),s=t.n(r),a=t(99289),c=t.n(a),i=t(5574),l=t.n(i),o=t(19064),u=t(51869),d=t(39417),f=t(98747),x=t(19601),p=t(64119),h=t(11774),v=t(38345),m=t(59530),j=t(45360),g=t(2487),S=t(62435),b=t(86074);n.default=function(){var e=(0,m.useDispatch)(),n=j.ZP.useMessage(),t=l()(n,2),r=t[0],a=t[1],i=(0,m.useSelector)((function(e){return e.global.contractKit})),k=(0,S.useState)(!1),w=l()(k,2),y=w[0],O=w[1],D=(0,m.useSelector)((function(e){return e.vote.kingDataSource})),N=(0,S.useRef)(),F=(0,m.useIntl)().formatMessage({id:"vote.intlTheKingOfVotes"}),C=(0,S.useCallback)(function(){var n=c()(s()().mark((function n(t){var a,c,i,l;return s()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.load("dfsbpsvoters");case 3:return a=n.sent,c=a.table("voters"),n.next=7,c.all();case 7:i=n.sent,(l=i.sort((function(e,n){return n.vote_power.value-e.vote_power.value}))).forEach((function(e,n){l[n].rank=n+1})),e(x.N.setKingDataSource(l)),O(!1),n.next=18;break;case 14:n.prev=14,n.t0=n.catch(0),O(!1),(0,p.Tv)(n.t0,r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})));return function(e){return n.apply(this,arguments)}}(),[r]),I=(0,S.useCallback)((function(e,n){return 1===e?(0,b.jsxs)("div",{className:"flex items-center ml-[-8px] font-semibold text-lg",children:[(0,b.jsx)("img",{src:o,width:"40px"}),n]}):2===e?(0,b.jsxs)("div",{className:"flex items-center ml-[-8px] font-semibold text-lg",children:[(0,b.jsx)("img",{src:d,width:"40px"}),n]}):3===e?(0,b.jsxs)("div",{className:"flex items-center ml-[-8px] font-semibold text-lg",children:[(0,b.jsx)("img",{src:u,width:"40px"}),n]}):"".concat(e,". ")+n}),[]);return(0,S.useEffect)((function(){i?(D.length?O(!1):O(!0),C(i)):O(!0)}),[i,C]),(0,b.jsx)(h._z,{className:"",ghost:!0,children:(0,b.jsx)("div",{className:"flex justify-center",children:(0,b.jsxs)(v.Z,{className:"flex justify-center",title:(0,b.jsx)("span",{className:"text-xl font-semibold",children:F}),headerBordered:!0,headStyle:{justifyContent:"center"},style:{width:"500px"},children:[(0,b.jsx)(g.Z,{dataSource:D,loading:y,renderItem:function(e){return(0,b.jsxs)(g.Z.Item,{className:"hover:cursor-pointer",onClick:function(){return N.current.handleOpen(e)},children:[(0,b.jsx)(g.Z.Item.Meta,{title:I(e.rank,e.voter.toString()),description:"Last Vote: "+e.last_vote.toString()}),(0,b.jsx)("div",{className:"font-semibold",children:(e.vote_power.value/1e8).toFixed(0)})]})}}),(0,b.jsx)(f.gb,{ref:N}),a]})})})}},19064:function(e,n,t){e.exports=t.p+"static/one.796dbe39.png"},51869:function(e,n,t){e.exports=t.p+"static/three.1c34dbad.png"},39417:function(e,n,t){e.exports=t.p+"static/two.0435ef4a.png"}}]);