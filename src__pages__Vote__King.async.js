"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6545],{50390:function(e,t,n){n.r(t);var s=n(15009),r=n.n(s),c=n(99289),a=n.n(c),i=n(5574),o=n.n(i),l=n(19064),u=n(51869),f=n(39417),d=n(74563),x=n(19601),p=n(64119),h=n(11774),m=n(38345),v=n(59530),g=n(45360),j=n(2487),b=n(62435),k=n(86074);t.default=function(){var e=(0,v.useDispatch)(),t=g.ZP.useMessage(),n=o()(t,2),s=n[0],c=n[1],i=(0,v.useSelector)((function(e){return e.global.contractKit})),w=(0,b.useState)(!1),N=o()(w,2),S=N[0],y=N[1],C=(0,v.useSelector)((function(e){return e.vote.kingDataSource})),Z=(0,b.useRef)(),_=(0,v.useIntl)().formatMessage({id:"vote.intlTheKingOfVotes"}),I=(0,b.useCallback)(function(){var t=a()(r()().mark((function t(n){var c,a,i,o;return r()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n.load("dfsbpsvoters");case 3:return c=t.sent,a=c.table("voters"),t.next=7,a.all();case 7:i=t.sent,(o=i.sort((function(e,t){return t.vote_power.value-e.vote_power.value}))).forEach((function(e,t){o[t].rank=t+1})),e(x.N.setKingDataSource(o)),y(!1),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(0),y(!1),(0,p.Tv)(t.t0,s);case 18:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e){return t.apply(this,arguments)}}(),[s]),D=(0,b.useCallback)((function(e,t){return 1===e?(0,k.jsxs)("div",{className:"flex items-center ml-[-8px] font-semibold text-lg",children:[(0,k.jsx)("img",{src:l,width:"40px"}),t]}):2===e?(0,k.jsxs)("div",{className:"flex items-center ml-[-8px] font-semibold text-lg",children:[(0,k.jsx)("img",{src:f,width:"40px"}),t]}):3===e?(0,k.jsxs)("div",{className:"flex items-center ml-[-8px] font-semibold text-lg",children:[(0,k.jsx)("img",{src:u,width:"40px"}),t]}):"".concat(e,". ")+t}),[]);return(0,b.useEffect)((function(){i?(C.length?y(!1):y(!0),I(i)):y(!0)}),[i,I]),(0,k.jsx)(h._z,{className:"",ghost:!0,children:(0,k.jsx)("div",{className:"flex justify-center",children:(0,k.jsxs)(m.Z,{className:"flex justify-center",title:(0,k.jsx)("span",{className:"text-xl font-semibold",children:_}),headerBordered:!0,headStyle:{justifyContent:"center"},style:{width:"500px"},children:[(0,k.jsx)(j.Z,{dataSource:C,loading:S,renderItem:function(e){return(0,k.jsxs)(j.Z.Item,{className:"hover:cursor-pointer",onClick:function(){return Z.current.handleOpen(e)},children:[(0,k.jsx)(j.Z.Item.Meta,{title:D(e.rank,e.voter.toString()),description:"Last Vote: "+e.last_vote.toString()}),(0,k.jsx)("div",{className:"font-semibold",children:(e.vote_power.value/1e8).toFixed(0)})]})}}),(0,k.jsx)(d.gb,{ref:Z}),c]})})})}},19064:function(e,t,n){e.exports=n.p+"static/one.796dbe39.png"},51869:function(e,t,n){e.exports=n.p+"static/three.1c34dbad.png"},39417:function(e,t,n){e.exports=n.p+"static/two.0435ef4a.png"}}]);