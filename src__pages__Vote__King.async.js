"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[545],{98747:function(e,n,t){t.d(n,{gb:function(){return y},ot:function(){return O.Z},_h:function(){return D.Z}});var r=t(15009),a=t.n(r),s=t(99289),c=t.n(s),o=t(5574),l=t.n(o),u=t(64119),i=t(37476),d=t(98097),f=t(59530),p=t(45360),x=t(27484),h=t.n(x),v=t(38823),j=t.n(v),S=t(70178),k=t.n(S),m=t(62435),b=t(86074);h().extend(k()),h().extend(j());var g=m.forwardRef((function(e,n){var t=p.ZP.useMessage(),r=l()(t,2),s=r[0],o=r[1],x=(0,f.useSelector)((function(e){return e.global.contractKit})),v=(0,m.useState)(),j=l()(v,2),S=j[0],k=j[1],g=(0,m.useState)(),y=l()(g,2),O=y[0],D=y[1],F=(0,m.useRef)(),w=(0,m.useState)(!1),N=l()(w,2),I=N[0],C=N[1],Z=(0,m.useState)(!0),_=l()(Z,2),M=_[0],K=_[1],R=(0,m.useCallback)(function(){var e=c()(a()().mark((function e(n,t){var r,c,o;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.load("dfsweb3desoc");case 3:return r=e.sent,c=r.table("profiles"),e.next=7,c.all({scope:"dfsweb3desoc",from:t.voter.toString(),to:t.voter.toString()});case 7:o=e.sent,k(o[0]),K(!1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),(0,u.Tv)(e.t0,s);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(n,t){return e.apply(this,arguments)}}(),[s]),T=(0,m.useCallback)((function(e){R(x,e),D(e),C(!0)}),[x]);(0,m.useImperativeHandle)(n,(function(){return{handleOpen:T}}));var z=(0,m.useCallback)(c()(a()().mark((function e(){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)}))),[]),E=(0,m.useCallback)((function(e){return e?"DFSNode.Online - 广州"===e?"DFSOnline-广州@":"DFSNode.Online - 杭州"===e?"DFSOnline-杭州@":"DFSNode.Online - 香港"===e?"DFSOnline-香港@":"DFSNode.Online - 张家口"===e?"DFSOnline-张家口@":"DFSNode.Online - 呼和浩特"===e?"DFSOnline-呼和浩特@":"DFS-美国弗吉尼亚-Node"===e?"DFS-美国弗吉尼亚@":"DFS-北京节点（持续在线）"===e?"DFS-北京节点@":"DFS-广州（持续在线）"===e?"DFS-广州@":e+"@":""}),[]),P=(0,m.useMemo)((function(){return[{title:"sex",dataIndex:"sex",key:"sex",render:function(e,n){return Object.keys(n).length?(0,b.jsx)("span",{children:n.sex.toNumber()}):(0,b.jsx)("span",{children:"null"})}},{title:"cover",dataIndex:"cover",key:"cover",render:function(e,n){return Object.keys(n).length?(0,b.jsx)("span",{children:n.cover}):(0,b.jsx)("span",{children:"null"})}},{title:"desc",dataIndex:"desc",key:"desc",render:function(e,n){return Object.keys(n).length?(0,b.jsx)("span",{children:n.desc}):(0,b.jsx)("span",{children:"null"})}},{title:"avatar",dataIndex:"avatar",key:"avatar",render:function(e,n){return Object.keys(n).length?(0,b.jsx)("span",{children:n.avatar}):(0,b.jsx)("span",{children:"null"})}},{title:"join",dataIndex:"join",key:"join",render:function(e,n){return Object.keys(n).length?(0,b.jsx)("span",{children:h().utc(n.join.toString()).local().format()}):(0,b.jsx)("span",{children:"null"})}},{title:"update",dataIndex:"update",key:"update",render:function(e,n){return Object.keys(n).length?(0,b.jsx)("span",{children:h().utc(n.update.toString()).local().format()}):(0,b.jsx)("span",{children:"null"})}}]}),[]);return(0,b.jsxs)(i.Y,{formRef:F,title:"",open:I,onFinish:z,onOpenChange:function(e){C(e)},layout:"horizontal",width:"350px",submitter:!1,children:[(0,b.jsx)(d.vY,{title:(0,b.jsx)("div",{className:"flex items-center",children:(0,b.jsx)("div",{className:"",children:E(null==S?void 0:S.nick)+(null==O?void 0:O.voter.toString())})}),loading:M,column:1,dataSource:S,columns:P}),o]})})),y=(0,m.memo)(g),O=t(95260),D=t(98531)},50390:function(e,n,t){t.r(n);var r=t(15009),a=t.n(r),s=t(99289),c=t.n(s),o=t(5574),l=t.n(o),u=t(98747),i=t(19601),d=t(64119),f=t(11774),p=t(38345),x=t(59530),h=t(45360),v=t(2487),j=t(62435),S=t(86074);n.default=function(){var e=(0,x.useDispatch)(),n=h.ZP.useMessage(),t=l()(n,2),r=t[0],s=t[1],o=(0,x.useSelector)((function(e){return e.global.contractKit})),k=(0,j.useState)(!1),m=l()(k,2),b=m[0],g=m[1],y=(0,x.useSelector)((function(e){return e.vote.kingDataSource})),O=(0,j.useRef)(),D=(0,x.useIntl)().formatMessage({id:"vote.intlTheKingOfVotes"}),F=(0,j.useCallback)(function(){var n=c()(a()().mark((function n(t){var s,c,o,l;return a()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.load("dfsbpsvoters");case 3:return s=n.sent,c=s.table("voters"),n.next=7,c.all();case 7:o=n.sent,(l=o.sort((function(e,n){return n.vote_power.value-e.vote_power.value}))).forEach((function(e,n){l[n].rank=n+1})),e(i.N.setKingDataSource(l)),g(!1),n.next=18;break;case 14:n.prev=14,n.t0=n.catch(0),g(!1),(0,d.Tv)(n.t0,r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})));return function(e){return n.apply(this,arguments)}}(),[r]);return(0,j.useEffect)((function(){o?(y.length?g(!1):g(!0),F(o)):g(!0)}),[o,F]),(0,S.jsx)(f._z,{className:"",ghost:!0,children:(0,S.jsx)("div",{className:"flex justify-center",children:(0,S.jsxs)(p.Z,{className:"flex justify-center",title:(0,S.jsx)("span",{className:"text-xl font-semibold",children:D}),headerBordered:!0,headStyle:{justifyContent:"center"},style:{width:"500px"},children:[(0,S.jsx)(v.Z,{dataSource:y,loading:b,renderItem:function(e){return(0,S.jsxs)(v.Z.Item,{className:"hover:cursor-pointer",onClick:function(){return O.current.handleOpen(e)},children:[(0,S.jsx)(v.Z.Item.Meta,{title:"".concat(e.rank,". ")+e.voter.toString(),description:"Last Vote: "+e.last_vote.toString()}),(0,S.jsx)("div",{className:"font-semibold",children:(e.vote_power.value/1e8).toFixed(0)})]})}}),(0,S.jsx)(u.gb,{ref:O}),s]})})})}}}]);