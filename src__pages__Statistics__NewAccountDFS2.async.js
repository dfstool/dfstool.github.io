"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5298],{80652:function(e,t,a){var r=a(62435),n=a(20701),s=a(11924),c=a(79360),o=a(24770),i=a(79642),l=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]])}return a},u=(0,r.forwardRef)((function(e,t){var a=e.chartRef,u=e.style,d=void 0===u?{height:"inherit"}:u,f=e.className,y=e.loading,h=e.loadingTemplate,m=e.errorTemplate,p=l(e,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),g=(0,s.Z)(n.x1,p),b=g.chart,x=g.container;return(0,r.useEffect)((function(){(0,c.J)(a,b.current)}),[b.current]),(0,r.useImperativeHandle)(t,(function(){return{getChart:function(){return b.current}}})),r.createElement(o.Z,{errorTemplate:m},y&&r.createElement(i.Z,{loadingTemplate:h,theme:e.theme}),r.createElement("div",{className:f,style:d,ref:x}))}));t.Z=u},7061:function(e,t,a){a.r(t);var r=a(97857),n=a.n(r),s=a(15009),c=a.n(s),o=a(19632),i=a.n(o),l=a(99289),u=a.n(l),d=a(5574),f=a.n(d),y=a(5621),h=a(31120),m=a(64119),p=a(80652),g=a(11774),b=a(38345),x=a(59530),k=a(45360),v=a(57953),E=a(32983),S=a(9669),w=a.n(S),A=a(27484),j=a.n(A),M=a(70178),Z=a.n(M),_=a(62435),D=a(86074);j().extend(Z());t.default=function(){var e=(0,x.useDispatch)(),t=k.ZP.useMessage(),a=f()(t,2),r=a[0],s=a[1],o=(0,_.useState)(!1),l=f()(o,2),d=l[0],S=l[1],A=(0,_.useState)(""),M=f()(A,1)[0],Z=(0,x.useSelector)((function(e){return e.global.session})),O=(0,x.useSelector)((function(e){return e.global.host})),N=(0,x.useSelector)((function(e){return e.statistics.dailyAccountDataSource})),P=(0,x.useSelector)((function(e){return e.statistics.weeklyAccountDataSource})),I=(0,x.useSelector)((function(e){return e.statistics.monthlyAccountDataSource})),T=(0,x.useIntl)(),F=T.formatMessage({id:"statistics.intlDailyAccount"}),R=T.formatMessage({id:"statistics.intlDailyAccountSum"}),C=T.formatMessage({id:"statistics.intlWeeklyAccount"}),G=T.formatMessage({id:"statistics.intlWeeklyAccountSum"}),Y=T.formatMessage({id:"statistics.intlMonthlyAccount"}),z=T.formatMessage({id:"statistics.intlMonthlyAccountSum"}),L=(0,_.useCallback)(u()(c()().mark((function e(){var t,a,n,s,o,l,u,d,y,p;return c()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],a=1e3,n="0",e.next=5,h.db.accounts.toArray();case 5:(s=e.sent).length&&(n=(s[s.length-1].key+1).toString());case 7:return e.next=10,(0,m.zI)(w().post("".concat(O,"/v2/chain/get_account_rows"),{lower_bound:n,limit:a,index_position:"primary",key_type:"i64"}));case 10:if(o=e.sent,l=f()(o,2),u=l[0],d=l[1],u||200!==d.status){e.next=24;break}for(y=d.data.rows,p=0;p<y.length;++p)t.push({key:y[p].id,account:y[p].name,creation_date:y[p].creation_date});if(!d.data.more){e.next=21;break}n=d.data.next_key,e.next=22;break;case 21:return e.abrupt("break",28);case 22:e.next=26;break;case 24:return r.error(u),e.abrupt("break",28);case 26:e.next=7;break;case 28:if(t.length){e.next=32;break}return e.abrupt("return",s);case 32:return h.db.accounts.bulkAdd(t),e.abrupt("return",[].concat(i()(s),t));case 34:case"end":return e.stop()}}),e)}))),[r,Z]),W=(0,_.useCallback)(u()(c()().mark((function t(){var a,n,s,o,i,l,u,d,f,h;return c()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=[],n=[],s=[],t.next=6,L();case 6:o=t.sent,i={},l={},u={},d=0,f=0,h=0,o.forEach((function(e){var t=j().utc(e.creation_date).local().format().slice(0,10),a=j().utc(e.creation_date).local().format("YYYY-ww"),r=j().utc(e.creation_date).local().format().slice(0,7);i.hasOwnProperty(t)?i[t]+=1:i[t]=1,l.hasOwnProperty(a)?l[a]+=1:l[a]=1,u.hasOwnProperty(r)?u[r]+=1:u[r]=1})),Object.keys(i).forEach((function(e){d+=i[e],a.push({day:e,value:i[e],category:F}),a.push({day:e,value:d,category:R})})),Object.keys(l).forEach((function(e){f+=l[e],n.push({day:e,value:l[e],category:C}),n.push({day:e,value:f,category:G})})),Object.keys(u).forEach((function(e){h+=u[e],s.push({day:e,value:u[e],category:Y}),s.push({day:e,value:h,category:z})})),e(y.N.setDailyAccountDataSource(a)),e(y.N.setWeeklyAccountDataSource(n)),e(y.N.setMonthlyAccountDataSource(s)),S(!1),t.next=27;break;case 23:t.prev=23,t.t0=t.catch(0),S(!1),(0,m.Tv)(t.t0,r,"handleGetNewAccount");case 27:case"end":return t.stop()}}),t,null,[[0,23]])}))),[L]),H={data:N,xField:"day",xAxis:{type:"time",mask:"MM-DD"},yField:"value",seriesField:"category",slider:{start:0,end:1},smooth:!0,label:{}},J={data:P,xField:"day",yField:"value",seriesField:"category",slider:{start:0,end:1},smooth:!0,label:{}},q={data:I,xField:"day",yField:"value",seriesField:"category",slider:{start:0,end:1},smooth:!0,label:{}};return(0,_.useEffect)((function(){N.length?S(!1):S(!0),W()}),[W]),(0,D.jsxs)(g._z,{className:"",ghost:!0,children:[(0,D.jsxs)(v.Z,{size:"large",spinning:d,tip:M,children:[(0,D.jsx)(b.Z,{className:"mb-3",children:N.length?(0,D.jsx)(p.Z,n()(n()({},H),{},{loading:d})):(0,D.jsx)(E.Z,{image:E.Z.PRESENTED_IMAGE_SIMPLE})}),(0,D.jsx)(b.Z,{className:"mb-3",children:P.length?(0,D.jsx)(p.Z,n()(n()({},J),{},{loading:d})):(0,D.jsx)(E.Z,{image:E.Z.PRESENTED_IMAGE_SIMPLE})}),(0,D.jsx)(b.Z,{className:"mb-3",children:I.length?(0,D.jsx)(p.Z,n()(n()({},q),{},{loading:d})):(0,D.jsx)(E.Z,{image:E.Z.PRESENTED_IMAGE_SIMPLE})})]}),s]})}}}]);