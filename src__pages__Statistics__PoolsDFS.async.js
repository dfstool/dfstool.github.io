"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2019],{80652:function(e,t,r){var a=r(62435),n=r(20701),s=r(11924),c=r(79360),i=r(24770),o=r(79642),u=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]])}return r},l=(0,a.forwardRef)((function(e,t){var r=e.chartRef,l=e.style,m=void 0===l?{height:"inherit"}:l,f=e.className,d=e.loading,p=e.loadingTemplate,h=e.errorTemplate,g=u(e,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),b=(0,s.Z)(n.x1,g),x=b.chart,v=b.container;return(0,a.useEffect)((function(){(0,c.J)(r,x.current)}),[x.current]),(0,a.useImperativeHandle)(t,(function(){return{getChart:function(){return x.current}}})),a.createElement(i.Z,{errorTemplate:h},d&&a.createElement(o.Z,{loadingTemplate:p,theme:e.theme}),a.createElement("div",{className:f,style:m,ref:v}))}));t.Z=l},11613:function(e,t,r){r.r(t);var a=r(97857),n=r.n(a),s=r(15009),c=r.n(s),i=r(99289),o=r.n(i),u=r(5574),l=r.n(u),m=r(5621),f=r(64119),d=r(80652),p=r(11774),h=r(38345),g=r(59530),b=r(45360),x=r(57953),v=r(32983),k=r(9669),y=r.n(k),E=r(27484),S=r.n(E),j=r(70178),Z=r.n(j),N=r(62435),O=r(86074);S().extend(Z());t.default=function(){var e=(0,g.useDispatch)(),t=b.ZP.useMessage(),r=l()(t,2),a=r[0],s=r[1],i=(0,N.useState)(!1),u=l()(i,2),k=u[0],E=u[1],j=(0,N.useState)(""),Z=l()(j,2),_=Z[0],w=Z[1],P=(0,g.useSelector)((function(e){return e.global.session})),F=(0,g.useSelector)((function(e){return e.statistics.minuteDataSource})),M=(0,g.useSelector)((function(e){return e.statistics.hourDataSource})),T=(0,g.useIntl)(),C=T.formatMessage({id:"statistics.intlMinutePool"}),D=T.formatMessage({id:"statistics.intlHourPool"}),I=(0,N.useCallback)(o()(c()().mark((function e(){var t,r,n,s,i,o,u,m,d,p,h,g,b,x;return c()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],r=500,n=S()().subtract(2,"day").utc().format(),s=0;case 4:return e.next=7,(0,f.zI)(y().get("https://api2.dfsmoon.com/v2/history/get_actions?track=true&sort=asc&simple=true&noBinary=true&account=dfsminingout&after=".concat(n,"&limit=").concat(r)));case 7:if(i=e.sent,o=l()(i,2),u=o[0],m=o[1],u||200!==m.status){e.next=38;break}for(d=m.data.simple_actions,p=d.length,h=1,g=0;g<d.length;g++)s<=g&&t.push(d[g]);if(t.length){e.next=18;break}return e.abrupt("return",t);case 18:b=t.length-1;case 19:if(!(b>0)){e.next=28;break}if(t[b].transaction_id!==t[b-1].transaction_id){e.next=24;break}h+=1,e.next=25;break;case 24:return e.abrupt("break",28);case 25:b--,e.next=19;break;case 28:if(s=h,p!==r){e.next=35;break}x=t[t.length-1].timestamp,n=x,w(x.slice(0,13)),e.next=36;break;case 35:return e.abrupt("return",t);case 36:e.next=40;break;case 38:return a.error(u),e.abrupt("return",t);case 40:e.next=4;break;case 42:case"end":return e.stop()}}),e)}))),[a]),R=(0,N.useCallback)(o()(c()().mark((function t(){var r,n,s,i,o,u,l,d,p;return c()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=[],n=[],t.next=5,I();case 5:return(s=t.sent).sort((function(e,t){return t.timestamp.localeCompare(e.timestamp)})),t.next=9,P.client.v1.chain.get_currency_balance("eosio.token","dfsminingout","DFS");case 9:i=t.sent,o={},u={},l=S()().add(1,"minute").format().slice(0,16),d=S()().add(1,"hour").format().slice(0,13),p=i[0].value,o[l]=p,u[d]=p,s.forEach((function(e){var t=e.data.from,r=e.data.to,a=e.data.amount,n=S().utc(e.timestamp).local().format().slice(0,16),s=S().utc(e.timestamp).local().format().slice(0,13);"dfsminingout"===r?(p-=a,o[n]=p,u[s]=p):"dfsminingout"===t&&(p+=a,o[n]=p,u[s]=p)})),Object.keys(o).forEach((function(e){r.push({time:e.slice(8),value:Number(o[e].toFixed(0)),category:C})})),Object.keys(u).forEach((function(e){var t=S()(e).subtract(1,"hour").format().slice(0,13);n.push({time:t.slice(8),value:Number(u[e].toFixed(0)),category:D})})),r.sort((function(e,t){return e.time.localeCompare(t.time)})),n.sort((function(e,t){return e.time.localeCompare(t.time)})),e(m.N.setMinuteDataSource(r)),e(m.N.setHourDataSource(n)),E(!1),t.next=31;break;case 27:t.prev=27,t.t0=t.catch(0),E(!1),(0,f.Tv)(t.t0,a);case 31:case"end":return t.stop()}}),t,null,[[0,27]])}))),[I,P]),z={data:F,xField:"time",yField:"value",seriesField:"category",slider:{start:0,end:1},smooth:!0,label:{}},H={data:M,xField:"time",yField:"value",seriesField:"category",slider:{start:0,end:1},smooth:!0,label:{}};return(0,N.useEffect)((function(){F.length?E(!1):E(!0),R()}),[R]),(0,O.jsxs)(p._z,{className:"",ghost:!0,children:[(0,O.jsxs)(x.Z,{size:"large",spinning:k,tip:_,children:[(0,O.jsx)(h.Z,{className:"mb-3",children:F.length?(0,O.jsx)(d.Z,n()(n()({},z),{},{loading:k})):(0,O.jsx)(v.Z,{image:v.Z.PRESENTED_IMAGE_SIMPLE})}),(0,O.jsx)(h.Z,{className:"mb-3",children:M.length?(0,O.jsx)(d.Z,n()(n()({},H),{},{loading:k})):(0,O.jsx)(v.Z,{image:v.Z.PRESENTED_IMAGE_SIMPLE})})]}),s]})}}}]);