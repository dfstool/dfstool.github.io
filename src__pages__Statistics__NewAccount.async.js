"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7841,9758],{80652:function(t,e,a){var r=a(62435),n=a(20701),s=a(11924),c=a(79360),i=a(24770),o=a(79642),u=function(t,e){var a={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(a[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(a[r[n]]=t[r[n]])}return a},l=(0,r.forwardRef)((function(t,e){var a=t.chartRef,l=t.style,d=void 0===l?{height:"inherit"}:l,f=t.className,p=t.loading,m=t.loadingTemplate,h=t.errorTemplate,g=u(t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),y=(0,s.Z)(n.x1,g),b=y.chart,x=y.container;return(0,r.useEffect)((function(){(0,c.J)(a,b.current)}),[b.current]),(0,r.useImperativeHandle)(e,(function(){return{getChart:function(){return b.current}}})),r.createElement(i.Z,{errorTemplate:h},p&&r.createElement(o.Z,{loadingTemplate:m,theme:t.theme}),r.createElement("div",{className:f,style:d,ref:x}))}));e.Z=l},53238:function(t,e,a){a.d(e,{Z:function(){return u}});var r=a(11774),n=a(59530),s=a(22181),c=a(62435),i=a(86074),o=function(){var t=(0,n.useSelector)((function(t){return t.global.session})),e=t?t.chain.name:"DFS",a=(0,n.useIntl)().formatMessage({id:"app.intlNotSupportChain"},{chainName:e});return(0,i.jsx)(r._z,{ghost:!0,children:(0,i.jsx)(s.ZP,{title:a})})},u=(0,c.memo)(o)},33333:function(t,e,a){a.r(e);var r=a(53238),n=a(59530),s=a(62435),c=a(93028),i=a(86074);e.default=function(){var t=(0,n.useSelector)((function(t){return t.global.session})),e=t?t.chain.name:"DFS";return(0,s.useCallback)((function(){return"DFS"===e?(0,i.jsx)(c.default,{}):(0,i.jsx)(r.Z,{})}),[e])()}},93028:function(t,e,a){a.r(e);var r=a(97857),n=a.n(r),s=a(15009),c=a.n(s),i=a(99289),o=a.n(i),u=a(5574),l=a.n(u),d=a(5621),f=a(31120),p=a(64119),m=a(80652),h=a(11774),g=a(38345),y=a(59530),b=a(45360),x=a(57953),k=a(32983),v=a(9669),E=a.n(v),S=a(55835),j=a(27484),Z=a.n(j),M=a(70178),D=a.n(M),w=a(62435),A=a(86074);Z().extend(D());e.default=function(){var t=(0,y.useDispatch)(),e=b.ZP.useMessage(),a=l()(e,2),r=a[0],s=a[1],i=(0,w.useState)(!1),u=l()(i,2),v=u[0],j=u[1],M=(0,y.useSelector)((function(t){return t.statistics.dailyAccountDataSource})),D=(0,y.useSelector)((function(t){return t.statistics.weeklyAccountDataSource})),N=(0,y.useSelector)((function(t){return t.statistics.monthlyAccountDataSource})),O=(0,y.useIntl)(),P=O.formatMessage({id:"statistics.intlMissingData"}),I=O.formatMessage({id:"statistics.intlDailyAccount"}),_=O.formatMessage({id:"statistics.intlDailyAccountSum"}),F=O.formatMessage({id:"statistics.intlWeeklyAccount"}),T=O.formatMessage({id:"statistics.intlWeeklyAccountSum"}),C=O.formatMessage({id:"statistics.intlMonthlyAccount"}),L=O.formatMessage({id:"statistics.intlMonthlyAccountSum"}),R=(0,w.useCallback)(o()(c()().mark((function t(){var e,a,n,s,i,o,u,d,m,h,g,y,b,x,k,v,j,Z,M,D,w,A,N,O,I,_,F,T,C;return c()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e="eosio:newaccount",a="000d9cae502dd1cc895745e204f83cc892bc4c450f92a03ecd4fe057709853cc",n=(0,S.js)("md5"),s=a+e,n.update(s),i=n.digest("hex").substring(0,8),o={key:i,chainId:a,account:e,skip:0,lastUpdate:"2020-01-01T01:01:01.000Z",error:!1,data:[]},t.next=9,f.db.txList.where({key:i}).toArray();case 9:(u=t.sent).length&&(o=u[0]),d=[],m=500,h=o.lastUpdate,g=o.skip;case 15:return t.next=18,(0,p.zI)(E().get("https://api2.dfsmoon.com/v2/history/get_actions?track=true&sort=asc&simple=true&noBinary=true&account=".concat(e.split(":")[0],"&after=").concat(h,"&limit=").concat(m,"&filter=").concat(e)));case 18:if(y=t.sent,b=l()(y,2),x=b[0],k=b[1],x||200!==k.status){t.next=65;break}if(v=k.data.simple_actions,j=v.length,Z=k.data.total.value,M=1,0!==Z){t.next=30;break}return f.db.txList.put(o),t.abrupt("return",o.data);case 30:for(D=0;D<v.length;D++)g<=D&&d.push(v[D]);if(d.length){t.next=34;break}return o.error&&r.error(P),t.abrupt("return",o.data);case 34:w=d.length-1;case 35:if(!(w>0)){t.next=44;break}if(d[w].transaction_id!==d[w-1].transaction_id){t.next=40;break}M+=1,t.next=41;break;case 40:return t.abrupt("break",44);case 41:w--,t.next=35;break;case 44:if(g=M,j!==m){t.next=50;break}A=d[d.length-1].timestamp,h=A,t.next=63;break;case 50:return d.forEach((function(t){o.data.push(t)})),N=d[d.length-1].timestamp,o.lastUpdate=N,o.skip=g,t.next=56,(0,p.zI)(E().get("https://api2.dfsmoon.com/v2/history/get_actions?track=true&simple=true&noBinary=true&account=".concat(e.split(":")[0],"&skip=0&limit=1&filter=").concat(e)));case 56:return O=t.sent,I=l()(O,2),_=I[0],F=I[1],_||200!==F.status?r.error(_):(T=F.data.total.value,o.data.length!==T?(o.error=!0,r.error(P)):o.error=!1),f.db.txList.put(o),t.abrupt("return",o.data);case 63:t.next=69;break;case 65:return d.length&&(d.forEach((function(t){o.data.push(t)})),C=d[d.length-1].timestamp,o.lastUpdate=C,o.skip=g,o.error=!0),f.db.txList.put(o),r.error(x),t.abrupt("return",o.data);case 69:t.next=15;break;case 71:case"end":return t.stop()}}),t)}))),[r]),z=(0,w.useCallback)(o()(c()().mark((function e(){var a,n,s,i,o,u,l,f,m,h;return c()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=[],n=[],s=[],e.next=6,R();case 6:i=e.sent,o={},u={},l={},f=0,m=0,h=0,i.forEach((function(t){var e=Z().utc(t.timestamp).local().format().slice(0,10),a=Z().utc(t.timestamp).local().format("YYYY-ww"),r=Z().utc(t.timestamp).local().format().slice(0,7);o.hasOwnProperty(e)?o[e]+=1:o[e]=1,u.hasOwnProperty(a)?u[a]+=1:u[a]=1,l.hasOwnProperty(r)?l[r]+=1:l[r]=1})),o["2024-01-01"]+=9,u["2024-01"]+=9,l["2024-01"]+=9,Object.keys(o).forEach((function(t){f+=o[t],a.push({day:t,value:o[t],category:I}),a.push({day:t,value:f,category:_})})),Object.keys(u).forEach((function(t){m+=u[t],n.push({day:t,value:u[t],category:F}),n.push({day:t,value:m,category:T})})),Object.keys(l).forEach((function(t){h+=l[t],s.push({day:t,value:l[t],category:C}),s.push({day:t,value:h,category:L})})),t(d.N.setDailyAccountDataSource(a)),t(d.N.setWeeklyAccountDataSource(n)),t(d.N.setMonthlyAccountDataSource(s)),j(!1),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(0),j(!1),(0,p.Tv)(e.t0,r);case 30:case"end":return e.stop()}}),e,null,[[0,26]])}))),[R]),U={data:M,xField:"day",xAxis:{type:"time",mask:"MM-DD"},yField:"value",seriesField:"category",slider:{start:0,end:1},smooth:!0,label:{}},Y={data:D,xField:"day",yField:"value",seriesField:"category",slider:{start:0,end:1},smooth:!0,label:{}},G={data:N,xField:"day",yField:"value",seriesField:"category",slider:{start:0,end:1},smooth:!0,label:{}};return(0,w.useEffect)((function(){M.length?j(!1):j(!0),z()}),[z]),(0,A.jsxs)(h._z,{className:"",ghost:!0,children:[(0,A.jsxs)(x.Z,{size:"large",spinning:v,children:[(0,A.jsx)(g.Z,{className:"mb-3",children:M.length?(0,A.jsx)(m.Z,n()(n()({},U),{},{loading:v})):(0,A.jsx)(k.Z,{image:k.Z.PRESENTED_IMAGE_SIMPLE})}),(0,A.jsx)(g.Z,{className:"mb-3",children:D.length?(0,A.jsx)(m.Z,n()(n()({},Y),{},{loading:v})):(0,A.jsx)(k.Z,{image:k.Z.PRESENTED_IMAGE_SIMPLE})}),(0,A.jsx)(g.Z,{className:"mb-3",children:N.length?(0,A.jsx)(m.Z,n()(n()({},G),{},{loading:v})):(0,A.jsx)(k.Z,{image:k.Z.PRESENTED_IMAGE_SIMPLE})})]}),s]})}}}]);