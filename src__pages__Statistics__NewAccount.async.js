"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[841],{33333:function(t,e,a){a.r(e);var s=a(97857),r=a.n(s),n=a(15009),c=a.n(n),i=a(99289),o=a.n(i),u=a(5574),l=a.n(u),d=a(5621),h=a(31120),p=a(64119),f=a(77039),m=a(11774),g=a(38345),y=a(59530),x=a(45360),k=a(57953),b=a(32983),v=a(9669),E=a.n(v),M=a(55835),S=a(27484),A=a.n(S),D=a(70178),j=a.n(D),Z=a(62435),w=a(86074);A().extend(j());e.default=function(){var t=(0,y.useDispatch)(),e=x.ZP.useMessage(),a=l()(e,2),s=a[0],n=a[1],i=(0,Z.useState)(!1),u=l()(i,2),v=u[0],S=u[1],D=(0,y.useSelector)((function(t){return t.statistics.dailyAccountDataSource})),j=(0,y.useSelector)((function(t){return t.statistics.weeklyAccountDataSource})),_=(0,y.useSelector)((function(t){return t.statistics.monthlyAccountDataSource})),I=(0,y.useIntl)(),N=I.formatMessage({id:"statistics.intlMissingData"}),P=I.formatMessage({id:"statistics.intlDailyAccount"}),F=I.formatMessage({id:"statistics.intlDailyAccountSum"}),L=I.formatMessage({id:"statistics.intlWeeklyAccount"}),O=I.formatMessage({id:"statistics.intlWeeklyAccountSum"}),T=I.formatMessage({id:"statistics.intlMonthlyAccount"}),z=I.formatMessage({id:"statistics.intlMonthlyAccountSum"}),C=(0,Z.useCallback)(o()(c()().mark((function t(){var e,a,r,n,i,o,u,d,f,m,g,y,x,k,b,v,S,A,D,j,Z,w,_,I,P,F,L,O,T;return c()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e="eosio:newaccount",a="000d9cae502dd1cc895745e204f83cc892bc4c450f92a03ecd4fe057709853cc",r=(0,M.js)("md5"),n=a+e,r.update(n),i=r.digest("hex").substring(0,8),o={key:i,chainId:a,account:e,skip:0,lastUpdate:"2020-01-01T01:01:01.000Z",error:!1,data:[]},t.next=9,h.db.txList.where({key:i}).toArray();case 9:(u=t.sent).length&&(o=u[0]),d=[],f=500,m=o.lastUpdate,g=o.skip;case 15:return t.next=18,(0,p.zI)(E().get("https://api2.dfsmoon.com/v2/history/get_actions?track=true&sort=asc&simple=true&noBinary=true&account=".concat(e.split(":")[0],"&after=").concat(m,"&limit=").concat(f,"&filter=").concat(e)));case 18:if(y=t.sent,x=l()(y,2),k=x[0],b=x[1],k||200!==b.status){t.next=65;break}if(v=b.data.simple_actions,S=v.length,A=b.data.total.value,D=1,0!==A){t.next=30;break}return h.db.txList.put(o),t.abrupt("return",o.data);case 30:for(j=0;j<v.length;j++)g<=j&&d.push(v[j]);if(d.length){t.next=34;break}return o.error&&s.error(N),t.abrupt("return",o.data);case 34:Z=d.length-1;case 35:if(!(Z>0)){t.next=44;break}if(d[Z].transaction_id!==d[Z-1].transaction_id){t.next=40;break}D+=1,t.next=41;break;case 40:return t.abrupt("break",44);case 41:Z--,t.next=35;break;case 44:if(g=D,S!==f){t.next=50;break}w=d[d.length-1].timestamp,m=w,t.next=63;break;case 50:return d.forEach((function(t){o.data.push(t)})),_=d[d.length-1].timestamp,o.lastUpdate=_,o.skip=g,t.next=56,(0,p.zI)(E().get("https://api2.dfsmoon.com/v2/history/get_actions?track=true&simple=true&noBinary=true&account=".concat(e.split(":")[0],"&skip=0&limit=1&filter=").concat(e)));case 56:return I=t.sent,P=l()(I,2),F=P[0],L=P[1],F||200!==L.status?s.error(F):(O=L.data.total.value,o.data.length!==O?(o.error=!0,s.error(N)):o.error=!1),h.db.txList.put(o),t.abrupt("return",o.data);case 63:t.next=69;break;case 65:return d.length&&(d.forEach((function(t){o.data.push(t)})),T=d[d.length-1].timestamp,o.lastUpdate=T,o.skip=g,o.error=!0),h.db.txList.put(o),s.error(k),t.abrupt("return",o.data);case 69:t.next=15;break;case 71:case"end":return t.stop()}}),t)}))),[s]),U=(0,Z.useCallback)(o()(c()().mark((function e(){var a,r,n,i,o,u,l,h,f,m;return c()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=[],r=[],n=[],e.next=6,C();case 6:i=e.sent,o={},u={},l={},h=0,f=0,m=0,i.forEach((function(t){var e=A().utc(t.timestamp).local().format().slice(0,10),a=A().utc(t.timestamp).local().format("YYYY-ww"),s=A().utc(t.timestamp).local().format().slice(0,7);o.hasOwnProperty(e)?o[e]+=1:o[e]=1,u.hasOwnProperty(a)?u[a]+=1:u[a]=1,l.hasOwnProperty(s)?l[s]+=1:l[s]=1})),o["2024-01-01"]+=9,u["2024-01"]+=9,l["2024-01"]+=9,Object.keys(o).forEach((function(t){h+=o[t],a.push({day:t,value:o[t],category:P}),a.push({day:t,value:h,category:F})})),Object.keys(u).forEach((function(t){f+=u[t],r.push({day:t,value:u[t],category:L}),r.push({day:t,value:f,category:O})})),Object.keys(l).forEach((function(t){m+=l[t],n.push({day:t,value:l[t],category:T}),n.push({day:t,value:m,category:z})})),t(d.N.setDailyAccountDataSource(a)),t(d.N.setWeeklyAccountDataSource(r)),t(d.N.setMonthlyAccountDataSource(n)),S(!1),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(0),S(!1),(0,p.Tv)(e.t0,s);case 30:case"end":return e.stop()}}),e,null,[[0,26]])}))),[C]),Y={data:D,xField:"day",xAxis:{type:"time",mask:"MM-DD"},yField:"value",seriesField:"category",slider:{start:0,end:1},smooth:!0,label:{}},G={data:j,xField:"day",yField:"value",seriesField:"category",slider:{start:0,end:1},smooth:!0,label:{}},R={data:_,xField:"day",yField:"value",seriesField:"category",slider:{start:0,end:1},smooth:!0,label:{}};return(0,Z.useEffect)((function(){D.length?S(!1):S(!0),U()}),[U]),(0,w.jsxs)(m._z,{className:"",ghost:!0,children:[(0,w.jsxs)(k.Z,{size:"large",spinning:v,children:[(0,w.jsx)(g.Z,{className:"mb-3",children:D.length?(0,w.jsx)(f.Z,r()(r()({},Y),{},{loading:v})):(0,w.jsx)(b.Z,{image:b.Z.PRESENTED_IMAGE_SIMPLE})}),(0,w.jsx)(g.Z,{className:"mb-3",children:j.length?(0,w.jsx)(f.Z,r()(r()({},G),{},{loading:v})):(0,w.jsx)(b.Z,{image:b.Z.PRESENTED_IMAGE_SIMPLE})}),(0,w.jsx)(g.Z,{className:"mb-3",children:_.length?(0,w.jsx)(f.Z,r()(r()({},R),{},{loading:v})):(0,w.jsx)(b.Z,{image:b.Z.PRESENTED_IMAGE_SIMPLE})})]}),n]})}}}]);