"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7841,5298],{80652:function(e,t,a){var n=a(62435),r=a(20701),s=a(11924),c=a(79360),o=a(24770),i=a(79642),u=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a},l=(0,n.forwardRef)((function(e,t){var a=e.chartRef,l=e.style,d=void 0===l?{height:"inherit"}:l,f=e.className,h=e.loading,y=e.loadingTemplate,m=e.errorTemplate,p=u(e,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),g=(0,s.Z)(r.x1,p),b=g.chart,x=g.container;return(0,n.useEffect)((function(){(0,c.J)(a,b.current)}),[b.current]),(0,n.useImperativeHandle)(t,(function(){return{getChart:function(){return b.current}}})),n.createElement(o.Z,{errorTemplate:m},h&&n.createElement(i.Z,{loadingTemplate:y,theme:e.theme}),n.createElement("div",{className:f,style:d,ref:x}))}));t.Z=l},53238:function(e,t,a){a.d(t,{Z:function(){return u}});var n=a(11774),r=a(59530),s=a(22181),c=a(62435),o=a(86074),i=function(){var e=(0,r.useSelector)((function(e){return e.global.session})),t=e?e.chain.name:"DFS",a=(0,r.useIntl)().formatMessage({id:"app.intlNotSupportChain"},{chainName:t});return(0,o.jsx)(n._z,{ghost:!0,children:(0,o.jsx)(s.ZP,{title:a})})},u=(0,c.memo)(i)},33333:function(e,t,a){a.r(t);var n=a(53238),r=a(59530),s=a(62435),c=a(7061),o=a(86074);t.default=function(){var e=(0,r.useSelector)((function(e){return e.global.session})),t=e?e.chain.name:"DFS";return(0,s.useCallback)((function(){return"DFS"===t?(0,o.jsx)(c.default,{}):(0,o.jsx)(n.Z,{})}),[t])()}},7061:function(e,t,a){a.r(t);var n=a(97857),r=a.n(n),s=a(15009),c=a.n(s),o=a(19632),i=a.n(o),u=a(99289),l=a.n(u),d=a(5574),f=a.n(d),h=a(5621),y=a(31120),m=a(64119),p=a(80652),g=a(11774),b=a(38345),x=a(59530),v=a(45360),k=a(57953),S=a(32983),E=a(9669),j=a.n(E),Z=a(27484),w=a.n(Z),A=a(70178),M=a.n(A),_=a(62435),D=a(86074);w().extend(M());t.default=function(){var e=(0,x.useDispatch)(),t=v.ZP.useMessage(),a=f()(t,2),n=a[0],s=a[1],o=(0,_.useState)(!1),u=f()(o,2),d=u[0],E=u[1],Z=(0,_.useState)(""),A=f()(Z,1)[0],M=(0,x.useSelector)((function(e){return e.global.session})),N=(0,x.useSelector)((function(e){return e.global.host})),O=(0,x.useSelector)((function(e){return e.statistics.dailyAccountDataSource})),P=(0,x.useSelector)((function(e){return e.statistics.weeklyAccountDataSource})),F=(0,x.useSelector)((function(e){return e.statistics.monthlyAccountDataSource})),I=(0,x.useIntl)(),T=I.formatMessage({id:"statistics.intlDailyAccount"}),C=I.formatMessage({id:"statistics.intlDailyAccountSum"}),R=I.formatMessage({id:"statistics.intlWeeklyAccount"}),z=I.formatMessage({id:"statistics.intlWeeklyAccountSum"}),G=I.formatMessage({id:"statistics.intlMonthlyAccount"}),Y=I.formatMessage({id:"statistics.intlMonthlyAccountSum"}),L=(0,_.useCallback)(l()(c()().mark((function e(){var t,a,r,s,o,u,l,d,h,p;return c()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],a=1e3,r="0",e.next=5,y.db.accounts.toArray();case 5:(s=e.sent).length&&(r=(s[s.length-1].key+1).toString());case 7:return e.next=10,(0,m.zI)(j().post("".concat(N,"/v2/chain/get_account_rows"),{lower_bound:r,limit:a,index_position:"primary",key_type:"i64"}));case 10:if(o=e.sent,u=f()(o,2),l=u[0],d=u[1],l||200!==d.status){e.next=24;break}for(h=d.data.rows,p=0;p<h.length;++p)t.push({key:h[p].id,account:h[p].name,creation_date:h[p].creation_date});if(!d.data.more){e.next=21;break}r=d.data.next_key,e.next=22;break;case 21:return e.abrupt("break",28);case 22:e.next=26;break;case 24:return n.error(l),e.abrupt("break",28);case 26:e.next=7;break;case 28:if(t.length){e.next=32;break}return e.abrupt("return",s);case 32:return y.db.accounts.bulkAdd(t),e.abrupt("return",[].concat(i()(s),t));case 34:case"end":return e.stop()}}),e)}))),[n,M]),W=(0,_.useCallback)(l()(c()().mark((function t(){var a,r,s,o,i,u,l,d,f,y;return c()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=[],r=[],s=[],t.next=6,L();case 6:o=t.sent,i={},u={},l={},d=0,f=0,y=0,o.forEach((function(e){var t=w().utc(e.creation_date).local().format().slice(0,10),a=w().utc(e.creation_date).local().format("YYYY-ww"),n=w().utc(e.creation_date).local().format().slice(0,7);i.hasOwnProperty(t)?i[t]+=1:i[t]=1,u.hasOwnProperty(a)?u[a]+=1:u[a]=1,l.hasOwnProperty(n)?l[n]+=1:l[n]=1})),Object.keys(i).forEach((function(e){d+=i[e],a.push({day:e,value:i[e],category:T}),a.push({day:e,value:d,category:C})})),Object.keys(u).forEach((function(e){f+=u[e],r.push({day:e,value:u[e],category:R}),r.push({day:e,value:f,category:z})})),Object.keys(l).forEach((function(e){y+=l[e],s.push({day:e,value:l[e],category:G}),s.push({day:e,value:y,category:Y})})),e(h.N.setDailyAccountDataSource(a)),e(h.N.setWeeklyAccountDataSource(r)),e(h.N.setMonthlyAccountDataSource(s)),E(!1),t.next=27;break;case 23:t.prev=23,t.t0=t.catch(0),E(!1),(0,m.Tv)(t.t0,n,"handleGetNewAccount");case 27:case"end":return t.stop()}}),t,null,[[0,23]])}))),[L]),H={data:O,xField:"day",xAxis:{type:"time",mask:"MM-DD"},yField:"value",seriesField:"category",slider:{start:0,end:1},smooth:!0,label:{}},J={data:P,xField:"day",yField:"value",seriesField:"category",slider:{start:0,end:1},smooth:!0,label:{}},q={data:F,xField:"day",yField:"value",seriesField:"category",slider:{start:0,end:1},smooth:!0,label:{}};return(0,_.useEffect)((function(){O.length?E(!1):E(!0),W()}),[W]),(0,D.jsxs)(g._z,{className:"",ghost:!0,children:[(0,D.jsxs)(k.Z,{size:"large",spinning:d,tip:A,children:[(0,D.jsx)(b.Z,{className:"mb-3",children:O.length?(0,D.jsx)(p.Z,r()(r()({},H),{},{loading:d})):(0,D.jsx)(S.Z,{image:S.Z.PRESENTED_IMAGE_SIMPLE})}),(0,D.jsx)(b.Z,{className:"mb-3",children:P.length?(0,D.jsx)(p.Z,r()(r()({},J),{},{loading:d})):(0,D.jsx)(S.Z,{image:S.Z.PRESENTED_IMAGE_SIMPLE})}),(0,D.jsx)(b.Z,{className:"mb-3",children:F.length?(0,D.jsx)(p.Z,r()(r()({},q),{},{loading:d})):(0,D.jsx)(S.Z,{image:S.Z.PRESENTED_IMAGE_SIMPLE})})]}),s]})}}}]);