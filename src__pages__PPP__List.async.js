"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6119],{98165:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(87462),a=n(62435),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z"}}]},name:"sync",theme:"outlined"},o=n(84089),s=function(e,t){return a.createElement(o.Z,(0,r.Z)({},e,{ref:t,icon:i}))};var u=a.forwardRef(s)},76255:function(e,t,n){n.r(t);var r=n(15009),a=n.n(r),i=n(99289),o=n.n(i),s=n(5574),u=n.n(s),c=n(97930),d=n(17346),l=n(64119),f=n(98165),p=n(11774),m=n(92340),x=n(59530),h=n(45360),N=n(7134),y=n(9669),R=n.n(y),b=n(27484),v=n.n(b),_=n(62435),k=(n(8849),n(86074));t.default=function(){var e=(0,x.useDispatch)(),t=(0,x.useSelector)((function(e){return e.global.contractKit})),n=(0,x.useSelector)((function(e){return e.ecosystem.pppDataSource})),r=(0,_.useState)(!0),i=u()(r,2),s=i[0],y=i[1],b=h.ZP.useMessage(),j=u()(b,2),g=j[0],S=j[1],P=(0,x.useIntl)().formatMessage({id:"ecosystem.update"}),I=(0,_.useCallback)(function(){var t=o()(a()().mark((function t(n){var r,i,o,s,u,c,l,f,p;return a()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.load("dfs3protocol");case 2:return r=t.sent,i=r.table("projects"),o=r.table("stat"),t.next=7,i.all({scope:"dfs3protocol"});case 7:return s=t.sent,t.next=10,o.all({scope:"dfs3protocol"});case 10:return u=t.sent,t.next=13,R().get("https://api.dfs.land/dfschain/pppvolume2");case 13:200!==(c=t.sent).status&&g.error("获取pppvolume2数据失败"),l=c.data,f=[],s.forEach((function(e){l.hasOwnProperty(e.id.toString())&&f.push(e)})),f.sort((function(e,t){var n=e.id.toString(),r=t.id.toString();return l[r].volume_24h-l[n].volume_24h})),p=[],f.forEach((function(e,t){var n=e.id.toNumber(),r=e.creator.toString(),a=e.project_name,i=e.nft_name,o=e.nft_img,s=e.nft_bgm,c=e.desc,d=e.twitter,l=e.telegram,f=e.website,m=e.token_url,x=e.init_nft_number.toNumber(),h=e.init_nft_price.toString(),N=2*e.init_nft_price.value+" "+e.init_nft_price.symbol.name,y=e.token_per_nft.toString(),R=e.max_token_supply.toString(),b=e.round.toNumber(),_=e.mid.toNumber(),k=e.sec_to_burn_nft.toNumber(),j=e.sec_per_round.toNumber(),g=e.increase_per_round.toNumber(),S=e.trade_fee_ratio.toNumber(),P=v().utc(e.last_round.toString()).local().format("YYYY-MM-DDTHH:mm:ss"),I=v().utc(e.create_time.toString()).local().format("YYYY-MM-DDTHH:mm:ss"),T=u.filter((function(e){return e.cid.toNumber()===n}))[0],M=T.supply.toNumber(),w=T.max_supply.toNumber(),Y=100*(g/100-1-g/100*(S/1e4+.005)),D=v().utc(e.last_round.toString()).add(j,"seconds").local(),C=D.valueOf(),B=D.format("YYYY-MM-DDTHH:mm:ss");p.push({key:t,id:n,creator:r,projectName:a,nftName:i,nftImg:o,nftBgm:s,desc:c,twitter:d,telegram:l,website:f,tokenUrl:m,initNftNumber:x,initNftPrice:h,splitNftPrice:N,tokenPerNft:y,maxTokenSupply:R,round:b,mid:_,secToBurnNft:k,secPerRound:j,increasePerRound:g,tradeFeeRatio:S,lastRound:P,createTime:I,nftSupply:M,nftMaxSupply:w,profitRate:Y,nextRoundValue:C,nextRoundText:B})})),e(d.N.setPPPDataSource(p)),y(!1);case 23:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[t]),T=(0,_.useMemo)((function(){return[{title:"ID",dataIndex:"id",key:"id",sorter:function(e,t){return e.id-t.id},render:function(e,t){return(0,k.jsxs)("span",{children:["#",t.id]})}},{title:"项目",dataIndex:"id",key:"id",render:function(e,t){var n=t.nftImg;return(0,k.jsxs)("div",{children:[(0,k.jsx)(N.C,{className:"mr-2",size:"large",shape:"square",src:n,alt:"abc"}),(0,k.jsx)("span",{children:t.nftName}),(0,k.jsx)("div",{children:t.projectName})]})}},{title:"下一轮倒计时",dataIndex:"nextRoundValue",key:"nextRoundValue",sorter:function(e,t){return e.nextRoundValue-t.nextRoundValue},render:function(e,t){return(0,k.jsxs)("div",{children:[(0,k.jsx)(c.Wo,{className:"font-medium text-base",value:t.nextRoundValue}),(0,k.jsx)("div",{children:t.nextRoundText})]})}},{title:"创建者",dataIndex:"creator",key:"creator",render:function(e,t){return(0,k.jsx)("span",{children:t.creator})}},{title:"初始发行量",dataIndex:"initNftNumber",key:"initNftNumber",render:function(e,t){return(0,k.jsx)("span",{children:t.initNftNumber})}},{title:"流通量",dataIndex:"nftSupply",key:"nftSupply",sorter:function(e,t){return e.nftSupply-t.nftSupply},render:function(e,t){return(0,k.jsx)("span",{children:t.nftSupply})}},{title:"最大发行量",dataIndex:"nftMaxSupply",key:"nftMaxSupply",render:function(e,t){return(0,k.jsx)("span",{children:t.nftMaxSupply})}},{title:"初始价格",dataIndex:"initNftPrice",key:"initNftPrice",render:function(e,t){var n=t.initNftPrice.split(" "),r=u()(n,2),a=r[0],i=r[1],o=(0,l.CE)(a)+" "+i;return(0,k.jsx)("span",{children:o})}},{title:"每轮时间",dataIndex:"secPerRound",key:"secPerRound",sorter:function(e,t){return e.secPerRound-t.secPerRound},render:function(e,t){var n=t.secPerRound/3600+" Hours";return(0,k.jsx)("span",{children:n})}},{title:"每轮涨幅",dataIndex:"increasePerRound",key:"increasePerRound",sorter:function(e,t){return e.increasePerRound-t.increasePerRound},render:function(e,t){var n=(t.increasePerRound-100).toFixed(2)+" %";return(0,k.jsx)("span",{children:n})}},{title:"手续费",dataIndex:"tradeFeeRatio",key:"tradeFeeRatio",sorter:function(e,t){return e.tradeFeeRatio-t.tradeFeeRatio},render:function(e,t){var n=t.tradeFeeRatio/100+" %";return(0,k.jsx)("span",{children:n})}},{title:"利润率",dataIndex:"profitRate",key:"profitRate",sorter:function(e,t){return e.profitRate-t.profitRate},render:function(e,t){var n=t.profitRate.toFixed(2)+" %";return(0,k.jsx)("span",{children:n})}},{title:"销毁时间",dataIndex:"secToBurnNft",key:"secToBurnNft",sorter:function(e,t){return e.secToBurnNft-t.secToBurnNft},render:function(e,t){var n=t.secToBurnNft/3600+" Hours";return(0,k.jsx)("span",{children:n})}},{title:"销毁兑换",dataIndex:"tokenPerNft",key:"tokenPerNft",render:function(e,t){var n=t.tokenPerNft.split(" "),r=u()(n,2),a=r[0],i=r[1],o=(0,l.CE)(a)+" "+i;return(0,k.jsx)("span",{children:o})}},{title:"创建时间",dataIndex:"createTime",key:"createTime",render:function(e,t){return(0,k.jsx)("span",{children:t.createTime})}}]}),[l.CE]);return(0,_.useEffect)((function(){t?(n.length?y(!1):y(!0),I(t)):y(!0)}),[t,I]),(0,k.jsxs)(p._z,{className:"ppp-list",ghost:!0,children:[(0,k.jsx)("div",{className:"flex justify-between items-center mb-2",children:(0,k.jsxs)("div",{children:[(0,k.jsx)(f.Z,{spin:s,className:"ml-[8px] hover:cursor-pointer",style:{color:"#1677ff"},onClick:function(){y(!0),I(t)}}),(0,k.jsxs)("span",{className:"ml-[8px]",children:[P,": ",v()().format().substring(0,19)]})]})}),(0,k.jsx)(m.Z,{className:"",scroll:{x:!0},size:"small",columns:T,dataSource:n,defaultData:[],search:!1,options:!1,pagination:!1}),S]})}},8849:function(){}}]);