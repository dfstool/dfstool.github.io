"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2716],{91604:function(e,t,n){n.d(t,{Z:function(){return v}});var r=n(1413),a=n(87462),o=n(62435),s={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M885.2 446.3l-.2-.8-112.2-285.1c-5-16.1-19.9-27.2-36.8-27.2H281.2c-17 0-32.1 11.3-36.9 27.6L139.4 443l-.3.7-.2.8c-1.3 4.9-1.7 9.9-1 14.8-.1 1.6-.2 3.2-.2 4.8V830a60.9 60.9 0 0060.8 60.8h627.2c33.5 0 60.8-27.3 60.9-60.8V464.1c0-1.3 0-2.6-.1-3.7.4-4.9 0-9.6-1.3-14.1zm-295.8-43l-.3 15.7c-.8 44.9-31.8 75.1-77.1 75.1-22.1 0-41.1-7.1-54.8-20.6S436 441.2 435.6 419l-.3-15.7H229.5L309 210h399.2l81.7 193.3H589.4zm-375 76.8h157.3c24.3 57.1 76 90.8 140.4 90.8 33.7 0 65-9.4 90.3-27.2 22.2-15.6 39.5-37.4 50.7-63.6h156.5V814H214.4V480.1z"}}]},name:"inbox",theme:"outlined"},i=n(84089),c=function(e,t){return o.createElement(i.Z,(0,a.Z)({},e,{ref:t,icon:s}))};var l=o.forwardRef(c),u=n(28459),d=n(2058),f=n(9105),m=n(90789),p=n(86074),h=o.forwardRef((function(e,t){var n=e.fieldProps,a=e.title,s=void 0===a?"单击或拖动文件到此区域进行上传":a,i=e.icon,c=void 0===i?(0,p.jsx)(l,{}):i,m=e.description,h=void 0===m?"支持单次或批量上传":m,v=e.action,x=e.accept,g=e.onChange,b=e.value,y=e.children,w=e.max,C=e.proFieldProps,k=(0,o.useContext)(u.ZP.ConfigContext),j=(0,o.useContext)(f.A),P=(null==C?void 0:C.mode)||j.mode||"edit",S=k.getPrefixCls("upload"),M=(void 0===w||!b||(null==b?void 0:b.length)<w)&&"read"!==P&&!0!==(null==C?void 0:C.readonly);return(0,p.jsxs)(d.Z.Dragger,(0,r.Z)((0,r.Z)({ref:t,name:"files",action:v,accept:x,fileList:b},n),{},{onChange:function(e){null==g||g(e),null!=n&&n.onChange&&(null==n||n.onChange(e))},style:(0,r.Z)((0,r.Z)({},null==n?void 0:n.style),{},{display:M?void 0:"none"}),children:[(0,p.jsx)("p",{className:"".concat(S,"-drag-icon"),children:c}),(0,p.jsx)("p",{className:"".concat(S,"-text"),children:s}),(0,p.jsx)("p",{className:"".concat(S,"-hint"),children:h}),y?(0,p.jsx)("div",{className:"".concat(S,"-extra"),style:{padding:16},children:y}):null]}))})),v=(0,m.G)(h,{getValueFromEvent:function(e){return e.fileList}})},218:function(e,t,n){n.d(t,{s:function(){return f}});var r=n(5574),a=n.n(r),o=n(37476),s=n(90672),i=n(59530),c=n(45360),l=n(62435),u=n(86074),d=l.forwardRef((function(e,t){var n=c.ZP.useMessage(),r=a()(n,2),d=r[0],f=r[1],m=(0,l.useRef)(),p=(0,l.useState)(!1),h=a()(p,2),v=h[0],x=h[1],g=(0,l.useState)(""),b=a()(g,2),y=b[0],w=b[1],C=(0,l.useState)(""),k=a()(C,2),j=k[0],P=k[1],S=(0,i.useIntl)(),M=S.formatMessage({id:"msig.intlPreviewFail"}),z=S.formatMessage({id:"msig.intlClose"}),F=(0,l.useCallback)((function(e){var t=new FileReader;t.readAsText(e.originFileObj),t.onload=function(){try{var n,r=JSON.parse(t.result);if(r)null===(n=m.current)||void 0===n||n.setFieldValue("content",JSON.stringify(r,null,2)),w(JSON.stringify(r,null,2)),P(e.name),x(!0);else d.error("".concat(M))}catch(e){d.error("".concat(M))}}}),[]);return(0,l.useImperativeHandle)(t,(function(){return{handleOpen:F}})),(0,u.jsxs)(o.Y,{formRef:m,title:(0,u.jsx)("div",{className:"mt-3",children:j}),open:v,onOpenChange:function(e){x(e)},layout:"vertical",width:"700px",modalProps:{style:{top:25}},submitter:{searchConfig:{resetText:z},render:function(e,t){return[t[0]]}},children:[(0,u.jsx)(s.Z,{name:"content",fieldProps:{autoSize:{minRows:5},allowClear:!1,autoFocus:!1,onChange:void 0,value:y,size:"large"}}),f]})})),f=(0,l.memo)(d)},19068:function(e,t,n){n.r(t);var r=n(15009),a=n.n(r),o=n(99289),s=n.n(o),i=n(5574),c=n.n(i),l=n(218),u=n(64119),d=n(11774),f=n(38345),m=n(97269),p=n(91604),h=n(52688),v=n(59530),x=n(80507),g=n(45360),b=n(85576),y=n(15867),w=n(62435),C=n(86074);t.default=function(){var e=g.ZP.useMessage(),t=c()(e,2),n=t[0],r=t[1],o=(0,v.useSelector)((function(e){return e.global.session})),i=(0,v.useSelector)((function(e){return e.global.account})),k=(0,w.useRef)(),j=(0,w.useRef)(),P=(0,w.useState)([]),S=c()(P,2),M=S[0],z=S[1],F=(0,w.useState)([]),L=c()(F,2),Z=L[0],N=L[1],R=b.Z.useModal(),T=c()(R,2),O=T[0],A=T[1],q=(0,v.useIntl)(),I=q.formatMessage({id:"common.intlInputException"}),V=q.formatMessage({id:"msig.intlUploadFail"}),_=q.formatMessage({id:"msig.intlUploadSuccess"}),H=q.formatMessage({id:"common.intlPleaseConnectWallet"}),J=q.formatMessage({id:"common.intlPleaseConnectNetwork"}),U=q.formatMessage({id:"tools.deploy.intlDeploy"}),B=q.formatMessage({id:"tools.deploy.intlDeployContract"}),D=q.formatMessage({id:"common.intlTxSuccess"}),E=q.formatMessage({id:"common.intlTxFail"}),W=q.formatMessage({id:"tools.deploy.intlAddPermisson"}),G=q.formatMessage({id:"tools.deploy.intlSize"}),Y=q.formatMessage({id:"tools.deploy.intlClearContract"}),K=q.formatMessage({id:"tools.deploy.intlClearContractTip"}),Q=q.formatMessage({id:"contract.intlNonContractAccount"}),X=(0,w.useMemo)((function(){var e=0,t=0;return Z.length&&Z[0].size&&(e=Z[0].size),M.length&&M[0].size&&(t=M[0].size),e+t}),[Z,M]),$=(0,w.useCallback)(function(){var e=s()(a()().mark((function e(t){var r;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("removed"!==t.file.status){e.next=3;break}return z(t.fileList),e.abrupt("return");case 3:(r=new FileReader).readAsText(t.fileList[t.fileList.length-1].originFileObj),r.onload=function(){try{JSON.parse(r.result)?(z(t.fileList),n.success("".concat(_))):n.error("".concat(V))}catch(e){(0,u.Tv)(e,n)}};case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),ee=(0,w.useCallback)(function(){var e=s()(a()().mark((function e(t){var r;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("removed"!==t.file.status){e.next=3;break}return N(t.fileList),e.abrupt("return");case 3:(r=new FileReader).readAsText(t.fileList[t.fileList.length-1].originFileObj),r.onload=function(){try{"application/wasm"===t.file.type?(N(t.fileList),n.success("".concat(_))):n.error("".concat(V))}catch(e){(0,u.Tv)(e,n)}};case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),te=(0,w.useCallback)(function(){var e=s()(a()().mark((function e(t){var r,s,l,d,f,m,p,h,v,g,b,y,w,C;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,o&&o.broadcast){e.next=6;break}return n.error("".concat(H)),e.abrupt("return",!1);case 6:if(i){e.next=9;break}return n.error("".concat(J)),e.abrupt("return",!1);case 9:return e.next=11,new Promise((function(e){var t=new FileReader;t.readAsText(M[0].originFileObj),t.onload=function(){return e(t.result)}}));case 11:return r=e.sent,e.next=14,new Promise((function(e){var t=new FileReader;t.readAsArrayBuffer(Z[0].originFileObj),t.onload=function(){return e(t.result)}}));case 14:return s=e.sent,l=x.dL.from(r),d=x.ei.encode({object:l}),f=d.toString(),m=x.Jj.from(s).toString(),(p=[]).push({account:"eosio",name:"setabi",authorization:[o.permissionLevel],data:{account:o.actor,abi:f,memo:""}}),p.push({account:"eosio",name:"setcode",authorization:[o.permissionLevel],data:{account:o.actor,code:m,vmtype:0,vmversion:0}}),t.addPerm&&(h=i.permission("active"),v=h.required_auth.accounts.find((function(e){return e.permission.equals("".concat(o.actor,"@eosio.code"))})),v||(h.addAccount("".concat(o.actor,"@eosio.code")),h.required_auth.keys.sort((function(e,t){var n=e.key.toString(),r=t.key.toString();return n.localeCompare(r)})),g=i.setPermission(h),p.push(g))),e.next=26,(0,u.zI)(o.transact({actions:p}));case 26:b=e.sent,y=c()(b,2),w=y[0],C=y[1],w?n.error(w):C&&C.response?n.success("".concat(D)):n.error("".concat(E)),e.next=36;break;case 33:e.prev=33,e.t0=e.catch(0),(0,u.Tv)(e.t0,n);case 36:case"end":return e.stop()}}),e,null,[[0,33]])})));return function(t){return e.apply(this,arguments)}}(),[M,Z,n,o,i]),ne=(0,w.useCallback)(s()(a()().mark((function e(){var t,r,s,l,d,f,m,p,h,v,x,g;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.confirm({content:(0,C.jsx)("div",{children:K})});case 2:if(!e.sent){e.next=43;break}if(e.prev=4,o&&o.broadcast){e.next=10;break}return n.error("".concat(H)),e.abrupt("return",!1);case 10:if(i){e.next=13;break}return n.error("".concat(J)),e.abrupt("return",!1);case 13:return e.next=15,(0,u.zI)(o.client.v1.chain.get_abi(i.accountName.toString()));case 15:if(t=e.sent,r=c()(t,2),s=r[0],l=r[1],!s){e.next=22;break}return n.error(s),e.abrupt("return",!1);case 22:if(s||l.hasOwnProperty("abi")){e.next=25;break}return n.error("".concat(Q)),e.abrupt("return",!1);case 25:return(d=[]).push({account:"eosio",name:"setabi",authorization:[o.permissionLevel],data:{account:o.actor,abi:"",memo:""}}),d.push({account:"eosio",name:"setcode",authorization:[o.permissionLevel],data:{account:o.actor,code:"",vmtype:0,vmversion:0}}),f=i.permission("active"),m=f.required_auth.accounts.find((function(e){return e.permission.equals("".concat(o.actor,"@eosio.code"))})),m&&(f.removeAccount(m.permission),f.required_auth.keys.sort((function(e,t){var n=e.key.toString(),r=t.key.toString();return n.localeCompare(r)})),p=i.setPermission(f),d.push(p)),e.next=33,(0,u.zI)(o.transact({actions:d}));case 33:h=e.sent,v=c()(h,2),x=v[0],g=v[1],x?n.error(x):g&&g.response?n.success("".concat(D)):n.error("".concat(E)),e.next=43;break;case 40:e.prev=40,e.t0=e.catch(4),(0,u.Tv)(e.t0,n);case 43:case"end":return e.stop()}}),e,null,[[4,40]])}))),[o,i]);return(0,C.jsxs)(d._z,{className:"deploy",ghost:!0,children:[(0,C.jsx)("div",{className:"flex flex-col items-center",children:(0,C.jsx)(f.Z,{title:(0,C.jsx)("div",{className:" text-lg font-semibold",children:B}),style:{maxWidth:"500px"},children:(0,C.jsxs)(m.A,{initialValues:{addPerm:!0},formRef:k,onFinish:function(){var e=s()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",te(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onReset:function(){var e;null===(e=k.current)||void 0===e||e.resetFields(),z([]),N([])},submitter:{searchConfig:{submitText:U},render:function(e,t){return[t[1],t[0],(0,C.jsx)(y.ZP,{onClick:ne,children:Y},"clear"),(0,C.jsxs)("span",{children:[G,": ",X," B"]},"size")]}},children:[(0,C.jsx)(p.Z,{label:(0,C.jsx)("div",{className:" text-lg font-semibold",children:".abi"}),name:"abi",action:"upload.do",fieldProps:{accept:".abi",onChange:$,beforeUpload:function(){return!1},listType:"picture",onPreview:function(e){return j.current.handleOpen(e)},fileList:M,maxCount:1},rules:[{required:!0,whitespace:!0,message:"".concat(I),pattern:/.*/}]}),(0,C.jsx)(p.Z,{label:(0,C.jsx)("div",{className:" text-lg font-semibold",children:".wasm"}),name:"wasm",action:"upload.do",fieldProps:{accept:".wasm",onChange:ee,beforeUpload:function(){return!1},listType:"picture",onPreview:function(e){return j.current.handleOpen(e)},fileList:Z,maxCount:1},rules:[{required:!0,whitespace:!0,message:"".concat(I),pattern:/.*/}]}),(0,C.jsx)(h.Z,{rules:[{required:!0}],name:"addPerm",label:W})]})})}),(0,C.jsx)(l.s,{ref:j}),r,A]})}}}]);