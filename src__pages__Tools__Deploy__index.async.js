"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2716],{91604:function(e,n,t){t.d(n,{Z:function(){return v}});var r=t(1413),a=t(87462),o=t(62435),s={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M885.2 446.3l-.2-.8-112.2-285.1c-5-16.1-19.9-27.2-36.8-27.2H281.2c-17 0-32.1 11.3-36.9 27.6L139.4 443l-.3.7-.2.8c-1.3 4.9-1.7 9.9-1 14.8-.1 1.6-.2 3.2-.2 4.8V830a60.9 60.9 0 0060.8 60.8h627.2c33.5 0 60.8-27.3 60.9-60.8V464.1c0-1.3 0-2.6-.1-3.7.4-4.9 0-9.6-1.3-14.1zm-295.8-43l-.3 15.7c-.8 44.9-31.8 75.1-77.1 75.1-22.1 0-41.1-7.1-54.8-20.6S436 441.2 435.6 419l-.3-15.7H229.5L309 210h399.2l81.7 193.3H589.4zm-375 76.8h157.3c24.3 57.1 76 90.8 140.4 90.8 33.7 0 65-9.4 90.3-27.2 22.2-15.6 39.5-37.4 50.7-63.6h156.5V814H214.4V480.1z"}}]},name:"inbox",theme:"outlined"},i=t(84089),c=function(e,n){return o.createElement(i.Z,(0,a.Z)({},e,{ref:n,icon:s}))};var l=o.forwardRef(c),u=t(28459),d=t(2058),f=t(9105),m=t(90789),p=t(86074),h=o.forwardRef((function(e,n){var t=e.fieldProps,a=e.title,s=void 0===a?"单击或拖动文件到此区域进行上传":a,i=e.icon,c=void 0===i?(0,p.jsx)(l,{}):i,m=e.description,h=void 0===m?"支持单次或批量上传":m,v=e.action,g=e.accept,x=e.onChange,b=e.value,w=e.children,C=e.max,j=e.proFieldProps,y=(0,o.useContext)(u.ZP.ConfigContext),F=(0,o.useContext)(f.A),k=(null==j?void 0:j.mode)||F.mode||"edit",L=y.getPrefixCls("upload"),P=(void 0===C||!b||(null==b?void 0:b.length)<C)&&"read"!==k&&!0!==(null==j?void 0:j.readonly);return(0,p.jsxs)(d.Z.Dragger,(0,r.Z)((0,r.Z)({ref:n,name:"files",action:v,accept:g,fileList:b},t),{},{onChange:function(e){null==x||x(e),null!=t&&t.onChange&&(null==t||t.onChange(e))},style:(0,r.Z)((0,r.Z)({},null==t?void 0:t.style),{},{display:P?void 0:"none"}),children:[(0,p.jsx)("p",{className:"".concat(L,"-drag-icon"),children:c}),(0,p.jsx)("p",{className:"".concat(L,"-text"),children:s}),(0,p.jsx)("p",{className:"".concat(L,"-hint"),children:h}),w?(0,p.jsx)("div",{className:"".concat(L,"-extra"),style:{padding:16},children:w}):null]}))})),v=(0,m.G)(h,{getValueFromEvent:function(e){return e.fileList}})},218:function(e,n,t){t.d(n,{s:function(){return f}});var r=t(5574),a=t.n(r),o=t(37476),s=t(90672),i=t(59530),c=t(45360),l=t(62435),u=t(86074),d=l.forwardRef((function(e,n){var t=c.ZP.useMessage(),r=a()(t,2),d=r[0],f=r[1],m=(0,l.useRef)(),p=(0,l.useState)(!1),h=a()(p,2),v=h[0],g=h[1],x=(0,l.useState)(""),b=a()(x,2),w=b[0],C=b[1],j=(0,l.useState)(""),y=a()(j,2),F=y[0],k=y[1],L=(0,i.useIntl)(),P=L.formatMessage({id:"msig.intlPreviewFail"}),S=L.formatMessage({id:"msig.intlClose"}),N=(0,l.useCallback)((function(e){var n=new FileReader;n.readAsText(e.originFileObj),n.onload=function(){try{var t,r=JSON.parse(n.result);if(r)null===(t=m.current)||void 0===t||t.setFieldValue("content",JSON.stringify(r,null,2)),C(JSON.stringify(r,null,2)),k(e.name),g(!0);else d.error("".concat(P))}catch(e){d.error("".concat(P))}}}),[]);return(0,l.useImperativeHandle)(n,(function(){return{handleOpen:N}})),(0,u.jsxs)(o.Y,{formRef:m,title:(0,u.jsx)("div",{className:"mt-3",children:F}),open:v,onOpenChange:function(e){g(e)},layout:"vertical",width:"700px",modalProps:{style:{top:25}},submitter:{searchConfig:{resetText:S},render:function(e,n){return[n[0]]}},children:[(0,u.jsx)(s.Z,{name:"content",fieldProps:{autoSize:{minRows:5},allowClear:!1,autoFocus:!1,onChange:void 0,value:w,size:"large"}}),f]})})),f=(0,l.memo)(d)},19068:function(e,n,t){t.r(n);var r=t(15009),a=t.n(r),o=t(99289),s=t.n(o),i=t(5574),c=t.n(i),l=t(218),u=t(64119),d=t(11774),f=t(38345),m=t(97269),p=t(91604),h=t(59530),v=t(80507),g=t(45360),x=t(62435),b=t(86074);n.default=function(){var e=g.ZP.useMessage(),n=c()(e,2),t=n[0],r=n[1],o=(0,h.useSelector)((function(e){return e.global.session})),i=(0,h.useSelector)((function(e){return e.global.account})),w=(0,x.useRef)(),C=(0,x.useRef)(),j=(0,x.useState)([]),y=c()(j,2),F=y[0],k=y[1],L=(0,x.useState)([]),P=c()(L,2),S=P[0],N=P[1],R=(0,h.useIntl)(),Z=R.formatMessage({id:"common.intlInputException"}),M=R.formatMessage({id:"msig.intlUploadFail"}),O=R.formatMessage({id:"msig.intlUploadSuccess"}),T=R.formatMessage({id:"common.intlPleaseConnectWallet"}),z=R.formatMessage({id:"common.intlPleaseConnectNetwork"}),A=R.formatMessage({id:"tools.deploy.intlDeploy"}),V=R.formatMessage({id:"tools.deploy.intlDeployContract"}),H=R.formatMessage({id:"common.intlTxSuccess"}),I=R.formatMessage({id:"common.intlTxFail"}),J=(0,x.useCallback)(function(){var e=s()(a()().mark((function e(n){var r;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(n),"removed"!==n.file.status){e.next=4;break}return k(n.fileList),e.abrupt("return");case 4:(r=new FileReader).readAsText(n.fileList[n.fileList.length-1].originFileObj),r.onload=function(){try{JSON.parse(r.result)?(k(n.fileList),t.success("".concat(O))):t.error("".concat(M))}catch(e){(0,u.Tv)(e,t)}};case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[]),U=(0,x.useCallback)(function(){var e=s()(a()().mark((function e(n){var r;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("removed"!==n.file.status){e.next=3;break}return N(n.fileList),e.abrupt("return");case 3:(r=new FileReader).readAsText(n.fileList[n.fileList.length-1].originFileObj),r.onload=function(){try{"application/wasm"===n.file.type?(N(n.fileList),t.success("".concat(O))):t.error("".concat(M))}catch(e){(0,u.Tv)(e,t)}};case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[]),D=(0,x.useCallback)(s()(a()().mark((function e(){var n,r,s,l,d,f,m,p,h,g,x;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,o&&o.broadcast){e.next=6;break}return t.error("".concat(T)),e.abrupt("return",!1);case 6:if(i){e.next=9;break}return t.error("".concat(z)),e.abrupt("return",!1);case 9:return e.next=11,new Promise((function(e){var n=new FileReader;n.readAsText(F[0].originFileObj),n.onload=function(){return e(n.result)}}));case 11:return n=e.sent,e.next=14,new Promise((function(e){var n=new FileReader;n.readAsArrayBuffer(S[0].originFileObj),n.onload=function(){return e(n.result)}}));case 14:return r=e.sent,s=v.dL.from(n),l=v.ei.encode({object:s}),d=l.toString(),f=v.Jj.from(r).toString(),(m=[]).push({account:"eosio",name:"setabi",authorization:[o.permissionLevel],data:{account:o.actor,abi:d,memo:""}}),m.push({account:"eosio",name:"setcode",authorization:[o.permissionLevel],data:{account:o.actor,code:f,vmtype:0,vmversion:0}}),e.next=24,(0,u.zI)(o.transact({actions:m}));case 24:p=e.sent,h=c()(p,2),g=h[0],x=h[1],g?t.error(g):x&&x.response?t.success("".concat(H)):t.error("".concat(I)),e.next=34;break;case 31:e.prev=31,e.t0=e.catch(0),(0,u.Tv)(e.t0,t);case 34:case"end":return e.stop()}}),e,null,[[0,31]])}))),[F,S,t,o]);return(0,b.jsxs)(d._z,{className:"deploy",ghost:!0,children:[(0,b.jsx)("div",{className:"flex flex-col items-center",children:(0,b.jsx)(f.Z,{title:(0,b.jsx)("div",{className:" text-lg font-semibold",children:V}),style:{maxWidth:"500px"},children:(0,b.jsxs)(m.A,{formRef:w,onFinish:s()(a()().mark((function e(){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",D());case 1:case"end":return e.stop()}}),e)}))),onReset:function(){var e;null===(e=w.current)||void 0===e||e.resetFields(),k([]),N([])},submitter:{searchConfig:{submitText:A},render:function(e,n){return[n[1],n[0]]}},children:[(0,b.jsx)(p.Z,{label:(0,b.jsx)("div",{className:" text-lg font-semibold",children:".abi"}),name:"abi",action:"upload.do",fieldProps:{accept:".abi",onChange:J,beforeUpload:function(){return!1},listType:"picture",onPreview:function(e){return C.current.handleOpen(e)},fileList:F,maxCount:1},rules:[{required:!0,whitespace:!0,message:"".concat(Z),pattern:/.*/}]}),(0,b.jsx)(p.Z,{label:(0,b.jsx)("div",{className:" text-lg font-semibold",children:".wasm"}),name:"wasm",action:"upload.do",fieldProps:{accept:".wasm",onChange:U,beforeUpload:function(){return!1},listType:"picture",onPreview:function(e){return C.current.handleOpen(e)},fileList:S,maxCount:1},rules:[{required:!0,whitespace:!0,message:"".concat(Z),pattern:/.*/}]})]})})}),(0,b.jsx)(l.s,{ref:C}),r]})}}}]);