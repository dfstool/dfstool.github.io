(self.webpackChunk=self.webpackChunk||[]).push([[5168],{22452:function(e,r,t){"use strict";var n=t(1413),a=t(91),s=t(62435),i=t(66758),c=t(56499),o=t(86074),l=["fieldProps","proFieldProps"],u="dateTime",d=s.forwardRef((function(e,r){var t=e.fieldProps,d=e.proFieldProps,p=(0,a.Z)(e,l),f=(0,s.useContext)(i.Z);return(0,o.jsx)(c.Z,(0,n.Z)({ref:r,fieldProps:(0,n.Z)({getPopupContainer:f.getPopupContainer},t),valueType:u,proFieldProps:d,filedConfig:{valueType:u,customLightMode:!0}},p))}));r.Z=d},64317:function(e,r,t){"use strict";var n=t(1413),a=t(91),s=t(22270),i=t(62435),c=t(66758),o=t(56499),l=t(86074),u=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],d=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],p=function(e,r){var t=e.fieldProps,d=e.children,p=e.params,f=e.proFieldProps,m=e.mode,h=e.valueEnum,v=e.request,x=e.showSearch,g=e.options,b=(0,a.Z)(e,u),j=(0,i.useContext)(c.Z);return(0,l.jsx)(o.Z,(0,n.Z)((0,n.Z)({valueEnum:(0,s.h)(h),request:v,params:p,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,n.Z)({options:g,mode:m,showSearch:x,getPopupContainer:j.getPopupContainer},t),ref:r,proFieldProps:f},b),{},{children:d}))},f=i.forwardRef((function(e,r){var t=e.fieldProps,u=e.children,p=e.params,f=e.proFieldProps,m=e.mode,h=e.valueEnum,v=e.request,x=e.options,g=(0,a.Z)(e,d),b=(0,n.Z)({options:x,mode:m||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},t),j=(0,i.useContext)(c.Z);return(0,l.jsx)(o.Z,(0,n.Z)((0,n.Z)({valueEnum:(0,s.h)(h),request:v,params:p,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,n.Z)({getPopupContainer:j.getPopupContainer},b),ref:r,proFieldProps:f},g),{},{children:u}))})),m=i.forwardRef(p);m.SearchSelect=f,m.displayName="ProFormComponent",r.Z=m},91604:function(e,r,t){"use strict";t.d(r,{Z:function(){return v}});var n=t(1413),a=t(87462),s=t(62435),i={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M885.2 446.3l-.2-.8-112.2-285.1c-5-16.1-19.9-27.2-36.8-27.2H281.2c-17 0-32.1 11.3-36.9 27.6L139.4 443l-.3.7-.2.8c-1.3 4.9-1.7 9.9-1 14.8-.1 1.6-.2 3.2-.2 4.8V830a60.9 60.9 0 0060.8 60.8h627.2c33.5 0 60.8-27.3 60.9-60.8V464.1c0-1.3 0-2.6-.1-3.7.4-4.9 0-9.6-1.3-14.1zm-295.8-43l-.3 15.7c-.8 44.9-31.8 75.1-77.1 75.1-22.1 0-41.1-7.1-54.8-20.6S436 441.2 435.6 419l-.3-15.7H229.5L309 210h399.2l81.7 193.3H589.4zm-375 76.8h157.3c24.3 57.1 76 90.8 140.4 90.8 33.7 0 65-9.4 90.3-27.2 22.2-15.6 39.5-37.4 50.7-63.6h156.5V814H214.4V480.1z"}}]},name:"inbox",theme:"outlined"},c=t(84089),o=function(e,r){return s.createElement(c.Z,(0,a.Z)({},e,{ref:r,icon:i}))};var l=s.forwardRef(o),u=t(28459),d=t(2058),p=t(9105),f=t(90789),m=t(86074),h=s.forwardRef((function(e,r){var t=e.fieldProps,a=e.title,i=void 0===a?"单击或拖动文件到此区域进行上传":a,c=e.icon,o=void 0===c?(0,m.jsx)(l,{}):c,f=e.description,h=void 0===f?"支持单次或批量上传":f,v=e.action,x=e.accept,g=e.onChange,b=e.value,j=e.children,S=e.max,C=e.proFieldProps,w=(0,s.useContext)(u.ZP.ConfigContext),k=(0,s.useContext)(p.A),y=(null==C?void 0:C.mode)||k.mode||"edit",F=w.getPrefixCls("upload"),N=(void 0===S||!b||(null==b?void 0:b.length)<S)&&"read"!==y&&!0!==(null==C?void 0:C.readonly);return(0,m.jsxs)(d.Z.Dragger,(0,n.Z)((0,n.Z)({ref:r,name:"files",action:v,accept:x,fileList:b},t),{},{onChange:function(e){null==g||g(e),null!=t&&t.onChange&&(null==t||t.onChange(e))},style:(0,n.Z)((0,n.Z)({},null==t?void 0:t.style),{},{display:N?void 0:"none"}),children:[(0,m.jsx)("p",{className:"".concat(F,"-drag-icon"),children:o}),(0,m.jsx)("p",{className:"".concat(F,"-text"),children:i}),(0,m.jsx)("p",{className:"".concat(F,"-hint"),children:h}),j?(0,m.jsx)("div",{className:"".concat(F,"-extra"),style:{padding:16},children:j}):null]}))})),v=(0,f.G)(h,{getValueFromEvent:function(e){return e.fileList}})},218:function(e,r,t){"use strict";t.d(r,{s:function(){return p}});var n=t(5574),a=t.n(n),s=t(37476),i=t(90672),c=t(59530),o=t(45360),l=t(62435),u=t(86074),d=l.forwardRef((function(e,r){var t=o.ZP.useMessage(),n=a()(t,2),d=n[0],p=n[1],f=(0,l.useRef)(),m=(0,l.useState)(!1),h=a()(m,2),v=h[0],x=h[1],g=(0,l.useState)(""),b=a()(g,2),j=b[0],S=b[1],C=(0,l.useState)(""),w=a()(C,2),k=w[0],y=w[1],F=(0,c.useIntl)(),N=F.formatMessage({id:"msig.intlPreviewFail"}),Z=F.formatMessage({id:"msig.intlClose"}),_=(0,l.useCallback)((function(e){var r=new FileReader;r.readAsText(e.originFileObj),r.onload=function(){try{var t,n=JSON.parse(r.result);if(n)null===(t=f.current)||void 0===t||t.setFieldValue("content",JSON.stringify(n,null,2)),S(JSON.stringify(n,null,2)),y(e.name),x(!0);else d.error("".concat(N))}catch(e){d.error("".concat(N))}}}),[]);return(0,l.useImperativeHandle)(r,(function(){return{handleOpen:_}})),(0,u.jsxs)(s.Y,{formRef:f,title:(0,u.jsx)("div",{className:"mt-3",children:k}),open:v,onOpenChange:function(e){x(e)},layout:"vertical",width:"700px",modalProps:{style:{top:25}},submitter:{searchConfig:{resetText:Z},render:function(e,r){return[r[0]]}},children:[(0,u.jsx)(i.Z,{name:"content",fieldProps:{autoSize:{minRows:5},allowClear:!1,autoFocus:!1,onChange:void 0,value:j,size:"large"}}),p]})})),p=(0,l.memo)(d)},3430:function(e,r,t){"use strict";t.r(r);var n=t(64599),a=t.n(n),s=t(19632),i=t.n(s),c=t(97857),o=t.n(c),l=t(15009),u=t.n(l),d=t(99289),p=t.n(d),f=t(5574),m=t.n(f),h=t(218),v=t(80059),x=t(40956),g=t(64119),b=t(87603),j=t(98165),S=t(25035),C=t(11774),w=t(38345),k=t(97269),y=t(64317),F=t(31199),N=t(5966),Z=t(91604),_=t(52688),P=t(22452),V=t(59530),T=t(80507),M=t(45360),O=t(7134),z=t(83062),L=t(15867),E=t(66309),Y=t(9669),D=t.n(Y),R=t(27484),q=t.n(R),H=t(70178),$=t.n(H),I=t(62435),A=t(51409),U=t(86074);q().extend($());var J=[];r.default=function(){var e=(0,V.useDispatch)(),r=M.ZP.useMessage(),t=m()(r,2),n=t[0],s=t[1],c=(0,V.useSelector)((function(e){return e.global.contractKit})),l=(0,V.useSelector)((function(e){return e.global.account})),d=(0,V.useSelector)((function(e){return e.global.session})),f=(0,V.useSelector)((function(e){return e.global.privateKey})),Y=(0,V.useSelector)((function(e){return e.ppp.valueEnum})),R=(0,V.useSelector)((function(e){return e.ppp.stats})),H=(0,V.useSelector)((function(e){return e.ppp.vipAccounts})),$=(0,V.useSelector)((function(e){return e.ppp.accessAccounts})),W=(0,V.useSelector)((function(e){return e.ppp.projects})),K=(0,I.useState)([]),Q=m()(K,2),B=Q[0],G=Q[1],X=(0,I.useState)(0),ee=m()(X,2),re=ee[0],te=ee[1],ne=(0,I.useState)(0),ae=m()(ne,2),se=ae[0],ie=ae[1],ce=(0,I.useState)(0),oe=m()(ce,2),le=oe[0],ue=oe[1],de=(0,I.useState)(0),pe=m()(de,2),fe=pe[0],me=pe[1],he=(0,I.useState)(0),ve=m()(he,2),xe=ve[0],ge=ve[1],be=(0,I.useState)(0),je=m()(be,2),Se=je[0],Ce=je[1],we=(0,I.useState)(0),ke=m()(we,2),ye=ke[0],Fe=ke[1],Ne=(0,I.useState)(0),Ze=m()(Ne,2),_e=Ze[0],Pe=Ze[1],Ve=(0,I.useState)(0),Te=m()(Ve,2),Me=Te[0],Oe=Te[1],ze=(0,I.useState)(0),Le=m()(ze,2),Ee=Le[0],Ye=Le[1],De=(0,I.useState)([]),Re=m()(De,2),qe=Re[0],He=Re[1],$e=(0,I.useState)([]),Ie=m()($e,2),Ae=Ie[0],Ue=Ie[1],Je=(0,I.useState)(""),We=m()(Je,2),Ke=We[0],Qe=We[1],Be=(0,I.useState)(""),Ge=m()(Be,2),Xe=Ge[0],er=Ge[1],rr=(0,I.useState)(""),tr=m()(rr,2),nr=tr[0],ar=tr[1],sr=(0,I.useState)(0),ir=m()(sr,2),cr=ir[0],or=ir[1],lr=(0,I.useState)(0),ur=m()(lr,2),dr=ur[0],pr=ur[1],fr=(0,I.useState)(0),mr=m()(fr,2),hr=mr[0],vr=mr[1],xr=(0,I.useState)(!1),gr=m()(xr,2),br=gr[0],jr=gr[1],Sr=(0,I.useState)({}),Cr=m()(Sr,2),wr=Cr[0],kr=Cr[1],yr=(0,I.useState)({}),Fr=m()(yr,2),Nr=Fr[0],Zr=Fr[1],_r=(0,I.useState)({}),Pr=m()(_r,2),Vr=Pr[0],Tr=Pr[1],Mr=(0,I.useState)({}),Or=m()(Mr,2),zr=Or[0],Lr=Or[1],Er=(0,I.useState)(!1),Yr=m()(Er,2),Dr=Yr[0],Rr=Yr[1],qr=(0,I.useState)(!1),Hr=m()(qr,2),$r=Hr[0],Ir=Hr[1],Ar=(0,I.useState)(!1),Ur=m()(Ar,2),Jr=Ur[0],Wr=Ur[1],Kr=(0,I.useState)(!1),Qr=m()(Kr,2),Br=Qr[0],Gr=Qr[1],Xr=(0,I.useState)(!1),et=m()(Xr,2),rt=et[0],tt=et[1],nt=(0,I.useState)(!1),at=m()(nt,2),st=at[0],it=at[1],ct=(0,I.useState)(!1),ot=m()(ct,2),lt=ot[0],ut=ot[1],dt=(0,I.useState)(0),pt=m()(dt,2),ft=pt[0],mt=pt[1],ht=(0,I.useState)(0),vt=m()(ht,2),xt=vt[0],gt=vt[1],bt=(0,I.useState)(0),jt=m()(bt,2),St=jt[0],Ct=jt[1],wt=(0,I.useState)(""),kt=m()(wt,2),yt=kt[0],Ft=kt[1],Nt=(0,I.useState)(!1),Zt=m()(Nt,2),_t=Zt[0],Pt=Zt[1],Vt=(0,I.useState)(!1),Tt=m()(Vt,2),Mt=Tt[0],Ot=Tt[1],zt=(0,I.useState)(!1),Lt=m()(zt,2),Et=Lt[0],Yt=Lt[1],Dt=(0,I.useState)(!1),Rt=m()(Dt,2),qt=Rt[0],Ht=Rt[1],$t=(0,I.useState)(!1),It=m()($t,2),At=It[0],Ut=It[1],Jt=(0,I.useState)(!1),Wt=m()(Jt,2),Kt=Wt[0],Qt=Wt[1],Bt=(0,I.useState)(!1),Gt=m()(Bt,2),Xt=Gt[0],en=Gt[1],rn=(0,I.useState)(!1),tn=m()(rn,2),nn=tn[0],an=tn[1],sn=(0,I.useState)({}),cn=m()(sn,2),on=cn[0],ln=cn[1],un=(0,I.useState)({}),dn=m()(un,2),pn=dn[0],fn=dn[1],mn=(0,I.useState)({}),hn=m()(mn,2),vn=hn[0],xn=hn[1],gn=(0,I.useState)({}),bn=m()(gn,2),jn=bn[0],Sn=bn[1],Cn=(0,I.useRef)({}),wn=(0,I.useRef)({}),kn=(0,I.useRef)(),yn=(0,I.useRef)(),Fn=(0,I.useRef)(),Nn=(0,I.useRef)(),Zn=(0,I.useRef)(!0),_n=(0,I.useRef)(0),Pn=(0,I.useRef)(0),Vn=(0,I.useRef)(!1),Tn=(0,V.useIntl)(),Mn=Tn.formatMessage({id:"coffee.inputException"}),On=Tn.formatMessage({id:"msig.intlSendTransaction"}),zn=Tn.formatMessage({id:"msig.intlSend"}),Ln=Tn.formatMessage({id:"msig.intlUploadFail"}),En=Tn.formatMessage({id:"msig.intlUploadSuccess"}),Yn=Tn.formatMessage({id:"msig.intlTransactionEmpty"}),Dn=Tn.formatMessage({id:"common.intlPleaseConnectWallet"}),Rn=Tn.formatMessage({id:"common.intlPleaseConnectNetwork"}),qn=(0,I.useCallback)((function(){var e=0,r=0,t=0,n=0;for(var a in Cn.current)"success"===Cn.current[a].status?r+=1:"error"===Cn.current[a].status?t+=1:"processing"===Cn.current[a].status?n+=1:"default"===Cn.current[a].status&&(e+=1);te(r),ue(t),ge(n),Fe(e)}),[]),Hn=(0,I.useCallback)((function(){var e=0,r=0,t=0,n=0;for(var a in wn.current)"success"===wn.current[a].status?r+=1:"error"===wn.current[a].status?t+=1:"processing"===wn.current[a].status?n+=1:"default"===wn.current[a].status&&(e+=1);ie(r),me(t),Ce(n),Pe(e)}),[]),$n=(0,I.useCallback)(function(){var e=p()(u()().mark((function e(r){var t,n;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],n=q()().format("YYYY-MM-DDTHH:mm:ss.SSS"),J.push({time:n}),console.log(n),r.forEach((function(e){if("success"!==Cn.current[e.cid].status&&"processing"!==Cn.current[e.cid].status&&("error"!==Cn.current[e.cid].status||!Cn.current[e.cid].message.includes("invalid price"))){var r=new Promise((function(r){Cn.current[e.cid].status="processing",qn(),d.client.v1.chain.push_transaction(e.signedTransaction).then((function(t){t&&t.processed&&"executed"===t.processed.receipt.status?(Cn.current[e.cid].status="success",qn(),r(!0)):("success"!==Cn.current[e.cid].status&&(Cn.current[e.cid].status="error",J.push({cid:e.cid,error:JSON.stringify(t),pos:"then"}),console.log(t),qn()),r(!1))})).catch((function(t){if("success"!==Cn.current[e.cid].status){if(Cn.current[e.cid].status="error",qn(),J.push({cid:e.cid,error:JSON.stringify(t),pos:"catch"}),t instanceof Error)if(t.message.includes("eosio_assert_message assertion failure"))t.details[0].message.includes("invalid price")&&(Cn.current[e.cid].message="invalid price");console.log(t)}r(!1)}))}));t.push(r)}}));case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),[d,qn]),In=(0,I.useCallback)(function(){var e=p()(u()().mark((function e(r){var t,n,a;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],n=q()().format("YYYY-MM-DDTHH:mm:ss.SSS"),J.push({time:n}),!Vn.current){e.next=9;break}return Vn.current=!1,Pn.current=performance.now(),a=(Pn.current-_n.current)/1e3,Ft(yt+" "+a.toFixed(2)),e.abrupt("return");case 9:r.forEach((function(e){if("success"!==wn.current[e.cid].status&&"processing"!==wn.current[e.cid].status&&("error"!==wn.current[e.cid].status||!wn.current[e.cid].message.includes("invalid price"))){var r=new Promise((function(r){wn.current[e.cid].status="processing",Hn(),d.client.v1.chain.push_transaction(e.signedTransaction).then((function(t){t&&t.processed&&"executed"===t.processed.receipt.status?(wn.current[e.cid].status="success",Hn(),r(!0)):("success"!==wn.current[e.cid].status&&(wn.current[e.cid].status="error",J.push({cid:e.cid,error:JSON.stringify(t),pos:"then"}),console.log(t),Hn()),r(!1))})).catch((function(t){if("success"!==wn.current[e.cid].status){if(wn.current[e.cid].status="error",Hn(),J.push({cid:e.cid,error:JSON.stringify(t),pos:"catch"}),t instanceof Error)if(t.message.includes("eosio_assert_message assertion failure"))t.details[0].message.includes("invalid price")&&(wn.current[e.cid].message="invalid price");console.log(t)}r(!1)}))}));t.push(r)}}));case 10:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),[d,Hn,yt]),An=(0,I.useCallback)((function(e,r,t){if(1===r)e.sort((function(){return Math.random()-.5}));else if(2===r)e.sort((function(e,r){return Number(e.current_price.split(" ")[0])-Number(r.current_price.split(" ")[0])}));else if(3===r)e.sort((function(e,r){var t=Number(e.current_price.split(" ")[0]);return Number(r.current_price.split(" ")[0])-t}));else if(4===r)e.sort((function(e,r){return q()(e.last_trade).valueOf()-q()(r.last_trade).valueOf()}));else{if(5===r){var n=t.toFixed(8);return e.filter((function(e){return e.current_price.split(" ")[0]===n}))}if(6===r){var a,s=null===(a=kn.current)||void 0===a?void 0:a.getFieldValue("accountsCreate");return s=s||[],e.filter((function(e){return s.includes(e.owner)}))}if(7===r){var i,c=null===(i=kn.current)||void 0===i?void 0:i.getFieldValue("accountsCreate");c=c||[];var o=e.filter((function(e){return c.includes(e.owner)}));return o.sort((function(){return Math.random()-.5})),o}if(8===r){var l,u=null===(l=kn.current)||void 0===l?void 0:l.getFieldValue("cidsCreate");return u=u||[],e.filter((function(e){return u.includes(e.cid.toString())}))}}return e}),[]),Un=(0,I.useCallback)((function(e,r,t){if(1===r)e.sort((function(){return Math.random()-.5}));else if(2===r)e.sort((function(e,r){return Number(e.current_price.split(" ")[0])-Number(r.current_price.split(" ")[0])}));else if(3===r)e.sort((function(e,r){var t=Number(e.current_price.split(" ")[0]);return Number(r.current_price.split(" ")[0])-t}));else if(4===r)e.sort((function(e,r){return q()(e.last_trade).valueOf()-q()(r.last_trade).valueOf()}));else{if(5===r){var n=t.toFixed(8);return e.filter((function(e){return e.current_price.split(" ")[0]===n}))}if(6===r){var a,s=null===(a=yn.current)||void 0===a?void 0:a.getFieldValue("accountsCreateSend");return s=s||[],e.filter((function(e){return s.includes(e.owner)}))}if(7===r){var i,c=null===(i=yn.current)||void 0===i?void 0:i.getFieldValue("accountsCreateSend");c=c||[];var o=e.filter((function(e){return c.includes(e.owner)}));return o.sort((function(){return Math.random()-.5})),o}if(8===r){var l,u=null===(l=yn.current)||void 0===l?void 0:l.getFieldValue("cidsCreateSend");return u=u||[],e.filter((function(e){return u.includes(e.cid.toString())}))}}return e}),[]),Jn=(0,I.useCallback)(p()(u()().mark((function e(){var r,t,a,s,i,o,l,p,f,m;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=null===(r=kn.current)||void 0===r?void 0:r.getFieldsValue(),a=t.pidCreate,s=Number(a.split("-")[1]),!c||!s){e.next=17;break}return Pt(!0),e.next=7,d.client.v1.chain.get_table_rows({code:"dfs3protocol",table:"registry",scope:"dfs3protocol",key_type:"i64",index_position:"secondary",lower_bound:T.zM.from(s),upper_bound:T.zM.from(s),limit:2e3});case 7:o=e.sent,l=o.rows,p=new Set,l.forEach((function(e){p.add(e.owner)})),f=Array.from(p),m={},f.forEach((function(e){m[e]=e})),null===(i=kn.current)||void 0===i||i.setFieldValue("accountsCreate",void 0),ln(m),Pt(!1);case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(0),Pt(!0),(0,g.Tv)(e.t0,n,"handleHoldersUpdateCreate");case 23:case"end":return e.stop()}}),e,null,[[0,19]])}))),[c]),Wn=(0,I.useCallback)(p()(u()().mark((function e(){var r,t,a,s,i,o,l,p,f,m;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=null===(r=yn.current)||void 0===r?void 0:r.getFieldsValue(),a=t.pidCreateSend,s=Number(a.split("-")[1]),!c||!s){e.next=17;break}return Ot(!0),e.next=7,d.client.v1.chain.get_table_rows({code:"dfs3protocol",table:"registry",scope:"dfs3protocol",key_type:"i64",index_position:"secondary",lower_bound:T.zM.from(s),upper_bound:T.zM.from(s),limit:2e3});case 7:o=e.sent,l=o.rows,p=new Set,l.forEach((function(e){p.add(e.owner)})),f=Array.from(p),m={},f.forEach((function(e){m[e]=e})),null===(i=yn.current)||void 0===i||i.setFieldValue("accountsCreateSend",void 0),fn(m),Ot(!1);case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(0),Ot(!0),(0,g.Tv)(e.t0,n,"handleHoldersUpdateCreateSend");case 23:case"end":return e.stop()}}),e,null,[[0,19]])}))),[c]),Kn=(0,I.useCallback)(p()(u()().mark((function e(){var r,t,a,s,i,o,l,p;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=null===(r=kn.current)||void 0===r?void 0:r.getFieldsValue(),a=t.pidCreate,s=Number(a.split("-")[1]),!c||!s){e.next=14;break}return Yt(!0),e.next=7,d.client.v1.chain.get_table_rows({code:"dfs3protocol",table:"registry",scope:"dfs3protocol",key_type:"i64",index_position:"secondary",lower_bound:T.zM.from(s),upper_bound:T.zM.from(s),limit:2e3});case 7:o=e.sent,l=o.rows,p={},l.forEach((function(e){p[e.cid]=e.cid})),null===(i=kn.current)||void 0===i||i.setFieldValue("cidsCreate",void 0),xn(p),Yt(!1);case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),Yt(!0),(0,g.Tv)(e.t0,n,"handleCidsUpdateCreate");case 20:case"end":return e.stop()}}),e,null,[[0,16]])}))),[c]),Qn=(0,I.useCallback)(p()(u()().mark((function e(){var r,t,a,s,i,o,l,p;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=null===(r=yn.current)||void 0===r?void 0:r.getFieldsValue(),a=t.pidCreateSend,s=Number(a.split("-")[1]),!c||!s){e.next=14;break}return Ht(!0),e.next=7,d.client.v1.chain.get_table_rows({code:"dfs3protocol",table:"registry",scope:"dfs3protocol",key_type:"i64",index_position:"secondary",lower_bound:T.zM.from(s),upper_bound:T.zM.from(s),limit:2e3});case 7:o=e.sent,l=o.rows,p={},l.forEach((function(e){p[e.cid]=e.cid})),null===(i=yn.current)||void 0===i||i.setFieldValue("cidsCreateSend",void 0),Sn(p),Ht(!1);case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),Ht(!0),(0,g.Tv)(e.t0,n,"handleCidsUpdateCreateSend");case 20:case"end":return e.stop()}}),e,null,[[0,16]])}))),[c]),Bn=(0,I.useCallback)(function(){var e=p()(u()().mark((function e(r,t){var n,a,s,i,c,o,l;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.client.v1.chain.get_table_rows({code:"dfs3protocol",table:"registry",scope:"dfs3protocol",key_type:"i64",index_position:"secondary",lower_bound:T.zM.from(r),upper_bound:T.zM.from(r),limit:2e3});case 2:n=e.sent,a=n.rows,s=[],i=d.actor.toString(),c=0;case 7:if(!(c<a.length)){e.next=18;break}if(o=a[c].owner,l=Number(a[c].current_price.split(" ")[0]),o!==i){e.next=12;break}return e.abrupt("continue",15);case 12:if(!(l>=2*t)){e.next=14;break}return e.abrupt("continue",15);case 14:s.push(a[c]);case 15:++c,e.next=7;break;case 18:return e.abrupt("return",s);case 19:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),[d,l]),Gn=(0,I.useCallback)(function(){var e=p()(u()().mark((function e(r){var t,a,s,p,h,v,x,b,j,S,C,w,k,y,F,N,Z,_,P,V,M,O,z,L,E,Y,D,R,$,I,A,U,J,W,K,Q,B,G,X,ee,re,te,ne,ae,se,ie,ce,oe,le,ue,de,pe,fe,me,he,ve,xe,ge,be,je,Se,Ce;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,d&&d.broadcast){e.next=6;break}return n.error("".concat(Dn)),e.abrupt("return");case 6:if(l){e.next=9;break}return n.error("".concat(Rn)),e.abrupt("return");case 9:if("owner"===(a=d.permissionLevel.permission.toString())||"active"===a){e.next=13;break}return n.error("permission权限必须是owner或者active"),e.abrupt("return");case 13:return Wr(!0),s=r.pidCreate,p=r.countCreate,h=r.splitCreate,v=r.startCreate,x=r.endCreate,b=r.wayCreate,j=Number(s.split("-")[1]),S=Number(b),C=d.actor.toString(),e.next=20,c.load("dfs3protocol");case 20:return w=e.sent,k=w.table("projects"),e.next=24,k.all({scope:"dfs3protocol",from:j,to:j});case 24:for(y=e.sent,F=y[0],N=F.creator.toString(),Z=F.nft_name.toString(),_=F.project_name,P=F.init_nft_price.value,V=F.init_nft_price.symbol.name,M=F.sec_per_round.toNumber(),O=F.last_round.toString(),O=q().utc(O).local().format("YYYY-MM-DDTHH:mm:ss"),z=F.increase_per_round.toNumber()/100,L=P;L*z<2*P;)L*=z;if(E="","DFS"!==V){e.next=42;break}E="eosio.token",e.next=53;break;case 42:if("USDT"!==V){e.next=46;break}E="usdtusdtusdt",e.next=53;break;case 46:if("ORDI"!==V){e.next=50;break}E="ordiordiordi",e.next=53;break;case 50:return n.error("不支持当前项目"),Wr(!1),e.abrupt("return");case 53:return e.next=55,Bn(j,P);case 55:if(Y=e.sent,Y=An(Y,S,L),!(v>Y.length)){e.next=61;break}return n.error("开始序号超过当前项目最大值".concat(Y.length)),Wr(!1),e.abrupt("return");case 61:if(!x){e.next=70;break}if(!(v>x)){e.next=66;break}return n.error("开始序号超过结束序号"),Wr(!1),e.abrupt("return");case 66:D=Y.length>x?x:Y.length,Y=Y.slice(v-1,D),e.next=71;break;case 70:Y=Y.slice(v-1);case 71:return R={account:"dfsfreecpu11",name:"freecpu",authorization:[{actor:"dfs.service",permission:"cpu"},d.permissionLevel],data:g._9.from({user:C})},$=T.aU.from(R),e.next=75,d.client.v1.chain.get_info();case 75:I=e.sent,A=I.getTransactionHeader(),U=q()(),J=[],W=0,K="",Q=0,B=0;case 83:if(!(B<Y.length)){e.next=125;break}if(!(W>=p)){e.next=86;break}return e.abrupt("break",125);case 86:if(!(W>=3e3)){e.next=88;break}return e.abrupt("break",125);case 88:return K=q()(U).add(3600-W++,"seconds").utc().format("YYYY-MM-DDTHH:mm:ss"),G=Y[B].current_price,X=T.xR.from(G),ee=X.value,re=X.symbol,te=T.xR.from(.003*ee,re),ne="buy:"+Y[B].id.toString(),Q+=ee,ae={account:E,name:"transfer",authorization:[d.permissionLevel],data:g.FE.from({from:C,to:"dfs3protocol",quantity:G,memo:ne})},se=T.aU.from(ae),ie={account:E,name:"transfer",authorization:[d.permissionLevel],data:g.FE.from({from:C,to:"davidaccount",quantity:te,memo:"nft fee"})},ce=T.aU.from(ie),oe=void 0,le=void 0,ue=[],de=H.includes(C)?[$,se]:[$,se,ce],oe=T.YW.from(o()(o()({},A),{},{expiration:K,actions:de})),ue[0]=f.signDigest(oe.signingDigest(d.chain.id.toString())),e.next=108,(0,g.zI)(d.transact({transaction:oe},{broadcast:!1,transactPlugins:[]}));case 108:if(pe=e.sent,fe=m()(pe,2),me=fe[0],he=fe[1],!me){e.next=117;break}return n.error(me),Wr(!1),Ct(0),e.abrupt("return",!1);case 117:Ct(B+1),le=T.uQ.from(o()(o()({},oe),{},{signatures:[].concat(ue,i()(he.signatures))})),ve=Y[B].cid,xe=Y[B].id,J.push({signedTransaction:le,cid:ve,nftid:xe,amount:ee,from:C});case 122:++B,e.next=83;break;case 125:ge=1,be=Math.ceil(J.length/h),je=q()().format("YYYY-MM-DDTHH:mm:ss"),Se=u()().mark((function e(){var r,t,n,a,s,i,c,o,l;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=0,t=[],n=[],(a=J.splice(0,be)).forEach((function(e){t.push(e.cid),n.push(e.nftid),r+=e.amount})),s=H.includes(C)?r.toFixed(8)+" "+V:(1.003*r).toFixed(8)+" "+V,t.sort(),n.sort(),i={infos:{type:"buy",pid:j,creator:N,project_name:_,nft_name:Z,token_symbol:V,last_round:O,sec_per_round:M,from:C,split:h,way:S,start:t[0],end:t[t.length-1],count:a.length,amount:s,cid_array:t,nftid_array:n},transactions:a},c=JSON.stringify(i,null,2),o="data:,".concat(c),(l=document.createElement("a")).href=o,l.download="".concat(C,"_").concat(j,"_").concat(W,"-").concat(ge++,"_").concat(Z,"_").concat(N,"_").concat(je,"_buy.json"),l.click();case 15:case"end":return e.stop()}}),e)}));case 129:if(!J.length){e.next=133;break}return e.delegateYield(Se(),"t0",131);case 131:e.next=129;break;case 133:return Ce=H.includes(C)?Q.toFixed(8)+" "+V:(1.003*Q).toFixed(8)+" "+V,null===(t=kn.current)||void 0===t||t.setFieldValue("amountCreate",Ce),n.success("创建完成"),Wr(!1),e.abrupt("return",!0);case 140:e.prev=140,e.t1=e.catch(0),Wr(!1),(0,g.Tv)(e.t1,n,"handleFinishCreate");case 144:return e.abrupt("return",!0);case 145:case"end":return e.stop()}}),e,null,[[0,140]])})));return function(r){return e.apply(this,arguments)}}(),[c,d,l,H,An,Bn]),Xn=(0,I.useCallback)(function(){var e=p()(u()().mark((function e(r){var t,a,s,p,h,v,x,b,j,S,C,w,k,y,F,N,Z,_,P,V,M,O,z,L,E,Y,D,R,H,$,I,A,U,J,W,K,Q,B,G,X,ee,re,te,ne,ae,se,ce,oe,le,ue,de,pe;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,d&&d.broadcast){e.next=7;break}return n.error("".concat(Dn)),console.log(Dn),e.abrupt("return");case 7:if(l){e.next=11;break}return n.error("".concat(Rn)),console.log(Rn),e.abrupt("return");case 11:if("owner"===(a=d.permissionLevel.permission.toString())||"active"===a){e.next=16;break}return n.error("permission权限必须是owner或者active"),console.log("permission权限必须是owner或者active"),e.abrupt("return");case 16:return Gr(!0),s=r.pidCreateSend,p=r.countCreateSend,h=r.startCreateSend,v=r.endCreateSend,x=r.wayCreateSend,b=Number(s.split("-")[1]),j=Number(x),S=d.actor.toString(),e.next=23,c.load("dfs3protocol");case 23:return C=e.sent,w=C.table("projects"),e.next=27,w.all({scope:"dfs3protocol",from:b,to:b});case 27:for(k=e.sent,y=k[0],F=y.creator.toString(),N=y.nft_name.toString(),Z=y.project_name,_=y.init_nft_price.value,P=y.init_nft_price.symbol.name,V=y.increase_per_round.toNumber()/100,M=_;M*V<2*_;)M*=V;if(O="","DFS"!==P){e.next=42;break}O="eosio.token",e.next=54;break;case 42:if("USDT"!==P){e.next=46;break}O="usdtusdtusdt",e.next=54;break;case 46:if("ORDI"!==P){e.next=50;break}O="ordiordiordi",e.next=54;break;case 50:return n.error("不支持当前项目"),Gr(!1),console.log("不支持当前项目"),e.abrupt("return");case 54:return e.next=56,Bn(b,_);case 56:if(z=e.sent,z=Un(z,j,M),!(h>z.length)){e.next=63;break}return n.error("开始序号超过当前项目最大值".concat(z.length)),Gr(!1),console.log("开始序号超过当前项目最大值".concat(z.length)),e.abrupt("return");case 63:if(!v){e.next=73;break}if(!(h>v)){e.next=69;break}return n.error("开始序号超过结束序号"),console.log("开始序号超过结束序号"),Gr(!1),e.abrupt("return");case 69:L=z.length>v?v:z.length,z=z.slice(h-1,L),e.next=74;break;case 73:z=z.slice(h-1);case 74:return E={account:"dfsfreecpu11",name:"freecpu",authorization:[{actor:"dfs.service",permission:"cpu"},d.permissionLevel],data:g._9.from({user:S})},Y=T.aU.from(E),e.next=78,d.client.v1.chain.get_info();case 78:D=e.sent,R=D.getTransactionHeader(),H=q()(),$=[],I={},A=0,U="",J=0,z=Un(z,j,M),W=0;case 88:if(!(W<z.length)){e.next=127;break}if(!(A>=p)){e.next=91;break}return e.abrupt("break",127);case 91:if(!(A>=3e3)){e.next=93;break}return e.abrupt("break",127);case 93:return U=q()(H).add(3600-A++,"seconds").utc().format("YYYY-MM-DDTHH:mm:ss"),K=z[W].current_price,Q=T.xR.from(K),B=Q.value,Q.symbol,G="buy:"+z[W].id.toString(),J+=B,X={account:O,name:"transfer",authorization:[d.permissionLevel],data:g.FE.from({from:S,to:"dfs3protocol",quantity:K,memo:G})},ee=T.aU.from(X),re=void 0,te=void 0,ne=[],ae=[Y,ee],re=T.YW.from(o()(o()({},R),{},{expiration:U,actions:ae})),ne[0]=f.signDigest(re.signingDigest(d.chain.id.toString())),e.next=110,(0,g.zI)(d.transact({transaction:re},{broadcast:!1,transactPlugins:[]}));case 110:if(se=e.sent,ce=m()(se,2),oe=ce[0],le=ce[1],!oe){e.next=119;break}return n.error(oe),Gr(!1),console.log(oe),e.abrupt("return",!1);case 119:te=T.uQ.from(o()(o()({},re),{},{signatures:[].concat(ne,i()(le.signatures))})),ue=z[W].cid,de=z[W].id,I[ue]={status:"default",message:""},$.push({signedTransaction:te,cid:ue,nftid:de,amount:B,from:S});case 124:++W,e.next=88;break;case 127:return pe=J.toFixed(8)+" "+P,null===(t=yn.current)||void 0===t||t.setFieldValue("amountCreateSend",pe),wn.current=I,Lr({}),me(0),ie(0),Ce(0),Pe($.length),Ue($),Ye(0),Zr({pid:b,creator:F,nft_name:N,project_name:Z}),Ye(0),n.success("创建完成"),Gr(!1),console.log("创建完成"),In($),e.abrupt("return",!0);case 146:e.prev=146,e.t0=e.catch(0),Gr(!1),(0,g.Tv)(e.t0,n,"handleFinishCreateSend");case 150:return e.abrupt("return",!0);case 151:case"end":return e.stop()}}),e,null,[[0,146]])})));return function(r){return e.apply(this,arguments)}}(),[c,d,l,H,In]),ea=(0,I.useCallback)(p()(u()().mark((function e(){var r,t,n;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(r=yn.current)||void 0===r?void 0:r.validateFields();case 2:n=null===(t=yn.current)||void 0===t?void 0:t.getFieldsValue(),Vn.current=!0,_n.current=performance.now(),Xn(n);case 6:case"end":return e.stop()}}),e)}))),[Xn]),ra=(0,I.useCallback)(function(){var e=p()(u()().mark((function e(r){var t;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==qe.length){e.next=3;break}return n.error(Yn),e.abrupt("return",!1);case 3:return t=r.disorderSend,e.prev=4,t?qe.sort((function(){return Math.random()-.5})):qe.sort((function(e,r){return e.cid-r.cid})),$n(qe),e.abrupt("return",!0);case 10:e.prev=10,e.t0=e.catch(4),(0,g.Tv)(e.t0,n,"handleFinishSend");case 13:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(r){return e.apply(this,arguments)}}(),[qe,$n]),ta=(0,I.useCallback)((function(e,r){var t=q()(e).add(r,"seconds").valueOf();pr(t)}),[]),na=(0,I.useCallback)((function(e){var r,t,n=null===(r=Fn.current)||void 0===r?void 0:r.getFieldValue("leadTimeSend");n&&e<n&&Zn.current&&(Zn.current=!1,null===(t=Fn.current)||void 0===t||t.submit())}),[]),aa=(0,I.useCallback)((function(){var e;if(null!==(e=Fn.current)&&void 0!==e&&e.getFieldValue("autoSend")){if(0===qe.length)return n.error(Yn),!1;var r=Fn.current.getFieldsValue(),t=r.disorderSend,a=r.repeatSend,s=r.intervalSend;try{t?qe.sort((function(){return Math.random()-.5})):qe.sort((function(e,r){return e.cid-r.cid})),$n(qe);for(var i=1;i<a;i++)(0,A.iK)($n,s*i,qe);return!0}catch(e){(0,g.Tv)(e,n,"handleCountDownFinishSend")}}}),[qe,$n]),sa=(0,I.useCallback)((function(){var e,r=null===(e=yn.current)||void 0===e?void 0:e.getFieldsValue();Xn(r)}),[]),ia=(0,I.useCallback)(function(){var e=p()(u()().mark((function e(r){var t,s,i,c,o,l,d,p,f,m,h,v,x,b,j;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==r.length){e.next=18;break}return Cn.current={},Tr({}),ue(0),te(0),ge(0),Fe(0),He([]),Qe(""),er(""),ar(""),pr(0),or(0),kr({}),Oe(0),null===(t=Fn.current)||void 0===t||t.setFieldValue("amountSend",""),Zn.current=!0,e.abrupt("return");case 18:e.prev=18,i=[],c=new Set,o=[],l={},d=0,p={infos:{},transactions:[]},f=a()(r),e.prev=26,h=u()().mark((function e(){var r,t;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=m.value,e.next=3,new Promise((function(e){var t=new FileReader;t.readAsText(r.originFileObj),t.onload=function(){return e(t.result)}}));case 3:t=e.sent,(p=JSON.parse(t)).transactions.forEach((function(e){c.has(e.cid)||(o.push(e),c.add(e.cid))}));case 6:case"end":return e.stop()}}),e)})),f.s();case 29:if((m=f.n()).done){e.next=33;break}return e.delegateYield(h(),"t0",31);case 31:e.next=29;break;case 33:e.next=38;break;case 35:e.prev=35,e.t1=e.catch(26),f.e(e.t1);case 38:return e.prev=38,f.f(),e.finish(38);case 41:v=p.infos.last_round,x=p.infos.sec_per_round,b=q()(v).add(x,"seconds").format("YYYY-MM-DDTHH:mm:ss"),ta(v,x),j=p.infos.token_symbol,o.forEach((function(e){var r=T.uQ.from(e.signedTransaction);i.push({cid:e.cid,nftid:e.nftid,amount:e.amount,from:e.from,signedTransaction:r}),l[e.cid]={status:"default",message:""},d+=e.amount})),null===(s=Fn.current)||void 0===s||s.setFieldValue("amountSend",d.toFixed(8)+" "+j),Cn.current=l,Tr({}),ue(0),te(0),ge(0),Fe(i.length),He(i),Qe(b),er(b),or(x),ar(v),kr(p.infos),Oe(0),Zn.current=!0,e.next=67;break;case 64:e.prev=64,e.t2=e.catch(18),(0,g.Tv)(e.t2,n,"handleFileList");case 67:case"end":return e.stop()}}),e,null,[[18,64],[26,35,38,41]])})));return function(r){return e.apply(this,arguments)}}(),[ta]),ca=(0,I.useCallback)(function(){var e=p()(u()().mark((function e(r){var t;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("removed"!==r.file.status){e.next=4;break}return G(r.fileList),ia(r.fileList),e.abrupt("return");case 4:(t=new FileReader).readAsText(r.fileList[r.fileList.length-1].originFileObj),t.onload=function(){try{var e=JSON.parse(t.result);e?e.hasOwnProperty("infos")&&"buy"===e.infos.type?(G(r.fileList),ia(r.fileList),n.success("".concat(En))):n.error("文件类型错误"):n.error("".concat(Ln))}catch(e){(0,g.Tv)(e,n,"handleUpload")}};case 7:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),[ia]),oa=(0,I.useCallback)((function(){var e;null===(e=Fn.current)||void 0===e||e.resetFields(),G([]),ue(0),te(0),ge(0),Fe(0),He([]),Qe(""),er(""),ar(""),pr(0),or(0),Cn.current={},Tr({}),kr({}),Oe(0),qn(),Zn.current=!0}),[qn]),la=(0,I.useCallback)((function(){var e;null===(e=kn.current)||void 0===e||e.resetFields(),mt(0)}),[qn]),ua=(0,I.useCallback)((function(){var e;null===(e=yn.current)||void 0===e||e.resetFields(),me(0),ie(0),Ce(0),Pe(0),Ue([]),wn.current={},Lr({}),Zr({}),Ye(0),Hn(),gt(0),Ft("")}),[Hn]),da=(0,I.useCallback)(function(){var r=p()(u()().mark((function r(t){var a,s,i,c,o,l,d,p,f,m,h;return u()().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t.load("dfs3protocol");case 3:return i=r.sent,c=i.table("projects"),o=i.table("stat"),r.next=8,c.all({scope:"dfs3protocol"});case 8:return l=r.sent,r.next=11,o.all({scope:"dfs3protocol"});case 11:return d=r.sent,r.next=14,D().get("https://api.dfs.land/dfschain/pppvolume2");case 14:200!==(p=r.sent).status&&n.error("获取pppvolume2数据失败"),f=p.data,m=[],l.forEach((function(e){f.hasOwnProperty(e.id.toString())&&m.push(e)})),m.sort((function(e,r){var t=e.id.toString(),n=r.id.toString();return f[n].volume_24h-f[t].volume_24h})),h={},m.forEach((function(e){var r=e.nft_img,t=e.id.toString(),n=e.project_name,a=e.creator.toString();h["pid-"+t]="".concat(t,"-").concat(n,"-").concat(a,"-").concat(r)})),null===(a=kn.current)||void 0===a||a.setFieldValue("pidCreate",""),null===(s=kn.current)||void 0===s||s.setFieldValue("pidCreateSend",""),e(x.N.setValueEnum(h)),e(x.N.setProjects(l)),e(x.N.setStats(d)),tt(!1),r.next=34;break;case 30:r.prev=30,r.t0=r.catch(0),tt(!1),(0,g.Tv)(r.t0,n,"handleValueEnum");case 34:case"end":return r.stop()}}),r,null,[[0,30]])})));return function(e){return r.apply(this,arguments)}}(),[]),pa=(0,I.useCallback)((function(){return d&&d.broadcast?l?(tt(!0),void da(c)):(n.error("".concat(Rn)),!1):(n.error("".concat(Dn)),!1)}),[d,l,da,c]),fa=(0,I.useCallback)(p()(u()().mark((function e(){var r,t,a,s;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(qe.length){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,Rr(!0),r={},e.next=7,d.client.v1.chain.get_table_rows({code:"dfs3protocol",table:"registry",scope:"dfs3protocol",key_type:"i64",index_position:"secondary",lower_bound:T.zM.from(wr.pid),upper_bound:T.zM.from(wr.pid),limit:2e3});case 7:t=e.sent,a=t.rows,s=0,qe.forEach((function(e){var t=e.from,n=e.cid;a.filter((function(r){return r.cid===e.cid}))[0].owner===t?(r[n]="success",s+=1):r[n]="default"})),Oe(s),Tr(r),Rr(!1),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(2),Rr(!1),(0,g.Tv)(e.t0,n,"handleCheckOwnCountSend");case 20:case"end":return e.stop()}}),e,null,[[2,16]])}))),[c,n,wr,qe,d]),ma=(0,I.useCallback)(p()(u()().mark((function e(){var r,t,a,s;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ae.length){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,Ir(!0),r={},e.next=7,d.client.v1.chain.get_table_rows({code:"dfs3protocol",table:"registry",scope:"dfs3protocol",key_type:"i64",index_position:"secondary",lower_bound:T.zM.from(Nr.pid),upper_bound:T.zM.from(Nr.pid),limit:2e3});case 7:t=e.sent,a=t.rows,s=0,Ae.forEach((function(e){var t=e.from,n=e.cid;a.filter((function(r){return r.cid===e.cid}))[0].owner===t?(r[n]="success",s+=1):r[n]="default"})),Ye(s),Lr(r),Ir(!1),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(2),Ir(!1),(0,g.Tv)(e.t0,n,"handleCheckOwnCountCreateSend");case 20:case"end":return e.stop()}}),e,null,[[2,16]])}))),[c,n,Nr,Ae,d]),ha=(0,I.useCallback)(p()(u()().mark((function e(){var r,t,n,a,s,i,c,o,l,d,p,f;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=null===(r=kn.current)||void 0===r?void 0:r.getFieldsValue(),n=t.pidCreate,a=t.wayCreate,n){e.next=3;break}return e.abrupt("return");case 3:for(it(!0),s=Number(n.split("-")[1]),i=Number(a),c=W.filter((function(e){return e.id.toNumber()===s}))[0],o=c.init_nft_price.value,l=c.increase_per_round.toNumber()/100,d=o;d*l<2*o;)d*=l;return e.next=13,Bn(s,o);case 13:p=e.sent,p=An(p,i,d),f=p.length,mt(f),Ct(0),it(!1);case 19:case"end":return e.stop()}}),e)}))),[W,Bn,An]),va=(0,I.useCallback)(p()(u()().mark((function e(){var r,t,n,a,s,i,c,o,l,d,p,f;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=null===(r=yn.current)||void 0===r?void 0:r.getFieldsValue(),n=t.pidCreateSend,a=t.wayCreateSend,n){e.next=3;break}return e.abrupt("return");case 3:for(ut(!0),s=Number(n.split("-")[1]),i=Number(a),c=W.filter((function(e){return e.id.toNumber()===s}))[0],o=c.init_nft_price.value,l=c.increase_per_round.toNumber()/100,d=o;d*l<2*o;)d*=l;return e.next=13,Bn(s,o);case 13:p=e.sent,p=Un(p,i,d),f=p.length,gt(f),ut(!1);case 18:case"end":return e.stop()}}),e)}))),[W,Bn,Un]),xa=(0,I.useCallback)(function(){var e=p()(u()().mark((function e(r){var t,a,s,i,c,o,l,d,p,f,m,h,v,x,g,b,j,S;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.hasOwnProperty("countCreate")){e.next=12;break}if(a=null===(t=kn.current)||void 0===t?void 0:t.getFieldValue("pidCreate")){e.next=4;break}return e.abrupt("return");case 4:if(s=r.countCreate,i=a.split("-")[1],c=R.filter((function(e){return e.cid.toString()===i}))[0],o=c.supply.toNumber(),!(s>o)){e.next=12;break}return n.error("购买数量超过当前项目最大值".concat(o)),null===(l=kn.current)||void 0===l||l.setFieldValue("startCreate",1),e.abrupt("return");case 12:r.hasOwnProperty("pidCreate")&&(f=null===(d=kn.current)||void 0===d?void 0:d.getFieldsValue(),"6"===(m=f.wayCreate)||"7"===m?(null===(h=kn.current)||void 0===h||h.setFieldValue("accountsCreate",void 0),ln({}),Ut(!1)):"8"===m&&(null===(v=kn.current)||void 0===v||v.setFieldValue("cidsCreate",void 0),xn({}),en(!1)),null===(p=kn.current)||void 0===p||p.setFieldValue("wayCreate","1"),ha()),r.hasOwnProperty("wayCreate")&&(b=null===(x=kn.current)||void 0===x?void 0:x.getFieldsValue(),j=b.wayCreate,S=b.pidCreate,"6"===j||"7"===j?S?(Ut(!0),Jn()):(n.error("请先选择项目"),Ut(!0)):Ut(!1),"8"===j?S?(en(!0),Kn()):(n.error("请先选择项目"),en(!0)):en(!1),ha(),null===(g=kn.current)||void 0===g||g.setFieldValue("countCreate",void 0));case 14:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),[R,n,Jn,Kn,ha]),ga=(0,I.useCallback)(function(){var e=p()(u()().mark((function e(r){var t,a,s,i,c,o,l,d,p;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.hasOwnProperty("fixedTimeSend")&&(a=null===(t=Fn.current)||void 0===t?void 0:t.getFieldsValue(),s=a.fixedTimeSend,i=a.targetTimeSend,s?null===(c=Fn.current)||void 0===c||c.validateFields().catch((function(e){var r,t;e.errorFields.length?(null===(r=Fn.current)||void 0===r||r.setFieldValue("fixedTimeSend",!1),n.error("输入异常")):i?(pr(q()(i).valueOf()),Qe(q()(i).format("YYYY-MM-DDTHH:mm:ss"))):(null===(t=Fn.current)||void 0===t||t.setFieldValue("fixedTimeSend",!1),n.error("请先设置发送时间"))})):(ta(nr,cr),Qe(Xe))),r.hasOwnProperty("targetTimeSend")&&(l=null===(o=Fn.current)||void 0===o?void 0:o.getFieldsValue(),d=l.fixedTimeSend,p=l.targetTimeSend,d&&(pr(q()(p).valueOf()),Qe(q()(p).format("YYYY-MM-DDTHH:mm:ss"))));case 2:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),[n,nr,cr,Xe,ta]),ba=(0,I.useCallback)(function(){var e=p()(u()().mark((function e(r){var t,a,s,i,c,o,l,d,p,f,m,h,v,x,g,b,j,S,C,w,k,y,F,N,Z,_,P;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.hasOwnProperty("countCreateSend")){e.next=12;break}if(a=null===(t=yn.current)||void 0===t?void 0:t.getFieldValue("pidCreateSend")){e.next=4;break}return e.abrupt("return");case 4:if(s=r.countCreateSend,i=a.split("-")[1],c=R.filter((function(e){return e.cid.toString()===i}))[0],o=c.supply.toNumber(),!(s>o)){e.next=12;break}return n.error("购买数量超过当前项目最大值".concat(o)),null===(l=yn.current)||void 0===l||l.setFieldValue("startCreateSend",1),e.abrupt("return");case 12:r.hasOwnProperty("pidCreateSend")&&(f=null===(d=yn.current)||void 0===d?void 0:d.getFieldsValue(),"6"===(m=f.wayCreateSend)||"7"===m?(null===(h=yn.current)||void 0===h||h.setFieldValue("accountsCreateSend",void 0),fn({}),Qt(!1)):"8"===m&&(null===(v=yn.current)||void 0===v||v.setFieldValue("cidsCreateSend",void 0),Sn({}),an(!1)),null===(p=yn.current)||void 0===p||p.setFieldValue("wayCreateSend","1"),va()),r.hasOwnProperty("wayCreateSend")&&(b=null===(x=yn.current)||void 0===x?void 0:x.getFieldsValue(),j=b.wayCreateSend,S=b.pidCreateSend,"6"===j||"7"===j?S?(Qt(!0),Wn()):(n.error("请先选择项目"),Qt(!0)):Qt(!1),"8"===j?S?(an(!0),Qn()):(n.error("请先选择项目"),an(!0)):an(!1),null===(g=yn.current)||void 0===g||g.setFieldValue("countCreateSend",void 0),va()),r.hasOwnProperty("fixedTimeCreateSend")&&(w=null===(C=yn.current)||void 0===C?void 0:C.getFieldsValue(),k=w.fixedTimeCreateSend,y=w.targetTimeCreateSend,k?null===(F=yn.current)||void 0===F||F.validateFields().catch((function(e){var r,t;e.errorFields.length?(null===(r=yn.current)||void 0===r||r.setFieldValue("fixedTimeCreateSend",!1),n.error("输入异常")):y?vr(q()(y).valueOf()):(null===(t=yn.current)||void 0===t||t.setFieldValue("fixedTimeCreateSend",!1),n.error("请先设置发送时间"))})):vr(0)),r.hasOwnProperty("targetTimeCreateSend")&&(Z=null===(N=yn.current)||void 0===N?void 0:N.getFieldsValue(),_=Z.fixedTimeCreateSend,P=Z.targetTimeCreateSend,vr(_?q()(P).valueOf():0));case 16:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),[R,n,W,Wn,Qn,va]),ja=(0,I.useCallback)((function(e){var r,t,n=e.length;n?null===(r=yn.current)||void 0===r||r.setFieldValue("countCreateSend",n):null===(t=yn.current)||void 0===t||t.setFieldValue("countCreateSend",void 0);gt(n)}),[]),Sa=(0,I.useCallback)((function(e){var r,t,n=e.length;n?null===(r=kn.current)||void 0===r||r.setFieldValue("countCreate",n):null===(t=kn.current)||void 0===t||t.setFieldValue("countCreate",void 0);mt(n)}),[]),Ca=(0,I.useCallback)((function(){if(br){if(l){var e=l.accountName.toString();return!!$.includes(e)||(jr(!1),!1)}return!0}if(l){var r=l.accountName.toString();return!!$.includes(r)&&(jr(!0),!0)}return!1}),[l,br,$]),wa=(0,I.useCallback)((function(){var e=q()().format("YYYY-MM-DDTHH:mm:ss"),r=JSON.stringify(J,null,2),t="data:,".concat(r),n=document.createElement("a");n.href=t,n.download="log_".concat(e,".json"),n.click()}),[]);return(0,I.useEffect)((function(){!c||Object.keys(Y).length||rt||(tt(!0),da(c))}),[da,Y,c,rt]),(0,U.jsx)(C._z,{className:"",ghost:!0,children:Ca()?(0,U.jsxs)("div",{className:"flex flex-wrap justify-center gap-5",children:[(0,U.jsxs)(w.Z,{title:(0,U.jsx)("div",{className:" font-semibold text-lg hardline",children:"使用说明"}),style:{maxWidth:"400px"},children:[(0,U.jsx)("div",{children:"1. 操作步骤如下："}),(0,U.jsxs)("div",{className:"ml-3",children:["连接钱包 ",(0,U.jsx)(b.Z,{})," 创建交易 ",(0,U.jsx)(b.Z,{})," ","发送交易"]}),(0,U.jsxs)("div",{className:"ml-3",children:["创建交易： 选择项目 ",(0,U.jsx)(b.Z,{})," 输入购买数量"," ",(0,U.jsx)(b.Z,{})," 点击创建按钮 ",(0,U.jsx)(b.Z,{})," ","保存交易文件"]}),(0,U.jsxs)("div",{className:"ml-3",children:["发送交易：上传交易文件 ",(0,U.jsx)(b.Z,{})," 等待倒计时结束"]}),(0,U.jsx)("div",{className:"mt-3",children:"2. 注意事项："}),(0,U.jsx)("div",{className:"ml-3",children:"a）交易文件的有效时间是一个小时，所以要在购买前一个小时内提前生成；"}),(0,U.jsx)("div",{className:"ml-3",children:"b）交易文件的生成过程中，需要用户重复进行多次签名，虽然繁琐，但很安全，无需用户导入私钥；"}),(0,U.jsx)("div",{className:"ml-3",children:"c）每次切换账号前，都需要先断开账号的连接。"}),(0,U.jsx)("div",{className:"mt-3",children:"3. 费用说明："}),(0,U.jsx)("div",{className:"ml-3",children:"使用工具抢到的NFT，每个收取0.3%费用。例如工具抢到一个价值为100 DFS的NFT，则工具会收取0.3 DFS作为费用，抢购成功了，才会收取。"})]}),(0,U.jsx)(w.Z,{title:(0,U.jsx)("div",{className:" font-semibold text-lg hardline",children:"创建交易"}),style:{width:"400px"},children:(0,U.jsxs)(k.A,{formRef:kn,onFinish:Gn,onReset:la,onValuesChange:xa,layout:"vertical",loading:Jr,initialValues:{splitCreate:1,startCreate:1,wayCreate:"1"},submitter:{searchConfig:{submitText:"创建"},render:function(e,r){return[r[1],r[0],(0,U.jsx)("div",{children:St||""},"sign")]}},children:[(0,U.jsx)(y.Z,{name:"pidCreate",label:(0,U.jsxs)("div",{children:["项目",(0,U.jsx)(j.Z,{spin:rt,className:"ml-[8px] hover:cursor-pointer",style:{color:"#1677ff"},onClick:pa})]}),valueEnum:Y,placeholder:"",rules:[{required:!0,whitespace:!0,message:"".concat(Mn),pattern:/^.+$/}],fieldProps:{size:"large",autoFocus:!1,showSearch:!0,filterOption:function(e,r){var t=r.label.split("-"),n=m()(t,3),a=n[0],s=n[1],i=n[2];return(a.padStart(3,"0")+s+i).toLowerCase().includes(e.toLowerCase())},optionItemRender:function(e){var r=e.label.split("-"),t=m()(r,4),n=t[0],a=t[1],s=t[2],i=t[3];return(0,U.jsxs)("div",{className:"flex items-center",children:[(0,U.jsx)("div",{className:"mr-2",children:n.padStart(3,"0")}),(0,U.jsx)(O.C,{className:"mr-2",size:"default",src:i}),(0,U.jsxs)("div",{children:[a," @",s]})]})}}}),(0,U.jsx)(y.Z,{name:"wayCreate",label:"购买方式",valueEnum:{1:"随机",2:"价格低到高",3:"价格高到低",4:"时间优先",5:"只抢拆分",6:"指定账号(顺序)",7:"指定账号(随机)",8:"指定序号"},placeholder:"",rules:[{required:!0,whitespace:!0,message:"".concat(Mn),pattern:/^.+$/}],fieldProps:{size:"large",autoFocus:!1,showSearch:!0,defaultValue:"1"}}),!!At&&(0,U.jsx)(y.Z,{name:"accountsCreate",label:(0,U.jsxs)("div",{children:["选择账号",(0,U.jsx)(j.Z,{spin:_t,className:"ml-[8px] hover:cursor-pointer",style:{color:"#1677ff"},onClick:Jn})]}),valueEnum:on,fieldProps:{mode:"multiple"},placeholder:"",rules:[{required:!0,whitespace:!0,message:"".concat(Mn),pattern:/^.+$/}]}),!!Xt&&(0,U.jsx)(y.Z,{name:"cidsCreate",label:(0,U.jsxs)("div",{children:["选择序号",(0,U.jsx)(j.Z,{spin:Et,className:"ml-[8px] hover:cursor-pointer",style:{color:"#1677ff"},onClick:Kn})]}),valueEnum:vn,onChange:Sa,fieldProps:{mode:"multiple"},placeholder:"",rules:[{required:!0,whitespace:!0,message:"".concat(Mn),pattern:/^.+$/}]}),(0,U.jsx)(F.Z,{name:"countCreate",label:(0,U.jsxs)("div",{children:[(0,U.jsx)("span",{children:"购买数量 "}),(0,U.jsx)("span",{className:"hover:cursor-pointer",style:{color:"#1677ff"},onClick:function(){var e,r;null===(e=kn.current)||void 0===e||e.setFieldValue("countCreate",ft),null===(r=kn.current)||void 0===r||r.validateFields(["countCreate"])},children:ft?"(".concat(ft,")"):""}),(0,U.jsx)(j.Z,{spin:st,className:"ml-[8px] hover:cursor-pointer",style:{color:"#1677ff"},onClick:ha})]}),placeholder:"",min:1,rules:[{required:!0,message:"".concat(Mn),whitespace:!0,pattern:/^\d+$/}],fieldProps:{autoFocus:!1,size:"large"}}),(0,U.jsx)(F.Z,{name:"startCreate",label:(0,U.jsxs)("div",{children:["开始序号#",(0,U.jsx)(z.Z,{placement:"topLeft",title:"从具体某个序号开始进行购买",children:(0,U.jsx)(S.Z,{className:"ml-[8px] hover:cursor-pointer",style:{color:"#1677ff"}})})]}),placeholder:"",min:1,rules:[{required:!0,message:"".concat(Mn),whitespace:!0,pattern:/^\d+$/}],fieldProps:{autoFocus:!1,size:"large",defaultValue:1}}),(0,U.jsx)(F.Z,{name:"endCreate",label:(0,U.jsxs)("div",{children:["结束序号#",(0,U.jsx)(z.Z,{placement:"topLeft",title:"只购买当前序号之前的NFT",children:(0,U.jsx)(S.Z,{className:"ml-[8px] hover:cursor-pointer",style:{color:"#1677ff"}})})]}),placeholder:"可选，默认是当前序号的最大值",min:1,rules:[{required:!1,message:"".concat(Mn),whitespace:!0,pattern:/^\d+$/}],fieldProps:{autoFocus:!1,size:"large"}}),(0,U.jsx)(F.Z,{name:"splitCreate",label:(0,U.jsxs)("div",{children:["拆分文件数量",(0,U.jsx)(z.Z,{placement:"topLeft",title:"将所有交易信息拆分成多个文件来保存",children:(0,U.jsx)(S.Z,{className:"ml-[8px] hover:cursor-pointer",style:{color:"#1677ff"}})})]}),placeholder:"",min:1,rules:[{required:!0,message:"".concat(Mn),whitespace:!0,pattern:/^\d+$/}],fieldProps:{autoFocus:!1,size:"large",defaultValue:1}}),(0,U.jsx)(N.Z,{name:"amountCreate",label:(0,U.jsxs)("div",{children:["总金额",(0,U.jsx)(z.Z,{placement:"topLeft",title:"此次全部交易所需要的总金额，包含手续费。",children:(0,U.jsx)(S.Z,{className:"ml-[8px] hover:cursor-pointer",style:{color:"#1677ff"}})})]}),placeholder:"自动生成，无需输入",fieldProps:{size:"large",autoFocus:!1,defaultValue:"",readOnly:!0}}),(0,U.jsx)("div",{className:" text-red-600 text-lg mb-3",children:"注意：交易文件只在一个小时内有效！"})]})}),(0,U.jsx)(w.Z,{title:(0,U.jsx)("div",{className:" font-semibold text-lg hardline",children:On}),style:{width:"400px"},children:(0,U.jsxs)(k.A,{formRef:Fn,onFinish:ra,onReset:oa,onValuesChange:ga,submitter:{searchConfig:{submitText:zn},render:function(e,r){return[r[1],(0,U.jsx)(L.ZP,{loading:Dr,onClick:fa,children:"校对"},"check"),(0,U.jsx)(L.ZP,{onClick:wa,children:"日志"},"log"),r[0]]}},initialValues:{disorderSend:!0,autoSend:!0,repeatSend:10,intervalSend:1e3,leadTimeSend:0,fixedTimeSend:!1},children:[(0,U.jsx)(Z.Z,{label:"交易文件",name:"transactionInfo",action:"upload.do",fieldProps:{accept:".json",onChange:ca,beforeUpload:function(){return!1},listType:"picture",onPreview:function(e){return Nn.current.handleOpen(e)},fileList:B},rules:[{required:!0,whitespace:!0,message:"".concat(Mn),pattern:/.*/}]}),(0,U.jsx)(F.Z,{label:(0,U.jsxs)("div",{children:["整体重复发送次数",(0,U.jsx)(z.Z,{placement:"topLeft",title:"整体全部发送完成算一次，这里指定重复次数。重复发送失败了，不会影响金额",children:(0,U.jsx)(S.Z,{className:"ml-[8px] hover:cursor-pointer",style:{color:"#1677ff"}})})]}),name:"repeatSend",placeholder:"",min:1,rules:[{required:!0,message:"".concat(Mn),whitespace:!0,pattern:/^\d+$/}],fieldProps:{autoFocus:!1,size:"large",defaultValue:10}}),(0,U.jsx)(F.Z,{label:(0,U.jsxs)("div",{children:["整体重复发送间隔(毫秒)",(0,U.jsx)(z.Z,{placement:"topLeft",title:"整体全部发送完成算一次，这里指定重复的间隔时间",children:(0,U.jsx)(S.Z,{className:"ml-[8px] hover:cursor-pointer",style:{color:"#1677ff"}})})]}),name:"intervalSend",placeholder:"",min:300,rules:[{required:!0,message:"".concat(Mn),whitespace:!0,pattern:/^\d+$/}],fieldProps:{autoFocus:!1,size:"large",defaultValue:1e3}}),(0,U.jsx)(F.Z,{label:(0,U.jsxs)("div",{children:["提前发送时间(毫秒)",(0,U.jsx)(z.Z,{placement:"topLeft",title:"在下一轮开始前多少毫秒发送交易",children:(0,U.jsx)(S.Z,{className:"ml-[8px] hover:cursor-pointer",style:{color:"#1677ff"}})})]}),name:"leadTimeSend",placeholder:"",max:2e3,min:0,rules:[{required:!0,message:"".concat(Mn),whitespace:!0,pattern:/^\d+$/}],fieldProps:{autoFocus:!1,size:"large",defaultValue:0}}),(0,U.jsx)(_.Z,{name:"disorderSend",label:(0,U.jsxs)("div",{children:["是否乱序",(0,U.jsx)(z.Z,{placement:"topLeft",title:"是否以乱序的方式来发送交易",children:(0,U.jsx)(S.Z,{className:"ml-[8px] hover:cursor-pointer",style:{color:"#1677ff"}})})]}),rules:[{required:!0,message:"".concat(Mn),whitespace:!0,pattern:/^true|false$/}],fieldProps:{autoFocus:!1,defaultValue:!0}}),(0,U.jsx)(_.Z,{name:"autoSend",label:(0,U.jsxs)("div",{children:["是否自动发送",(0,U.jsx)(z.Z,{placement:"topLeft",title:"倒计时结束后，是否自动发送交易。开启与否，不影响手动操作来发",children:(0,U.jsx)(S.Z,{className:"ml-[8px] hover:cursor-pointer",style:{color:"#1677ff"}})})]}),rules:[{required:!0,message:"".concat(Mn),whitespace:!0,pattern:/^true|false$/}],fieldProps:{autoFocus:!1,defaultValue:!0}}),(0,U.jsx)(_.Z,{name:"fixedTimeSend",label:(0,U.jsxs)("div",{children:["是否指定发送时间",(0,U.jsx)(z.Z,{placement:"topLeft",title:"",children:(0,U.jsx)(S.Z,{className:"ml-[8px] hover:cursor-pointer",style:{color:"#1677ff"}})})]}),rules:[{required:!0,message:"".concat(Mn),whitespace:!0,pattern:/^true|false$/}],fieldProps:{autoFocus:!1,defaultValue:!1}}),(0,U.jsx)(P.Z,{name:"targetTimeSend",label:(0,U.jsxs)("div",{children:["指定发送时间",(0,U.jsx)(z.Z,{placement:"topLeft",title:"在指定时间点自动进行交易操作",children:(0,U.jsx)(S.Z,{className:"ml-[8px] hover:cursor-pointer",style:{color:"#1677ff"}})})]}),placeholder:"",rules:[{required:!1,whitespace:!0,message:"".concat(Mn),pattern:/^.+$/}],fieldProps:{size:"large",autoFocus:!1},width:"100%"}),(0,U.jsx)(N.Z,{name:"amountSend",label:(0,U.jsxs)("div",{children:["总金额",(0,U.jsx)(z.Z,{placement:"topLeft",title:"此次全部交易所需要的总金额，包含手续费",children:(0,U.jsx)(S.Z,{className:"ml-[8px] hover:cursor-pointer",style:{color:"#1677ff"}})})]}),placeholder:"自动生成，无需输入",fieldProps:{size:"large",autoFocus:!1,defaultValue:"",readOnly:!0}}),(0,U.jsx)(k.A.Item,{label:(0,U.jsxs)("div",{className:" font-semibold text-lg ",children:[(0,U.jsx)("span",{className:"hardline",children:"倒计时 "}),wr.pid?"(".concat(wr.pid,"-").concat(wr.project_name," @").concat(wr.creator,")"):""]}),children:(0,U.jsxs)("div",{className:"flex items-center gap-x-5",children:[(0,U.jsx)(v.Wo,{className:"text-2xl",value:dr,onFinish:aa,onChange:na}),(0,U.jsx)("div",{className:"text-2xl",children:"".concat(Ke)})]})}),(0,U.jsxs)(k.A.Item,{label:(0,U.jsxs)("div",{className:" font-semibold text-lg hardline",children:[(0,U.jsx)("span",{children:"结果 "}),qe.length?"(".concat(qe.length,")"):""]}),children:[(0,U.jsx)("div",{children:"成功：".concat(re,"，失败：").concat(le,"，处理中：").concat(xe,"，待处理：").concat(ye)}),!!qe.length&&(0,U.jsx)("div",{className:"flex flex-wrap gap-5 mt-3",children:Object.keys(Cn.current).map((function(e,r){return(0,U.jsx)(E.Z,{color:Cn.current[e].status,children:"#".concat(e)},r)}))})]}),(0,U.jsxs)(k.A.Item,{label:(0,U.jsx)("div",{className:" font-semibold text-lg hardline",children:(0,U.jsxs)("div",{children:[(0,U.jsx)("span",{children:"校对 "}),qe.length?"(".concat(qe.length,")"):"",(0,U.jsx)(z.Z,{placement:"topLeft",title:"交易结束后，可点击校对按钮，判断交易结果是否跟链上数据匹配",children:(0,U.jsx)(S.Z,{className:"ml-[8px] hover:cursor-pointer",style:{color:"#1677ff"}})})]})}),children:[(0,U.jsx)("div",{children:"拥有：".concat(Me)}),!!qe.length&&(0,U.jsx)("div",{className:"flex flex-wrap gap-5 mt-3",children:Object.keys(Vr).map((function(e,r){return(0,U.jsx)(E.Z,{color:Vr[e],children:"#".concat(e)},r)}))})]})]})}),(0,U.jsx)(w.Z,{title:(0,U.jsx)("div",{className:" font-semibold text-lg hardline",children:"创建并发送交易"}),style:{width:"400px"},children:(0,U.jsxs)(k.A,{formRef:yn,onFinish:Xn,onValuesChange:ba,onReset:ua,layout:"vertical",loading:Br,initialValues:{startCreateSend:1,wayCreateSend:"1",fixedTimeCreateSend:!1},submitter:{searchConfig:{submitText:"发送"},render:function(e,r){return[r[1],(0,U.jsx)(L.ZP,{loading:$r,onClick:ma,children:"校对"},"check"),(0,U.jsx)(L.ZP,{onClick:ea,children:"测试"},"test"),(0,U.jsx)(L.ZP,{onClick:wa,children:"日志"},"log"),r[0]]}},children:[(0,U.jsx)(y.Z,{name:"pidCreateSend",label:(0,U.jsxs)("div",{children:["项目",(0,U.jsx)(j.Z,{spin:rt,className:"ml-[8px] hover:cursor-pointer",style:{color:"#1677ff"},onClick:pa})]}),valueEnum:Y,placeholder:"",rules:[{required:!0,whitespace:!0,message:"".concat(Mn),pattern:/^.+$/}],fieldProps:{size:"large",autoFocus:!1,showSearch:!0,filterOption:function(e,r){var t=r.label.split("-"),n=m()(t,3),a=n[0],s=n[1],i=n[2];return(a.padStart(3,"0")+s+i).toLowerCase().includes(e.toLowerCase())},optionItemRender:function(e){var r=e.label.split("-"),t=m()(r,4),n=t[0],a=t[1],s=t[2],i=t[3];return(0,U.jsxs)("div",{className:"flex items-center",children:[(0,U.jsx)("div",{className:"mr-2",children:n.padStart(3,"0")}),(0,U.jsx)(O.C,{className:"mr-2",size:"default",src:i}),(0,U.jsxs)("div",{children:[a," @",s]})]})}}}),(0,U.jsx)(y.Z,{name:"wayCreateSend",label:"购买方式",valueEnum:{1:"随机",2:"价格低到高",3:"价格高到低",4:"时间优先",5:"只抢拆分",6:"指定账号(顺序)",7:"指定账号(随机)",8:"指定序号"},placeholder:"",rules:[{required:!0,whitespace:!0,message:"".concat(Mn),pattern:/^.+$/}],fieldProps:{size:"large",autoFocus:!1,showSearch:!0,defaultValue:"1"}}),!!Kt&&(0,U.jsx)(y.Z,{name:"accountsCreateSend",label:(0,U.jsxs)("div",{children:["选择账号",(0,U.jsx)(j.Z,{spin:Mt,className:"ml-[8px] hover:cursor-pointer",style:{color:"#1677ff"},onClick:Wn})]}),valueEnum:pn,fieldProps:{mode:"multiple"},placeholder:"",rules:[{required:!0,whitespace:!0,message:"".concat(Mn),pattern:/^.+$/}]}),!!nn&&(0,U.jsx)(y.Z,{name:"cidsCreateSend",label:(0,U.jsxs)("div",{children:["选择序号",(0,U.jsx)(j.Z,{spin:qt,className:"ml-[8px] hover:cursor-pointer",style:{color:"#1677ff"},onClick:Qn})]}),valueEnum:jn,onChange:ja,fieldProps:{mode:"multiple"},placeholder:"",rules:[{required:!0,whitespace:!0,message:"".concat(Mn),pattern:/^.+$/}]}),(0,U.jsx)(F.Z,{name:"countCreateSend",label:(0,U.jsxs)("div",{children:[(0,U.jsx)("span",{children:"购买数量 "}),(0,U.jsx)("span",{className:"hover:cursor-pointer",style:{color:"#1677ff"},onClick:function(){var e,r;null===(e=yn.current)||void 0===e||e.setFieldValue("countCreateSend",xt),null===(r=yn.current)||void 0===r||r.validateFields(["countCreateSend"])},children:xt?"(".concat(xt,")"):""}),(0,U.jsx)(j.Z,{spin:lt,className:"ml-[8px] hover:cursor-pointer",style:{color:"#1677ff"},onClick:va})]}),placeholder:"",min:1,rules:[{required:!0,message:"".concat(Mn),whitespace:!0,pattern:/^\d+$/}],fieldProps:{autoFocus:!1,size:"large"}}),(0,U.jsx)(F.Z,{name:"startCreateSend",label:(0,U.jsxs)("div",{children:["开始序号#",(0,U.jsx)(z.Z,{placement:"topLeft",title:"从具体某个序号开始进行购买",children:(0,U.jsx)(S.Z,{className:"ml-[8px] hover:cursor-pointer",style:{color:"#1677ff"}})})]}),placeholder:"",min:1,rules:[{required:!0,message:"".concat(Mn),whitespace:!0,pattern:/^\d+$/}],fieldProps:{autoFocus:!1,size:"large",defaultValue:1}}),(0,U.jsx)(F.Z,{name:"endCreateSend",label:(0,U.jsxs)("div",{children:["结束序号#",(0,U.jsx)(z.Z,{placement:"topLeft",title:"只购买当前序号之前的NFT",children:(0,U.jsx)(S.Z,{className:"ml-[8px] hover:cursor-pointer",style:{color:"#1677ff"}})})]}),placeholder:"可选，默认是当前序号的最大值",min:1,rules:[{required:!1,message:"".concat(Mn),whitespace:!0,pattern:/^\d+$/}],fieldProps:{autoFocus:!1,size:"large"}}),(0,U.jsx)(_.Z,{name:"fixedTimeCreateSend",label:(0,U.jsxs)("div",{children:["是否指定发送时间",(0,U.jsx)(z.Z,{placement:"topLeft",title:"",children:(0,U.jsx)(S.Z,{className:"ml-[8px] hover:cursor-pointer",style:{color:"#1677ff"}})})]}),rules:[{required:!0,message:"".concat(Mn),whitespace:!0,pattern:/^true|false$/}],fieldProps:{autoFocus:!1,defaultValue:!1}}),(0,U.jsx)(P.Z,{name:"targetTimeCreateSend",label:(0,U.jsxs)("div",{children:["指定发送时间",(0,U.jsx)(z.Z,{placement:"topLeft",title:"在指定时间点自动进行交易操作",children:(0,U.jsx)(S.Z,{className:"ml-[8px] hover:cursor-pointer",style:{color:"#1677ff"}})})]}),placeholder:"",rules:[{required:!1,whitespace:!0,message:"".concat(Mn),pattern:/^.+$/}],fieldProps:{size:"large",autoFocus:!1},width:"100%"}),(0,U.jsx)(N.Z,{name:"amountCreateSend",label:(0,U.jsxs)("div",{children:["总金额",(0,U.jsx)(z.Z,{placement:"topLeft",title:"此次全部交易所需要的总金额，包含手续费。",children:(0,U.jsx)(S.Z,{className:"ml-[8px] hover:cursor-pointer",style:{color:"#1677ff"}})})]}),placeholder:"自动生成，无需输入",fieldProps:{size:"large",autoFocus:!1,defaultValue:"",readOnly:!0}}),(0,U.jsx)(k.A.Item,{label:(0,U.jsx)("div",{className:" font-semibold text-lg ",children:(0,U.jsx)("span",{className:"hardline",children:"倒计时 "})}),children:(0,U.jsx)("div",{className:"flex items-center gap-x-5",children:(0,U.jsx)(v.Wo,{className:"text-2xl",value:hr,onFinish:sa})})}),(0,U.jsxs)(k.A.Item,{label:(0,U.jsxs)("div",{className:" font-semibold text-lg hardline",children:[(0,U.jsx)("span",{children:"结果 "}),Ae.length?"(".concat(Ae.length,")"):""]}),children:[(0,U.jsx)("div",{children:"成功：".concat(se,"，失败：").concat(fe,"，处理中：").concat(Se,"，待处理：").concat(_e)}),!!Ae.length&&(0,U.jsx)("div",{className:"flex flex-wrap gap-5 mt-3",children:Object.keys(wn.current).map((function(e,r){return(0,U.jsx)(E.Z,{color:wn.current[e].status,children:"#".concat(e)},r)}))})]}),(0,U.jsxs)(k.A.Item,{label:(0,U.jsx)("div",{className:" font-semibold text-lg hardline",children:(0,U.jsxs)("div",{children:[(0,U.jsx)("span",{children:"校对 "}),Ae.length?"(".concat(Ae.length,")"):"",(0,U.jsx)(z.Z,{placement:"topLeft",title:"交易结束后，可点击校对按钮，判断交易结果是否跟链上数据匹配",children:(0,U.jsx)(S.Z,{className:"ml-[8px] hover:cursor-pointer",style:{color:"#1677ff"}})})]})}),children:[(0,U.jsx)("div",{children:"拥有：".concat(Ee)}),!!Ae.length&&(0,U.jsx)("div",{className:"flex flex-wrap gap-5 mt-3",children:Object.keys(zr).map((function(e,r){return(0,U.jsx)(E.Z,{color:zr[e],children:"#".concat(e)},r)}))})]}),(0,U.jsx)(k.A.Item,{label:(0,U.jsx)("div",{className:" font-semibold text-lg hardline",children:(0,U.jsx)("span",{children:"测试 "})}),children:(0,U.jsx)("div",{children:"创建所需时间(秒)：".concat(yt||0)})})]})}),s,(0,U.jsx)(h.s,{ref:Nn})]}):(0,U.jsx)("div",{children:"此工具为收费功能，有需要请联系开发者。"})})}},64599:function(e,r,t){var n=t(96263);e.exports=function(e,r){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=n(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var a=0,s=function(){};return{s:s,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,o=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return c=e.done,e},e:function(e){o=!0,i=e},f:function(){try{c||null==t.return||t.return()}finally{if(o)throw i}}}},e.exports.__esModule=!0,e.exports.default=e.exports}}]);