"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3584],{80652:function(e,t,a){var r=a(62435),n=a(20701),s=a(11924),c=a(79360),i=a(24770),o=a(79642),u=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]])}return a},l=(0,r.forwardRef)((function(e,t){var a=e.chartRef,l=e.style,m=void 0===l?{height:"inherit"}:l,f=e.className,d=e.loading,p=e.loadingTemplate,h=e.errorTemplate,b=u(e,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),g=(0,s.Z)(n.x1,b),x=g.chart,v=g.container;return(0,r.useEffect)((function(){(0,c.J)(a,x.current)}),[x.current]),(0,r.useImperativeHandle)(t,(function(){return{getChart:function(){return x.current}}})),r.createElement(i.Z,{errorTemplate:h},d&&r.createElement(o.Z,{loadingTemplate:p,theme:e.theme}),r.createElement("div",{className:f,style:m,ref:v}))}));t.Z=l},92847:function(e,t,a){a.r(t);var r=a(97857),n=a.n(r),s=a(15009),c=a.n(s),i=a(99289),o=a.n(i),u=a(5574),l=a.n(u),m=a(5621),f=a(64119),d=a(80652),p=a(38345),h=a(59530),b=a(45360),g=a(57953),x=a(32983),v=a(9669),k=a.n(v),y=a(27484),E=a.n(y),S=a(70178),j=a.n(S),Z=a(62435),N=a(86074);E().extend(j());t.default=function(){var e=(0,h.useDispatch)(),t=b.ZP.useMessage(),a=l()(t,2),r=a[0],s=a[1],i=(0,Z.useState)(!1),u=l()(i,2),v=u[0],y=u[1],S=(0,Z.useState)(""),j=l()(S,2),O=j[0],w=j[1],P=(0,h.useSelector)((function(e){return e.global.session})),_=(0,h.useSelector)((function(e){return e.statistics.minuteDataSource})),F=(0,h.useSelector)((function(e){return e.statistics.hourDataSource})),M=(0,h.useIntl)(),T=M.formatMessage({id:"statistics.intlMinutePool"}),C=M.formatMessage({id:"statistics.intlHourPool"}),D=(0,Z.useCallback)(o()(c()().mark((function e(){var t,a,n,s,i,o,u,m,d,p,h,b,g,x;return c()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],a=500,n=E()().subtract(2,"day").utc().format(),s=0;case 4:return e.next=7,(0,f.zI)(k().get("https://api2.dfsmoon.com/v2/history/get_actions?track=true&sort=asc&simple=true&noBinary=true&account=dfsminingout&after=".concat(n,"&limit=").concat(a)));case 7:if(i=e.sent,o=l()(i,2),u=o[0],m=o[1],u||200!==m.status){e.next=38;break}for(d=m.data.simple_actions,p=d.length,h=1,b=0;b<d.length;b++)s<=b&&t.push(d[b]);if(t.length){e.next=18;break}return e.abrupt("return",t);case 18:g=t.length-1;case 19:if(!(g>0)){e.next=28;break}if(t[g].transaction_id!==t[g-1].transaction_id){e.next=24;break}h+=1,e.next=25;break;case 24:return e.abrupt("break",28);case 25:g--,e.next=19;break;case 28:if(s=h,p!==a){e.next=35;break}x=t[t.length-1].timestamp,n=x,w(x.slice(0,13)),e.next=36;break;case 35:return e.abrupt("return",t);case 36:e.next=40;break;case 38:return r.error(u),e.abrupt("return",t);case 40:e.next=4;break;case 42:case"end":return e.stop()}}),e)}))),[r]),I=(0,Z.useCallback)(o()(c()().mark((function t(){var a,n,s,i,o,u,l,d,p;return c()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=[],n=[],t.next=5,D();case 5:return(s=t.sent).sort((function(e,t){return t.timestamp.localeCompare(e.timestamp)})),t.next=9,P.client.v1.chain.get_currency_balance("eosio.token","dfsminingout","DFS");case 9:i=t.sent,o={},u={},l=E()().add(1,"minute").format().slice(0,16),d=E()().add(1,"hour").format().slice(0,13),p=i[0].value,o[l]=p,u[d]=p,s.forEach((function(e){var t=e.data.from,a=e.data.to,r=e.data.amount,n=E().utc(e.timestamp).local().format().slice(0,16),s=E().utc(e.timestamp).local().format().slice(0,13);"dfsminingout"===a?(p-=r,o[n]=p,u[s]=p):"dfsminingout"===t&&(p+=r,o[n]=p,u[s]=p)})),Object.keys(o).forEach((function(e){a.push({time:e.slice(8),value:Number(o[e].toFixed(0)),category:T})})),Object.keys(u).forEach((function(e){var t=E()(e).subtract(1,"hour").format().slice(0,13);n.push({time:t.slice(8),value:Number(u[e].toFixed(0)),category:C})})),a.sort((function(e,t){return e.time.localeCompare(t.time)})),n.sort((function(e,t){return e.time.localeCompare(t.time)})),e(m.N.setMinuteDataSource(a)),e(m.N.setHourDataSource(n)),y(!1),t.next=31;break;case 27:t.prev=27,t.t0=t.catch(0),y(!1),(0,f.Tv)(t.t0,r);case 31:case"end":return t.stop()}}),t,null,[[0,27]])}))),[D,P]),R={data:_,xField:"time",yField:"value",seriesField:"category",slider:{start:0,end:1},smooth:!0,label:{}},H={data:F,xField:"time",yField:"value",seriesField:"category",slider:{start:0,end:1},smooth:!0,label:{}};return(0,Z.useEffect)((function(){_.length?y(!1):y(!0),I()}),[I]),(0,N.jsxs)("div",{className:"autoclaim",children:[(0,N.jsxs)(g.Z,{size:"large",spinning:v,tip:O,children:[(0,N.jsx)(p.Z,{className:"mb-3",children:_.length?(0,N.jsx)(d.Z,n()(n()({},R),{},{loading:v})):(0,N.jsx)(x.Z,{image:x.Z.PRESENTED_IMAGE_SIMPLE})}),(0,N.jsx)(p.Z,{className:"mb-3",children:F.length?(0,N.jsx)(d.Z,n()(n()({},H),{},{loading:v})):(0,N.jsx)(x.Z,{image:x.Z.PRESENTED_IMAGE_SIMPLE})})]}),s]})}}}]);