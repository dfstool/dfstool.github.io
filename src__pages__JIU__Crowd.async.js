"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[382],{40945:function(e,t,n){n.r(t);var s=n(15009),a=n.n(s),i=n(99289),r=n.n(i),c=n(5574),u=n.n(c),l=n(81876),o=n(64119),d=n(11774),f=n(38345),x=n(59530),h=n(45360),v=n(2487),j=n(62435),m=n(86074);t.default=function(){var e=(0,x.useDispatch)(),t=h.ZP.useMessage(),n=u()(t,2),s=n[0],i=n[1],c=(0,x.useNavigate)(),g=(0,x.useSelector)((function(e){return e.global.contractKit})),p=(0,j.useState)(!1),b=u()(p,2),y=b[0],w=b[1],k=(0,x.useSelector)((function(e){return e.jiu.crowdDataSource})),S=(0,j.useState)(0),C=u()(S,2),N=C[0],_=C[1],q=(0,j.useState)(0),F=u()(q,2),M=F[0],D=F[1],I=(0,j.useState)(0),Z=u()(I,2),E=Z[0],A=Z[1],U=(0,x.useIntl)(),z=U.formatMessage({id:"jiu.intlCrowdRank"}),B=U.formatMessage({id:"jiu.intlCrowdUsers"}),J=U.formatMessage({id:"jiu.intlCrowdValue"}),K=U.formatMessage({id:"jiu.intlCrowdAccount"}),P=(0,j.useCallback)(function(){var t=r()(a()().mark((function t(n){var i,r,c,u,d,f,x,h;return a()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i=0,t.next=4,n.load("crowdfunding");case 4:return r=t.sent,t.next=7,n.load("linklinklink");case 7:return c=t.sent,u=r.table("orders"),d=c.table("prices"),t.next=12,d.all();case 12:return f=t.sent,t.next=15,u.all();case 15:x=t.sent,(h=x.sort((function(e,t){return t.in_quantity.value-e.in_quantity.value}))).forEach((function(e,t){h[t].rank=t+1,i+=e.in_quantity.value})),h.forEach((function(e,t){h[t].ratio=e.in_quantity.value/i})),A(i*f[0].price1_last),D(i),_(h.length),e(l.N.setCrowdDataSource(h)),w(!1),t.next=30;break;case 26:t.prev=26,t.t0=t.catch(0),w(!1),(0,o.Tv)(t.t0,s);case 30:case"end":return t.stop()}}),t,null,[[0,26]])})));return function(e){return t.apply(this,arguments)}}(),[s]);return(0,j.useEffect)((function(){g?(k.length?w(!1):w(!0),P(g)):w(!0)}),[g,P]),(0,m.jsx)(d._z,{className:"",ghost:!0,children:(0,m.jsx)("div",{className:"flex justify-center",children:(0,m.jsxs)(f.Z,{className:"flex justify-center",title:(0,m.jsx)("div",{className:"text-xl font-semibold",children:z}),headerBordered:!0,headStyle:{justifyContent:"center"},style:{width:"500px"},children:[(0,m.jsxs)("div",{className:"text-base font-semibold",children:[B,"：",N]}),(0,m.jsxs)("div",{className:"text-base font-semibold",children:[J,"：",M.toFixed(0)," DFS / $",(0,o.CE)(E)]}),(0,m.jsxs)("div",{className:"text-base font-semibold",children:[K,"：",(0,m.jsx)("span",{className:" cursor-pointer",onClick:function(){return c("/query/account?search=crowdfunding&tab=info")},children:"crowdfunding"})]}),(0,m.jsx)(v.Z,{dataSource:k,loading:y,renderItem:function(e){return(0,m.jsxs)(v.Z.Item,{children:[(0,m.jsx)(v.Z.Item.Meta,{title:"".concat(e.rank,". ")+e.owner.toString(),description:"占比："+(100*e.ratio).toFixed(2)+"%"}),(0,m.jsxs)("div",{className:"font-semibold",children:[(0,m.jsxs)("div",{style:{textAlign:"right"},children:[e.in_quantity.value>1?e.in_quantity.value.toFixed(0):e.in_quantity.value," ","DFS"]}),(0,m.jsxs)("div",{style:{textAlign:"right"},children:[(45e9*e.ratio).toFixed(0)," JIU"]})]})]})}}),i]})})})}}}]);