"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5691],{35687:function(e,o,t){t.r(o),t.d(o,{default:function(){return R}});var s=t(15009),r=t.n(s),a=t(99289),n=t.n(a),i=t(5574),l=t.n(i),d=t(64119),u=t(37476),c=t(1413),m=t(91),p=t(62435),f=t(56499),h=t(86074),v=["fieldProps","request","params","proFieldProps"],g=function(e,o){var t=e.fieldProps,s=e.request,r=e.params,a=e.proFieldProps,n=(0,m.Z)(e,v);return(0,h.jsx)(f.Z,(0,c.Z)({valueType:"segmented",fieldProps:t,ref:o,request:s,params:r,filedConfig:{customLightMode:!0},proFieldProps:a},n))},x=p.forwardRef(g),b=t(5966),P=t(31199),j=t(52688),M=t(86190),F=t(66758),w=["fieldProps","proFieldProps"],y=["fieldProps","proFieldProps"],C="time",Z=p.forwardRef((function(e,o){var t=e.fieldProps,s=e.proFieldProps,r=(0,m.Z)(e,w),a=(0,p.useContext)(F.Z);return(0,h.jsx)(f.Z,(0,c.Z)({ref:o,fieldProps:(0,c.Z)({getPopupContainer:a.getPopupContainer},t),valueType:"timeRange",proFieldProps:s,filedConfig:{valueType:"timeRange",customLightMode:!0,lightFilterLabelFormatter:function(e){return(0,M.c)(e,"HH:mm:ss")}}},r))})),N=function(e){var o=e.fieldProps,t=e.proFieldProps,s=(0,m.Z)(e,y),r=(0,p.useContext)(F.Z);return(0,h.jsx)(f.Z,(0,c.Z)({fieldProps:(0,c.Z)({getPopupContainer:r.getPopupContainer},o),valueType:C,proFieldProps:t,filedConfig:{customLightMode:!0,valueType:C}},s))};N.RangePicker=Z;var k=N,T=t(59530),S=t(45360),q=t(27484),z=t.n(q),O=p.forwardRef((function(e,o){var t=(0,T.useSelector)((function(e){return e.global.session})),s=(0,T.useSelector)((function(e){return e.global.contractKit})),a=(0,T.useSelector)((function(e){return e.global.account})),i=S.ZP.useMessage(),c=l()(i,2),m=c[0],f=c[1],v=(0,p.useState)("mode1"),g=l()(v,2),M=g[0],F=g[1],w=(0,p.useState)(0),y=l()(w,2),C=y[0],Z=y[1],N=(0,p.useState)("0.00"),q=l()(N,2),O=q[0],R=q[1],V=(0,p.useState)(0),$=l()(V,2),D=$[0],H=$[1],I=(0,T.useIntl)(),L=I.formatMessage({id:"coffee.inputException"}),Y=I.formatMessage({id:"common.intlTxSuccess"}),E=I.formatMessage({id:"common.intlTxFail"}),_=I.formatMessage({id:"common.intlPleaseConnectWallet"}),A=I.formatMessage({id:"common.intlPleaseConnectNetwork"}),B=I.formatMessage({id:"tools.autoclaim.intlClaimMode"}),K=I.formatMessage({id:"tools.autoclaim.intlMode"}),W=I.formatMessage({id:"tools.autoclaim.intlMode1"}),G=I.formatMessage({id:"tools.autoclaim.intlMode2"}),J=I.formatMessage({id:"tools.autoclaim.intlMode3"}),Q=I.formatMessage({id:"tools.autoclaim.intlPool"}),U=I.formatMessage({id:"tools.autoclaim.intlDelay"}),X=I.formatMessage({id:"tools.autoclaim.intlTip"}),ee=I.formatMessage({id:"tools.autoclaim.intlForce"}),oe=I.formatMessage({id:"tools.autoclaim.intlInterval"}),te=I.formatMessage({id:"tools.autoclaim.intlTimePoint"}),se=I.formatMessage({id:"tools.autoclaim.intlMode2Placeholder"}),re=I.formatMessage({id:"tools.autoclaim.intlCanBeZero"}),ae=(0,p.useRef)(),ne=(0,p.useState)(!1),ie=l()(ne,2),le=ie[0],de=ie[1],ue=(0,p.useCallback)((function(e){if(0===e.mode)setTimeout((function(){var e;return null===(e=ae.current)||void 0===e?void 0:e.setFieldValue("mode","mode1")}),100);else if(1===e.mode)setTimeout((function(){var o;return null===(o=ae.current)||void 0===o?void 0:o.setFieldsValue({mode:"mode"+e.mode,pool:e.modeObj.find((function(e){return"pool"===e.first})).second.toNumber()/1e8,delay:e.modeObj.find((function(e){return"delay"===e.first})).second.toNumber()/3600,tip:(e.modeObj.find((function(e){return"tip"===e.first})).second.toNumber()/1e8).toFixed(8)})}),100),F("mode"+e.mode);else if(2===e.mode)setTimeout((function(){var o;return null===(o=ae.current)||void 0===o?void 0:o.setFieldsValue({mode:"mode"+e.mode,interval:e.modeObj.find((function(e){return"interval"===e.first})).second.toNumber()/3600})}),100),F("mode"+e.mode);else if(3===e.mode){var o=e.modeObj.find((function(e){return"timepoint"===e.first})).second.toNumber();setTimeout((function(){var t;return null===(t=ae.current)||void 0===t?void 0:t.setFieldsValue({mode:"mode"+e.mode,timepoint:z().unix(o).format("HH:mm:ss")})}),100),F("mode"+e.mode)}}),[]),ce=(0,p.useCallback)((function(e){Z(e.type),ue(e),de(!0)}),[ue]);(0,p.useImperativeHandle)(o,(function(){return{handleOpen:ce}}));var me=(0,p.useCallback)(function(){var o=n()(r()().mark((function o(n){var i,u,c,p,f,h,v,g,x,b,P,j,F;return r()().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(o.prev=0,t&&t.broadcast){o.next=6;break}return m.error("".concat(_)),o.abrupt("return");case 6:if(a){o.next=9;break}return m.error("".concat(A)),o.abrupt("return");case 9:return i=[],"mode1"===M?(u=n.pool,c=n.delay,p=n.tip,f=n.force,i.push({first:"type",second:1}),i.push({first:"pool",second:Number((1e8*u).toFixed(0))}),i.push({first:"delay",second:60*c*60}),i.push({first:"tip",second:Number((1e8*p).toFixed(0))}),1===C&&i.push({first:"force",second:Number(f)})):"mode2"===M?(h=n.interval,i.push({first:"type",second:2}),i.push({first:"interval",second:60*h*60})):"mode3"===M&&(v=n.timepoint,g=z()().format("YYYY-MM-DDT"),i.push({first:"type",second:3}),i.push({first:"timepoint",second:z()(g+v).unix()%86400})),x={action:{account:"autoclaimbot",name:"mode",authorization:[t.permissionLevel],data:{account:t.actor,type:C,mode:i}}},o.next=14,(0,d.zI)(t.transact(x));case 14:return b=o.sent,P=l()(b,2),j=P[0],F=P[1],j?m.error(j):F&&F.response?(m.success("".concat(Y)),setTimeout((function(){e.handleClaims(a,s)}),500)):m.error("".concat(E)),o.abrupt("return",!0);case 22:o.prev=22,o.t0=o.catch(0),console.log(o.t0.message),m.error(o.t0.message);case 26:case"end":return o.stop()}}),o,null,[[0,22]])})));return function(e){return o.apply(this,arguments)}}(),[M,t,a,s,C,e]),pe=(0,p.useCallback)(function(){var e=n()(r()().mark((function e(o){var t,s,a;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.zI)(o.client.v1.chain.get_currency_balance("eosio.token","swapswapswap","DFS"));case 2:t=e.sent,s=l()(t,2),a=s[1],H(a?a[0].value:0);case 6:case"end":return e.stop()}}),e)})));return function(o){return e.apply(this,arguments)}}(),[]);return(0,p.useEffect)((function(){t&&pe(t)}),[pe,t]),(0,h.jsxs)(u.Y,{formRef:ae,title:B,open:le,onFinish:me,onOpenChange:function(e){de(e)},onValuesChange:function(e){if(e.hasOwnProperty("mode")&&F(e.mode),e.hasOwnProperty("pool")){var o=Number(e.pool);if(0===D)R("0.00");else{var t=100*(o-o*Math.pow(.9999,31536e3/D));R(t.toFixed(2))}}},modalProps:{style:{top:25}},initialValues:{force:!0},layout:"vertical",width:"450px",children:[(0,h.jsx)(x,{name:"mode",label:K,valueEnum:{mode1:W,mode2:G,mode3:J},rules:[{required:!0,message:"".concat(L),whitespace:!0}],fieldProps:{size:"large",autoFocus:!1,value:M}}),"mode1"===M&&(0,h.jsxs)("div",{children:[(0,h.jsx)(b.Z,{name:"pool",label:(0,h.jsxs)("div",{children:[(0,h.jsx)("span",{children:Q}),0===C&&(0,h.jsx)("span",{className:"ml-4",children:I.formatMessage({id:"tools.autoclaim.intlPoolApy"},{apy:O})})]}),placeholder:"",rules:[{required:!0,message:"".concat(L),whitespace:!0,pattern:/^\d+(\.\d{1,8})?$/}],fieldProps:{size:"large",autoFocus:!1}}),(0,h.jsx)(P.Z,{name:"delay",label:U,placeholder:se,min:1,rules:[{required:!0,message:"".concat(L),whitespace:!0,pattern:/^\d+$/}],fieldProps:{size:"large",autoFocus:!1}}),(0,h.jsx)(b.Z,{name:"tip",label:X,placeholder:re,rules:[{required:!0,message:"".concat(L),whitespace:!0,pattern:/^\d+(\.\d{1,8})?$/}],fieldProps:{size:"large",autoFocus:!1}}),1===C&&(0,h.jsx)(j.Z,{name:"force",label:ee,rules:[{required:!0,message:"".concat(L),whitespace:!0,pattern:/^true|false$/}],fieldProps:{autoFocus:!1}}),(0,h.jsxs)("div",{children:[(0,h.jsxs)("div",{className:"mb-2",children:[(0,h.jsx)("span",{className:"font-semibold",children:"奖励矿池："}),"设置当奖励矿池中DFS数量大于等于指定值时，触发自动收矿"]}),(0,h.jsxs)("div",{className:"mb-2",children:[(0,h.jsx)("span",{className:"font-semibold",children:"冷却时间："}),"设置当收矿完成后，需要冷却或延时指定时间，然后当奖励矿池条件再次满足时，才能触发自动收矿"]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("span",{className:" font-semibold",children:"小费："}),"设置自动收矿费用以外的额外小费，添加小费越高的账号，收矿的优先级越高，排序越靠前；每完成一次收矿，小费都会收取一次"]}),1===C&&(0,h.jsxs)("div",{children:[(0,h.jsx)("span",{className:" font-semibold",children:"强制收矿："}),"设置24小时后，是否进行强制收矿，因为节点奖励只会累加24小时"]})]})]}),"mode2"===M&&(0,h.jsxs)("div",{children:[(0,h.jsx)(P.Z,{name:"interval",label:oe,placeholder:se,min:1,rules:[{required:!0,message:"".concat(L),whitespace:!0,pattern:/^\d+$/}],fieldProps:{size:"large",autoFocus:!1}}),(0,h.jsxs)("div",{children:[(0,h.jsx)("span",{className:" font-semibold",children:"间隔时间："}),"设置每间隔多长时间，触发自动收矿"]})]}),"mode3"===M&&(0,h.jsxs)("div",{children:[(0,h.jsx)(k,{name:"timepoint",label:te,placeholder:"",rules:[{required:!0,message:"".concat(L),whitespace:!0,pattern:/^.+$/}],fieldProps:{size:"large",autoFocus:!1},width:"100%"}),(0,h.jsxs)("div",{children:[(0,h.jsx)("span",{className:" font-semibold",children:"指定时间："}),"设置在每天的指定间点，触发自动收矿"]})]}),f]})})),R=(0,p.memo)(O)}}]);