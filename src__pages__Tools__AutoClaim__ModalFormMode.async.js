"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5691],{35687:function(e,o,t){t.r(o),t.d(o,{default:function(){return R}});var s=t(15009),r=t.n(s),a=t(99289),n=t.n(a),i=t(5574),l=t.n(i),d=t(64119),c=t(37476),u=t(1413),m=t(91),p=t(62435),f=t(56499),h=t(86074),v=["fieldProps","request","params","proFieldProps"],g=function(e,o){var t=e.fieldProps,s=e.request,r=e.params,a=e.proFieldProps,n=(0,m.Z)(e,v);return(0,h.jsx)(f.Z,(0,u.Z)({valueType:"segmented",fieldProps:t,ref:o,request:s,params:r,filedConfig:{customLightMode:!0},proFieldProps:a},n))},b=p.forwardRef(g),x=t(5966),P=t(31199),j=t(52688),M=t(86190),F=t(66758),y=["fieldProps","proFieldProps"],w=["fieldProps","proFieldProps"],C="time",Z=p.forwardRef((function(e,o){var t=e.fieldProps,s=e.proFieldProps,r=(0,m.Z)(e,y),a=(0,p.useContext)(F.Z);return(0,h.jsx)(f.Z,(0,u.Z)({ref:o,fieldProps:(0,u.Z)({getPopupContainer:a.getPopupContainer},t),valueType:"timeRange",proFieldProps:s,filedConfig:{valueType:"timeRange",customLightMode:!0,lightFilterLabelFormatter:function(e){return(0,M.c)(e,"HH:mm:ss")}}},r))})),N=function(e){var o=e.fieldProps,t=e.proFieldProps,s=(0,m.Z)(e,w),r=(0,p.useContext)(F.Z);return(0,h.jsx)(f.Z,(0,u.Z)({fieldProps:(0,u.Z)({getPopupContainer:r.getPopupContainer},o),valueType:C,proFieldProps:t,filedConfig:{customLightMode:!0,valueType:C}},s))};N.RangePicker=Z;var k=N,T=t(59530),S=t(45360),q=t(27484),O=t.n(q),z=p.forwardRef((function(e,o){var t=(0,T.useSelector)((function(e){return e.global.session})),s=(0,T.useSelector)((function(e){return e.global.contractKit})),a=(0,T.useSelector)((function(e){return e.global.account})),i=S.ZP.useMessage(),u=l()(i,2),m=u[0],f=u[1],v=(0,p.useState)("mode1"),g=l()(v,2),M=g[0],F=g[1],y=(0,p.useState)(0),w=l()(y,2),C=w[0],Z=w[1],N=(0,p.useState)({key:0,account:"",balance:"0",deposit_time:"1970-01-01T00:00",claim_count:0,claim_time:"1970-01-01T00:00",active:0,notice:0,email:"",mode:0,modeObj:[],type:1,reward:0,auth:!1,disabled:!0}),q=l()(N,2),z=q[0],R=q[1],V=(0,p.useState)("0.00"),$=l()(V,2),D=$[0],H=$[1],I=(0,p.useState)(0),L=l()(I,2),Y=L[0],_=L[1],E=(0,T.useIntl)(),A=E.formatMessage({id:"coffee.inputException"}),B=E.formatMessage({id:"common.intlTxSuccess"}),K=E.formatMessage({id:"common.intlTxFail"}),W=E.formatMessage({id:"common.intlPleaseConnectWallet"}),G=E.formatMessage({id:"common.intlPleaseConnectNetwork"}),J=E.formatMessage({id:"tools.autoclaim.intlClaimMode"}),Q=E.formatMessage({id:"tools.autoclaim.intlMode"}),U=E.formatMessage({id:"tools.autoclaim.intlMode1"}),X=E.formatMessage({id:"tools.autoclaim.intlMode2"}),ee=E.formatMessage({id:"tools.autoclaim.intlMode3"}),oe=E.formatMessage({id:"tools.autoclaim.intlPool"}),te=E.formatMessage({id:"tools.autoclaim.intlDelay"}),se=E.formatMessage({id:"tools.autoclaim.intlTip"}),re=E.formatMessage({id:"tools.autoclaim.intlForce"}),ae=E.formatMessage({id:"tools.autoclaim.intlInterval"}),ne=E.formatMessage({id:"tools.autoclaim.intlTimePoint"}),ie=E.formatMessage({id:"tools.autoclaim.intlMode2Placeholder"}),le=E.formatMessage({id:"tools.autoclaim.intlCanBeZero"}),de=E.formatMessage({id:"tools.autoclaim.intlChargeFirst"}),ce=(0,p.useRef)(),ue=(0,p.useState)(!1),me=l()(ue,2),pe=me[0],fe=me[1],he=(0,p.useCallback)((function(e){if(0===e.mode)setTimeout((function(){var e;return null===(e=ce.current)||void 0===e?void 0:e.setFieldValue("mode","mode1")}),100);else if(1===e.mode)setTimeout((function(){var o;return null===(o=ce.current)||void 0===o?void 0:o.setFieldsValue({mode:"mode"+e.mode,pool:e.modeObj.find((function(e){return"pool"===e.first})).second.toNumber()/1e8,delay:e.modeObj.find((function(e){return"delay"===e.first})).second.toNumber()/3600,tip:(e.modeObj.find((function(e){return"tip"===e.first})).second.toNumber()/1e8).toFixed(8)})}),100),F("mode"+e.mode);else if(2===e.mode)setTimeout((function(){var o;return null===(o=ce.current)||void 0===o?void 0:o.setFieldsValue({mode:"mode"+e.mode,interval:e.modeObj.find((function(e){return"interval"===e.first})).second.toNumber()/3600})}),100),F("mode"+e.mode);else if(3===e.mode){var o=e.modeObj.find((function(e){return"timepoint"===e.first})).second.toNumber();setTimeout((function(){var t;return null===(t=ce.current)||void 0===t?void 0:t.setFieldsValue({mode:"mode"+e.mode,timepoint:O().unix(o).format("HH:mm:ss")})}),100),F("mode"+e.mode)}}),[]),ve=(0,p.useCallback)((function(e){Z(e.type),R(e),he(e),fe(!0)}),[he]);(0,p.useImperativeHandle)(o,(function(){return{handleOpen:ve}}));var ge=(0,p.useCallback)(function(){var o=n()(r()().mark((function o(n){var i,c,u,p,f,h,v,g,b,x,P,j,F;return r()().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(o.prev=0,t&&t.broadcast){o.next=6;break}return m.error("".concat(W)),o.abrupt("return");case 6:if(a){o.next=9;break}return m.error("".concat(G)),o.abrupt("return");case 9:if(!z.disabled){o.next=12;break}return m.info("".concat(de)),o.abrupt("return");case 12:return i=[],"mode1"===M?(c=n.pool,u=n.delay,p=n.tip,f=n.force,i.push({first:"type",second:1}),i.push({first:"pool",second:Number((1e8*c).toFixed(0))}),i.push({first:"delay",second:60*u*60}),i.push({first:"tip",second:Number((1e8*p).toFixed(0))}),1===C&&i.push({first:"force",second:Number(f)})):"mode2"===M?(h=n.interval,i.push({first:"type",second:2}),i.push({first:"interval",second:60*h*60})):"mode3"===M&&(v=n.timepoint,g=O()().format("YYYY-MM-DDT"),i.push({first:"type",second:3}),i.push({first:"timepoint",second:O()(g+v).unix()%86400})),b={action:{account:"autoclaimbot",name:"mode",authorization:[t.permissionLevel],data:{account:t.actor,type:C,mode:i}}},o.next=17,(0,d.zI)(t.transact(b));case 17:return x=o.sent,P=l()(x,2),j=P[0],F=P[1],j?m.error(j):F&&F.response?(m.success("".concat(B)),setTimeout((function(){e.handleClaims(a,s)}),500)):m.error("".concat(K)),o.abrupt("return",!0);case 25:o.prev=25,o.t0=o.catch(0),console.log(o.t0.message),m.error(o.t0.message);case 29:case"end":return o.stop()}}),o,null,[[0,25]])})));return function(e){return o.apply(this,arguments)}}(),[M,t,a,s,C,z,e]),be=(0,p.useCallback)(function(){var e=n()(r()().mark((function e(o){var t,s,a;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.zI)(o.client.v1.chain.get_currency_balance("eosio.token","swapswapswap","DFS"));case 2:t=e.sent,s=l()(t,2),a=s[1],_(a?a[0].value:0);case 6:case"end":return e.stop()}}),e)})));return function(o){return e.apply(this,arguments)}}(),[]);return(0,p.useEffect)((function(){t&&be(t)}),[be,t]),(0,h.jsxs)(c.Y,{formRef:ce,title:J,open:pe,onFinish:ge,onOpenChange:function(e){fe(e)},onValuesChange:function(e){if(e.hasOwnProperty("mode")&&F(e.mode),e.hasOwnProperty("pool")){var o=Number(e.pool);if(0===Y)H("0.00");else{var t=100*(o-o*Math.pow(.9999,31536e3/Y));H(t.toFixed(2))}}},modalProps:{style:{top:25}},initialValues:{force:!0},layout:"vertical",width:"450px",children:[(0,h.jsx)(b,{name:"mode",label:Q,valueEnum:{mode1:U,mode2:X,mode3:ee},rules:[{required:!0,message:"".concat(A),whitespace:!0}],fieldProps:{size:"large",autoFocus:!1,value:M}}),"mode1"===M&&(0,h.jsxs)("div",{children:[(0,h.jsx)(x.Z,{name:"pool",label:(0,h.jsxs)("div",{children:[(0,h.jsx)("span",{children:oe}),0===C&&(0,h.jsx)("span",{className:"ml-4",children:E.formatMessage({id:"tools.autoclaim.intlPoolApy"},{apy:D})})]}),placeholder:"",rules:[{required:!0,message:"".concat(A),whitespace:!0,pattern:/^\d+(\.\d{1,8})?$/}],fieldProps:{size:"large",autoFocus:!1}}),(0,h.jsx)(P.Z,{name:"delay",label:te,placeholder:ie,min:1,rules:[{required:!0,message:"".concat(A),whitespace:!0,pattern:/^\d+$/}],fieldProps:{size:"large",autoFocus:!1}}),(0,h.jsx)(x.Z,{name:"tip",label:se,placeholder:le,rules:[{required:!0,message:"".concat(A),whitespace:!0,pattern:/^\d+(\.\d{1,8})?$/}],fieldProps:{size:"large",autoFocus:!1}}),1===C&&(0,h.jsx)(j.Z,{name:"force",label:re,rules:[{required:!0,message:"".concat(A),whitespace:!0,pattern:/^true|false$/}],fieldProps:{autoFocus:!1}}),(0,h.jsxs)("div",{children:[(0,h.jsxs)("div",{className:"mb-2",children:[(0,h.jsx)("span",{className:"font-semibold",children:"奖励矿池："}),"设置当奖励矿池中DFS数量大于等于指定值时，触发自动收矿"]}),(0,h.jsxs)("div",{className:"mb-2",children:[(0,h.jsx)("span",{className:"font-semibold",children:"冷却时间："}),"设置当收矿完成后，需要冷却或延时指定时间，然后当奖励矿池条件再次满足时，才能触发自动收矿"]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("span",{className:" font-semibold",children:"小费："}),"设置自动收矿费用以外的额外小费，添加小费越高的账号，收矿的优先级越高，排序越靠前；每完成一次收矿，小费都会收取一次"]}),1===C&&(0,h.jsxs)("div",{children:[(0,h.jsx)("span",{className:" font-semibold",children:"强制收矿："}),"设置24小时后，是否进行强制收矿，因为节点奖励只会累加24小时"]})]})]}),"mode2"===M&&(0,h.jsxs)("div",{children:[(0,h.jsx)(P.Z,{name:"interval",label:ae,placeholder:ie,min:1,rules:[{required:!0,message:"".concat(A),whitespace:!0,pattern:/^\d+$/}],fieldProps:{size:"large",autoFocus:!1}}),(0,h.jsxs)("div",{children:[(0,h.jsx)("span",{className:" font-semibold",children:"间隔时间："}),"设置每间隔多长时间，触发自动收矿"]})]}),"mode3"===M&&(0,h.jsxs)("div",{children:[(0,h.jsx)(k,{name:"timepoint",label:ne,placeholder:"",rules:[{required:!0,message:"".concat(A),whitespace:!0,pattern:/^.+$/}],fieldProps:{size:"large",autoFocus:!1},width:"100%"}),(0,h.jsxs)("div",{children:[(0,h.jsx)("span",{className:" font-semibold",children:"指定时间："}),"设置在每天的指定间点，触发自动收矿"]})]}),f]})})),R=(0,p.memo)(z)}}]);