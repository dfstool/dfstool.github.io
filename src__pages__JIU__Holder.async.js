"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[544],{6466:function(t,e,n){n.d(e,{Z:function(){return y}});var a=n(4942),r=n(1413),c=n(91),s=n(28459),o=n(93967),i=n.n(o),l=n(62435),u=n(63330),d=n(44962),p=n(98082),f=function(t){return(0,a.Z)({},t.componentCls,{display:"flex",flexDirection:"column",justifyContent:"flex-end",marginBlock:t.marginLG,marginInline:0,color:t.colorText,fontWeight:"500",fontSize:"20px",lineHeight:"38px"})};var h=n(86074),x=function(t){var e=t.className,n=t.style,a=void 0===n?{}:n,c=t.children,o=(0,(0,l.useContext)(s.ZP.ConfigContext).getPrefixCls)("pro-card-operation"),u=function(t){return(0,p.Xj)("ProCardOperation",(function(e){var n=(0,r.Z)((0,r.Z)({},e),{},{componentCls:".".concat(t)});return[f(n)]}))}(o),d=u.wrapSSR,x=u.hashId,m=i()(o,e,x);return d((0,h.jsx)("div",{className:m,style:a,children:c}))},m=n(10357),v=function(t){return(0,a.Z)({},t.componentCls,{"&-chart":{display:"flex",flexDirection:"column",marginBlockStart:8,marginBlockEnd:8,"&-left":{marginBlockStart:0,marginInlineEnd:"16px"},"&-right":{marginBlockStart:0,marginInlineStart:"16px"}},"&-content":{display:"flex",flexDirection:"column","&-horizontal":(0,a.Z)({flexDirection:"row"},"".concat(t.componentCls,"-chart"),{alignItems:"center",alignSelf:"flex-start"})},"&-footer":{marginBlockStart:8,paddingBlockStart:"16px",borderBlockStart:"rgba(0, 0, 0, 0.08) solid ".concat(t.colorBorder)}})};var g=["children","statistic","className","chart","chartPlacement","footer"],k=function(t){var e,n=t.children,o=t.statistic,d=t.className,f=t.chart,x=t.chartPlacement,k=t.footer,y=(0,c.Z)(t,g),j=(0,(0,l.useContext)(s.ZP.ConfigContext).getPrefixCls)("pro-statistic-card"),Z=function(t){return(0,p.Xj)("StatisticCard",(function(e){var n=(0,r.Z)((0,r.Z)({},e),{},{componentCls:".".concat(t)});return[v(n)]}))}(j),C=Z.wrapSSR,S=Z.hashId,b=i()(j,d,S),w=o&&(0,h.jsx)(m.Z,(0,r.Z)({layout:"vertical"},o)),N=i()("".concat(j,"-chart"),S,(e={},(0,a.Z)(e,"".concat(j,"-chart-left"),"left"===x&&f&&o),(0,a.Z)(e,"".concat(j,"-chart-right"),"right"===x&&f&&o),e)),I=f&&(0,h.jsx)("div",{className:N,children:f}),P=i()("".concat(j,"-content "),S,(0,a.Z)({},"".concat(j,"-content-horizontal"),"left"===x||"right"===x)),E=(I||w)&&("left"===x?(0,h.jsxs)("div",{className:P,children:[I,w]}):(0,h.jsxs)("div",{className:P,children:[w,I]})),z=k&&(0,h.jsx)("div",{className:"".concat(j,"-footer ").concat(S).trim(),children:k});return C((0,h.jsxs)(u.Z,(0,r.Z)((0,r.Z)({className:b},y),{},{children:[E,n,z]})))};k.Statistic=m.Z,k.Divider=d.Z,k.Operation=x,k.isProCard=!0,k.Group=function(t){return(0,h.jsx)(k,(0,r.Z)({bodyStyle:{padding:0}},t))};var y=k},10357:function(t,e,n){n.d(e,{Z:function(){return g}});var a=n(1413),r=n(4942),c=n(91),s=n(25035),o=n(28459),i=n(83062),l=n(40411),u=n(55054),d=n(93967),p=n.n(d),f=n(62435),h=n(98082),x=function(t){var e,n,a;return(0,r.Z)({},t.componentCls,(a={display:"flex",fontSize:t.fontSize,"& + &":{marginBlockStart:4},"&-tip":{marginInlineStart:4},"&-wrapper":(0,r.Z)({display:"flex",width:"100%"},"".concat(t.componentCls,"-status"),{width:"14px"}),"&-icon":{marginInlineEnd:16},"&-trend-icon":{width:0,height:0,borderInlineEnd:"3.5px solid transparent",borderBlockEnd:"9px solid #000",borderInlineStart:"3.5px solid transparent","&-up":{transform:"rotate(0deg)"},"&-down":{transform:"rotate(180deg)"}},"&-content":(0,r.Z)({width:"100%"},"".concat(t.antCls,"-statistic-content"),{"&-value-int":{fontSize:t.fontSizeHeading3}}),"&-description":{width:"100%"}},(0,r.Z)(a,"".concat(t.antCls,"-statistic-title"),{color:t.colorText}),(0,r.Z)(a,"&-trend-up",(0,r.Z)({},"".concat(t.antCls,"-statistic-content"),(0,r.Z)({color:"#f5222d"},"".concat(t.componentCls,"-trend-icon"),{borderBlockEndColor:"#f5222d"}))),(0,r.Z)(a,"&-trend-down",(0,r.Z)({},"".concat(t.antCls,"-statistic-content"),(0,r.Z)({color:"#389e0d"},"".concat(t.componentCls,"-trend-icon"),{borderBlockEndColor:"#52c41a"}))),(0,r.Z)(a,"& &-layout-horizontal",(e={display:"flex",justifyContent:"space-between"},(0,r.Z)(e,"".concat(t.antCls,"-statistic-title"),{marginBlockEnd:0}),(0,r.Z)(e,"".concat(t.antCls,"-statistic-content-value"),{fontWeight:500}),(0,r.Z)(e,"".concat(t.antCls,"-statistic-title,").concat(t.antCls,"-statistic-content,").concat(t.antCls,"-statistic-content-suffix,").concat(t.antCls,"-statistic-content-prefix,").concat(t.antCls,"-statistic-content-value-decimal"),{fontSize:t.fontSize}),e)),(0,r.Z)(a,"& &-layout-inline",(n={display:"inline-flex",color:t.colorTextSecondary},(0,r.Z)(n,"".concat(t.antCls,"-statistic-title"),{marginInlineEnd:"6px",marginBlockEnd:0}),(0,r.Z)(n,"".concat(t.antCls,"-statistic-content"),{color:t.colorTextSecondary}),(0,r.Z)(n,"".concat(t.antCls,"-statistic-title,").concat(t.antCls,"-statistic-content,").concat(t.antCls,"-statistic-content-suffix,").concat(t.antCls,"-statistic-content-prefix,").concat(t.antCls,"-statistic-content-value-decimal"),{fontSize:t.fontSizeSM}),n)),a))};var m=n(86074),v=["className","layout","style","description","children","title","tip","status","trend","prefix","icon"],g=function(t){var e,n=t.className,d=t.layout,g=void 0===d?"inline":d,k=t.style,y=t.description,j=(t.children,t.title),Z=t.tip,C=t.status,S=t.trend,b=t.prefix,w=t.icon,N=(0,c.Z)(t,v),I=(0,(0,f.useContext)(o.ZP.ConfigContext).getPrefixCls)("pro-card-statistic"),P=function(t){return(0,h.Xj)("Statistic",(function(e){var n=(0,a.Z)((0,a.Z)({},e),{},{componentCls:".".concat(t)});return[x(n)]}))}(I),E=P.wrapSSR,z=P.hashId,B=p()(I,n,z),D=p()("".concat(I,"-status"),z),M=p()("".concat(I,"-icon"),z),O=p()("".concat(I,"-wrapper"),z),R=p()("".concat(I,"-content"),z),U=p()(z,(e={},(0,r.Z)(e,"".concat(I,"-layout-").concat(g),g),(0,r.Z)(e,"".concat(I,"-trend-").concat(S),S),e)),H=Z&&(0,m.jsx)(i.Z,{title:Z,children:(0,m.jsx)(s.Z,{className:"".concat(I,"-tip ").concat(z).trim()})}),T=p()("".concat(I,"-trend-icon"),z,(0,r.Z)({},"".concat(I,"-trend-icon-").concat(S),S)),_=S&&(0,m.jsx)("div",{className:T}),F=C&&(0,m.jsx)("div",{className:D,children:(0,m.jsx)(l.Z,{status:C,text:null})}),L=w&&(0,m.jsx)("div",{className:M,children:w});return E((0,m.jsxs)("div",{className:B,style:k,children:[L,(0,m.jsxs)("div",{className:O,children:[F,(0,m.jsxs)("div",{className:R,children:[(0,m.jsx)(u.Z,(0,a.Z)({title:(j||H)&&(0,m.jsxs)(m.Fragment,{children:[j,H]}),prefix:(_||b)&&(0,m.jsxs)(m.Fragment,{children:[_,b]}),className:U},N)),y&&(0,m.jsx)("div",{className:"".concat(I,"-description ").concat(z).trim(),children:y})]})]})]}))}},18630:function(t,e,n){n.r(e),n.d(e,{default:function(){return w}});var a=n(15009),r=n.n(a),c=n(99289),s=n.n(c),o=n(5574),i=n.n(o),l=n(81876),u=n(31120),d=n(64119),p=n(11774),f=n(38345),h=n(6466),x=n(92340),m=n(59530),v=n(45360),g=n(71230),k=n(15746),y=n(15867),j=n(9669),Z=n.n(j),C=n(55835),S=n(62435),b=n(86074),w=function(){var t=(0,m.useDispatch)(),e=v.ZP.useMessage(),n=i()(e,2),a=n[0],c=n[1],o=(0,m.useNavigate)(),j=(0,m.useSelector)((function(t){return t.global.contractKit})),w=(0,S.useState)(!1),N=i()(w,2),I=N[0],P=N[1],E=(0,m.useSelector)((function(t){return t.jiu.holderDataSource})),z=(0,m.useSelector)((function(t){return t.jiu.holderDataSourceReset})),B=(0,S.useState)(0),D=i()(B,2),M=D[0],O=D[1],R=(0,S.useState)(0),U=i()(R,2),H=U[0],T=U[1],_=(0,S.useState)(0),F=i()(_,2),L=F[0],A=F[1],J=(0,m.useIntl)(),W=J.formatMessage({id:"jiu.intlMissingData"}),X=J.formatMessage({id:"jiu.intlHolder"}),$=J.formatMessage({id:"jiu.intlHold"}),G=J.formatMessage({id:"jiu.intlValue"}),q=J.formatMessage({id:"jiu.intlRatio"}),K=J.formatMessage({id:"jiu.intlSupply"}),V=J.formatMessage({id:"jiu.intlMarketCap"}),Q=J.formatMessage({id:"jiu.intlDestruction"}),Y=J.formatMessage({id:"jiu.intlPrice"}),tt=J.formatMessage({id:"jiu.intlRank"}),et=J.formatMessage({id:"jiu.intlUpdate"}),nt=(0,S.useCallback)(s()(r()().mark((function t(){var e,n,c,s,o,l,p,f,h,x,m,v,g,k,y,j,S,b,w,N,I,P,E,z,B,D,M,O,R;return r()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e="jiutokenmain",n="000d9cae502dd1cc895745e204f83cc892bc4c450f92a03ecd4fe057709853cc",c=(0,C.js)("md5"),s=n+e,c.update(s),o=c.digest("hex").substring(0,8),l={key:o,chainId:n,account:e,skip:0,lastUpdate:"2020-01-01T01:01:01.000Z",error:!1,data:[]},t.next=9,u.db.txList.where({key:o}).toArray();case 9:(p=t.sent).length&&(l=p[0]),f=[],h=500,x=l.lastUpdate,m=l.skip;case 15:return t.next=18,(0,d.zI)(Z().get("https://api2.dfsmoon.com/v2/history/get_actions?track=true&sort=asc&simple=true&noBinary=true&account=".concat(e,"&after=").concat(x,"&limit=").concat(h)));case 18:if(v=t.sent,g=i()(v,2),k=g[0],y=g[1],k||200!==y.status){t.next=65;break}if(j=y.data.simple_actions,S=j.length,b=y.data.total.value,w=1,0!==b){t.next=30;break}return u.db.txList.put(l),t.abrupt("return",l.data);case 30:for(N=0;N<j.length;N++)m<=N&&f.push(j[N]);if(f.length){t.next=34;break}return l.error&&a.error(W),t.abrupt("return",l.data);case 34:I=f.length-1;case 35:if(!(I>0)){t.next=44;break}if(f[I].transaction_id!==f[I-1].transaction_id){t.next=40;break}w+=1,t.next=41;break;case 40:return t.abrupt("break",44);case 41:I--,t.next=35;break;case 44:if(m=w,S!==h){t.next=50;break}P=f[f.length-1].timestamp,x=P,t.next=63;break;case 50:return f.forEach((function(t){l.data.push(t)})),E=f[f.length-1].timestamp,l.lastUpdate=E,l.skip=m,t.next=56,(0,d.zI)(Z().get("https://api2.dfsmoon.com/v2/history/get_actions?track=true&simple=true&noBinary=true&account=".concat(e,"&skip=0&limit=1")));case 56:return z=t.sent,B=i()(z,2),D=B[0],M=B[1],D||200!==M.status?a.error(D):(O=M.data.total.value,l.data.length!==O?(l.error=!0,a.error(W)):l.error=!1),u.db.txList.put(l),t.abrupt("return",l.data);case 63:t.next=69;break;case 65:return f.length&&(f.forEach((function(t){l.data.push(t)})),R=f[f.length-1].timestamp,l.lastUpdate=R,l.skip=m,l.error=!0),u.db.txList.put(l),a.error(k),t.abrupt("return",l.data);case 69:t.next=15;break;case 71:case"end":return t.stop()}}),t)}))),[a]),at=(0,S.useCallback)(s()(r()().mark((function t(){var e,n,a,c,s,o;return r()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j.load("swapswapswap");case 2:return e=t.sent,n=e.table("markets"),t.next=6,n.all();case 6:return a=t.sent,"usdtusdtusdt-USDT",s="eosio.token-DFS",o=[],(c={})["usdtusdtusdt-USDT"]=1,c[s]=a[0].reserve0.value/a[0].reserve1.value,a.forEach((function(t){var e=t.contract0.toString()+"-"+t.sym0.toString().split(",")[1],n=t.contract1.toString()+"-"+t.sym1.toString().split(",")[1];"eosio.token"===t.contract0.toString()?c.hasOwnProperty(n)||(c[n]=t.reserve0.value/t.reserve1.value*c[s]):"eosio.token"===t.contract1.toString()?c.hasOwnProperty(e)||(c[e]=t.reserve1.value/t.reserve0.value*c[s]):"usdtusdtusdt"===t.contract0.toString()?c.hasOwnProperty(n)||(c[n]=t.reserve0.value/t.reserve1.value):"usdtusdtusdt"===t.contract1.toString()?c.hasOwnProperty(e)||(c[e]=t.reserve1.value/t.reserve0.value):o.push({key0:e,key1:n,value0:t.reserve0.value,value1:t.reserve1.value})})),o.forEach((function(t){c.hasOwnProperty(t.key0)&&!c.hasOwnProperty(t.key1)?c[t.key1]=t.value0/t.value1*c[t.key0]:!c.hasOwnProperty(t.key0)&&c.hasOwnProperty(t.key1)?c[t.key0]=t.value1/t.value0*c[t.key1]:c.hasOwnProperty(t.key0)||c.hasOwnProperty(t.key1)||(c[t.key0]=0,c[t.key1]=0)})),t.abrupt("return",c);case 16:case"end":return t.stop()}}),t)}))),[j]),rt=(0,S.useCallback)(s()(r()().mark((function e(){var n,c,s,o,i;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={jiuissuemain:1e15},c=[],e.next=5,at();case 5:return s=e.sent,e.next=8,nt();case 8:for(e.sent.forEach((function(t){if("jiutokenmain"===t.contract&&"transfer"===t.action){var e=t.data.from,a=t.data.to,r=parseInt((1e4*t.data.amount).toFixed(0));n[e]-=r,n.hasOwnProperty(a)?n[a]+=r:n[a]=r}})),Object.keys(n).forEach((function(t,e){n[t]>0&&c.push({key:e,rank:e,account:t,hold:n[t]/1e4,value:n[t]*s["jiutokenmain-JIU"]/1e4,ratio:n[t]/1e15})})),o=c.sort((function(t,e){return e.hold-t.hold})),i=0;i<o.length;i++)o[i].rank=i;t(l.N.setHolderDataSource(o)),t(l.N.setHolderDataSourceReset(o)),O(o.length),T(1e11*s["jiutokenmain-JIU"]),A(s["jiutokenmain-JIU"]),P(!1),e.next=25;break;case 21:e.prev=21,e.t0=e.catch(0),P(!1),(0,d.Tv)(e.t0,a);case 25:case"end":return e.stop()}}),e,null,[[0,21]])}))),[nt,at]),ct=(0,S.useCallback)((function(e){var n=e.account,a=E.filter((function(t){return t.account===n}));t(l.N.setHolderDataSource(a))}),[E]),st=(0,S.useCallback)((function(){t(l.N.setHolderDataSource(z))}),[z]),ot=(0,S.useMemo)((function(){return[{title:"".concat(tt),dataIndex:"key",key:"key",search:!1,render:function(t,e){return(0,b.jsx)("span",{children:e.rank+1})}},{title:"".concat(X),dataIndex:"account",key:"account",render:function(t,e){return(0,b.jsx)("a",{onClick:function(){return o("/query/account?search=".concat(e.account,"&tab=info"))},children:e.account})}},{title:"".concat($),dataIndex:"hold",key:"hold",search:!1,render:function(t,e){return(0,b.jsx)("span",{children:(0,d.CE)(e.hold)})}},{title:"".concat(G),dataIndex:"value",key:"value",search:!1,render:function(t,e){return(0,b.jsxs)("span",{children:["$",(0,d.CE)(e.value)]})}},{title:"".concat(q),dataIndex:"ratio",key:"ratio",search:!1,render:function(t,e){return(0,b.jsxs)("span",{children:[(100*e.ratio).toFixed(2),"%"]})}}]}),[]);return(0,S.useEffect)((function(){j?(E.length?P(!1):P(!0),rt()):P(!0)}),[j,rt]),(0,b.jsxs)(p._z,{className:"holder",ghost:!0,children:[(0,b.jsx)(f.Z,{headerBordered:!0,headStyle:{justifyContent:"center"},className:"mb-3",children:(0,b.jsxs)(g.Z,{gutter:10,children:[(0,b.jsx)(k.Z,{lg:{span:"6"},md:{span:"12"},sm:{span:"24"},xs:{span:"24"},children:(0,b.jsx)(h.Z,{layout:"center",statistic:{title:(0,b.jsx)("div",{className:"text-center",children:V}),value:"$"+(0,d.CE)(H)}})}),(0,b.jsx)(k.Z,{lg:{span:"4"},md:{span:"12"},sm:{span:"12"},xs:{span:"12"},children:(0,b.jsx)(h.Z,{layout:"center",statistic:{title:(0,b.jsx)("div",{className:"text-center",children:K}),value:"1000亿"}})}),(0,b.jsx)(k.Z,{lg:{span:"5"},md:{span:"8"},sm:{span:"12"},xs:{span:"12"},children:(0,b.jsx)(h.Z,{layout:"center",statistic:{title:(0,b.jsx)("div",{className:"text-center",children:Q}),value:"0(0%)"}})}),(0,b.jsx)(k.Z,{lg:{span:"5"},md:{span:"8"},sm:{span:"12"},xs:{span:"12"},children:(0,b.jsx)(h.Z,{layout:"center",statistic:{title:(0,b.jsx)("div",{className:"text-center",children:Y}),value:"$"+(0,d.CE)(L)}})}),(0,b.jsx)(k.Z,{lg:{span:"4"},md:{span:"8"},sm:{span:"12"},xs:{span:"12"},children:(0,b.jsx)(h.Z,{layout:"center",statistic:{title:(0,b.jsx)("div",{className:"text-center",children:X}),value:M}})})]})}),(0,b.jsx)(x.Z,{className:"mb-3",scroll:{x:!0},size:"small",columns:ot,dataSource:E,defaultData:[],search:{defaultCollapsed:!1,layout:"horizontal",labelWidth:"auto",collapseRender:!1,className:"p-[0px]",optionRender:function(t,e,n){return[n[1],(0,b.jsx)(y.ZP,{onClick:function(){P(!0),rt()},children:et},"reset"),n[0]]}},onSubmit:ct,onReset:st,options:!1,pagination:{pageSize:100},tableAlertRender:!1,tableAlertOptionRender:!1,loading:I}),c]})}}}]);