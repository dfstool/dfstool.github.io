"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3068],{55047:function(e,t,n){n.r(t);var r=n(15009),a=n.n(r),o=n(99289),s=n.n(o),c=n(5574),u=n.n(c),i=n(64119),l=n(37476),f=n(31199),m=n(59530),p=n(45360),d=n(62435),g=n(86074),b=d.forwardRef((function(e,t){var n=(0,m.useSelector)((function(e){return e.global.session})),r=(0,m.useSelector)((function(e){return e.global.contractKit})),o=(0,m.useSelector)((function(e){return e.global.account})),c=p.ZP.useMessage(),b=u()(c,2),h=b[0],v=b[1],w=(0,d.useState)("0"),x=u()(w,2),k=x[0],C=x[1],M=(0,d.useState)("0"),P=u()(M,2),S=P[0],F=P[1],y=(0,m.useIntl)(),z=y.formatMessage({id:"tools.autoclaim.intlConfig"}),O=y.formatMessage({id:"coffee.inputException"}),j=y.formatMessage({id:"common.intlTxSuccess"}),I=y.formatMessage({id:"common.intlTxFail"}),R=y.formatMessage({id:"common.intlPleaseConnectWallet"}),Z=y.formatMessage({id:"common.intlPleaseConnectNetwork"}),q=(0,d.useRef)(),T=(0,d.useState)(!1),$=u()(T,2),B=$[0],E=$[1],H=(0,d.useCallback)((function(){E(!0)}),[]);(0,d.useImperativeHandle)(t,(function(){return{handleOpen:H}}));var K=(0,d.useCallback)(function(){var e=s()(a()().mark((function e(t){var r,s,c,l,f;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n&&n.broadcast){e.next=6;break}return h.error("".concat(R)),e.abrupt("return");case 6:if(o){e.next=9;break}return h.error("".concat(Z)),e.abrupt("return");case 9:return r={action:{account:"autoclaimbot",name:"config",authorization:[n.permissionLevel],data:{fee:t.fee,burn:t.burn}}},e.next=12,(0,i.zI)(n.transact(r));case 12:return s=e.sent,c=u()(s,2),l=c[0],f=c[1],l?h.error(l):f&&f.response?h.success("".concat(j)):h.error("".concat(I)),e.abrupt("return",!0);case 20:e.prev=20,e.t0=e.catch(0),console.log(e.t0.message),h.error(e.t0.message);case 24:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(t){return e.apply(this,arguments)}}(),[d.memo,n,o,r,e]);return(0,g.jsxs)(l.Y,{formRef:q,title:z,open:B,onFinish:K,onOpenChange:function(e){E(e)},onValuesChange:function(e){e.hasOwnProperty("fee")&&C(String(e.fee/100)),e.hasOwnProperty("burn")&&F(String(e.burn/100))},layout:"vertical",width:"450px",children:[(0,g.jsx)(f.Z,{name:"fee",label:y.formatMessage({id:"tools.autoclaim.intlFeePercent"},{percent:k}),placeholder:"",min:0,rules:[{required:!0,message:"".concat(O),whitespace:!0,pattern:/^\d+$/}],fieldProps:{size:"large",autoFocus:!1}}),(0,g.jsx)(f.Z,{name:"burn",label:y.formatMessage({id:"tools.autoclaim.intlBurnPercent"},{percent:S}),placeholder:"",min:0,rules:[{required:!0,message:"".concat(O),whitespace:!0,pattern:/^\d+$/}],fieldProps:{size:"large",autoFocus:!1}}),v]})}));t.default=(0,d.memo)(b)}}]);