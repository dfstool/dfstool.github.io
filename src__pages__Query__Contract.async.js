(self.webpackChunk=self.webpackChunk||[]).push([[9110,7447],{98165:function(e,r,t){"use strict";t.d(r,{Z:function(){return c}});var n=t(87462),a=t(62435),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z"}}]},name:"sync",theme:"outlined"},o=t(84089),i=function(e,r){return a.createElement(o.Z,(0,n.Z)({},e,{ref:r,icon:s}))};var c=a.forwardRef(i)},63434:function(e,r,t){"use strict";var n=t(1413),a=t(91),s=t(22270),o=t(84567),i=t(62435),c=t(90789),u=t(56499),l=t(86074),m=["options","fieldProps","proFieldProps","valueEnum"],p=i.forwardRef((function(e,r){var t=e.options,o=e.fieldProps,i=e.proFieldProps,c=e.valueEnum,p=(0,a.Z)(e,m);return(0,l.jsx)(u.Z,(0,n.Z)({ref:r,valueType:"checkbox",valueEnum:(0,s.h)(c,void 0),fieldProps:(0,n.Z)({options:t},o),lightProps:(0,n.Z)({labelFormatter:function(){return(0,l.jsx)(u.Z,(0,n.Z)({ref:r,valueType:"checkbox",mode:"read",valueEnum:(0,s.h)(c,void 0),filedConfig:{customLightMode:!0},fieldProps:(0,n.Z)({options:t},o),proFieldProps:i},p))}},p.lightProps),proFieldProps:i},p))})),d=i.forwardRef((function(e,r){var t=e.fieldProps,a=e.children;return(0,l.jsx)(o.Z,(0,n.Z)((0,n.Z)({ref:r},t),{},{children:a}))})),f=(0,c.G)(d,{valuePropName:"checked"});f.Group=p,r.Z=f},64317:function(e,r,t){"use strict";var n=t(1413),a=t(91),s=t(22270),o=t(62435),i=t(66758),c=t(56499),u=t(86074),l=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],m=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],p=function(e,r){var t=e.fieldProps,m=e.children,p=e.params,d=e.proFieldProps,f=e.mode,g=e.valueEnum,x=e.request,h=e.showSearch,b=e.options,v=(0,a.Z)(e,l),k=(0,o.useContext)(i.Z);return(0,u.jsx)(c.Z,(0,n.Z)((0,n.Z)({valueEnum:(0,s.h)(g),request:x,params:p,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,n.Z)({options:b,mode:f,showSearch:h,getPopupContainer:k.getPopupContainer},t),ref:r,proFieldProps:d},v),{},{children:m}))},d=o.forwardRef((function(e,r){var t=e.fieldProps,l=e.children,p=e.params,d=e.proFieldProps,f=e.mode,g=e.valueEnum,x=e.request,h=e.options,b=(0,a.Z)(e,m),v=(0,n.Z)({options:h,mode:f||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},t),k=(0,o.useContext)(i.Z);return(0,u.jsx)(c.Z,(0,n.Z)((0,n.Z)({valueEnum:(0,s.h)(g),request:x,params:p,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,n.Z)({getPopupContainer:k.getPopupContainer},v),ref:r,proFieldProps:d},b),{},{children:l}))})),f=o.forwardRef(p);f.SearchSelect=d,f.displayName="ProFormComponent",r.Z=f},49186:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return Be}});var n=t(15009),a=t.n(n),s=t(99289),o=t.n(s),i=t(5574),c=t.n(i),u=t(19632),l=t.n(u),m=t(97857),p=t.n(m),d=t(80107),f=t(64119),g=t(52688),x=t(5966),h=t(97269),b=t(59530),v=t(80507),k=t(45360),j=t(15867),y=t(71230),S=t(15746),P=t(85418),w=t(62435),C=t(37476),N=t(38345),M=t(17186),_=t(1413),Z=t(91),z=t(66758),O=t(56499),F=t(86074),q=["fieldProps","proFieldProps"],T="dateTime",E=w.forwardRef((function(e,r){var t=e.fieldProps,n=e.proFieldProps,a=(0,Z.Z)(e,q),s=(0,w.useContext)(z.Z);return(0,F.jsx)(O.Z,(0,_.Z)({ref:r,fieldProps:(0,_.Z)({getPopupContainer:s.getPopupContainer},t),valueType:T,proFieldProps:n,filedConfig:{valueType:T,customLightMode:!0}},a))})),A=t(27484),I=t.n(A),D=t(70178),R=t.n(D),Y=t(98165),$=t(68795),J=t(63434),H=w.forwardRef((function(e,r){var t=k.ZP.useMessage(),n=c()(t,2),s=n[0],i=n[1],u=(0,b.useSelector)((function(e){return e.contract.abi})),l=(0,b.useSelector)((function(e){return e.contract.actionSelection})),m=(0,w.useState)(1),p=c()(m,2),d=p[0],f=p[1],g=(0,w.useState)(0),x=c()(g,2),h=x[0],v=x[1],j=(0,w.useState)([]),y=c()(j,2),S=y[0],P=y[1],N=(0,w.useState)(),M=c()(N,2),_=M[0],Z=M[1],z=(0,b.useIntl)(),O=z.formatMessage({id:"contract.intlImportRequested"}),q=z.formatMessage({id:"contract.intlRequested"}),T=z.formatMessage({id:"contract.intlThreshold"}),E=z.formatMessage({id:"msig.intlImportSuccess"}),A=(0,w.useRef)(),I=(0,w.useState)(!1),D=c()(I,2),R=D[0],Y=D[1],$=(0,w.useCallback)((function(e,r){var t;f(e.keyThreshold),P(e.accounts),Z(r),v(0),null===(t=A.current)||void 0===t||t.resetFields(),Y(!0)}),[A]);(0,w.useImperativeHandle)(r,(function(){return{handleOpen:$}}));var H=(0,w.useCallback)(function(){var e=o()(a()().mark((function e(r){var t;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],r.checkbox&&r.checkbox.forEach((function(e){var r=e.split(" "),n=c()(r,2),a=n[0],s=n[1];t.push({requestedAccount:a,requestedPermission:s})})),t.length||t.push({requestedAccount:"",requestedPermission:""}),null==_||_.current.setFieldValue("requested",t),null==_||_.current.validateFields(["requested"]),s.success("".concat(E)),e.abrupt("return",!0);case 7:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),[u,l,_]);return(0,F.jsxs)(C.Y,{formRef:A,title:O,open:R,onFinish:H,onOpenChange:function(e){Y(e)},layout:"horizontal",width:"300px",children:[(0,F.jsxs)("div",{className:" font-semibold",children:[T,"：",d]}),(0,F.jsxs)("div",{className:" font-semibold mb-1",children:[q+"：",h<d?(0,F.jsx)("span",{className:" text-red-600",children:h}):(0,F.jsx)("span",{className:" text-green-600",children:h})]}),!!S.length&&(0,F.jsx)(J.Z.Group,{name:"checkbox",layout:"vertical",label:"",options:S.map((function(e){var r=e.permission.actor.toString(),t=e.permission.permission.toString(),n=e.weight.toString();return{label:"+".concat(n," ").concat(r,"@").concat(t),value:"".concat(r," ").concat(t," ").concat(n)}})),fieldProps:{onChange:function(e){var r=0;e.forEach((function(e){r+=Number(e.split(" ")[2])})),v(r)}}}),i]})})),V=(0,w.memo)(H);I().extend(R());var B=w.forwardRef((function(e,r){var t=k.ZP.useMessage(),n=c()(t,2),s=n[0],i=n[1],u=(0,b.useSelector)((function(e){return e.global.account})),l=(0,b.useSelector)((function(e){return e.global.session})),m=(0,b.useSelector)((function(e){return e.contract.batchActions})),d=(0,w.useState)(!1),g=c()(d,2),h=g[0],j=g[1],P=(0,w.useRef)(),_=(0,w.useRef)(),Z=(0,w.useState)(!1),z=c()(Z,2),O=z[0],q=z[1],T=(0,b.useIntl)(),A=T.formatMessage({id:"contract.intlCreateProposal"}),D=T.formatMessage({id:"common.intlInputException"}),R=T.formatMessage({id:"account.intlPermissionNotExist"}),J=T.formatMessage({id:"contract.intlCreate"}),H=T.formatMessage({id:"contract.intlExpirationError"}),B=T.formatMessage({id:"contract.intlExpiration"}),W=T.formatMessage({id:"contract.intlPermission"}),L=T.formatMessage({id:"common.intlTxSuccess"}),U=T.formatMessage({id:"common.intlTxFail"}),Q=T.formatMessage({id:"common.intlPleaseConnectWallet"}),K=T.formatMessage({id:"common.intlPleaseConnectNetwork"}),G=T.formatMessage({id:"contract.intlProposer"}),X=T.formatMessage({id:"contract.intlProposalName"}),ee=T.formatMessage({id:"contract.intlMsigAccount"}),re=T.formatMessage({id:"contract.intlRequested"}),te=T.formatMessage({id:"contract.intlMsigAccountWeightInsufficient"}),ne=T.formatMessage({id:"contract.intlProposalNamePlaceholder"}),ae=(0,w.useCallback)((function(){q(!0)}),[]);(0,w.useImperativeHandle)(r,(function(){return{handleOpen:ae}}));var se=(0,w.useCallback)(function(){var e=o()(a()().mark((function e(r){var t,n,o,i,d,g,x,h,b,k,j,y,S,P,w,C,N,M,_,Z,z,O,F,q,T,E,A,D;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l&&l.broadcast){e.next=5;break}return s.error("".concat(Q)),e.abrupt("return");case 5:if(u){e.next=8;break}return s.error("".concat(K)),e.abrupt("return");case 8:return t=r.proposer,n=r.proposalName,o=r.msigAccount,i=r.msigPermission,d=[],r.requested.forEach((function(e){d.find((function(r){return r.actor===e.requestedAccount&&r.permission===e.requestedPermission}))||d.push({actor:e.requestedAccount,permission:e.requestedPermission})})),g=I()(r.expiration).utc().format("YYYY-MM-DDTHH:mm:ss"),e.next=17,(0,f.zI)(l.client.v1.chain.get_account(o));case 17:if(x=e.sent,h=c()(x,2),b=h[0],k=h[1],!b){e.next=26;break}return s.error(b),e.abrupt("return",!1);case 26:j=!1,y=0;case 28:if(!(y<k.permissions.length)){e.next=51;break}if(k.permissions[y].perm_name.toString()!==i){e.next=48;break}S=k.permissions[y].required_auth.keyThreshold,P=k.permissions[y].required_auth.accounts,w=0,C=0;case 34:if(!(C<d.length)){e.next=43;break}for(N=!1,M=0;M<P.length;M++)d[C].actor===P[M].permission.actor.toString()&&d[C].permission===P[M].permission.permission.toString()&&(N=!0,w+=P[M].weight.toNumber());if(N){e.next=40;break}return s.error("".concat(R)),e.abrupt("return",!1);case 40:C++,e.next=34;break;case 43:if(!(w<S)){e.next=46;break}return s.error("".concat(te)),e.abrupt("return",!1);case 46:return j=!0,e.abrupt("break",51);case 48:y++,e.next=28;break;case 51:if(j){e.next=54;break}return s.error("".concat(R)),e.abrupt("return",!1);case 54:return _=[],Z=[],m.forEach((function(e){var r=JSON.parse(e.typedAction);r.authorization.length?(r.authorization=[{actor:o,permission:i}],_.push(r)):Z.push(r)})),e.next=59,l.client.v1.chain.get_info();case 59:return z=e.sent,O=z.getTransactionHeader(),F=v.YW.from(p()(p()({},O),{},{expiration:g,actions:_,context_free_actions:Z})),q={action:{account:"eosio.msig",name:"propose",authorization:[l.permissionLevel],data:{proposer:t,proposal_name:n,requested:d,trx:F.toJSON()}}},e.next=65,(0,f.zI)(l.transact(q));case 65:return T=e.sent,E=c()(T,2),A=E[0],D=E[1],A?s.error(A):D&&D.response?s.success("".concat(L)):s.error("".concat(U)),e.abrupt("return",!0);case 71:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),[l,m]),oe=(0,w.useCallback)(o()(a()().mark((function e(){var r,t,n,o,i,u,m,p,d,g,x;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(!0),t=null===(r=_.current)||void 0===r?void 0:r.getFieldsValue(),n=t.msigAccount,o=t.msigPermission,i={},e.next=7,(0,f.zI)(l.client.v1.chain.get_account(n));case 7:if(u=e.sent,m=c()(u,2),p=m[0],d=m[1],!p){e.next=17;break}return s.error(p),j(!1),e.abrupt("return",!1);case 17:g=!1,x=0;case 19:if(!(x<d.permissions.length)){e.next=27;break}if(d.permissions[x].perm_name.toString()!==o){e.next=24;break}return i=d.permissions[x].required_auth,g=!0,e.abrupt("break",27);case 24:x++,e.next=19;break;case 27:if(g){e.next=31;break}return s.error("".concat(R)),j(!1),e.abrupt("return",!1);case 31:j(!1),P.current.handleOpen(i,_);case 33:case"end":return e.stop()}}),e)}))),[l]);return(0,F.jsxs)(C.Y,{formRef:_,title:A,open:O,onFinish:se,onOpenChange:function(e){q(e)},initialValues:{proposer:u?u.accountName.toString():""},submitter:{searchConfig:{submitText:J},render:function(e,r){return[r[0],r[1]]}},layout:"vertical",width:"500px",modalProps:{style:{top:25}},children:[(0,F.jsx)(x.Z,{disabled:!0,name:"proposer",label:G,placeholder:"example: dfsdeveloper",fieldProps:{autoFocus:!1,size:"large"},rules:[{required:!0,whitespace:!0,message:"".concat(D),pattern:/^[a-z1-5.]{1,12}$/}]}),(0,F.jsx)(x.Z,{name:"proposalName",label:X,placeholder:ne,fieldProps:{autoFocus:!1,size:"large"},rules:[{required:!0,whitespace:!0,message:"".concat(D),pattern:/^[a-z1-5.]{1,12}$/}]}),(0,F.jsxs)(y.Z,{gutter:10,children:[(0,F.jsx)(S.Z,{lg:{span:"16"},md:{span:"16"},sm:{span:"16"},xs:{span:"16"},children:(0,F.jsx)(x.Z,{name:"msigAccount",label:ee,placeholder:"ex: dfsdeveloper",fieldProps:{autoFocus:!1,size:"large"},rules:[{required:!0,whitespace:!0,message:"".concat(D),pattern:/^[a-z1-5.]{1,12}$/}]})}),(0,F.jsx)(S.Z,{lg:{span:"8"},md:{span:"8"},sm:{span:"8"},xs:{span:"8"},children:(0,F.jsx)(x.Z,{name:"msigPermission",label:(0,F.jsxs)("div",{className:"flex items-center",children:[W,h?(0,F.jsx)(Y.Z,{spin:h,className:"ml-3 text-blue-600"}):(0,F.jsx)($.Z,{className:"ml-3 text-blue-600 hover:cursor-pointer",onClick:oe})]}),placeholder:"ex: active",fieldProps:{autoFocus:!1,size:"large"},rules:[{required:!0,whitespace:!0,message:"".concat(D),pattern:/^[a-z1-5.]{1,12}$/}]})})]}),(0,F.jsx)(N.Z,{bordered:!0,bodyStyle:{paddingInline:"12px",paddingBlock:"6px"},className:"mb-3 requestedAccount",children:(0,F.jsx)(M.u,{name:"requested",min:1,creatorButtonProps:!1,itemContainerRender:function(e){return(0,F.jsx)("div",{children:e})},initialValue:[{requestedAccount:"",permission:""}],children:(0,F.jsxs)(y.Z,{gutter:10,children:[(0,F.jsx)(S.Z,{lg:{span:"16"},md:{span:"16"},sm:{span:"16"},xs:{span:"16"},children:(0,F.jsx)(x.Z,{name:"requestedAccount",label:re,placeholder:"ex: dfsdeveloper",fieldProps:{autoFocus:!1,size:"large"},rules:[{required:!0,whitespace:!0,message:"".concat(D),pattern:/^[a-z1-5.]{1,12}$/}]})}),(0,F.jsx)(S.Z,{lg:{span:"8"},md:{span:"8"},sm:{span:"8"},xs:{span:"8"},children:(0,F.jsx)(x.Z,{name:"requestedPermission",label:W,placeholder:"ex: active",fieldProps:{autoFocus:!1,size:"large"},rules:[{required:!0,whitespace:!0,message:"".concat(D),pattern:/^[a-z1-5.]{1,12}$/}]})})]})})}),(0,F.jsx)(E,{width:"lg",name:"expiration",label:B,rules:[{required:!0,validator:function(e,r){try{return r?r.unix()<I()().unix()?Promise.reject(H):Promise.resolve(""):Promise.reject(D)}catch(e){return Promise.reject(e.message)}}}]}),(0,F.jsx)(V,{ref:P}),i]})})),W=(0,w.memo)(B),L=t(64599),U=t.n(L),Q=["fieldProps","proFieldProps","min","max","step","marks","vertical","range"],K=w.forwardRef((function(e,r){var t=e.fieldProps,n=e.proFieldProps,a=e.min,s=e.max,o=e.step,i=e.marks,c=e.vertical,u=e.range,l=(0,Z.Z)(e,Q);return(0,F.jsx)(O.Z,(0,_.Z)({valueType:"slider",fieldProps:(0,_.Z)((0,_.Z)({},t),{},{min:a,max:s,step:o,marks:i,vertical:c,range:u,style:null==t?void 0:t.style}),ref:r,proFieldProps:n,filedConfig:{ignoreWidth:!0}},l))})),G=t(90672);I().extend(R());var X=w.forwardRef((function(e,r){var t=k.ZP.useMessage(),n=c()(t,2),s=n[0],i=n[1],u=(0,w.useRef)(),l=(0,w.useState)(!1),m=c()(l,2),p=m[0],d=m[1],f=(0,w.useState)(""),g=c()(f,2),x=g[0],h=g[1],v=(0,w.useState)(""),y=c()(v,2),S=y[0],P=y[1],N=(0,w.useState)(1),M=c()(N,2),_=M[0],Z=M[1],z=(0,w.useState)(""),O=c()(z,2),q=O[0],T=O[1],E=(0,w.useState)(""),A=c()(E,2),I=A[0],D=A[1],R=(0,b.useIntl)(),Y=R.formatMessage({id:"common.intlCopySuccess"}),$=R.formatMessage({id:"common.intlCopy"}),J=R.formatMessage({id:"common.intlExport"}),H=R.formatMessage({id:"contract.intlSignedTransaction"}),V=R.formatMessage({id:"contract.intlExported"}),B=(0,w.useCallback)((function(e,r,t,n,a){var s;null===(s=u.current)||void 0===s||s.setFieldValue("content",JSON.stringify(e,null,2)),h(JSON.stringify(e,null,2)),P(r),Z(a),T(t),D(n),d(!0)}),[]);(0,w.useImperativeHandle)(r,(function(){return{handleOpen:B}}));var W=(0,w.useCallback)(o()(a()().mark((function e(){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.navigator.clipboard.writeText(x);case 2:s.success("".concat(Y));case 3:case"end":return e.stop()}}),e)}))),[x]),L=(0,w.useCallback)((function(){var e="data:,".concat(x),r=document.createElement("a");r.href=e,r.download="".concat(q,"@").concat(I,"_threshold@").concat(_,"_expiration@").concat(S,"_msig.json"),r.click(),s.info("".concat(V)),d(!1)}),[x,S,_,q,I]);return(0,F.jsxs)(C.Y,{formRef:u,title:H,open:p,onOpenChange:function(e){d(e)},submitter:{render:function(e,r){return[r[0],(0,F.jsx)(j.ZP,{onClick:W,children:$},"copy"),(0,F.jsx)(j.ZP,{type:"primary",onClick:L,children:J},"export")]}},layout:"vertical",width:"700px",modalProps:{style:{top:25}},children:[(0,F.jsx)(G.Z,{name:"content",fieldProps:{autoSize:{minRows:5},allowClear:!1,autoFocus:!1,onChange:void 0,value:x,size:"large"}}),i]})})),ee=(0,w.memo)(X);I().extend(R());var re=w.forwardRef((function(e,r){var t=k.ZP.useMessage(),n=c()(t,2),s=n[0],i=n[1],u=(0,b.useSelector)((function(e){return e.global.account})),m=(0,b.useSelector)((function(e){return e.global.session})),d=(0,b.useSelector)((function(e){return e.global.privateKey})),h=(0,b.useSelector)((function(e){return e.contract.batchActions})),y=(0,w.useRef)(),S=(0,b.useIntl)(),P=S.formatMessage({id:"contract.intlCreateTransaction"}),N=S.formatMessage({id:"common.intlInputException"}),M=S.formatMessage({id:"account.intlPermissionNotExist"}),_=S.formatMessage({id:"contract.intlCreate"}),Z=S.formatMessage({id:"contract.intlCreateAndSign"}),z=S.formatMessage({id:"contract.intlExpiration"}),O=S.formatMessage({id:"contract.intlFreeCpu"}),q=S.formatMessage({id:"contract.intlAccount"}),T=S.formatMessage({id:"contract.intlPermission"}),E=S.formatMessage({id:"contract.intlFreeCpuLimit"}),A=S.formatMessage({id:"common.intlPleaseConnectWallet"}),D=S.formatMessage({id:"common.intlPleaseConnectNetwork"}),R=(0,w.useRef)(),Y=(0,w.useState)(!1),$=c()(Y,2),J=$[0],H=$[1],V=(0,w.useCallback)((function(){H(!0)}),[]);(0,w.useImperativeHandle)(r,(function(){return{handleOpen:V}}));var B=(0,w.useCallback)(function(){var e=o()(a()().mark((function e(r){var t,n,o,i,g,x,b,k,j,S,P,w,C,N,_,Z,z,O,F,q,T,R,Y,$,J,H,V,B,W,L,Q,K,G;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m&&m.broadcast){e.next=5;break}return s.error("".concat(A)),e.abrupt("return");case 5:if(u){e.next=8;break}return s.error("".concat(D)),e.abrupt("return");case 8:return t=r.account,n=r.permission,o=I()().add(r.expiration,"minutes").utc().format("YYYY-MM-DDTHH:mm:ss"),i=r.freeCpu,g=1,e.next=15,(0,f.zI)(m.client.v1.chain.get_account(t));case 15:if(x=e.sent,b=c()(x,2),k=b[0],j=b[1],!k){e.next=24;break}return s.error(k),e.abrupt("return",!1);case 24:S=!1,P=0;case 26:if(!(P<j.permissions.length)){e.next=34;break}if(j.permissions[P].perm_name.toString()!==n){e.next=31;break}return g=j.permissions[P].required_auth.keyThreshold,S=!0,e.abrupt("break",34);case 31:P++,e.next=26;break;case 34:if(S){e.next=37;break}return s.error("".concat(M)),e.abrupt("return",!1);case 37:if(!i||"active"===n||"owner"===n){e.next=40;break}return s.error("".concat(E)),e.abrupt("return",!1);case 40:return w=[],C=[],h.forEach((function(e){var r=JSON.parse(e.typedAction);r.authorization.length?(r.authorization=[{actor:t,permission:n}],w.push(r)):C.push(r)})),N={account:"dfsfreecpu11",name:"freecpu",authorization:[{actor:"dfs.service",permission:"cpu"},{actor:t,permission:n}],data:f._9.from({user:t})},_=v.aU.from(N),O=[],e.next=48,m.client.v1.chain.get_info();case 48:F=e.sent,q=F.getTransactionHeader(),i?(Z=v.YW.from(p()(p()({},q),{},{expiration:o,actions:[_].concat(w),context_free_actions:C})),O[0]=d.signDigest(Z.signingDigest(m.chain.id.toString()))):Z=v.YW.from(p()(p()({},q),{},{expiration:o,actions:w,context_free_actions:C})),T=[],R=new Set,Z.actions.forEach((function(e){R.add(e.account.toString())})),Z.context_free_actions.forEach((function(e){R.add(e.account.toString())})),Y=U()(R),e.prev=56,Y.s();case 58:if(($=Y.n()).done){e.next=74;break}return J=$.value,e.next=62,(0,f.zI)(m.client.v1.chain.get_abi(J));case 62:if(H=e.sent,V=c()(H,2),B=V[0],W=V[1],!B){e.next=71;break}return s.error(B),e.abrupt("return",!1);case 71:T.push({abi:v.dL.from(W.abi),account:v.VG.from(J)});case 72:e.next=58;break;case 74:e.next=79;break;case 76:e.prev=76,e.t0=e.catch(56),Y.e(e.t0);case 79:return e.prev=79,Y.f(),e.finish(79);case 82:return e.next=84,(0,f.zI)(m.transact({transaction:Z},{broadcast:!1,transactPlugins:[],abis:T}));case 84:if(L=e.sent,Q=c()(L,2),K=Q[0],G=Q[1],!K){e.next=91;break}return s.error(K),e.abrupt("return",!1);case 91:z=v.uQ.from(p()(p()({},Z),{},{signatures:[].concat(O,l()(G.signatures))})),y.current.handleOpen(z,o,t,n,g);case 93:case"end":return e.stop()}}),e,null,[[56,76,79,82]])})));return function(r){return e.apply(this,arguments)}}(),[m,d,u,h]),W=(0,w.useCallback)(o()(a()().mark((function e(){var r,t,n,o,i,u,l,g,x,b,k,j,S,P,w,C,N,_,Z,z,O,F,q;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(r=R.current)||void 0===r||r.validateFields(),n=null===(t=R.current)||void 0===t?void 0:t.getFieldsValue(),o=n.account,i=n.permission,u=I()().add(n.expiration,"minutes").utc().format("YYYY-MM-DDTHH:mm:ss"),l=n.freeCpu,g=1,e.next=9,(0,f.zI)(m.client.v1.chain.get_account(o));case 9:if(x=e.sent,b=c()(x,2),k=b[0],j=b[1],!k){e.next=18;break}return s.error(k),e.abrupt("return",!1);case 18:S=!1,P=0;case 20:if(!(P<j.permissions.length)){e.next=28;break}if(j.permissions[P].perm_name.toString()!==i){e.next=25;break}return g=j.permissions[P].required_auth.keyThreshold,S=!0,e.abrupt("break",28);case 25:P++,e.next=20;break;case 28:if(S){e.next=31;break}return s.error("".concat(M)),e.abrupt("return",!1);case 31:if(!l||"active"===i||"owner"===i){e.next=34;break}return s.error("".concat(E)),e.abrupt("return",!1);case 34:return w=[],C=[],h.forEach((function(e){var r=JSON.parse(e.typedAction);r.authorization.length?(r.authorization=[{actor:o,permission:i}],w.push(r)):C.push(r)})),N={account:"dfsfreecpu11",name:"freecpu",authorization:[{actor:"dfs.service",permission:"cpu"},{actor:o,permission:i}],data:f._9.from({user:o})},_=v.aU.from(N),e.next=41,m.client.v1.chain.get_info();case 41:O=e.sent,F=O.getTransactionHeader(),l?(Z=v.YW.from(p()(p()({},F),{},{expiration:u,actions:[_].concat(w),context_free_actions:C})),q=d.signDigest(Z.signingDigest(m.chain.id.toString())),z=v.uQ.from(p()(p()({},Z),{},{signatures:[q]}))):(Z=v.YW.from(p()(p()({},F),{},{expiration:u,actions:w,context_free_actions:C})),z=v.uQ.from(p()(p()({},Z),{},{signatures:[]}))),y.current.handleOpen(z,u,o,i,g);case 45:case"end":return e.stop()}}),e)}))),[m,d,h]);return(0,F.jsxs)(C.Y,{formRef:R,title:P,open:J,onFinish:B,onOpenChange:function(e){H(e)},initialValues:{freeCpu:!0,expiration:60},submitter:{searchConfig:{submitText:Z},render:function(e,r){return[r[0],(0,F.jsx)(j.ZP,{onClick:W,children:_},"import"),r[1]]}},layout:"vertical",width:"400px",children:[(0,F.jsx)(x.Z,{name:"account",label:q,placeholder:"example: dfsdeveloper",fieldProps:{autoFocus:!1,size:"large"},rules:[{required:!0,whitespace:!0,message:"".concat(N),pattern:/^[a-z1-5.]{1,12}$/}]}),(0,F.jsx)(x.Z,{name:"permission",label:T,placeholder:"example: active",fieldProps:{autoFocus:!1,size:"large"},rules:[{required:!0,whitespace:!0,message:"".concat(N),pattern:/^[a-z1-5.]{1,12}$/}]}),(0,F.jsx)(K,{name:"expiration",label:z,marks:{10:"10",30:"30",60:"60"},min:10,max:60,fieldProps:{autoFocus:!1},rules:[{required:!0,whitespace:!0,message:"".concat(N),pattern:/^\d+$/}]}),(0,F.jsx)(g.Z,{name:"freeCpu",label:O}),(0,F.jsx)(ee,{ref:y}),i]})})),te=(0,w.memo)(re),ne=t(72004),ae=t.n(ne),se=t(12444),oe=t.n(se),ie=t(31996),ce=t.n(ie),ue=t(26037),le=t.n(ue),me=t(9783),pe=t.n(me);I().extend(R());var de=w.forwardRef((function(e,r){var t=k.ZP.useMessage(),n=c()(t,2),s=n[0],i=n[1],u=(0,w.useRef)(),l=(0,w.useState)(!1),m=c()(l,2),p=m[0],d=m[1],f=(0,w.useState)(""),g=c()(f,2),x=g[0],h=g[1],v=(0,w.useState)(""),y=c()(v,2),S=y[0],P=y[1],N=(0,w.useState)([]),M=c()(N,2),_=M[0],Z=M[1],z=(0,b.useIntl)(),O=z.formatMessage({id:"common.intlCopySuccess"}),q=z.formatMessage({id:"common.intlCopy"}),T=z.formatMessage({id:"common.intlExport"}),E=z.formatMessage({id:"contract.intlSignedTransaction"}),A=z.formatMessage({id:"contract.intlExported"}),I=(0,w.useCallback)((function(e,r,t){var n;null===(n=u.current)||void 0===n||n.setFieldValue("content",JSON.stringify(e,null,2)),h(JSON.stringify(e,null,2)),P(r),Z(t),d(!0)}),[]);(0,w.useImperativeHandle)(r,(function(){return{handleOpen:I}}));var D=(0,w.useCallback)(o()(a()().mark((function e(){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.navigator.clipboard.writeText(x);case 2:s.success("".concat(O));case 3:case"end":return e.stop()}}),e)}))),[x]),R=(0,w.useCallback)((function(){var e="";_.forEach((function(r){e+="".concat(r.actor,"@").concat(r.permission,"_")})),e="[".concat(e.slice(0,-1),"]");var r="data:,".concat(x),t=document.createElement("a");t.href=r,t.download="".concat(e,"_expiration@").concat(S,"_msig.json"),t.click(),s.info("".concat(A)),d(!1)}),[x,S,_]);return(0,F.jsxs)(C.Y,{formRef:u,title:E,open:p,onOpenChange:function(e){d(e)},submitter:{render:function(e,r){return[r[0],(0,F.jsx)(j.ZP,{onClick:D,children:q},"copy"),(0,F.jsx)(j.ZP,{type:"primary",onClick:R,children:T},"export")]}},layout:"vertical",width:"700px",modalProps:{style:{top:25}},children:[(0,F.jsx)(G.Z,{name:"content",fieldProps:{autoSize:{minRows:5},allowClear:!1,autoFocus:!1,onChange:void 0,value:x,size:"large"}}),i]})})),fe=(0,w.memo)(de);I().extend(R());var ge=function(e){ce()(t,e);var r=le()(t);function t(){return oe()(this,t),r.apply(this,arguments)}return ae()(t)}(v.AU);pe()(ge,"abiName","freecpu"),pe()(ge,"abiFields",[{name:"user",type:v.VG}]);var xe=w.forwardRef((function(e,r){var t=k.ZP.useMessage(),n=c()(t,2),s=n[0],i=n[1],u=(0,b.useSelector)((function(e){return e.global.account})),m=(0,b.useSelector)((function(e){return e.global.session})),d=(0,b.useSelector)((function(e){return e.global.privateKey})),h=(0,b.useSelector)((function(e){return e.contract.batchActions})),P=(0,w.useRef)(),_=(0,w.useRef)(),Z=(0,w.useState)(!1),z=c()(Z,2),O=z[0],q=z[1],T=(0,b.useIntl)(),E=T.formatMessage({id:"contract.intlCreateTransaction"}),A=T.formatMessage({id:"common.intlInputException"}),D=T.formatMessage({id:"account.intlPermissionNotExist"}),R=T.formatMessage({id:"contract.intlCreate"}),Y=T.formatMessage({id:"contract.intlExpiration"}),$=T.formatMessage({id:"contract.intlPermission"}),J=T.formatMessage({id:"common.intlPleaseConnectWallet"}),H=T.formatMessage({id:"common.intlPleaseConnectNetwork"}),V=T.formatMessage({id:"contract.intlCreateAndSign"}),B=T.formatMessage({id:"contract.intlFreeCpu"}),W=T.formatMessage({id:"contract.intlFreeCpuLimit"}),L=T.formatMessage({id:"contract.intlRequested"}),Q=(0,w.useCallback)((function(){q(!0)}),[]);(0,w.useImperativeHandle)(r,(function(){return{handleOpen:Q}}));var G=(0,w.useCallback)(function(){var e=o()(a()().mark((function e(r){var t,n,o,i,g,x,b,k,j,y,S,w,C,N,M,_,Z,z,O,F,q,T,E,A,R,Y,$,V,B,L,Q,K;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m&&m.broadcast){e.next=5;break}return s.error("".concat(J)),e.abrupt("return");case 5:if(u){e.next=8;break}return s.error("".concat(H)),e.abrupt("return");case 8:t=r.freeCpu,n=I()().add(r.expiration,"minutes").utc().format("YYYY-MM-DDTHH:mm:ss"),o=[],r.requested.forEach((function(e){o.find((function(r){return r.actor===e.requestedAccount&&r.permission===e.requestedPermission}))||o.push({actor:e.requestedAccount,permission:e.requestedPermission})})),i=0;case 13:if(!(i<o.length)){e.next=40;break}return e.next=16,(0,f.zI)(m.client.v1.chain.get_account(o[i].actor));case 16:if(g=e.sent,x=c()(g,2),b=x[0],k=x[1],!b){e.next=25;break}return s.error(b),e.abrupt("return",!1);case 25:j=!1,y=0;case 27:if(!(y<k.permissions.length)){e.next=34;break}if(k.permissions[y].perm_name.toString()!==o[i].permission){e.next=31;break}return j=!0,e.abrupt("break",34);case 31:y++,e.next=27;break;case 34:if(j){e.next=37;break}return s.error("".concat(D)),e.abrupt("return",!1);case 37:i++,e.next=13;break;case 40:if(!t){e.next=44;break}if("active"===o[0].permission||"owner"===o[0].permission){e.next=44;break}return s.error("".concat(W)),e.abrupt("return",!1);case 44:return S=[],w=[],h.forEach((function(e){var r=JSON.parse(e.typedAction);r.authorization.length?(r.authorization=o,S.push(r)):w.push(r)})),C={account:"dfsfreecpu11",name:"freecpu",authorization:[{actor:"dfs.service",permission:"cpu"},o[0]],data:ge.from({user:o[0].actor})},N=v.aU.from(C),Z=[],e.next=52,m.client.v1.chain.get_info();case 52:z=e.sent,O=z.getTransactionHeader(),t?(M=v.YW.from(p()(p()({},O),{},{expiration:n,actions:[N].concat(S),context_free_actions:w})),Z[0]=d.signDigest(M.signingDigest(m.chain.id.toString()))):M=v.YW.from(p()(p()({},O),{},{expiration:n,actions:S,context_free_actions:w})),F=[],q=new Set,M.actions.forEach((function(e){q.add(e.account.toString())})),T=U()(q),e.prev=59,T.s();case 61:if((E=T.n()).done){e.next=77;break}return A=E.value,e.next=65,(0,f.zI)(m.client.v1.chain.get_abi(A));case 65:if(R=e.sent,Y=c()(R,2),$=Y[0],V=Y[1],!$){e.next=74;break}return s.error($),e.abrupt("return",!1);case 74:F.push({abi:v.dL.from(V.abi),account:v.VG.from(A)});case 75:e.next=61;break;case 77:e.next=82;break;case 79:e.prev=79,e.t0=e.catch(59),T.e(e.t0);case 82:return e.prev=82,T.f(),e.finish(82);case 85:return e.next=87,(0,f.zI)(m.transact({transaction:M},{broadcast:!1,transactPlugins:[],abis:F}));case 87:if(B=e.sent,L=c()(B,2),Q=L[0],K=L[1],!Q){e.next=94;break}return s.error(Q),e.abrupt("return",!1);case 94:_=v.uQ.from(p()(p()({},M),{},{signatures:[].concat(Z,l()(K.signatures))})),P.current.handleOpen(_,n,o);case 96:case"end":return e.stop()}}),e,null,[[59,79,82,85]])})));return function(r){return e.apply(this,arguments)}}(),[m,u]),X=(0,w.useCallback)(o()(a()().mark((function e(){var r,t,n,o,i,u,l,g,x,b,k,j,y,S,w,C,N,M,Z,z,O,F;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null===(r=_.current)||void 0===r||r.validateFields(),n=null===(t=_.current)||void 0===t?void 0:t.getFieldsValue(),o=n.freeCpu,i=I()().add(n.expiration,"minutes").utc().format("YYYY-MM-DDTHH:mm:ss"),u=[],n.requested.forEach((function(e){u.find((function(r){return r.actor===e.requestedAccount&&r.permission===e.requestedPermission}))||u.push({actor:e.requestedAccount,permission:e.requestedPermission})})),l=0;case 7:if(!(l<u.length)){e.next=34;break}return e.next=10,(0,f.zI)(m.client.v1.chain.get_account(u[l].actor));case 10:if(g=e.sent,x=c()(g,2),b=x[0],k=x[1],!b){e.next=19;break}return s.error(b),e.abrupt("return",!1);case 19:j=!1,y=0;case 21:if(!(y<k.permissions.length)){e.next=28;break}if(k.permissions[y].perm_name.toString()!==u[l].permission){e.next=25;break}return j=!0,e.abrupt("break",28);case 25:y++,e.next=21;break;case 28:if(j){e.next=31;break}return s.error("".concat(D)),e.abrupt("return",!1);case 31:l++,e.next=7;break;case 34:if(!o){e.next=38;break}if("active"===u[0].permission||"owner"===u[0].permission){e.next=38;break}return s.error("".concat(W)),e.abrupt("return",!1);case 38:return S=[],w=[],h.forEach((function(e){var r=JSON.parse(e.typedAction);r.authorization.length?(r.authorization=u,S.push(r)):w.push(r)})),C={account:"dfsfreecpu11",name:"freecpu",authorization:[{actor:"dfs.service",permission:"cpu"},u[0]],data:ge.from({user:u[0].actor})},N=v.aU.from(C),e.next=45,m.client.v1.chain.get_info();case 45:z=e.sent,O=z.getTransactionHeader(),o?(M=v.YW.from(p()(p()({},O),{},{expiration:i,actions:[N].concat(S),context_free_actions:w})),F=d.signDigest(M.signingDigest(m.chain.id.toString())),Z=v.uQ.from(p()(p()({},M),{},{signatures:[F]}))):(M=v.YW.from(p()(p()({},O),{},{expiration:i,actions:S,context_free_actions:w})),Z=v.uQ.from(p()(p()({},M),{},{signatures:[]}))),P.current.handleOpen(Z,i,u);case 49:case"end":return e.stop()}}),e)}))),[m,d]);return(0,F.jsxs)(C.Y,{formRef:_,title:E,open:O,onFinish:G,onOpenChange:function(e){q(e)},initialValues:{freeCpu:!0,expiration:60},submitter:{searchConfig:{submitText:V},render:function(e,r){return[r[0],(0,F.jsx)(j.ZP,{onClick:X,children:R},"import"),r[1]]}},layout:"vertical",width:"500px",modalProps:{style:{top:25}},children:[(0,F.jsx)(N.Z,{bordered:!0,bodyStyle:{paddingInline:"12px",paddingBlock:"6px"},className:"mb-3 requestedAccount",children:(0,F.jsx)(M.u,{name:"requested",min:1,creatorButtonProps:!1,itemContainerRender:function(e){return(0,F.jsx)("div",{children:e})},initialValue:[{requestedAccount:"",permission:""}],children:(0,F.jsxs)(y.Z,{gutter:10,children:[(0,F.jsx)(S.Z,{lg:{span:"16"},md:{span:"16"},sm:{span:"16"},xs:{span:"16"},children:(0,F.jsx)(x.Z,{name:"requestedAccount",label:L,placeholder:"ex: dfsdeveloper",fieldProps:{autoFocus:!1,size:"large"},rules:[{required:!0,whitespace:!0,message:"".concat(A),pattern:/^[a-z1-5.]{1,12}$/}]})}),(0,F.jsx)(S.Z,{lg:{span:"8"},md:{span:"8"},sm:{span:"8"},xs:{span:"8"},children:(0,F.jsx)(x.Z,{name:"requestedPermission",label:$,placeholder:"ex: active",fieldProps:{autoFocus:!1,size:"large"},rules:[{required:!0,whitespace:!0,message:"".concat(A),pattern:/^[a-z1-5.]{1,12}$/}]})})]})})}),(0,F.jsx)(K,{name:"expiration",label:Y,marks:{10:"10",30:"30",60:"60"},min:10,max:60,fieldProps:{autoFocus:!1},rules:[{required:!0,whitespace:!0,message:"".concat(A),pattern:/^\d+$/}]}),(0,F.jsx)(g.Z,{name:"freeCpu",label:B}),(0,F.jsx)(fe,{ref:P}),i]})})),he=(0,w.memo)(xe),be=function(){var e=(0,b.useDispatch)(),r=(0,b.useSelector)((function(e){return e.contract.batchActions})),t=(0,b.useSelector)((function(e){return e.global.session})),n=(0,b.useSelector)((function(e){return e.global.account})),s=k.ZP.useMessage(),i=c()(s,2),u=i[0],l=i[1],m=(0,w.useRef)(),p=(0,w.useRef)(),g=(0,w.useRef)(),x=(0,b.useIntl)(),v=x.formatMessage({id:"contract.intlBatchActions"}),y=x.formatMessage({id:"common.intlTxSuccess"}),S=x.formatMessage({id:"common.intlTxFail"}),P=x.formatMessage({id:"common.intlPleaseConnectWallet"}),C=x.formatMessage({id:"common.intlPleaseConnectNetwork"}),N=x.formatMessage({id:"contract.intlMsigPubkey"}),M=x.formatMessage({id:"contract.intlMsigProposal"}),_=x.formatMessage({id:"contract.intlMsigTransaction"}),Z=(0,w.useCallback)(o()(a()().mark((function e(){var s,o,i,l,m,p;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.broadcast){e.next=5;break}return u.error("".concat(P)),e.abrupt("return");case 5:if(n){e.next=8;break}return u.error("".concat(C)),e.abrupt("return");case 8:return s=[],o=[],r.forEach((function(e){var r=JSON.parse(e.typedAction);r.authorization.length?s.push(r):o.push(r)})),e.next=13,(0,f.zI)(t.transact({actions:s,context_free_actions:o}));case 13:i=e.sent,l=c()(i,2),m=l[0],p=l[1],m?u.error(m):p&&p.response?u.success("".concat(y)):u.error("".concat(S));case 18:case"end":return e.stop()}}),e)}))),[t,n,r]),z=(0,w.useCallback)((function(t){var n=r.filter((function(e,r){return r!==t}));e(d.N.setBatchActions(n))}),[r]),O=(0,w.useCallback)((function(){e(d.N.setBatchActions([]))}),[]);return(0,F.jsxs)("div",{className:"tab-action",children:[(0,F.jsx)("div",{className:"hardline text-lg font-semibold mb-3 mt-3",children:"".concat(v,"(").concat(r.length,")")}),(0,F.jsx)("div",{className:"px-[13px]",children:r.map((function(e,r){return(0,F.jsx)("div",{className:"mb-2",children:(0,F.jsxs)("div",{style:{background:"#e6f4ff",border:"1px solid #91caff",boxSizing:"border-box",margin:"0",padding:"8px 12px",color:"rgba(0, 0, 0, 0.88)",fontSize:"14px",lineHeight:"1.5714285714285714",listStyle:"none",position:"relative",display:"flex",alignItems:"center",wordWrap:"break-word",borderRadius:"8px"},children:[(0,F.jsx)("div",{style:{flex:1,minWidth:0,boxSizing:"border-box"},children:e.untypedAction}),(0,F.jsx)("button",{type:"button",onClick:function(){return z(r)},style:{marginInlineStart:"8px",padding:0,overflow:"hidden",fontSize:"12px",lineHeight:"12px",backgroundColor:"transparent",border:"none",outline:"none",cursor:"pointer"},children:(0,F.jsx)("span",{style:{color:"rgba(0, 0, 0, 0.45)",transition:"color 0.2s"},children:(0,F.jsx)("svg",{fillRule:"evenodd",viewBox:"64 64 896 896",focusable:"false",width:"1em",height:"1em",fill:"currentColor",children:(0,F.jsx)("path",{d:"M799.86 166.31c.02 0 .04.02.08.06l57.69 57.7c.04.03.05.05.06.08a.12.12 0 010 .06c0 .03-.02.05-.06.09L569.93 512l287.7 287.7c.04.04.05.06.06.09a.12.12 0 010 .07c0 .02-.02.04-.06.08l-57.7 57.69c-.03.04-.05.05-.07.06a.12.12 0 01-.07 0c-.03 0-.05-.02-.09-.06L512 569.93l-287.7 287.7c-.04.04-.06.05-.09.06a.12.12 0 01-.07 0c-.02 0-.04-.02-.08-.06l-57.69-57.7c-.04-.03-.05-.05-.06-.07a.12.12 0 010-.07c0-.03.02-.05.06-.09L454.07 512l-287.7-287.7c-.04-.04-.05-.06-.06-.09a.12.12 0 010-.07c0-.02.02-.04.06-.08l57.7-57.69c.03-.04.05-.05.07-.06a.12.12 0 01.07 0c.03 0 .05.02.09.06L512 454.07l287.7-287.7c.04-.04.06-.05.09-.06a.12.12 0 01.07 0z"})})})})]})},r)}))}),(0,F.jsx)(h.A,{className:"pl-[13px]",layout:"vertical",onFinish:o()(a()().mark((function e(){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Z());case 1:case"end":return e.stop()}}),e)}))),onReset:O,submitter:{render:function(e,r){return[r[1],r[0],(0,F.jsx)(j.ZP,{onClick:o()(a()().mark((function e(){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p.current.handleOpen();case 1:case"end":return e.stop()}}),e)}))),children:M},"msigProposal"),(0,F.jsx)(j.ZP,{onClick:o()(a()().mark((function e(){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m.current.handleOpen();case 1:case"end":return e.stop()}}),e)}))),children:N},"msigPubkey"),(0,F.jsx)(j.ZP,{onClick:o()(a()().mark((function e(){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g.current.handleOpen();case 1:case"end":return e.stop()}}),e)}))),children:_},"msigTransaction")]}}}),(0,F.jsx)(W,{ref:p}),(0,F.jsx)(te,{ref:m}),(0,F.jsx)(he,{ref:g}),l]})},ve=(0,w.memo)(be),ke=function(){var e=(0,b.useSelector)((function(e){return e.contract.decodeData})),r=(0,b.useIntl)().formatMessage({id:"contract.intlDecodeResult"});return(0,F.jsxs)("div",{className:"tab-action",children:[(0,F.jsx)("div",{className:"hardline text-lg font-semibold mb-3 mt-3",children:r}),(0,F.jsx)("div",{className:"px-[13px]",children:(0,F.jsx)("pre",{children:e})})]})},je=(0,w.memo)(ke),ye=function(){var e=(0,b.useSelector)((function(e){return e.contract.encodeData})),r=(0,b.useIntl)().formatMessage({id:"contract.intlEncodeResult"});return(0,F.jsxs)("div",{className:"tab-action",children:[(0,F.jsx)("div",{className:"hardline text-lg font-semibold mb-3 mt-3",children:r}),(0,F.jsxs)("div",{className:"px-[13px]",children:[(0,F.jsx)("div",{className:"text-base font-semibold",children:"Action:"}),(0,F.jsx)("pre",{children:e.action}),(0,F.jsx)("div",{className:"text-base font-semibold",children:"Transaction:"}),(0,F.jsx)("pre",{children:e.transaction}),(0,F.jsx)("div",{className:"text-base font-semibold",children:"SigningData:"}),(0,F.jsx)("div",{className:" break-words mb-3",children:e.signingData}),(0,F.jsx)("div",{className:"text-base font-semibold",children:"SigningDigest:"}),(0,F.jsx)("pre",{children:e.signingDigest}),(0,F.jsx)("div",{className:"text-base font-semibold",children:"SignedTransaction:"}),(0,F.jsx)("pre",{children:e.signedTransaction}),(0,F.jsx)("div",{className:"text-base font-semibold",children:"PackedTransaction:"}),(0,F.jsx)("pre",{children:e.packedTransaction}),(0,F.jsx)("div",{className:"text-base font-semibold",children:"Transaction ID:"}),(0,F.jsx)("pre",{children:e.transactionId})]})]})},Se=(0,w.memo)(ye),Pe=w.forwardRef((function(e,r){var t=(0,b.useDispatch)(),n=k.ZP.useMessage(),s=c()(n,2),i=s[0],u=s[1],l=(0,b.useSelector)((function(e){return e.contract.abi})),m=(0,b.useSelector)((function(e){return e.contract.actionSelection})),p=(0,b.useIntl)(),f=p.formatMessage({id:"contract.intlDecode"}),g=p.formatMessage({id:"common.intlInputException"}),x=p.formatMessage({id:"contract.intlDecodeSuccess"}),h=(0,w.useRef)(),j=(0,w.useState)(!1),y=c()(j,2),S=y[0],P=y[1],N=(0,w.useCallback)((function(){P(!0)}),[]);(0,w.useImperativeHandle)(r,(function(){return{handleOpen:N}}));var M=(0,w.useCallback)(function(){var e=o()(a()().mark((function e(r){var n,s;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=v.ei.decode({data:r.input,abi:l,type:m}),s=JSON.stringify(n,null,2),t(d.N.setDecodeData(s)),t(d.N.setBatchActions([])),t(d.N.setEncodeData(void 0)),i.success("".concat(x)),e.abrupt("return",!0);case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0.message),i.error(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(r){return e.apply(this,arguments)}}(),[l,m]);return(0,F.jsxs)(C.Y,{formRef:h,title:f,open:S,onFinish:M,onOpenChange:function(e){P(e)},layout:"horizontal",width:"600px",children:[(0,F.jsx)(G.Z,{placeholder:"example: 000000000090b1ca10270000000000000444465300000000",name:"input",fieldProps:{autoSize:{minRows:5},allowClear:!0,autoFocus:!1,size:"large"},rules:[{required:!0,whitespace:!0,message:"".concat(g),pattern:/^[a-fA-F0-9]+$/}]}),u]})})),we=(0,w.memo)(Pe);I().extend(R());var Ce=w.forwardRef((function(e,r){var t=k.ZP.useMessage(),n=c()(t,2),s=n[0],i=n[1],u=(0,b.useSelector)((function(e){return e.contract.abi})),l=(0,b.useSelector)((function(e){return e.contract.actionSelection})),m=(0,b.useSelector)((function(e){return e.global.account})),d=(0,b.useSelector)((function(e){return e.global.session})),g=(0,b.useSelector)((function(e){return e.contract.fields})),h=(0,b.useSelector)((function(e){return e.contract.contract})),j=(0,w.useState)(!1),P=c()(j,2),_=P[0],Z=P[1],z=(0,w.useState)(),O=c()(z,2),q=O[0],T=O[1],A=(0,w.useState)(new Set),D=c()(A,2),R=D[0],J=D[1],H=(0,w.useRef)(),B=(0,w.useRef)(),W=(0,w.useState)(!1),L=c()(W,2),U=L[0],Q=L[1],K=(0,b.useIntl)(),G=K.formatMessage({id:"contract.intlCreateProposal"}),X=K.formatMessage({id:"common.intlInputException"}),ee=K.formatMessage({id:"account.intlPermissionNotExist"}),re=K.formatMessage({id:"contract.intlCreate"}),te=K.formatMessage({id:"contract.intlExpirationError"}),ne=K.formatMessage({id:"contract.intlExpiration"}),ae=K.formatMessage({id:"contract.intlPermission"}),se=K.formatMessage({id:"common.intlTxSuccess"}),oe=K.formatMessage({id:"common.intlTxFail"}),ie=K.formatMessage({id:"common.intlPleaseConnectWallet"}),ce=K.formatMessage({id:"common.intlPleaseConnectNetwork"}),ue=K.formatMessage({id:"contract.intlProposer"}),le=K.formatMessage({id:"contract.intlProposalName"}),me=K.formatMessage({id:"contract.intlMsigAccount"}),pe=K.formatMessage({id:"contract.intlRequested"}),de=K.formatMessage({id:"contract.intlMsigAccountWeightInsufficient"}),fe=K.formatMessage({id:"contract.intlProposalNamePlaceholder"}),ge=(0,w.useCallback)((function(e,r){T(e),J(r),Q(!0)}),[]);(0,w.useImperativeHandle)(r,(function(){return{handleOpen:ge}}));var xe=(0,w.useCallback)(function(){var e=o()(a()().mark((function e(r){var t,n,o,i,x,b,k,j,y,S,P,w,C,N,M,_,Z,z,O,F,T,E,A,D,Y,$,J,H,V,B,W,L,U;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d&&d.broadcast){e.next=5;break}return s.error("".concat(ie)),e.abrupt("return");case 5:if(m){e.next=8;break}return s.error("".concat(ce)),e.abrupt("return");case 8:return n=r.proposer,o=r.proposalName,i=r.msigAccount,x=r.msigPermission,b=[],r.requested.forEach((function(e){b.find((function(r){return r.actor===e.requestedAccount&&r.permission===e.requestedPermission}))||b.push({actor:e.requestedAccount,permission:e.requestedPermission})})),k=I()(r.expiration).utc().format("YYYY-MM-DDTHH:mm:ss"),e.next=17,(0,f.zI)(d.client.v1.chain.get_account(i));case 17:if(j=e.sent,y=c()(j,2),S=y[0],P=y[1],!S){e.next=26;break}return s.error(S),e.abrupt("return",!1);case 26:w=!1,C=0;case 28:if(!(C<P.permissions.length)){e.next=51;break}if(P.permissions[C].perm_name.toString()!==x){e.next=48;break}N=P.permissions[C].required_auth.keyThreshold,M=P.permissions[C].required_auth.accounts,_=0,Z=0;case 34:if(!(Z<b.length)){e.next=43;break}for(z=!1,O=0;O<M.length;O++)b[Z].actor===M[O].permission.actor.toString()&&b[Z].permission===M[O].permission.permission.toString()&&(z=!0,_+=M[O].weight.toNumber());if(z){e.next=40;break}return s.error("".concat(ee)),e.abrupt("return",!1);case 40:Z++,e.next=34;break;case 43:if(!(_<N)){e.next=46;break}return s.error("".concat(de)),e.abrupt("return",!1);case 46:return w=!0,e.abrupt("break",51);case 48:C++,e.next=28;break;case 51:if(w){e.next=54;break}return s.error("".concat(ee)),e.abrupt("return",!1);case 54:return F=null===(t=q.current)||void 0===t?void 0:t.getFieldsValue(),T=/.+\?$/,E=/.+\$$/,A=Object.assign({},F),Object.keys(A).forEach((function(e){R.has(e)&&(A[e]=JSON.parse(A[e]))})),Object.keys(A).forEach((function(e){var r=g.find((function(r){return r.name===e}));r&&T.test(r.type)?void 0!==A[e]&&String(A[e]).trim()||(A[e]=null):r&&E.test(r.type)&&(A[e]="")})),D={account:h,name:l,authorization:[{actor:i,permission:x}],data:A},Y=v.aU.from(D,u),e.next=64,d.client.v1.chain.get_info();case 64:return $=e.sent,J=$.getTransactionHeader(),H=v.YW.from(p()(p()({},J),{},{expiration:k,actions:[Y]})),V={action:{account:"eosio.msig",name:"propose",authorization:[d.permissionLevel],data:{proposer:n,proposal_name:o,requested:b,trx:H.toJSON()}}},e.next=70,(0,f.zI)(d.transact(V));case 70:return B=e.sent,W=c()(B,2),L=W[0],U=W[1],L?s.error(L):U&&U.response?s.success("".concat(se)):s.error("".concat(oe)),e.abrupt("return",!0);case 76:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),[d,q,R,g,h,m]),he=(0,w.useCallback)(o()(a()().mark((function e(){var r,t,n,o,i,u,l,m,p,g,x;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Z(!0),t=null===(r=B.current)||void 0===r?void 0:r.getFieldsValue(),n=t.msigAccount,o=t.msigPermission,i={},e.next=7,(0,f.zI)(d.client.v1.chain.get_account(n));case 7:if(u=e.sent,l=c()(u,2),m=l[0],p=l[1],!m){e.next=17;break}return s.error(m),Z(!1),e.abrupt("return",!1);case 17:g=!1,x=0;case 19:if(!(x<p.permissions.length)){e.next=27;break}if(p.permissions[x].perm_name.toString()!==o){e.next=24;break}return i=p.permissions[x].required_auth,g=!0,e.abrupt("break",27);case 24:x++,e.next=19;break;case 27:if(g){e.next=31;break}return s.error("".concat(ee)),Z(!1),e.abrupt("return",!1);case 31:Z(!1),H.current.handleOpen(i,B);case 33:case"end":return e.stop()}}),e)}))),[d]);return(0,F.jsxs)(C.Y,{formRef:B,title:G,open:U,onFinish:xe,onOpenChange:function(e){Q(e)},initialValues:{proposer:m?m.accountName.toString():""},submitter:{searchConfig:{submitText:re},render:function(e,r){return[r[0],r[1]]}},layout:"vertical",width:"500px",modalProps:{style:{top:25}},children:[(0,F.jsx)(x.Z,{disabled:!0,name:"proposer",label:ue,placeholder:"example: dfsdeveloper",fieldProps:{autoFocus:!1,size:"large"},rules:[{required:!0,whitespace:!0,message:"".concat(X),pattern:/^[a-z1-5.]{1,12}$/}]}),(0,F.jsx)(x.Z,{name:"proposalName",label:le,placeholder:fe,fieldProps:{autoFocus:!1,size:"large"},rules:[{required:!0,whitespace:!0,message:"".concat(X),pattern:/^[a-z1-5.]{1,12}$/}]}),(0,F.jsxs)(y.Z,{gutter:10,children:[(0,F.jsx)(S.Z,{lg:{span:"16"},md:{span:"16"},sm:{span:"16"},xs:{span:"16"},children:(0,F.jsx)(x.Z,{name:"msigAccount",label:me,placeholder:"ex: dfsdeveloper",fieldProps:{autoFocus:!1,size:"large"},rules:[{required:!0,whitespace:!0,message:"".concat(X),pattern:/^[a-z1-5.]{1,12}$/}]})}),(0,F.jsx)(S.Z,{lg:{span:"8"},md:{span:"8"},sm:{span:"8"},xs:{span:"8"},children:(0,F.jsx)(x.Z,{name:"msigPermission",label:(0,F.jsxs)("div",{className:"flex items-center",children:[ae,_?(0,F.jsx)(Y.Z,{spin:_,className:"ml-3 text-blue-600"}):(0,F.jsx)($.Z,{className:"ml-3 text-blue-600 hover:cursor-pointer",onClick:he})]}),placeholder:"ex: active",fieldProps:{autoFocus:!1,size:"large"},rules:[{required:!0,whitespace:!0,message:"".concat(X),pattern:/^[a-z1-5.]{1,12}$/}]})})]}),(0,F.jsx)(N.Z,{bordered:!0,bodyStyle:{paddingInline:"12px",paddingBlock:"6px"},className:"mb-3 requestedAccount",children:(0,F.jsx)(M.u,{name:"requested",min:1,creatorButtonProps:!1,itemContainerRender:function(e){return(0,F.jsx)("div",{children:e})},initialValue:[{requestedAccount:"",permission:""}],children:(0,F.jsxs)(y.Z,{gutter:10,children:[(0,F.jsx)(S.Z,{lg:{span:"16"},md:{span:"16"},sm:{span:"16"},xs:{span:"16"},children:(0,F.jsx)(x.Z,{name:"requestedAccount",label:pe,placeholder:"ex: dfsdeveloper",fieldProps:{autoFocus:!1,size:"large"},rules:[{required:!0,whitespace:!0,message:"".concat(X),pattern:/^[a-z1-5.]{1,12}$/}]})}),(0,F.jsx)(S.Z,{lg:{span:"8"},md:{span:"8"},sm:{span:"8"},xs:{span:"8"},children:(0,F.jsx)(x.Z,{name:"requestedPermission",label:ae,placeholder:"ex: active",fieldProps:{autoFocus:!1,size:"large"},rules:[{required:!0,whitespace:!0,message:"".concat(X),pattern:/^[a-z1-5.]{1,12}$/}]})})]})})}),(0,F.jsx)(E,{width:"lg",name:"expiration",label:ne,rules:[{required:!0,validator:function(e,r){try{return r?r.unix()<I()().unix()?Promise.reject(te):Promise.resolve(""):Promise.reject(X)}catch(e){return Promise.reject(e.message)}}}]}),(0,F.jsx)(V,{ref:H}),i]})})),Ne=(0,w.memo)(Ce);I().extend(R());var Me=w.forwardRef((function(e,r){var t=k.ZP.useMessage(),n=c()(t,2),s=n[0],i=n[1],u=(0,b.useSelector)((function(e){return e.contract.abi})),m=(0,b.useSelector)((function(e){return e.contract.actionSelection})),d=(0,b.useSelector)((function(e){return e.global.account})),h=(0,b.useSelector)((function(e){return e.global.session})),y=(0,b.useSelector)((function(e){return e.contract.fields})),S=(0,b.useSelector)((function(e){return e.contract.contract})),P=(0,b.useSelector)((function(e){return e.global.privateKey})),N=(0,w.useState)(),M=c()(N,2),_=M[0],Z=M[1],z=(0,w.useState)(new Set),O=c()(z,2),q=O[0],T=O[1],E=(0,w.useRef)(),A=(0,b.useIntl)(),D=A.formatMessage({id:"contract.intlCreateTransaction"}),R=A.formatMessage({id:"common.intlInputException"}),Y=A.formatMessage({id:"account.intlPermissionNotExist"}),$=A.formatMessage({id:"contract.intlCreate"}),J=A.formatMessage({id:"contract.intlCreateAndSign"}),H=A.formatMessage({id:"contract.intlExpiration"}),V=A.formatMessage({id:"contract.intlFreeCpu"}),B=A.formatMessage({id:"contract.intlAccount"}),W=A.formatMessage({id:"contract.intlPermission"}),L=A.formatMessage({id:"contract.intlFreeCpuLimit"}),U=A.formatMessage({id:"common.intlPleaseConnectWallet"}),Q=A.formatMessage({id:"common.intlPleaseConnectNetwork"}),G=(0,w.useRef)(),X=(0,w.useState)(!1),re=c()(X,2),te=re[0],ne=re[1],ae=(0,w.useCallback)((function(e,r){Z(e),T(r),ne(!0)}),[]);(0,w.useImperativeHandle)(r,(function(){return{handleOpen:ae}}));var se=(0,w.useCallback)(function(){var e=o()(a()().mark((function e(r){var t,n,o,i,g,x,b,k,j,w,C,N,M,Z,z,O,F,T,A,D,R,$,J,H,V,B,W,K,G;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h&&h.broadcast){e.next=5;break}return s.error("".concat(U)),e.abrupt("return");case 5:if(d){e.next=8;break}return s.error("".concat(Q)),e.abrupt("return");case 8:return n=r.account,o=r.permission,i=I()().add(r.expiration,"minutes").utc().format("YYYY-MM-DDTHH:mm:ss"),g=r.freeCpu,x=1,e.next=15,(0,f.zI)(h.client.v1.chain.get_account(n));case 15:if(b=e.sent,k=c()(b,2),j=k[0],w=k[1],!j){e.next=24;break}return s.error(j),e.abrupt("return",!1);case 24:C=!1,N=0;case 26:if(!(N<w.permissions.length)){e.next=34;break}if(w.permissions[N].perm_name.toString()!==o){e.next=31;break}return x=w.permissions[N].required_auth.keyThreshold,C=!0,e.abrupt("break",34);case 31:N++,e.next=26;break;case 34:if(C){e.next=37;break}return s.error("".concat(Y)),e.abrupt("return",!1);case 37:if(M=null===(t=_.current)||void 0===t?void 0:t.getFieldsValue(),Z=/.+\?$/,z=/.+\$$/,O=Object.assign({},M),Object.keys(O).forEach((function(e){q.has(e)&&(O[e]=JSON.parse(O[e]))})),Object.keys(O).forEach((function(e){var r=y.find((function(r){return r.name===e}));r&&Z.test(r.type)?void 0!==O[e]&&String(O[e]).trim()||(O[e]=null):r&&z.test(r.type)&&(O[e]="")})),!g||"active"===o||"owner"===o){e.next=46;break}return s.error("".concat(L)),e.abrupt("return",!1);case 46:return F={account:S,name:m,authorization:[{actor:n,permission:o}],data:O},T=v.aU.from(F,u),A={account:"dfsfreecpu11",name:"freecpu",authorization:[{actor:"dfs.service",permission:"cpu"},{actor:n,permission:o}],data:f._9.from({user:n})},D=v.aU.from(A),J=[],e.next=53,h.client.v1.chain.get_info();case 53:return H=e.sent,V=H.getTransactionHeader(),g?(R=v.YW.from(p()(p()({},V),{},{expiration:i,actions:[D,T]})),J[0]=P.signDigest(R.signingDigest(h.chain.id.toString()))):R=v.YW.from(p()(p()({},V),{},{expiration:i,actions:[T]})),e.next=58,(0,f.zI)(h.transact({transaction:R},{broadcast:!1,transactPlugins:[]}));case 58:if(B=e.sent,W=c()(B,2),K=W[0],G=W[1],!K){e.next=65;break}return s.error(K),e.abrupt("return",!1);case 65:$=v.uQ.from(p()(p()({},R),{},{signatures:[].concat(J,l()(G.signatures))})),E.current.handleOpen($,i,n,o,x);case 67:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),[h,_,q,y,S,P,d]),oe=(0,w.useCallback)(o()(a()().mark((function e(){var r,t,n,o,i,l,d,g,x,b,k,j,w,C,N,M,Z,z,O,F,T,A,D,R,$,J,H,V;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(r=G.current)||void 0===r||r.validateFields(),o=null===(t=G.current)||void 0===t?void 0:t.getFieldsValue(),i=o.account,l=o.permission,d=I()().add(o.expiration,"minutes").utc().format("YYYY-MM-DDTHH:mm:ss"),g=o.freeCpu,x=1,e.next=9,(0,f.zI)(h.client.v1.chain.get_account(i));case 9:if(b=e.sent,k=c()(b,2),j=k[0],w=k[1],!j){e.next=18;break}return s.error(j),e.abrupt("return",!1);case 18:C=!1,N=0;case 20:if(!(N<w.permissions.length)){e.next=28;break}if(w.permissions[N].perm_name.toString()!==l){e.next=25;break}return x=w.permissions[N].required_auth.keyThreshold,C=!0,e.abrupt("break",28);case 25:N++,e.next=20;break;case 28:if(C){e.next=31;break}return s.error("".concat(Y)),e.abrupt("return",!1);case 31:if(M=null===(n=_.current)||void 0===n?void 0:n.getFieldsValue(),Z=/.+\?$/,z=/.+\$$/,O=Object.assign({},M),Object.keys(O).forEach((function(e){q.has(e)&&(O[e]=JSON.parse(O[e]))})),Object.keys(O).forEach((function(e){var r=y.find((function(r){return r.name===e}));r&&Z.test(r.type)?void 0!==O[e]&&String(O[e]).trim()||(O[e]=null):r&&z.test(r.type)&&(O[e]="")})),!g||"active"===l||"owner"===l){e.next=40;break}return s.error("".concat(L)),e.abrupt("return",!1);case 40:return F={account:S,name:m,authorization:[{actor:i,permission:l}],data:O},T=v.aU.from(F,u),A={account:"dfsfreecpu11",name:"freecpu",authorization:[{actor:"dfs.service",permission:"cpu"},{actor:i,permission:l}],data:f._9.from({user:i})},D=v.aU.from(A),e.next=46,h.client.v1.chain.get_info();case 46:J=e.sent,H=J.getTransactionHeader(),g?(R=v.YW.from(p()(p()({},H),{},{expiration:d,actions:[D,T]})),V=P.signDigest(R.signingDigest(h.chain.id.toString())),$=v.uQ.from(p()(p()({},R),{},{signatures:[V]}))):(R=v.YW.from(p()(p()({},H),{},{expiration:d,actions:[T]})),$=v.uQ.from(p()(p()({},R),{},{signatures:[]}))),E.current.handleOpen($,d,i,l,x);case 50:case"end":return e.stop()}}),e)}))),[h,_,q,y,S,P]);return(0,F.jsxs)(C.Y,{formRef:G,title:D,open:te,onFinish:se,onOpenChange:function(e){ne(e)},initialValues:{freeCpu:!0,expiration:60},submitter:{searchConfig:{submitText:J},render:function(e,r){return[r[0],(0,F.jsx)(j.ZP,{onClick:oe,children:$},"import"),r[1]]}},layout:"vertical",width:"400px",children:[(0,F.jsx)(x.Z,{name:"account",label:B,placeholder:"example: dfsdeveloper",fieldProps:{autoFocus:!1,size:"large"},rules:[{required:!0,whitespace:!0,message:"".concat(R),pattern:/^[a-z1-5.]{1,12}$/}]}),(0,F.jsx)(x.Z,{name:"permission",label:W,placeholder:"example: active",fieldProps:{autoFocus:!1,size:"large"},rules:[{required:!0,whitespace:!0,message:"".concat(R),pattern:/^[a-z1-5.]{1,12}$/}]}),(0,F.jsx)(K,{name:"expiration",label:H,marks:{10:"10",30:"30",60:"60"},min:10,max:60,fieldProps:{autoFocus:!1},rules:[{required:!0,whitespace:!0,message:"".concat(R),pattern:/^\d+$/}]}),(0,F.jsx)(g.Z,{name:"freeCpu",label:V}),(0,F.jsx)(ee,{ref:E}),i]})})),_e=(0,w.memo)(Me);I().extend(R());var Ze=w.forwardRef((function(e,r){var t=k.ZP.useMessage(),n=c()(t,2),s=n[0],i=n[1],u=(0,b.useSelector)((function(e){return e.contract.abi})),m=(0,b.useSelector)((function(e){return e.contract.actionSelection})),d=(0,b.useSelector)((function(e){return e.global.account})),h=(0,b.useSelector)((function(e){return e.global.session})),P=(0,b.useSelector)((function(e){return e.contract.fields})),_=(0,b.useSelector)((function(e){return e.contract.contract})),Z=(0,b.useSelector)((function(e){return e.global.privateKey})),z=(0,w.useState)(),O=c()(z,2),q=O[0],T=O[1],E=(0,w.useState)(new Set),A=c()(E,2),D=A[0],R=A[1],Y=(0,w.useRef)(),$=(0,w.useRef)(),J=(0,w.useState)(!1),H=c()(J,2),V=H[0],B=H[1],W=(0,b.useIntl)(),L=W.formatMessage({id:"contract.intlCreateTransaction"}),U=W.formatMessage({id:"common.intlInputException"}),Q=W.formatMessage({id:"account.intlPermissionNotExist"}),G=W.formatMessage({id:"contract.intlCreate"}),X=W.formatMessage({id:"contract.intlExpiration"}),ee=W.formatMessage({id:"contract.intlPermission"}),re=W.formatMessage({id:"common.intlPleaseConnectWallet"}),te=W.formatMessage({id:"common.intlPleaseConnectNetwork"}),ne=W.formatMessage({id:"contract.intlCreateAndSign"}),ae=W.formatMessage({id:"contract.intlFreeCpu"}),se=W.formatMessage({id:"contract.intlFreeCpuLimit"}),oe=W.formatMessage({id:"contract.intlRequested"}),ie=(0,w.useCallback)((function(e,r){T(e),R(r),B(!0)}),[]);(0,w.useImperativeHandle)(r,(function(){return{handleOpen:ie}}));var ce=(0,w.useCallback)(function(){var e=o()(a()().mark((function e(r){var t,n,o,i,g,x,b,k,j,y,S,w,C,N,M,z,O,F,T,E,A,R,$,J,H,V,B,W;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h&&h.broadcast){e.next=5;break}return s.error("".concat(re)),e.abrupt("return");case 5:if(d){e.next=8;break}return s.error("".concat(te)),e.abrupt("return");case 8:n=r.freeCpu,o=I()().add(r.expiration,"minutes").utc().format("YYYY-MM-DDTHH:mm:ss"),i=[],r.requested.forEach((function(e){i.find((function(r){return r.actor===e.requestedAccount&&r.permission===e.requestedPermission}))||i.push({actor:e.requestedAccount,permission:e.requestedPermission})})),g=0;case 13:if(!(g<i.length)){e.next=40;break}return e.next=16,(0,f.zI)(h.client.v1.chain.get_account(i[g].actor));case 16:if(x=e.sent,b=c()(x,2),k=b[0],j=b[1],!k){e.next=25;break}return s.error(k),e.abrupt("return",!1);case 25:y=!1,S=0;case 27:if(!(S<j.permissions.length)){e.next=34;break}if(j.permissions[S].perm_name.toString()!==i[g].permission){e.next=31;break}return y=!0,e.abrupt("break",34);case 31:S++,e.next=27;break;case 34:if(y){e.next=37;break}return s.error("".concat(Q)),e.abrupt("return",!1);case 37:g++,e.next=13;break;case 40:if(w=null===(t=q.current)||void 0===t?void 0:t.getFieldsValue(),C=/.+\?$/,N=/.+\$$/,M=Object.assign({},w),Object.keys(M).forEach((function(e){D.has(e)&&(M[e]=JSON.parse(M[e]))})),Object.keys(M).forEach((function(e){var r=P.find((function(r){return r.name===e}));r&&C.test(r.type)?void 0!==M[e]&&String(M[e]).trim()||(M[e]=null):r&&N.test(r.type)&&(M[e]="")})),!n){e.next=50;break}if("active"===i[0].permission||"owner"===i[0].permission){e.next=50;break}return s.error("".concat(se)),e.abrupt("return",!1);case 50:return z={account:_,name:m,authorization:i,data:M},O=v.aU.from(z,u),F={account:"dfsfreecpu11",name:"freecpu",authorization:[{actor:"dfs.service",permission:"cpu"},i[0]],data:f._9.from({user:i[0].actor})},T=v.aU.from(F),R=[],e.next=57,h.client.v1.chain.get_info();case 57:return $=e.sent,J=$.getTransactionHeader(),n?(E=v.YW.from(p()(p()({},J),{},{expiration:o,actions:[T,O]})),R[0]=Z.signDigest(E.signingDigest(h.chain.id.toString()))):E=v.YW.from(p()(p()({},J),{},{expiration:o,actions:[O]})),e.next=62,(0,f.zI)(h.transact({transaction:E},{broadcast:!1,transactPlugins:[]}));case 62:if(H=e.sent,V=c()(H,2),B=V[0],W=V[1],!B){e.next=69;break}return s.error(B),e.abrupt("return",!1);case 69:A=v.uQ.from(p()(p()({},E),{},{signatures:[].concat(R,l()(W.signatures))})),Y.current.handleOpen(A,o,i);case 71:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),[h,q,D,P,_,d]),ue=(0,w.useCallback)(o()(a()().mark((function e(){var r,t,n,o,i,l,d,g,x,b,k,j,y,S,w,C,N,M,z,O,F,T,E,A,R,J,H;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null===(r=$.current)||void 0===r||r.validateFields(),o=null===(t=$.current)||void 0===t?void 0:t.getFieldsValue(),i=o.freeCpu,l=I()().add(o.expiration,"minutes").utc().format("YYYY-MM-DDTHH:mm:ss"),d=[],o.requested.forEach((function(e){d.find((function(r){return r.actor===e.requestedAccount&&r.permission===e.requestedPermission}))||d.push({actor:e.requestedAccount,permission:e.requestedPermission})})),g=0;case 7:if(!(g<d.length)){e.next=34;break}return e.next=10,(0,f.zI)(h.client.v1.chain.get_account(d[g].actor));case 10:if(x=e.sent,b=c()(x,2),k=b[0],j=b[1],!k){e.next=19;break}return s.error(k),e.abrupt("return",!1);case 19:y=!1,S=0;case 21:if(!(S<j.permissions.length)){e.next=28;break}if(j.permissions[S].perm_name.toString()!==d[g].permission){e.next=25;break}return y=!0,e.abrupt("break",28);case 25:S++,e.next=21;break;case 28:if(y){e.next=31;break}return s.error("".concat(Q)),e.abrupt("return",!1);case 31:g++,e.next=7;break;case 34:if(w=null===(n=q.current)||void 0===n?void 0:n.getFieldsValue(),C=/.+\?$/,N=/.+\$$/,M=Object.assign({},w),Object.keys(M).forEach((function(e){D.has(e)&&(M[e]=JSON.parse(M[e]))})),Object.keys(M).forEach((function(e){var r=P.find((function(r){return r.name===e}));r&&C.test(r.type)?void 0!==M[e]&&String(M[e]).trim()||(M[e]=null):r&&N.test(r.type)&&(M[e]="")})),!i){e.next=44;break}if("active"===d[0].permission||"owner"===d[0].permission){e.next=44;break}return s.error("".concat(se)),e.abrupt("return",!1);case 44:return z={account:_,name:m,authorization:d,data:M},O=v.aU.from(z,u),F={account:"dfsfreecpu11",name:"freecpu",authorization:[{actor:"dfs.service",permission:"cpu"},d[0]],data:f._9.from({user:d[0].actor})},T=v.aU.from(F),e.next=50,h.client.v1.chain.get_info();case 50:R=e.sent,J=R.getTransactionHeader(),i?(E=v.YW.from(p()(p()({},J),{},{expiration:l,actions:[T,O]})),H=Z.signDigest(E.signingDigest(h.chain.id.toString())),A=v.uQ.from(p()(p()({},E),{},{signatures:[H]}))):(E=v.YW.from(p()(p()({},J),{},{expiration:l,actions:[O]})),A=v.uQ.from(p()(p()({},E),{},{signatures:[]}))),Y.current.handleOpen(A,l,d);case 54:case"end":return e.stop()}}),e)}))),[h,q,D,P,_,Z]);return(0,F.jsxs)(C.Y,{formRef:$,title:L,open:V,onFinish:ce,onOpenChange:function(e){B(e)},initialValues:{freeCpu:!0,expiration:60},submitter:{searchConfig:{submitText:ne},render:function(e,r){return[r[0],(0,F.jsx)(j.ZP,{onClick:ue,children:G},"import"),r[1]]}},layout:"vertical",width:"500px",modalProps:{style:{top:25}},children:[(0,F.jsx)(N.Z,{bordered:!0,bodyStyle:{paddingInline:"12px",paddingBlock:"6px"},className:"mb-3 requestedAccount",children:(0,F.jsx)(M.u,{name:"requested",min:1,creatorButtonProps:!1,itemContainerRender:function(e){return(0,F.jsx)("div",{children:e})},initialValue:[{requestedAccount:"",permission:""}],children:(0,F.jsxs)(y.Z,{gutter:10,children:[(0,F.jsx)(S.Z,{lg:{span:"16"},md:{span:"16"},sm:{span:"16"},xs:{span:"16"},children:(0,F.jsx)(x.Z,{name:"requestedAccount",label:oe,placeholder:"ex: dfsdeveloper",fieldProps:{autoFocus:!1,size:"large"},rules:[{required:!0,whitespace:!0,message:"".concat(U),pattern:/^[a-z1-5.]{1,12}$/}]})}),(0,F.jsx)(S.Z,{lg:{span:"8"},md:{span:"8"},sm:{span:"8"},xs:{span:"8"},children:(0,F.jsx)(x.Z,{name:"requestedPermission",label:ee,placeholder:"ex: active",fieldProps:{autoFocus:!1,size:"large"},rules:[{required:!0,whitespace:!0,message:"".concat(U),pattern:/^[a-z1-5.]{1,12}$/}]})})]})})}),(0,F.jsx)(K,{name:"expiration",label:X,marks:{10:"10",30:"30",60:"60"},min:10,max:60,fieldProps:{autoFocus:!1},rules:[{required:!0,whitespace:!0,message:"".concat(U),pattern:/^\d+$/}]}),(0,F.jsx)(g.Z,{name:"freeCpu",label:ae}),(0,F.jsx)(fe,{ref:Y}),i]})})),ze=(0,w.memo)(Ze),Oe=function(){var e,r=(0,w.useRef)(),t=(0,w.useRef)(),n=(0,w.useRef)(),s=(0,w.useRef)(),i=(0,w.useRef)(),u=(0,b.useDispatch)(),m=(0,w.useState)(new Set),C=c()(m,1)[0],N=(0,b.useSelector)((function(e){return e.contract.abi})),M=(0,b.useSelector)((function(e){return e.contract.actionSelection})),_=(0,b.useSelector)((function(e){return e.contract.actionType})),Z=(0,b.useSelector)((function(e){return e.global.session})),z=(0,b.useSelector)((function(e){return e.global.account})),O=(0,b.useSelector)((function(e){return e.contract.contract})),q=(0,b.useSelector)((function(e){return e.contract.batchActions})),T=(0,b.useSelector)((function(e){return e.contract.encodeData})),E=(0,b.useSelector)((function(e){return e.contract.decodeData})),A=(0,b.useSelector)((function(e){return e.contract.fields})),I=k.ZP.useMessage(),D=c()(I,2),R=D[0],Y=D[1],$=(0,b.useIntl)(),J=$.formatMessage({id:"common.intlCopySuccess"}),H=$.formatMessage({id:"contract.intlSelectAction"}),V=$.formatMessage({id:"contract.intlEnterData"}),B=$.formatMessage({id:"common.intlCopy"}),W=$.formatMessage({id:"common.intlTxSuccess"}),L=$.formatMessage({id:"common.intlTxFail"}),U=$.formatMessage({id:"common.intlPleaseConnectWallet"}),Q=$.formatMessage({id:"common.intlPleaseConnectNetwork"}),K=$.formatMessage({id:"contract.intlAdd"}),G=$.formatMessage({id:"contract.intlEncode"}),X=$.formatMessage({id:"contract.intlDecode"}),ee=$.formatMessage({id:"contract.intlEncodeSuccess"}),re=$.formatMessage({id:"contract.intlMsigPubkey"}),te=$.formatMessage({id:"contract.intlMsigProposal"}),ne=$.formatMessage({id:"contract.intlMsigTransaction"}),ae=(0,w.useCallback)((function(e,r){var t=/(\$|\?)$/g,n=/^[a-z1-5.]{1,12}$/,a=/^\d+$/,s=/^-?\d+$/,o=/^(-?\d+)(.\d+)?$/,i=/^([0-9a-fA-F][0-9a-fA-F])+$/,c=/^\d+,[A-Z]+$/;if(t.test(e.message)&&!r)return Promise.resolve();switch(e.message.replace(t,"")){case"string":return Promise.resolve("");case"name":try{return n.test(r)?Promise.resolve(v.VG.from(r)):Promise.reject(e.message=String(n))}catch(r){return Promise.reject(e.message=r.message)}case"asset":try{return Promise.resolve(v.xR.from(r))}catch(r){return Promise.reject(e.message=r.message)}case"checksum160":try{return Promise.resolve(v.b9.from(r))}catch(r){return Promise.reject(e.message=r.message)}case"checksum256":try{return Promise.resolve(v.Nz.from(r))}catch(r){return Promise.reject(e.message=r.message)}case"checksum512":try{return Promise.resolve(v.W4.from(r))}catch(r){return Promise.reject(e.message=r.message)}case"uint8":try{return a.test(r)?Promise.resolve(v._A.from(r)):Promise.reject(e.message=String(a))}catch(r){return Promise.reject(e.message=r.message)}case"uint16":try{return a.test(r)?Promise.resolve(v.j8.from(r)):Promise.reject(e.message=String(a))}catch(r){return Promise.reject(e.message=r.message)}case"uint32":try{return a.test(r)?Promise.resolve(v.xH.from(r)):Promise.reject(e.message=String(a))}catch(r){return Promise.reject(e.message=r.message)}case"uint64":try{return a.test(r)?Promise.resolve(v.zM.from(r)):Promise.reject(e.message=String(a))}catch(r){return Promise.reject(e.message=r.message)}case"uint128":try{return a.test(r)?Promise.resolve(v.pB.from(r)):Promise.reject(e.message=String(a))}catch(r){return Promise.reject(e.message=r.message)}case"varuint":try{return a.test(r)?Promise.resolve(v.mj.from(r)):Promise.reject(e.message=String(a))}catch(r){return Promise.reject(e.message=r.message)}case"varuint16":try{return a.test(r)?Promise.resolve(v.mj.from(r)):Promise.reject(e.message=String(a))}catch(r){return Promise.reject(e.message=r.message)}case"varuint32":try{return a.test(r)?Promise.resolve(v.mj.from(r)):Promise.reject(e.message=String(a))}catch(r){return Promise.reject(e.message=r.message)}case"varuint64":try{return a.test(r)?Promise.resolve(v.mj.from(r)):Promise.reject(e.message=String(a))}catch(r){return Promise.reject(e.message=r.message)}case"varuint128":try{return a.test(r)?Promise.resolve(v.mj.from(r)):Promise.reject(e.message=String(a))}catch(r){return Promise.reject(e.message=r.message)}case"int8":try{return s.test(r)?Promise.resolve(v.tJ.from(r)):Promise.reject(e.message=String(a))}catch(r){return Promise.reject(e.message=r.message)}case"int16":try{return s.test(r)?Promise.resolve(v.k6.from(r)):Promise.reject(e.message=String(a))}catch(r){return Promise.reject(e.message=r.message)}case"int32":try{return s.test(r)?Promise.resolve(v.Vq.from(r)):Promise.reject(e.message=String(a))}catch(r){return Promise.reject(e.message=r.message)}case"int64":try{return s.test(r)?Promise.resolve(v.ni.from(r)):Promise.reject(e.message=String(a))}catch(r){return Promise.reject(e.message=r.message)}case"int128":try{return s.test(r)?Promise.resolve(v.Gm.from(r)):Promise.reject(e.message=String(a))}catch(r){return Promise.reject(e.message=r.message)}case"varint":try{return s.test(r)?Promise.resolve(v.yN.from(r)):Promise.reject(e.message=String(a))}catch(r){return Promise.reject(e.message=r.message)}case"varint16":try{return s.test(r)?Promise.resolve(v.yN.from(r)):Promise.reject(e.message=String(a))}catch(r){return Promise.reject(e.message=r.message)}case"varint32":try{return s.test(r)?Promise.resolve(v.yN.from(r)):Promise.reject(e.message=String(a))}catch(r){return Promise.reject(e.message=r.message)}case"varint64":try{return s.test(r)?Promise.resolve(v.yN.from(r)):Promise.reject(e.message=String(a))}catch(r){return Promise.reject(e.message=r.message)}case"varint128":try{return s.test(r)?Promise.resolve(v.yN.from(r)):Promise.reject(e.message=String(a))}catch(r){return Promise.reject(e.message=r.message)}case"float32":try{return o.test(r)?Promise.resolve(v.yA.from(r)):Promise.reject(e.message=String(o))}catch(r){return Promise.reject(e.message=r.message)}case"float64":try{return o.test(r)?Promise.resolve(v.Dh.from(r)):Promise.reject(e.message=String(o))}catch(r){return Promise.reject(e.message=r.message)}case"bytes":try{return i.test(r)?Promise.resolve(v.Jj.from(r)):Promise.reject(e.message=String(i))}catch(r){return Promise.reject(e.message=r.message)}case"block_timestamp_type":try{return a.test(r)?Promise.resolve(v.wm.from(Number(r))):Promise.reject(e.message=String(a))}catch(r){return Promise.reject(e.message=r.message)}case"time_point":try{return a.test(r)?Promise.resolve(v.hI.from(Number(r))):Promise.reject(e.message=String(a))}catch(r){return Promise.reject(e.message=r.message)}case"time_point_sec":try{return a.test(r)?Promise.resolve(v.AQ.from(Number(r))):Promise.reject(e.message=String(a))}catch(r){return Promise.reject(e.message=r.message)}case"public_key":try{return Promise.resolve(v.nh.from(r))}catch(r){return Promise.reject(e.message=r.message)}case"symbol":try{return c.test(r)?Promise.resolve(v.xR.Symbol.from(r)):Promise.reject(e.message=String(c))}catch(r){return Promise.reject(e.message=r.message)}default:try{return JSON.parse(r),C.add(e.field),Promise.resolve()}catch(r){return Promise.reject(e.message=r.message)}}}),[M,C]),se=(0,w.useCallback)((function(e){switch(e.replace(/(\$|\?)$/g,"")){case"name":return"Enter account name...";case"asset":return"example: 1.00000000 DFS";case"uint8":case"uint16":case"uint32":case"uint64":case"uint128":case"varuint":case"varuint16":case"varuint32":case"varuint64":case"varuint128":case"int8":case"int16":case"int32":case"int64":case"int128":case"varint":case"varint16":case"varint32":case"varint64":case"varint128":case"float32":case"float64":return"Enter number...";case"string":return"Enter string...";case"permission_level":return'example: {"actor": "foo", "permission": "active"}';case"bytes":return"example: 1234abcdff";case"checksum256":return"example: 73e4385a2708e6d7048834fbc1079f2fabb17b3c125b146af438971e90716c4d";case"authority":return'example: {"threshold": 1, "keys": [{"key": "EOS6RrvujLQN1x5Tacbep1KAk8zzKpSThAQXBCKYFfGUYeABhJRin", "weight": 1}], "accounts": [], "waits": []}';case"symbol":return"example: 8,DFS";case"name[]":return'example: ["david", "mary"]';case"asset[]":return'example: ["1.00000000 DFS", "2.00000000 USDT"]';case"uint8[]":case"uint16[]":case"uint32[]":case"uint64[]":case"uint128[]":case"varuint[]":case"varuint16[]":case"varuint32[]":case"varuint64[]":case"varuint128[]":return"example: [12, 34]";case"int8[]":case"int16[]":case"int32[]":case"int64[]":case"int128[]":case"varint[]":case"varint16[]":case"varint32[]":case"varint64[]":case"varint128[]":return"example: [12, -34]";case"float32[]":case"float64[]":return"example: [12.12, -34.34]";case"string[]":return'example: ["abc", "def"]';case"permission_level[]":return'example: [{"actor": "foo", "permission": "active"}, {"actor": "foo", "permission": "active"}]';case"bytes[]":return'example: ["123abc", "456def"]';case"checksum256[]":return'example: ["73e4385a2708e6d7048834fbc1079f2fabb17b3c125b146af438971e90716c4d", "73e4385a2708e6d7048834fbc1079f2fabb17b3c125b146af438971e90716c4d"]';case"symbol[]":return'example: ["8,DFS", "8,USDT"]';default:return"Enter ".concat(e,"...")}}),[]),oe=(0,w.useCallback)((function(){var e=/.+(\$|\?)$/;return A.map((function(r,t){return"bool"===r.type?(0,F.jsx)(g.Z,{name:r.name,label:(0,F.jsx)("span",{className:"font-semibold",children:r.name})},t):(0,F.jsx)(x.Z,{placeholder:se(r.type),name:r.name,label:(0,F.jsx)("span",{className:"font-semibold",children:r.name}),rules:[{required:!e.test(r.type),message:r.type,validator:ae}],hasFeedback:!0,fieldProps:{allowClear:!0,autoFocus:!1,addonAfter:r.type,size:"large"}},t)}))}),[N,M,_,A]),ie=(0,w.useCallback)(function(){var e=o()(a()().mark((function e(r){var t,n,s,o,i,u,l,m,d,g;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Z&&Z.broadcast){e.next=5;break}return R.error("".concat(U)),e.abrupt("return");case 5:if(z){e.next=8;break}return R.error("".concat(Q)),e.abrupt("return");case 8:return t={},n=/.+\?$/,s=/.+\$$/,A.forEach((function(e){s.test(e.type)?t[e.name]="":n.test(e.type)&&(t[e.name]=null)})),o=Object.assign(p()({},t),r),Object.keys(o).forEach((function(e){C.has(e)&&(o[e]=JSON.parse(o[e]))})),Object.keys(o).forEach((function(e){var r=A.find((function(r){return r.name===e}));r&&n.test(r.type)&&(String(o[e]).trim()||(o[e]=null))})),i={account:O,name:M,authorization:[Z.permissionLevel],data:o},u=v.aU.from(i,N),e.next=19,(0,f.zI)(Z.transact({actions:[u]}));case 19:l=e.sent,m=c()(l,2),d=m[0],g=m[1],d?R.error(d):g&&g.response?R.success("".concat(W)):R.error("".concat(L));case 24:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),[M,N,C,O,Z,z,A]),ce=(0,w.useCallback)(o()(a()().mark((function e(){var t,n,s,o,i,c;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null===(t=r.current)||void 0===t?void 0:t.getFieldsValue(),s=/.+\?$/,o=/.+\$$/,i=Object.assign({},n),Object.keys(i).forEach((function(e){C.has(e)&&(i[e]=JSON.parse(i[e]))})),Object.keys(i).forEach((function(e){var r=A.find((function(r){return r.name===e}));r&&s.test(r.type)?void 0!==i[e]&&String(i[e]).trim()||(i[e]=null):r&&o.test(r.type)&&(i[e]="")})),Z.broadcast){e.next=11;break}return e.next=9,window.navigator.clipboard.writeText(JSON.stringify(i));case 9:e.next=14;break;case 11:return c={account:O,name:M,authorization:[{actor:Z.actor,permission:Z.permission}],data:i},e.next=14,window.navigator.clipboard.writeText(JSON.stringify(c,null,2));case 14:R.success("".concat(J));case 15:case"end":return e.stop()}}),e)}))),[R,Z,O,M,A]),ue=(0,w.useCallback)(o()(a()().mark((function e(){var t,n,s,o,i,c,m,p;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=r.current)||void 0===t?void 0:t.validateFields();case 2:if(Z&&Z.broadcast){e.next=7;break}return R.error("".concat(U)),e.abrupt("return");case 7:if(z){e.next=10;break}return R.error("".concat(Q)),e.abrupt("return");case 10:s=null===(n=r.current)||void 0===n?void 0:n.getFieldsValue(),o=/.+\?$/,i=/.+\$$/,c=Object.assign({},s),Object.keys(c).forEach((function(e){C.has(e)&&(c[e]=JSON.parse(c[e]))})),Object.keys(c).forEach((function(e){var r=A.find((function(r){return r.name===e}));r&&o.test(r.type)?void 0!==c[e]&&String(c[e]).trim()||(c[e]=null):r&&i.test(r.type)&&(c[e]="")})),m={account:O,name:M,authorization:[{actor:Z.actor,permission:Z.permission}],data:c},p=v.aU.from(m,N),u(d.N.setEncodeData(void 0)),u(d.N.setDecodeData(void 0)),u(d.N.setBatchActions([].concat(l()(q),[{untypedAction:JSON.stringify(m),typedAction:JSON.stringify(p)}])));case 21:case"end":return e.stop()}}),e)}))),[R,N,Z,z,O,M,q,A]),le=(0,w.useCallback)(o()(a()().mark((function e(){var t,n,s,o,i,l,m,g,x,h,b,k,j,y,S,P,w,_,z,F,q,T,E,I;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=r.current)||void 0===t?void 0:t.validateFields();case 2:if(s=null===(n=r.current)||void 0===n?void 0:n.getFieldsValue(),o=/.+\?$/,i=/.+\$$/,l=Object.assign({},s),Object.keys(l).forEach((function(e){C.has(e)&&(l[e]=JSON.parse(l[e]))})),Object.keys(l).forEach((function(e){var r=A.find((function(r){return r.name===e}));r&&o.test(r.type)?void 0!==l[e]&&String(l[e]).trim()||(l[e]=null):r&&i.test(r.type)&&(l[e]="")})),m=Z.broadcast?[Z.permissionLevel]:[],g={account:O,name:M,authorization:m,data:l},x=v.aU.from(g,N),h=JSON.stringify(x,null,2),b={expiration:"1970-01-01T00:00:00",ref_block_num:0,ref_block_prefix:0,max_net_usage_words:0,max_cpu_usage_ms:0,delay_sec:0,context_free_actions:[],transaction_extensions:[]},k=v.YW.from(p()(p()({},b),{},{actions:[x]})),j=JSON.stringify(k,null,2),y=k.id.toString(),S="",P="",w="",_="",!Z||!Z.broadcast){e.next=27;break}return e.next=23,(0,f.zI)(Z.transact({actions:[x]},{broadcast:!1,transactPlugins:[]}));case 23:z=e.sent,F=c()(z,2),(q=F[1])&&(k=q.resolved.transaction,j=JSON.stringify(k,null,2),T=q.signatures[0],E=v.uQ.from(p()(p()({},k),{},{signatures:[T]})),I=v.f1.fromSigned(E),S=JSON.stringify(E,null,2),P=JSON.stringify(I,null,2),console.log(E),console.log(I),w=q.resolved.signingData.toString(),_=q.resolved.signingDigest.toString());case 27:u(d.N.setEncodeData({action:h,transaction:j,transactionId:y,signedTransaction:S,packedTransaction:P,signingData:w,signingDigest:_})),u(d.N.setBatchActions([])),u(d.N.setDecodeData(void 0)),R.success("".concat(ee));case 31:case"end":return e.stop()}}),e)}))),[M,N,C,O,Z,A]),me=(0,w.useCallback)((function(){var e;null===(e=r.current)||void 0===e||e.resetFields(),u(d.N.setEncodeData(void 0))}),[]),pe=(0,w.useCallback)((function(e){var r,t=null==N||null===(r=N.structs)||void 0===r?void 0:r.find((function(r){return r.name===e.type.toString()})),n=null==t?void 0:t.fields;u(d.N.setFields(n)),u(d.N.setActionSelection(e.name.toString())),u(d.N.setActionType(e.type.toString())),me()}),[me,A,N]),de=(0,w.useCallback)(function(){var e=o()(a()().mark((function e(t){var n,s,o,i,c,m,p,f;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("context_free_actions"!==t.key){e.next=22;break}return e.next=3,null===(n=r.current)||void 0===n?void 0:n.validateFields();case 3:if(Z&&Z.broadcast){e.next=8;break}return R.error("".concat(U)),e.abrupt("return");case 8:if(z){e.next=11;break}return R.error("".concat(Q)),e.abrupt("return");case 11:o=null===(s=r.current)||void 0===s?void 0:s.getFieldsValue(),i=/.+\?$/,c=/.+\$$/,m=Object.assign({},o),Object.keys(m).forEach((function(e){C.has(e)&&(m[e]=JSON.parse(m[e]))})),Object.keys(m).forEach((function(e){var r=A.find((function(r){return r.name===e}));r&&i.test(r.type)?void 0!==m[e]&&String(m[e]).trim()||(m[e]=null):r&&c.test(r.type)&&(m[e]="")})),p={account:O,name:M,authorization:[],data:m},f=v.aU.from(p,N),u(d.N.setEncodeData(void 0)),u(d.N.setDecodeData(void 0)),u(d.N.setBatchActions([].concat(l()(q),[{untypedAction:JSON.stringify(p),typedAction:JSON.stringify(f)}])));case 22:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),[R,N,Z,z,O,M,q,A]),fe={items:[{label:"Context Free Actions",key:"context_free_actions"}],onClick:de};return(0,F.jsxs)("div",{className:"tab-action",children:[(0,F.jsx)("div",{className:"hardline text-lg font-semibold mb-3",children:H}),(0,F.jsx)("div",{className:"flex flex-start flex-wrap pl-[13px]",children:null==N||null===(e=N.actions)||void 0===e?void 0:e.map((function(e,r){return(0,F.jsx)(j.ZP,{className:"w-[140px] mr-2 mb-2",ghost:M!==e.name.toString(),type:"primary",size:"large",onClick:function(){return pe(e)},children:e.name.toString()},r)}))}),!!M&&(0,F.jsxs)("div",{children:[(0,F.jsx)("div",{className:"hardline text-lg font-semibold mb-2 mt-3",children:V}),(0,F.jsx)(y.Z,{gutter:10,className:"w-full",children:(0,F.jsx)(S.Z,{lg:{span:"12"},md:{span:"20"},sm:{span:"20"},xs:{span:"24"},children:(0,F.jsx)(h.A,{formRef:r,className:"pl-[13px]",layout:"vertical",onFinish:function(){var e=o()(a()().mark((function e(r){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ie(r));case 1:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),onReset:function(){return me()},submitter:{render:function(e,c){return(0,F.jsxs)("div",{className:"flex flex-wrap",style:{marginTop:"10px"},children:[(0,F.jsx)("div",{className:"mr-[8px] mt-[14px]",children:c[1]}),(0,F.jsx)("div",{className:"mr-[8px] mt-[14px]",children:c[0]}),(0,F.jsx)(j.ZP,{className:"mr-[8px] mt-[14px]",onClick:ce,children:B},"copy"),(0,F.jsx)("div",{children:(0,F.jsx)(P.Z.Button,{className:"mr-[8px] mt-[14px]",menu:fe,onClick:ue,children:K},"add")}),(0,F.jsx)(j.ZP,{className:"mr-[8px] mt-[14px]",onClick:le,children:G},"encode"),(0,F.jsx)(j.ZP,{className:"mr-[8px] mt-[14px]",onClick:function(){return t.current.handleOpen()},children:X},"decode"),(0,F.jsx)(j.ZP,{className:"mr-[8px] mt-[14px]",onClick:o()(a()().mark((function e(){var t;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=r.current)||void 0===t?void 0:t.validateFields();case 2:s.current.handleOpen(r,C);case 3:case"end":return e.stop()}}),e)}))),children:te},"msigProposal"),(0,F.jsx)(j.ZP,{className:"mr-[8px] mt-[14px]",onClick:o()(a()().mark((function e(){var t;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=r.current)||void 0===t?void 0:t.validateFields();case 2:n.current.handleOpen(r,C);case 3:case"end":return e.stop()}}),e)}))),children:re},"msigPubkey"),(0,F.jsx)(j.ZP,{className:"mr-[8px] mt-[14px]",onClick:o()(a()().mark((function e(){var t;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=r.current)||void 0===t?void 0:t.validateFields();case 2:i.current.handleOpen(r,C);case 3:case"end":return e.stop()}}),e)}))),children:ne},"msigTx")]})}},children:oe()})})})]}),(0,F.jsx)(_e,{ref:n}),(0,F.jsx)(Ne,{ref:s}),(0,F.jsx)(we,{ref:t}),(0,F.jsx)(ze,{ref:i}),!!E&&(0,F.jsx)(je,{}),!!T&&(0,F.jsx)(Se,{}),!!q.length&&(0,F.jsx)(ve,{}),Y]})},Fe=(0,w.memo)(Oe),qe=t(64317),Te=t(92340),Ee=t(72269),Ae=t(57953),Ie=t(96486),De=function(){var e,r=(0,b.useDispatch)(),t=(0,w.useRef)(),n=(0,b.useSelector)((function(e){return e.contract.abi})),s=(0,b.useSelector)((function(e){return e.contract.contract})),i=(0,b.useSelector)((function(e){return e.global.session})),u=(0,b.useSelector)((function(e){return e.contract.tableSelection})),l=(0,b.useSelector)((function(e){return e.contract.tableDataSource})),m=(0,b.useSelector)((function(e){return e.contract.tableColumns})),v=(0,b.useSelector)((function(e){return e.contract.tableByScope})),y=(0,b.useSelector)((function(e){return e.contract.tableParams})),S=(0,b.useSelector)((function(e){return e.contract.tableByScopeParams})),P=k.ZP.useMessage(),C=c()(P,2),N=C[0],M=C[1],_=(0,w.useState)(!1),Z=c()(_,2),z=Z[0],O=Z[1],q=(0,b.useIntl)(),T=q.formatMessage({id:"common.intlCopySuccess"}),E=q.formatMessage({id:"contract.intlSelectTable"}),A=q.formatMessage({id:"contract.intlEnterParameters"}),I=q.formatMessage({id:"common.intlCopy"}),D=q.formatMessage({id:"contract.intlTableResult"}),R=q.formatMessage({id:"contract.intlNoData"}),Y=(0,w.useCallback)(function(){var e=o()(a()().mark((function e(t){var n,s,o,u,l,m,g,x;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],s=[],O(!0),e.next=5,(0,f.zI)(i.client.v1.chain.get_table_rows(t));case 5:if(o=e.sent,u=c()(o,2),l=u[0],m=u[1],O(!1),!l){e.next=13;break}return N.error(l),e.abrupt("return");case 13:if((g=m.rows).length){e.next=18;break}return r(d.N.setTableColumns(n)),r(d.N.setTableDataSource(g)),e.abrupt("return");case 18:t.json?(x=Object.keys(g[0]),n.push({title:"#",dataIndex:"_key",key:"_key",width:"50px",align:"center",render:function(e,r,t){return(0,F.jsx)("span",{children:t+1})}}),x.forEach((function(e){n.push({title:e,dataIndex:e,key:e,render:function(r,t){return(0,Ie.isObject)(t[e])?(0,F.jsx)("span",{children:JSON.stringify(t[e])}):(0,F.jsx)("span",{children:t[e]})}})})),t.show_payer?(n.push({title:"payer",dataIndex:"payer",key:"payer",render:function(e,r){return(0,F.jsx)("span",{children:r.payer})}}),g.forEach((function(e,r){g[r]._key=r,s.push(p()(p()({},g[r]),{},{payer:m.ram_payers[r].toString()}))}))):g.forEach((function(e,r){g[r]._key=r,s.push(p()({},g[r]))}))):(n.push({title:"#",dataIndex:"_key",key:"_key",width:"50px",align:"center",render:function(e,r,t){return(0,F.jsx)("span",{children:t+1})}}),n.push({title:"bytes",dataIndex:"bytes",key:"bytes",render:function(e,r){return(0,F.jsx)("span",{children:r.bytes})}}),t.show_payer?(n.push({title:"payer",dataIndex:"payer",key:"payer",render:function(e,r){return(0,F.jsx)("span",{children:r.payer})}}),g.forEach((function(e,r){s.push({_key:r,bytes:e,payer:m.ram_payers[r].toString()})}))):g.forEach((function(e,r){s.push({_key:r,bytes:e})}))),r(d.N.setTableColumns(n)),r(d.N.setTableDataSource(s));case 21:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),[i,N]),$=(0,w.useCallback)(function(){var e=o()(a()().mark((function e(t){var n,s,o,u,l,m,g,x;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],s=[],O(!0),e.next=5,(0,f.zI)(i.client.v1.chain.get_table_by_scope(t));case 5:if(o=e.sent,u=c()(o,2),l=u[0],m=u[1],O(!1),!l){e.next=13;break}return O(!1),e.abrupt("return");case 13:if((g=JSON.parse(JSON.stringify(m.rows))).length){e.next=18;break}return r(d.N.setTableColumns(n)),r(d.N.setTableDataSource(g)),e.abrupt("return");case 18:x=Object.keys(g[0]),n.push({title:"#",dataIndex:"_key",key:"_key",width:"50px",align:"center",render:function(e,r,t){return(0,F.jsx)("span",{children:t+1})}}),x.forEach((function(e){n.push({title:e,dataIndex:e,key:e,render:function(r,t){return(0,Ie.isObject)(t[e])?(0,F.jsx)("span",{children:JSON.stringify(t[e])}):(0,F.jsx)("span",{children:t[e]})}})})),g.forEach((function(e,r){g[r]._key=r,s.push(p()({},g[r]))})),r(d.N.setTableColumns(n)),r(d.N.setTableDataSource(s));case 24:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),[i,N]),J=(0,w.useCallback)(o()(a()().mark((function e(){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v?$(S):Y(y);case 1:case"end":return e.stop()}}),e)}))),[y,S,v,Y,$]),H=(0,w.useCallback)((function(e){var t=p()(p()({},y),{},{code:s,table:e.name.toString(),scope:y.scope?y.scope:s}),n=p()(p()({},S),{},{code:s,table:e.name.toString()});r(d.N.setTableSelection(e.name.toString())),r(d.N.setTableParams(t)),r(d.N.setTableByScopeParams(n)),v?$(n):Y(t)}),[s,Y,$,y,S]),V=(0,w.useCallback)((function(e){r(d.N.setTableByScope(e)),u&&(e?$(S):Y(y))}),[u,y,S]),B=(0,w.useCallback)((function(e,t){if(v){var n={};e.hasOwnProperty("lower_bound2")?n.lower_bound=e.lower_bound2:e.hasOwnProperty("upper_bound2")?n.upper_bound=e.upper_bound2:e.hasOwnProperty("limit2")?n.limit=e.limit2:e.hasOwnProperty("reverse2")&&(n.reverse=e.reverse2),r(d.N.setTableByScopeParams(p()(p()({},S),n)))}else r(d.N.setTableParams(p()(p()({},y),t)))}),[v,y,S]),W=(0,w.useCallback)(o()(a()().mark((function e(){var r;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},v?Object.keys(S).forEach((function(e){S[e]&&(r[e]=S[e])})):Object.keys(y).forEach((function(e){y[e]&&(r[e]=y[e])})),e.next=4,window.navigator.clipboard.writeText(JSON.stringify(r));case 4:N.success("".concat(T));case 5:case"end":return e.stop()}}),e)}))),[N,v,y,S]);return(0,F.jsxs)("div",{className:"tab-table",children:[(0,F.jsxs)("div",{className:"hardline text-lg font-semibold mb-3",children:[(0,F.jsx)("span",{children:E}),(0,F.jsx)("span",{className:"ml-[30px] mr-3",children:"Table by Scope"}),(0,F.jsx)(Ee.Z,{value:v,onChange:V})]}),(0,F.jsx)("div",{className:"flex flex-start flex-wrap pl-[13px]",children:null==n||null===(e=n.tables)||void 0===e?void 0:e.map((function(e,r){return(0,F.jsx)(j.ZP,{className:"w-[140px] mr-2 mb-2",ghost:u!==e.name.toString(),type:"primary",size:"large",onClick:function(){return H(e)},children:e.name.toString()},r)}))}),!!u&&(0,F.jsxs)("div",{children:[(0,F.jsx)("div",{className:"hardline text-lg font-semibold mb-2 mt-3",children:A}),(0,F.jsx)(h.A,{initialValues:{scope:void 0===y.scope?s:y.scope,lower_bound:y.lower_bound,upper_bound:y.upper_bound,limit:y.limit,reverse:y.reverse,index_position:y.index_position,key_type:y.key_type,json:y.json,show_payer:y.show_payer,lower_bound2:S.lower_bound,upper_bound2:S.upper_bound,limit2:S.limit,reverse2:S.reverse},className:"pl-[13px]",formRef:t,layout:"vertical",onValuesChange:B,onFinish:o()(a()().mark((function e(){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",J());case 1:case"end":return e.stop()}}),e)}))),submitter:{render:function(e,r){return[(0,F.jsx)(Ae.Z,{spinning:z,size:"small",children:r[1]},"comfirm"),(0,F.jsx)(j.ZP,{onClick:W,children:I},"copy")]}},children:v?(0,F.jsxs)(h.A.Group,{children:[(0,F.jsx)(x.Z,{name:"lower_bound2",label:"Lower Bound",placeholder:"Search...",fieldProps:{autoFocus:!1,size:"large"}}),(0,F.jsx)(x.Z,{name:"upper_bound2",label:"Upper Bound",placeholder:"Search...",fieldProps:{size:"large"}}),(0,F.jsx)(x.Z,{name:"limit2",label:"Limit",placeholder:"Search...",transform:function(e){return Number(e)},fieldProps:{type:"number",size:"large"}}),(0,F.jsx)(g.Z,{name:"reverse2",label:"Reverse",fieldProps:{onClick:function(){var e;return null===(e=t.current)||void 0===e?void 0:e.submit()}}})]}):(0,F.jsxs)(h.A.Group,{children:[(0,F.jsx)(x.Z,{name:"scope",label:"Scope",placeholder:"Search...",fieldProps:{defaultValue:"".concat(s),autoFocus:!1,size:"large"}}),(0,F.jsx)(x.Z,{name:"lower_bound",label:"Lower Bound",placeholder:"Search...",fieldProps:{size:"large"}}),(0,F.jsx)(x.Z,{name:"upper_bound",label:"Upper Bound",placeholder:"Search...",fieldProps:{size:"large"}}),(0,F.jsx)(x.Z,{name:"limit",label:"Limit",placeholder:"Search...",transform:function(e){return Number(e)},fieldProps:{type:"number",size:"large"}}),(0,F.jsx)(qe.Z,{name:"index_position",label:"Index Position",placeholder:"Select...",options:["primary","secondary","tertiary","fourth","fifth","sixth","seventh","eighth","ninth","tenth"],fieldProps:{size:"large"}}),(0,F.jsx)(qe.Z,{name:"key_type",label:"Key Type",placeholder:"Select...",options:["name","i64","i128","float64","float128","ripemd160","sha256"],fieldProps:{size:"large"}}),(0,F.jsxs)(h.A.Group,{children:[(0,F.jsx)(g.Z,{name:"reverse",label:"Reverse",fieldProps:{onClick:function(){var e;return null===(e=t.current)||void 0===e?void 0:e.submit()}}}),(0,F.jsx)(g.Z,{name:"show_payer",label:"Show Payer",fieldProps:{onClick:function(){var e;return null===(e=t.current)||void 0===e?void 0:e.submit()}}}),(0,F.jsx)(g.Z,{name:"json",label:"JSON",fieldProps:{defaultValue:!0,onClick:function(){var e;return null===(e=t.current)||void 0===e?void 0:e.submit()}}})]})]})}),(0,F.jsx)("div",{className:"hardline text-lg font-semibold mb-2 mt-3",children:D}),l.length?(0,F.jsx)(Te.Z,{loading:{spinning:z,size:"large"},rowKey:"_key",scroll:{x:!0},size:"small",columns:m,dataSource:l,defaultData:[],search:!1,options:!1,pagination:!1}):(0,F.jsx)("div",{className:"text-base pl-[13px]",children:R})]}),M]})},Re=(0,w.memo)(De),Ye=t(57132),$e=t(11774),Je=t(69677),He=t(92398),Ve=t(79123),Be=(t(20034),t(31145),function(){var e=k.ZP.useMessage(),r=c()(e,2),t=r[0],n=r[1],s=(0,b.useDispatch)(),i=(0,b.useSelector)((function(e){return e.global.session})),u=(0,b.useSelector)((function(e){return e.global.contractKit})),l=(0,b.useSelector)((function(e){return e.contract.rawAbi})),m=(0,b.useSelector)((function(e){return e.contract.contract})),p=(0,b.useSelector)((function(e){return e.contract.tableSelection})),g=(0,b.useSelector)((function(e){return e.contract.actionSelection})),x=(0,b.useSelector)((function(e){return e.contract.activeKey})),h=(0,w.useState)(""),v=c()(h,2),j=v[0],y=v[1],S=(0,w.useState)(!1),P=c()(S,2),C=P[0],M=P[1],_=(0,b.useSearchParams)(),Z=c()(_,2),z=Z[0],O=Z[1],q=z.get("tab")?z.get("tab"):void 0,T=(0,b.useIntl)(),E=T.formatMessage({id:"contract.intlContract"}),A=T.formatMessage({id:"contract.intlSearch"}),I=T.formatMessage({id:"contract.intlAccountFormatError"}),D=T.formatMessage({id:"contract.intlNonContractAccount"}),R=T.formatMessage({id:"contract.intlSearchContract"}),Y=T.formatMessage({id:"common.intlCopySuccess"}),$=(0,w.useCallback)(function(){var e=o()(a()().mark((function e(r,n){var s,o,u,l;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(/^[a-z1-5.]{1,12}$/.test(r)){e.next=8;break}if(r||n.hasOwnProperty("type")){e.next=4;break}return e.abrupt("return",!1);case 4:return t.error("".concat(I)),e.abrupt("return",!1);case 8:return e.next=10,(0,f.zI)(i.client.v1.chain.get_abi(r));case 10:if(s=e.sent,o=c()(s,2),u=o[0],l=o[1],!u){e.next=17;break}return t.error(u),e.abrupt("return",!1);case 17:if(u||!l.hasOwnProperty("abi")){e.next=21;break}return e.abrupt("return",!0);case 21:return t.error("".concat(D)),e.abrupt("return",!1);case 23:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),[i,t]),J=(0,w.useCallback)(function(){var e=o()(a()().mark((function e(r,n){var o,i,l,m,p,g;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u){e.next=16;break}return M(!0),e.next=4,$(r,n);case 4:if(e.sent){e.next=7;break}return M(!1),e.abrupt("return");case 7:return e.next=9,(0,f.zI)(u.load(r));case 9:o=e.sent,i=c()(o,2),l=i[0],m=i[1],l?t.error(l):(p=m.abi.toJSON(),g=JSON.stringify(p),g=JSON.parse(g),s(d.N.setContract(r)),s(d.N.setABI(p)),s(d.N.setRawABI(g)),s(d.N.setActionType("")),s(d.N.setActionSelection("")),s(d.N.setTableSelection("")),s(d.N.setTableDataSource([])),s(d.N.setTableColumns([])),s(d.N.setTableByScope(!1)),s(d.N.setTableParams({code:"",table:"",scope:void 0,lower_bound:void 0,upper_bound:void 0,limit:100,reverse:void 0,index_position:void 0,key_type:"i64",json:!0,show_payer:void 0})),s(d.N.setTableByScopeParams({code:"",table:"",lower_bound:void 0,upper_bound:void 0,limit:100,reverse:void 0}))),y(""),M(!1);case 16:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),[u,$,t]),H=(0,w.useCallback)((0,Ie.debounce)(function(){var e=o()(a()().mark((function e(r){var t,n,s,o,u;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.target.value,/^[a-z1-5.]{1,12}$/.test(t)){e.next=6;break}0===t.trim().length?y(""):y("error"),e.next=13;break;case 6:return e.next=8,(0,f.zI)(i.client.v1.chain.get_abi(t));case 8:n=e.sent,s=c()(n,2),o=s[0],u=s[1],!o&&u.hasOwnProperty("abi")?y(""):y("error");case 13:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),1e3),[i]),V=(0,w.useMemo)((function(){return"tables"===x&&p?m+"::"+p:"actions"===x&&g?m+"::"+g:m||""}),[x,p,g,m]),B=(0,w.useCallback)(o()(a()().mark((function e(){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.navigator.clipboard.writeText(JSON.stringify(l));case 2:t.success("".concat(Y));case 3:case"end":return e.stop()}}),e)}))),[l]),W=[{key:"tables",label:(0,F.jsx)("span",{className:"text-lg font-semibold",children:"Tables"}),children:!!l&&(0,F.jsx)(Re,{})},{key:"actions",label:(0,F.jsx)("span",{className:"text-lg font-semibold",children:"Actions"}),children:!!l&&(0,F.jsx)(Fe,{})},{key:"abi",label:(0,F.jsx)("span",{className:"text-lg font-semibold",children:"ABI"}),children:!!l&&(0,F.jsxs)("div",{className:"pl-[13px]",children:[(0,F.jsx)(Ye.Z,{className:"cursor-pointer",style:{color:"#1677ff"},onClick:B}),(0,F.jsx)(Ve.ZP,{className:"text-lg",src:l,collapsed:!1,displaySize:!0,enableClipboard:!1})]})},{key:"tip",label:(0,F.jsx)("span",{className:"text-lg font-semibold",children:V}),disabled:!0}],L=(0,w.useCallback)((function(e,r){var t={};e&&(t.search=e),t.tab=r||x,O(t)}),[x]);return(0,w.useEffect)((function(){var e=z.get("search"),r=z.get("tab");r&&s(d.N.setActiveKey(r)),e&&J(e,""),L(e,r)}),[J]),(0,w.useEffect)((function(){L(m||"",x)}),[m,x,L]),(0,F.jsxs)($e._z,{className:"contract",ghost:!0,children:[(0,F.jsxs)(N.Z,{title:(0,F.jsx)("div",{className:"hardline font-semibold text-lg mb-3",children:R}),children:[(0,F.jsx)(Je.Z.Search,{className:"",loading:C,addonBefore:(0,F.jsx)(Ae.Z,{spinning:C,children:E}),placeholder:"Search...",allowClear:!0,enterButton:A,size:"large",status:j,onSearch:J,onChange:H}),(0,F.jsx)(He.Z,{className:"mt-2",defaultActiveKey:"tables",items:W,activeKey:q,onChange:function(e){return s(d.N.setActiveKey(e))}})]}),n]})})},20034:function(){},31145:function(){},64599:function(e,r,t){var n=t(96263);e.exports=function(e,r){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=n(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var a=0,s=function(){};return{s:s,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==t.return||t.return()}finally{if(c)throw o}}}},e.exports.__esModule=!0,e.exports.default=e.exports}}]);