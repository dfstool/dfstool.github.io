(self.webpackChunk=self.webpackChunk||[]).push([[9110,7447],{98165:function(e,t,r){"use strict";r.d(t,{Z:function(){return c}});var n=r(87462),a=r(62435),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z"}}]},name:"sync",theme:"outlined"},o=r(84089),i=function(e,t){return a.createElement(o.Z,(0,n.Z)({},e,{ref:t,icon:s}))};var c=a.forwardRef(i)},63434:function(e,t,r){"use strict";var n=r(1413),a=r(91),s=r(22270),o=r(84567),i=r(62435),c=r(90789),u=r(56499),l=r(86074),m=["options","fieldProps","proFieldProps","valueEnum"],d=i.forwardRef((function(e,t){var r=e.options,o=e.fieldProps,i=e.proFieldProps,c=e.valueEnum,d=(0,a.Z)(e,m);return(0,l.jsx)(u.Z,(0,n.Z)({ref:t,valueType:"checkbox",valueEnum:(0,s.h)(c,void 0),fieldProps:(0,n.Z)({options:r},o),lightProps:(0,n.Z)({labelFormatter:function(){return(0,l.jsx)(u.Z,(0,n.Z)({ref:t,valueType:"checkbox",mode:"read",valueEnum:(0,s.h)(c,void 0),filedConfig:{customLightMode:!0},fieldProps:(0,n.Z)({options:r},o),proFieldProps:i},d))}},d.lightProps),proFieldProps:i},d))})),p=i.forwardRef((function(e,t){var r=e.fieldProps,a=e.children;return(0,l.jsx)(o.Z,(0,n.Z)((0,n.Z)({ref:t},r),{},{children:a}))})),f=(0,c.G)(p,{valuePropName:"checked"});f.Group=d,t.Z=f},86615:function(e,t,r){"use strict";var n=r(1413),a=r(91),s=r(22270),o=r(55742),i=r(62435),c=r(90789),u=r(56499),l=r(86074),m=["fieldProps","options","radioType","layout","proFieldProps","valueEnum"],d=i.forwardRef((function(e,t){var r=e.fieldProps,o=e.options,i=e.radioType,c=e.layout,d=e.proFieldProps,p=e.valueEnum,f=(0,a.Z)(e,m);return(0,l.jsx)(u.Z,(0,n.Z)((0,n.Z)({valueType:"button"===i?"radioButton":"radio",ref:t,valueEnum:(0,s.h)(p,void 0)},f),{},{fieldProps:(0,n.Z)({options:o,layout:c},r),proFieldProps:d,filedConfig:{customLightMode:!0}}))})),p=i.forwardRef((function(e,t){var r=e.fieldProps,a=e.children;return(0,l.jsx)(o.ZP,(0,n.Z)((0,n.Z)({},r),{},{ref:t,children:a}))})),f=(0,c.G)(p,{valuePropName:"checked",ignoreWidth:!0});f.Group=d,f.Button=o.ZP.Button,f.displayName="ProFormComponent",t.Z=f},64317:function(e,t,r){"use strict";var n=r(1413),a=r(91),s=r(22270),o=r(62435),i=r(66758),c=r(56499),u=r(86074),l=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],m=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],d=function(e,t){var r=e.fieldProps,m=e.children,d=e.params,p=e.proFieldProps,f=e.mode,g=e.valueEnum,x=e.request,h=e.showSearch,b=e.options,v=(0,a.Z)(e,l),k=(0,o.useContext)(i.Z);return(0,u.jsx)(c.Z,(0,n.Z)((0,n.Z)({valueEnum:(0,s.h)(g),request:x,params:d,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,n.Z)({options:b,mode:f,showSearch:h,getPopupContainer:k.getPopupContainer},r),ref:t,proFieldProps:p},v),{},{children:m}))},p=o.forwardRef((function(e,t){var r=e.fieldProps,l=e.children,d=e.params,p=e.proFieldProps,f=e.mode,g=e.valueEnum,x=e.request,h=e.options,b=(0,a.Z)(e,m),v=(0,n.Z)({options:h,mode:f||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},r),k=(0,o.useContext)(i.Z);return(0,u.jsx)(c.Z,(0,n.Z)((0,n.Z)({valueEnum:(0,s.h)(g),request:x,params:d,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,n.Z)({getPopupContainer:k.getPopupContainer},v),ref:t,proFieldProps:p},b),{},{children:l}))})),f=o.forwardRef(d);f.SearchSelect=p,f.displayName="ProFormComponent",t.Z=f},72671:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return Ke}});var n=r(15009),a=r.n(n),s=r(99289),o=r.n(s),i=r(5574),c=r.n(i),u=r(19632),l=r.n(u),m=r(97857),d=r.n(m),p=r(80107),f=r(64119),g=r(52688),x=r(5966),h=r(97269),b=r(59530),v=r(80507),k=r(45360),y=r(15867),j=r(71230),S=r(15746),P=r(85418),w=r(62435),N=r(37476),C=r(38345),_=r(17186),M=r(1413),Z=r(91),z=r(66758),O=r(56499),F=r(86074),A=["fieldProps","proFieldProps"],E="dateTime",T=w.forwardRef((function(e,t){var r=e.fieldProps,n=e.proFieldProps,a=(0,Z.Z)(e,A),s=(0,w.useContext)(z.Z);return(0,F.jsx)(O.Z,(0,M.Z)({ref:t,fieldProps:(0,M.Z)({getPopupContainer:s.getPopupContainer},r),valueType:E,proFieldProps:n,filedConfig:{valueType:E,customLightMode:!0}},a))})),q=r(27484),D=r.n(q),R=r(70178),I=r.n(R),$=r(98165),Y=r(68795),J=r(63434),H=w.forwardRef((function(e,t){var r=k.ZP.useMessage(),n=c()(r,2),s=n[0],i=n[1],u=(0,b.useSelector)((function(e){return e.contract.abi})),l=(0,b.useSelector)((function(e){return e.contract.actionSelection})),m=(0,w.useState)(1),d=c()(m,2),p=d[0],f=d[1],g=(0,w.useState)(0),x=c()(g,2),h=x[0],v=x[1],y=(0,w.useState)([]),j=c()(y,2),S=j[0],P=j[1],C=(0,w.useState)(),_=c()(C,2),M=_[0],Z=_[1],z=(0,b.useIntl)(),O=z.formatMessage({id:"contract.intlImportRequested"}),A=z.formatMessage({id:"contract.intlRequested"}),E=z.formatMessage({id:"contract.intlThreshold"}),T=z.formatMessage({id:"msig.intlImportSuccess"}),q=(0,w.useRef)(),D=(0,w.useState)(!1),R=c()(D,2),I=R[0],$=R[1],Y=(0,w.useCallback)((function(e,t){var r;f(e.keyThreshold),P(e.accounts),Z(t),v(0),null===(r=q.current)||void 0===r||r.resetFields(),$(!0)}),[q]);(0,w.useImperativeHandle)(t,(function(){return{handleOpen:Y}}));var H=(0,w.useCallback)(function(){var e=o()(a()().mark((function e(t){var r;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],t.checkbox&&t.checkbox.forEach((function(e){var t=e.split(" "),n=c()(t,2),a=n[0],s=n[1];r.push({requestedAccount:a,requestedPermission:s})})),r.length||r.push({requestedAccount:"",requestedPermission:""}),null==M||M.current.setFieldValue("requested",r),null==M||M.current.validateFields(["requested"]),s.success("".concat(T)),e.abrupt("return",!0);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[u,l,M]);return(0,F.jsxs)(N.Y,{formRef:q,title:O,open:I,onFinish:H,onOpenChange:function(e){$(e)},layout:"horizontal",width:"300px",children:[(0,F.jsxs)("div",{className:" font-semibold",children:[E,"：",p]}),(0,F.jsxs)("div",{className:" font-semibold mb-1",children:[A+"：",h<p?(0,F.jsx)("span",{className:" text-red-600",children:h}):(0,F.jsx)("span",{className:" text-green-600",children:h})]}),!!S.length&&(0,F.jsx)(J.Z.Group,{name:"checkbox",layout:"vertical",label:"",options:S.map((function(e){var t=e.permission.actor.toString(),r=e.permission.permission.toString(),n=e.weight.toString();return{label:"+".concat(n," ").concat(t,"@").concat(r),value:"".concat(t," ").concat(r," ").concat(n)}})),fieldProps:{onChange:function(e){var t=0;e.forEach((function(e){t+=Number(e.split(" ")[2])})),v(t)}}}),i]})})),V=(0,w.memo)(H);D().extend(I());var B=w.forwardRef((function(e,t){var r=k.ZP.useMessage(),n=c()(r,2),s=n[0],i=n[1],u=(0,b.useSelector)((function(e){return e.global.account})),l=(0,b.useSelector)((function(e){return e.global.session})),m=(0,b.useSelector)((function(e){return e.contract.batchActions})),p=(0,w.useState)(!1),g=c()(p,2),h=g[0],y=g[1],P=(0,w.useRef)(),M=(0,w.useRef)(),Z=(0,w.useState)(!1),z=c()(Z,2),O=z[0],A=z[1],E=(0,b.useIntl)(),q=E.formatMessage({id:"contract.intlCreateProposal"}),R=E.formatMessage({id:"common.intlInputException"}),I=E.formatMessage({id:"account.intlPermissionNotExist"}),J=E.formatMessage({id:"contract.intlCreate"}),H=E.formatMessage({id:"contract.intlExpirationError"}),B=E.formatMessage({id:"contract.intlExpiration"}),W=E.formatMessage({id:"contract.intlPermission"}),L=E.formatMessage({id:"common.intlTxSuccess"}),U=E.formatMessage({id:"common.intlTxFail"}),Q=E.formatMessage({id:"common.intlPleaseConnectWallet"}),G=E.formatMessage({id:"common.intlPleaseConnectNetwork"}),K=E.formatMessage({id:"contract.intlProposer"}),X=E.formatMessage({id:"contract.intlProposalName"}),ee=E.formatMessage({id:"contract.intlMsigAccount"}),te=E.formatMessage({id:"contract.intlRequested"}),re=E.formatMessage({id:"contract.intlMsigAccountWeightInsufficient"}),ne=E.formatMessage({id:"contract.intlProposalNamePlaceholder"}),ae=(0,w.useCallback)((function(){A(!0)}),[]);(0,w.useImperativeHandle)(t,(function(){return{handleOpen:ae}}));var se=(0,w.useCallback)(function(){var e=o()(a()().mark((function e(t){var r,n,o,i,p,g,x,h,b,k,y,j,S,P,w,N,C,_,M,Z,z,O,F,A,E,T,q,R;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l&&l.broadcast){e.next=5;break}return s.error("".concat(Q)),e.abrupt("return");case 5:if(u){e.next=8;break}return s.error("".concat(G)),e.abrupt("return");case 8:return r=t.proposer,n=t.proposalName,o=t.msigAccount,i=t.msigPermission,p=[],t.requested.forEach((function(e){p.find((function(t){return t.actor===e.requestedAccount&&t.permission===e.requestedPermission}))||p.push({actor:e.requestedAccount,permission:e.requestedPermission})})),g=D()(t.expiration).utc().format("YYYY-MM-DDTHH:mm:ss"),e.next=17,(0,f.zI)(l.client.v1.chain.get_account(o));case 17:if(x=e.sent,h=c()(x,2),b=h[0],k=h[1],!b){e.next=26;break}return s.error(b),e.abrupt("return",!1);case 26:y=!1,j=0;case 28:if(!(j<k.permissions.length)){e.next=51;break}if(k.permissions[j].perm_name.toString()!==i){e.next=48;break}S=k.permissions[j].required_auth.keyThreshold,P=k.permissions[j].required_auth.accounts,w=0,N=0;case 34:if(!(N<p.length)){e.next=43;break}for(C=!1,_=0;_<P.length;_++)p[N].actor===P[_].permission.actor.toString()&&p[N].permission===P[_].permission.permission.toString()&&(C=!0,w+=P[_].weight.toNumber());if(C){e.next=40;break}return s.error("".concat(I)),e.abrupt("return",!1);case 40:N++,e.next=34;break;case 43:if(!(w<S)){e.next=46;break}return s.error("".concat(re)),e.abrupt("return",!1);case 46:return y=!0,e.abrupt("break",51);case 48:j++,e.next=28;break;case 51:if(y){e.next=54;break}return s.error("".concat(I)),e.abrupt("return",!1);case 54:return M=[],Z=[],m.forEach((function(e){var t=JSON.parse(e.typedAction);t.authorization.length?(t.authorization=[{actor:o,permission:i}],M.push(t)):Z.push(t)})),e.next=59,l.client.v1.chain.get_info();case 59:return z=e.sent,O=z.getTransactionHeader(),F=v.YW.from(d()(d()({},O),{},{expiration:g,actions:M,context_free_actions:Z})),A={action:{account:"eosio.msig",name:"propose",authorization:[l.permissionLevel],data:{proposer:r,proposal_name:n,requested:p,trx:F.toJSON()}}},e.next=65,(0,f.zI)(l.transact(A));case 65:return E=e.sent,T=c()(E,2),q=T[0],R=T[1],q?s.error(q):R&&R.response?s.success("".concat(L)):s.error("".concat(U)),e.abrupt("return",!0);case 71:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[l,m]),oe=(0,w.useCallback)(o()(a()().mark((function e(){var t,r,n,o,i,u,m,d,p,g,x;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),r=null===(t=M.current)||void 0===t?void 0:t.getFieldsValue(),n=r.msigAccount,o=r.msigPermission,i={},e.next=7,(0,f.zI)(l.client.v1.chain.get_account(n));case 7:if(u=e.sent,m=c()(u,2),d=m[0],p=m[1],!d){e.next=17;break}return s.error(d),y(!1),e.abrupt("return",!1);case 17:g=!1,x=0;case 19:if(!(x<p.permissions.length)){e.next=27;break}if(p.permissions[x].perm_name.toString()!==o){e.next=24;break}return i=p.permissions[x].required_auth,g=!0,e.abrupt("break",27);case 24:x++,e.next=19;break;case 27:if(g){e.next=31;break}return s.error("".concat(I)),y(!1),e.abrupt("return",!1);case 31:y(!1),P.current.handleOpen(i,M);case 33:case"end":return e.stop()}}),e)}))),[l]);return(0,F.jsxs)(N.Y,{formRef:M,title:q,open:O,onFinish:se,onOpenChange:function(e){A(e)},initialValues:{proposer:u?u.accountName.toString():""},submitter:{searchConfig:{submitText:J},render:function(e,t){return[t[0],t[1]]}},layout:"vertical",width:"500px",modalProps:{style:{top:25}},children:[(0,F.jsx)(x.Z,{disabled:!0,name:"proposer",label:K,placeholder:"example: dfsdeveloper",fieldProps:{autoFocus:!1,size:"large"},rules:[{required:!0,whitespace:!0,message:"".concat(R),pattern:/^[a-z1-5.]{1,12}$/}]}),(0,F.jsx)(x.Z,{name:"proposalName",label:X,placeholder:ne,fieldProps:{autoFocus:!1,size:"large"},rules:[{required:!0,whitespace:!0,message:"".concat(R),pattern:/^[a-z1-5.]{1,12}$/}]}),(0,F.jsxs)(j.Z,{gutter:10,children:[(0,F.jsx)(S.Z,{lg:{span:"16"},md:{span:"16"},sm:{span:"16"},xs:{span:"16"},children:(0,F.jsx)(x.Z,{name:"msigAccount",label:ee,placeholder:"ex: dfsdeveloper",fieldProps:{autoFocus:!1,size:"large"},rules:[{required:!0,whitespace:!0,message:"".concat(R),pattern:/^[a-z1-5.]{1,12}$/}]})}),(0,F.jsx)(S.Z,{lg:{span:"8"},md:{span:"8"},sm:{span:"8"},xs:{span:"8"},children:(0,F.jsx)(x.Z,{name:"msigPermission",label:(0,F.jsxs)("div",{className:"flex items-center",children:[W,h?(0,F.jsx)($.Z,{spin:h,className:"ml-3 text-blue-600"}):(0,F.jsx)(Y.Z,{className:"ml-3 text-blue-600 hover:cursor-pointer",onClick:oe})]}),placeholder:"ex: active",fieldProps:{autoFocus:!1,size:"large"},rules:[{required:!0,whitespace:!0,message:"".concat(R),pattern:/^[a-z1-5.]{1,12}$/}]})})]}),(0,F.jsx)(C.Z,{bordered:!0,bodyStyle:{paddingInline:"12px",paddingBlock:"6px"},className:"mb-3 requestedAccount",children:(0,F.jsx)(_.u,{name:"requested",min:1,creatorButtonProps:!1,itemContainerRender:function(e){return(0,F.jsx)("div",{children:e})},initialValue:[{requestedAccount:"",permission:""}],children:(0,F.jsxs)(j.Z,{gutter:10,children:[(0,F.jsx)(S.Z,{lg:{span:"16"},md:{span:"16"},sm:{span:"16"},xs:{span:"16"},children:(0,F.jsx)(x.Z,{name:"requestedAccount",label:te,placeholder:"ex: dfsdeveloper",fieldProps:{autoFocus:!1,size:"large"},rules:[{required:!0,whitespace:!0,message:"".concat(R),pattern:/^[a-z1-5.]{1,12}$/}]})}),(0,F.jsx)(S.Z,{lg:{span:"8"},md:{span:"8"},sm:{span:"8"},xs:{span:"8"},children:(0,F.jsx)(x.Z,{name:"requestedPermission",label:W,placeholder:"ex: active",fieldProps:{autoFocus:!1,size:"large"},rules:[{required:!0,whitespace:!0,message:"".concat(R),pattern:/^[a-z1-5.]{1,12}$/}]})})]})})}),(0,F.jsx)(T,{width:"lg",name:"expiration",label:B,rules:[{required:!0,validator:function(e,t){try{return t?t.unix()<D()().unix()?Promise.reject(H):Promise.resolve(""):Promise.reject(R)}catch(e){return Promise.reject(e.message)}}}]}),(0,F.jsx)(V,{ref:P}),i]})})),W=(0,w.memo)(B),L=r(64599),U=r.n(L),Q=["fieldProps","proFieldProps","min","max","step","marks","vertical","range"],G=w.forwardRef((function(e,t){var r=e.fieldProps,n=e.proFieldProps,a=e.min,s=e.max,o=e.step,i=e.marks,c=e.vertical,u=e.range,l=(0,Z.Z)(e,Q);return(0,F.jsx)(O.Z,(0,M.Z)({valueType:"slider",fieldProps:(0,M.Z)((0,M.Z)({},r),{},{min:a,max:s,step:o,marks:i,vertical:c,range:u,style:null==r?void 0:r.style}),ref:t,proFieldProps:n,filedConfig:{ignoreWidth:!0}},l))})),K=r(90672);D().extend(I());var X=w.forwardRef((function(e,t){var r=k.ZP.useMessage(),n=c()(r,2),s=n[0],i=n[1],u=(0,w.useRef)(),l=(0,w.useState)(!1),m=c()(l,2),d=m[0],p=m[1],f=(0,w.useState)(""),g=c()(f,2),x=g[0],h=g[1],v=(0,w.useState)(""),j=c()(v,2),S=j[0],P=j[1],C=(0,w.useState)(1),_=c()(C,2),M=_[0],Z=_[1],z=(0,w.useState)(""),O=c()(z,2),A=O[0],E=O[1],T=(0,w.useState)(""),q=c()(T,2),D=q[0],R=q[1],I=(0,b.useIntl)(),$=I.formatMessage({id:"common.intlCopySuccess"}),Y=I.formatMessage({id:"common.intlCopy"}),J=I.formatMessage({id:"common.intlExport"}),H=I.formatMessage({id:"contract.intlSignedTransaction"}),V=I.formatMessage({id:"contract.intlExported"}),B=(0,w.useCallback)((function(e,t,r,n,a){var s;null===(s=u.current)||void 0===s||s.setFieldValue("content",JSON.stringify(e,null,2)),h(JSON.stringify(e,null,2)),P(t),Z(a),E(r),R(n),p(!0)}),[]);(0,w.useImperativeHandle)(t,(function(){return{handleOpen:B}}));var W=(0,w.useCallback)(o()(a()().mark((function e(){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.navigator.clipboard.writeText(x);case 2:s.success("".concat($));case 3:case"end":return e.stop()}}),e)}))),[x]),L=(0,w.useCallback)((function(){var e="data:,".concat(x),t=document.createElement("a");t.href=e,t.download="".concat(A,"@").concat(D,"_threshold@").concat(M,"_expiration@").concat(S,"_msig.json"),t.click(),s.info("".concat(V)),p(!1)}),[x,S,M,A,D]);return(0,F.jsxs)(N.Y,{formRef:u,title:H,open:d,onOpenChange:function(e){p(e)},submitter:{render:function(e,t){return[t[0],(0,F.jsx)(y.ZP,{onClick:W,children:Y},"copy"),(0,F.jsx)(y.ZP,{type:"primary",onClick:L,children:J},"export")]}},layout:"vertical",width:"700px",modalProps:{style:{top:25}},children:[(0,F.jsx)(K.Z,{name:"content",fieldProps:{autoSize:{minRows:5},allowClear:!1,autoFocus:!1,onChange:void 0,value:x,size:"large"}}),i]})})),ee=(0,w.memo)(X);D().extend(I());var te=w.forwardRef((function(e,t){var r=k.ZP.useMessage(),n=c()(r,2),s=n[0],i=n[1],u=(0,b.useSelector)((function(e){return e.global.account})),m=(0,b.useSelector)((function(e){return e.global.session})),p=(0,b.useSelector)((function(e){return e.global.privateKey})),h=(0,b.useSelector)((function(e){return e.contract.batchActions})),j=(0,w.useRef)(),S=(0,b.useIntl)(),P=S.formatMessage({id:"contract.intlCreateTransaction"}),C=S.formatMessage({id:"common.intlInputException"}),_=S.formatMessage({id:"account.intlPermissionNotExist"}),M=S.formatMessage({id:"contract.intlCreate"}),Z=S.formatMessage({id:"contract.intlCreateAndSign"}),z=S.formatMessage({id:"contract.intlExpiration"}),O=S.formatMessage({id:"contract.intlFreeCpu"}),A=S.formatMessage({id:"contract.intlAccount"}),E=S.formatMessage({id:"contract.intlPermission"}),T=S.formatMessage({id:"contract.intlFreeCpuLimit"}),q=S.formatMessage({id:"common.intlPleaseConnectWallet"}),R=S.formatMessage({id:"common.intlPleaseConnectNetwork"}),I=(0,w.useRef)(),$=(0,w.useState)(!1),Y=c()($,2),J=Y[0],H=Y[1],V=(0,w.useCallback)((function(){H(!0)}),[]);(0,w.useImperativeHandle)(t,(function(){return{handleOpen:V}}));var B=(0,w.useCallback)(function(){var e=o()(a()().mark((function e(t){var r,n,o,i,g,x,b,k,y,S,P,w,N,C,M,Z,z,O,F,A,E,I,$,Y,J,H,V,B,W,L,Q,G,K;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m&&m.broadcast){e.next=5;break}return s.error("".concat(q)),e.abrupt("return");case 5:if(u){e.next=8;break}return s.error("".concat(R)),e.abrupt("return");case 8:return r=t.account,n=t.permission,o=D()().add(t.expiration,"minutes").utc().format("YYYY-MM-DDTHH:mm:ss"),i=t.freeCpu,g=1,e.next=15,(0,f.zI)(m.client.v1.chain.get_account(r));case 15:if(x=e.sent,b=c()(x,2),k=b[0],y=b[1],!k){e.next=24;break}return s.error(k),e.abrupt("return",!1);case 24:S=!1,P=0;case 26:if(!(P<y.permissions.length)){e.next=34;break}if(y.permissions[P].perm_name.toString()!==n){e.next=31;break}return g=y.permissions[P].required_auth.keyThreshold,S=!0,e.abrupt("break",34);case 31:P++,e.next=26;break;case 34:if(S){e.next=37;break}return s.error("".concat(_)),e.abrupt("return",!1);case 37:if(!i||"active"===n||"owner"===n){e.next=40;break}return s.error("".concat(T)),e.abrupt("return",!1);case 40:return w=[],N=[],h.forEach((function(e){var t=JSON.parse(e.typedAction);t.authorization.length?(t.authorization=[{actor:r,permission:n}],w.push(t)):N.push(t)})),C={account:"dfsfreecpu11",name:"freecpu",authorization:[{actor:"dfs.service",permission:"cpu"},{actor:r,permission:n}],data:f._9.from({user:r})},M=v.aU.from(C),O=[],e.next=48,m.client.v1.chain.get_info();case 48:F=e.sent,A=F.getTransactionHeader(),i?(Z=v.YW.from(d()(d()({},A),{},{expiration:o,actions:[M].concat(w),context_free_actions:N})),O[0]=p.signDigest(Z.signingDigest(m.chain.id.toString()))):Z=v.YW.from(d()(d()({},A),{},{expiration:o,actions:w,context_free_actions:N})),E=[],I=new Set,Z.actions.forEach((function(e){I.add(e.account.toString())})),Z.context_free_actions.forEach((function(e){I.add(e.account.toString())})),$=U()(I),e.prev=56,$.s();case 58:if((Y=$.n()).done){e.next=74;break}return J=Y.value,e.next=62,(0,f.zI)(m.client.v1.chain.get_abi(J));case 62:if(H=e.sent,V=c()(H,2),B=V[0],W=V[1],!B){e.next=71;break}return s.error(B),e.abrupt("return",!1);case 71:E.push({abi:v.dL.from(W.abi),account:v.VG.from(J)});case 72:e.next=58;break;case 74:e.next=79;break;case 76:e.prev=76,e.t0=e.catch(56),$.e(e.t0);case 79:return e.prev=79,$.f(),e.finish(79);case 82:return e.next=84,(0,f.zI)(m.transact({transaction:Z},{broadcast:!1,transactPlugins:[],abis:E}));case 84:if(L=e.sent,Q=c()(L,2),G=Q[0],K=Q[1],!G){e.next=91;break}return s.error(G),e.abrupt("return",!1);case 91:z=v.uQ.from(d()(d()({},Z),{},{signatures:[].concat(O,l()(K.signatures))})),j.current.handleOpen(z,o,r,n,g);case 93:case"end":return e.stop()}}),e,null,[[56,76,79,82]])})));return function(t){return e.apply(this,arguments)}}(),[m,p,u,h]),W=(0,w.useCallback)(o()(a()().mark((function e(){var t,r,n,o,i,u,l,g,x,b,k,y,S,P,w,N,C,M,Z,z,O,F,A;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(t=I.current)||void 0===t||t.validateFields(),n=null===(r=I.current)||void 0===r?void 0:r.getFieldsValue(),o=n.account,i=n.permission,u=D()().add(n.expiration,"minutes").utc().format("YYYY-MM-DDTHH:mm:ss"),l=n.freeCpu,g=1,e.next=9,(0,f.zI)(m.client.v1.chain.get_account(o));case 9:if(x=e.sent,b=c()(x,2),k=b[0],y=b[1],!k){e.next=18;break}return s.error(k),e.abrupt("return",!1);case 18:S=!1,P=0;case 20:if(!(P<y.permissions.length)){e.next=28;break}if(y.permissions[P].perm_name.toString()!==i){e.next=25;break}return g=y.permissions[P].required_auth.keyThreshold,S=!0,e.abrupt("break",28);case 25:P++,e.next=20;break;case 28:if(S){e.next=31;break}return s.error("".concat(_)),e.abrupt("return",!1);case 31:if(!l||"active"===i||"owner"===i){e.next=34;break}return s.error("".concat(T)),e.abrupt("return",!1);case 34:return w=[],N=[],h.forEach((function(e){var t=JSON.parse(e.typedAction);t.authorization.length?(t.authorization=[{actor:o,permission:i}],w.push(t)):N.push(t)})),C={account:"dfsfreecpu11",name:"freecpu",authorization:[{actor:"dfs.service",permission:"cpu"},{actor:o,permission:i}],data:f._9.from({user:o})},M=v.aU.from(C),e.next=41,m.client.v1.chain.get_info();case 41:O=e.sent,F=O.getTransactionHeader(),l?(Z=v.YW.from(d()(d()({},F),{},{expiration:u,actions:[M].concat(w),context_free_actions:N})),A=p.signDigest(Z.signingDigest(m.chain.id.toString())),z=v.uQ.from(d()(d()({},Z),{},{signatures:[A]}))):(Z=v.YW.from(d()(d()({},F),{},{expiration:u,actions:w,context_free_actions:N})),z=v.uQ.from(d()(d()({},Z),{},{signatures:[]}))),j.current.handleOpen(z,u,o,i,g);case 45:case"end":return e.stop()}}),e)}))),[m,p,h]);return(0,F.jsxs)(N.Y,{formRef:I,title:P,open:J,onFinish:B,onOpenChange:function(e){H(e)},initialValues:{freeCpu:!0,expiration:60},submitter:{searchConfig:{submitText:Z},render:function(e,t){return[t[0],(0,F.jsx)(y.ZP,{onClick:W,children:M},"import"),t[1]]}},layout:"vertical",width:"400px",children:[(0,F.jsx)(x.Z,{name:"account",label:A,placeholder:"example: dfsdeveloper",fieldProps:{autoFocus:!1,size:"large"},rules:[{required:!0,whitespace:!0,message:"".concat(C),pattern:/^[a-z1-5.]{1,12}$/}]}),(0,F.jsx)(x.Z,{name:"permission",label:E,placeholder:"example: active",fieldProps:{autoFocus:!1,size:"large"},rules:[{required:!0,whitespace:!0,message:"".concat(C),pattern:/^[a-z1-5.]{1,12}$/}]}),(0,F.jsx)(G,{name:"expiration",label:z,marks:{10:"10",30:"30",60:"60"},min:10,max:60,fieldProps:{autoFocus:!1},rules:[{required:!0,whitespace:!0,message:"".concat(C),pattern:/^\d+$/}]}),(0,F.jsx)(g.Z,{name:"freeCpu",label:O}),(0,F.jsx)(ee,{ref:j}),i]})})),re=(0,w.memo)(te),ne=r(72004),ae=r.n(ne),se=r(12444),oe=r.n(se),ie=r(31996),ce=r.n(ie),ue=r(26037),le=r.n(ue),me=r(9783),de=r.n(me);D().extend(I());var pe=w.forwardRef((function(e,t){var r=k.ZP.useMessage(),n=c()(r,2),s=n[0],i=n[1],u=(0,w.useRef)(),l=(0,w.useState)(!1),m=c()(l,2),d=m[0],p=m[1],f=(0,w.useState)(""),g=c()(f,2),x=g[0],h=g[1],v=(0,w.useState)(""),j=c()(v,2),S=j[0],P=j[1],C=(0,w.useState)([]),_=c()(C,2),M=_[0],Z=_[1],z=(0,b.useIntl)(),O=z.formatMessage({id:"common.intlCopySuccess"}),A=z.formatMessage({id:"common.intlCopy"}),E=z.formatMessage({id:"common.intlExport"}),T=z.formatMessage({id:"contract.intlSignedTransaction"}),q=z.formatMessage({id:"contract.intlExported"}),D=(0,w.useCallback)((function(e,t,r){var n;null===(n=u.current)||void 0===n||n.setFieldValue("content",JSON.stringify(e,null,2)),h(JSON.stringify(e,null,2)),P(t),Z(r),p(!0)}),[]);(0,w.useImperativeHandle)(t,(function(){return{handleOpen:D}}));var R=(0,w.useCallback)(o()(a()().mark((function e(){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.navigator.clipboard.writeText(x);case 2:s.success("".concat(O));case 3:case"end":return e.stop()}}),e)}))),[x]),I=(0,w.useCallback)((function(){var e="";M.forEach((function(t){e+="".concat(t.actor,"@").concat(t.permission,"_")})),e="[".concat(e.slice(0,-1),"]");var t="data:,".concat(x),r=document.createElement("a");r.href=t,r.download="".concat(e,"_expiration@").concat(S,"_msig.json"),r.click(),s.info("".concat(q)),p(!1)}),[x,S,M]);return(0,F.jsxs)(N.Y,{formRef:u,title:T,open:d,onOpenChange:function(e){p(e)},submitter:{render:function(e,t){return[t[0],(0,F.jsx)(y.ZP,{onClick:R,children:A},"copy"),(0,F.jsx)(y.ZP,{type:"primary",onClick:I,children:E},"export")]}},layout:"vertical",width:"700px",modalProps:{style:{top:25}},children:[(0,F.jsx)(K.Z,{name:"content",fieldProps:{autoSize:{minRows:5},allowClear:!1,autoFocus:!1,onChange:void 0,value:x,size:"large"}}),i]})})),fe=(0,w.memo)(pe);D().extend(I());var ge=function(e){ce()(r,e);var t=le()(r);function r(){return oe()(this,r),t.apply(this,arguments)}return ae()(r)}(v.AU);de()(ge,"abiName","freecpu"),de()(ge,"abiFields",[{name:"user",type:v.VG}]);var xe=w.forwardRef((function(e,t){var r=k.ZP.useMessage(),n=c()(r,2),s=n[0],i=n[1],u=(0,b.useSelector)((function(e){return e.global.account})),m=(0,b.useSelector)((function(e){return e.global.session})),p=(0,b.useSelector)((function(e){return e.global.privateKey})),h=(0,b.useSelector)((function(e){return e.contract.batchActions})),P=(0,w.useRef)(),M=(0,w.useRef)(),Z=(0,w.useState)(!1),z=c()(Z,2),O=z[0],A=z[1],E=(0,b.useIntl)(),T=E.formatMessage({id:"contract.intlCreateTransaction"}),q=E.formatMessage({id:"common.intlInputException"}),R=E.formatMessage({id:"account.intlPermissionNotExist"}),I=E.formatMessage({id:"contract.intlCreate"}),$=E.formatMessage({id:"contract.intlExpiration"}),Y=E.formatMessage({id:"contract.intlPermission"}),J=E.formatMessage({id:"common.intlPleaseConnectWallet"}),H=E.formatMessage({id:"common.intlPleaseConnectNetwork"}),V=E.formatMessage({id:"contract.intlCreateAndSign"}),B=E.formatMessage({id:"contract.intlFreeCpu"}),W=E.formatMessage({id:"contract.intlFreeCpuLimit"}),L=E.formatMessage({id:"contract.intlRequested"}),Q=(0,w.useCallback)((function(){A(!0)}),[]);(0,w.useImperativeHandle)(t,(function(){return{handleOpen:Q}}));var K=(0,w.useCallback)(function(){var e=o()(a()().mark((function e(t){var r,n,o,i,g,x,b,k,y,j,S,w,N,C,_,M,Z,z,O,F,A,E,T,q,I,$,Y,V,B,L,Q,G;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m&&m.broadcast){e.next=5;break}return s.error("".concat(J)),e.abrupt("return");case 5:if(u){e.next=8;break}return s.error("".concat(H)),e.abrupt("return");case 8:r=t.freeCpu,n=D()().add(t.expiration,"minutes").utc().format("YYYY-MM-DDTHH:mm:ss"),o=[],t.requested.forEach((function(e){o.find((function(t){return t.actor===e.requestedAccount&&t.permission===e.requestedPermission}))||o.push({actor:e.requestedAccount,permission:e.requestedPermission})})),i=0;case 13:if(!(i<o.length)){e.next=40;break}return e.next=16,(0,f.zI)(m.client.v1.chain.get_account(o[i].actor));case 16:if(g=e.sent,x=c()(g,2),b=x[0],k=x[1],!b){e.next=25;break}return s.error(b),e.abrupt("return",!1);case 25:y=!1,j=0;case 27:if(!(j<k.permissions.length)){e.next=34;break}if(k.permissions[j].perm_name.toString()!==o[i].permission){e.next=31;break}return y=!0,e.abrupt("break",34);case 31:j++,e.next=27;break;case 34:if(y){e.next=37;break}return s.error("".concat(R)),e.abrupt("return",!1);case 37:i++,e.next=13;break;case 40:if(!r){e.next=44;break}if("active"===o[0].permission||"owner"===o[0].permission){e.next=44;break}return s.error("".concat(W)),e.abrupt("return",!1);case 44:return S=[],w=[],h.forEach((function(e){var t=JSON.parse(e.typedAction);t.authorization.length?(t.authorization=o,S.push(t)):w.push(t)})),N={account:"dfsfreecpu11",name:"freecpu",authorization:[{actor:"dfs.service",permission:"cpu"},o[0]],data:ge.from({user:o[0].actor})},C=v.aU.from(N),Z=[],e.next=52,m.client.v1.chain.get_info();case 52:z=e.sent,O=z.getTransactionHeader(),r?(_=v.YW.from(d()(d()({},O),{},{expiration:n,actions:[C].concat(S),context_free_actions:w})),Z[0]=p.signDigest(_.signingDigest(m.chain.id.toString()))):_=v.YW.from(d()(d()({},O),{},{expiration:n,actions:S,context_free_actions:w})),F=[],A=new Set,_.actions.forEach((function(e){A.add(e.account.toString())})),E=U()(A),e.prev=59,E.s();case 61:if((T=E.n()).done){e.next=77;break}return q=T.value,e.next=65,(0,f.zI)(m.client.v1.chain.get_abi(q));case 65:if(I=e.sent,$=c()(I,2),Y=$[0],V=$[1],!Y){e.next=74;break}return s.error(Y),e.abrupt("return",!1);case 74:F.push({abi:v.dL.from(V.abi),account:v.VG.from(q)});case 75:e.next=61;break;case 77:e.next=82;break;case 79:e.prev=79,e.t0=e.catch(59),E.e(e.t0);case 82:return e.prev=82,E.f(),e.finish(82);case 85:return e.next=87,(0,f.zI)(m.transact({transaction:_},{broadcast:!1,transactPlugins:[],abis:F}));case 87:if(B=e.sent,L=c()(B,2),Q=L[0],G=L[1],!Q){e.next=94;break}return s.error(Q),e.abrupt("return",!1);case 94:M=v.uQ.from(d()(d()({},_),{},{signatures:[].concat(Z,l()(G.signatures))})),P.current.handleOpen(M,n,o);case 96:case"end":return e.stop()}}),e,null,[[59,79,82,85]])})));return function(t){return e.apply(this,arguments)}}(),[m,u]),X=(0,w.useCallback)(o()(a()().mark((function e(){var t,r,n,o,i,u,l,g,x,b,k,y,j,S,w,N,C,_,Z,z,O,F;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null===(t=M.current)||void 0===t||t.validateFields(),n=null===(r=M.current)||void 0===r?void 0:r.getFieldsValue(),o=n.freeCpu,i=D()().add(n.expiration,"minutes").utc().format("YYYY-MM-DDTHH:mm:ss"),u=[],n.requested.forEach((function(e){u.find((function(t){return t.actor===e.requestedAccount&&t.permission===e.requestedPermission}))||u.push({actor:e.requestedAccount,permission:e.requestedPermission})})),l=0;case 7:if(!(l<u.length)){e.next=34;break}return e.next=10,(0,f.zI)(m.client.v1.chain.get_account(u[l].actor));case 10:if(g=e.sent,x=c()(g,2),b=x[0],k=x[1],!b){e.next=19;break}return s.error(b),e.abrupt("return",!1);case 19:y=!1,j=0;case 21:if(!(j<k.permissions.length)){e.next=28;break}if(k.permissions[j].perm_name.toString()!==u[l].permission){e.next=25;break}return y=!0,e.abrupt("break",28);case 25:j++,e.next=21;break;case 28:if(y){e.next=31;break}return s.error("".concat(R)),e.abrupt("return",!1);case 31:l++,e.next=7;break;case 34:if(!o){e.next=38;break}if("active"===u[0].permission||"owner"===u[0].permission){e.next=38;break}return s.error("".concat(W)),e.abrupt("return",!1);case 38:return S=[],w=[],h.forEach((function(e){var t=JSON.parse(e.typedAction);t.authorization.length?(t.authorization=u,S.push(t)):w.push(t)})),N={account:"dfsfreecpu11",name:"freecpu",authorization:[{actor:"dfs.service",permission:"cpu"},u[0]],data:ge.from({user:u[0].actor})},C=v.aU.from(N),e.next=45,m.client.v1.chain.get_info();case 45:z=e.sent,O=z.getTransactionHeader(),o?(_=v.YW.from(d()(d()({},O),{},{expiration:i,actions:[C].concat(S),context_free_actions:w})),F=p.signDigest(_.signingDigest(m.chain.id.toString())),Z=v.uQ.from(d()(d()({},_),{},{signatures:[F]}))):(_=v.YW.from(d()(d()({},O),{},{expiration:i,actions:S,context_free_actions:w})),Z=v.uQ.from(d()(d()({},_),{},{signatures:[]}))),P.current.handleOpen(Z,i,u);case 49:case"end":return e.stop()}}),e)}))),[m,p]);return(0,F.jsxs)(N.Y,{formRef:M,title:T,open:O,onFinish:K,onOpenChange:function(e){A(e)},initialValues:{freeCpu:!0,expiration:60},submitter:{searchConfig:{submitText:V},render:function(e,t){return[t[0],(0,F.jsx)(y.ZP,{onClick:X,children:I},"import"),t[1]]}},layout:"vertical",width:"500px",modalProps:{style:{top:25}},children:[(0,F.jsx)(C.Z,{bordered:!0,bodyStyle:{paddingInline:"12px",paddingBlock:"6px"},className:"mb-3 requestedAccount",children:(0,F.jsx)(_.u,{name:"requested",min:1,creatorButtonProps:!1,itemContainerRender:function(e){return(0,F.jsx)("div",{children:e})},initialValue:[{requestedAccount:"",permission:""}],children:(0,F.jsxs)(j.Z,{gutter:10,children:[(0,F.jsx)(S.Z,{lg:{span:"16"},md:{span:"16"},sm:{span:"16"},xs:{span:"16"},children:(0,F.jsx)(x.Z,{name:"requestedAccount",label:L,placeholder:"ex: dfsdeveloper",fieldProps:{autoFocus:!1,size:"large"},rules:[{required:!0,whitespace:!0,message:"".concat(q),pattern:/^[a-z1-5.]{1,12}$/}]})}),(0,F.jsx)(S.Z,{lg:{span:"8"},md:{span:"8"},sm:{span:"8"},xs:{span:"8"},children:(0,F.jsx)(x.Z,{name:"requestedPermission",label:Y,placeholder:"ex: active",fieldProps:{autoFocus:!1,size:"large"},rules:[{required:!0,whitespace:!0,message:"".concat(q),pattern:/^[a-z1-5.]{1,12}$/}]})})]})})}),(0,F.jsx)(G,{name:"expiration",label:$,marks:{10:"10",30:"30",60:"60"},min:10,max:60,fieldProps:{autoFocus:!1},rules:[{required:!0,whitespace:!0,message:"".concat(q),pattern:/^\d+$/}]}),(0,F.jsx)(g.Z,{name:"freeCpu",label:B}),(0,F.jsx)(fe,{ref:P}),i]})})),he=(0,w.memo)(xe),be=function(){var e=(0,b.useDispatch)(),t=(0,b.useSelector)((function(e){return e.contract.batchActions})),r=(0,b.useSelector)((function(e){return e.global.session})),n=(0,b.useSelector)((function(e){return e.global.account})),s=k.ZP.useMessage(),i=c()(s,2),u=i[0],l=i[1],m=(0,w.useRef)(),d=(0,w.useRef)(),g=(0,w.useRef)(),x=(0,b.useIntl)(),v=x.formatMessage({id:"contract.intlBatchActions"}),j=x.formatMessage({id:"common.intlTxSuccess"}),S=x.formatMessage({id:"common.intlTxFail"}),P=x.formatMessage({id:"common.intlPleaseConnectWallet"}),N=x.formatMessage({id:"common.intlPleaseConnectNetwork"}),C=x.formatMessage({id:"contract.intlMsigPubkey"}),_=x.formatMessage({id:"contract.intlMsigProposal"}),M=x.formatMessage({id:"contract.intlMsigTransaction"}),Z=(0,w.useCallback)(o()(a()().mark((function e(){var s,o,i,l,m,d;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r&&r.broadcast){e.next=5;break}return u.error("".concat(P)),e.abrupt("return");case 5:if(n){e.next=8;break}return u.error("".concat(N)),e.abrupt("return");case 8:return s=[],o=[],t.forEach((function(e){var t=JSON.parse(e.typedAction);t.authorization.length?s.push(t):o.push(t)})),e.next=13,(0,f.zI)(r.transact({actions:s,context_free_actions:o}));case 13:i=e.sent,l=c()(i,2),m=l[0],d=l[1],m?u.error(m):d&&d.response?u.success("".concat(j)):u.error("".concat(S));case 18:case"end":return e.stop()}}),e)}))),[r,n,t]),z=(0,w.useCallback)((function(r){var n=t.filter((function(e,t){return t!==r}));e(p.N.setBatchActions(n))}),[t]),O=(0,w.useCallback)((function(){e(p.N.setBatchActions([]))}),[]);return(0,F.jsxs)("div",{className:"tab-action",children:[(0,F.jsx)("div",{className:"hardline text-lg font-semibold mb-3 mt-3",children:"".concat(v,"(").concat(t.length,")")}),(0,F.jsx)("div",{className:"px-[13px]",children:t.map((function(e,t){return(0,F.jsx)("div",{className:"mb-2",children:(0,F.jsxs)("div",{style:{background:"#e6f4ff",border:"1px solid #91caff",boxSizing:"border-box",margin:"0",padding:"8px 12px",color:"rgba(0, 0, 0, 0.88)",fontSize:"14px",lineHeight:"1.5714285714285714",listStyle:"none",position:"relative",display:"flex",alignItems:"center",wordWrap:"break-word",borderRadius:"8px"},children:[(0,F.jsx)("div",{style:{flex:1,minWidth:0,boxSizing:"border-box"},children:e.untypedAction}),(0,F.jsx)("button",{type:"button",onClick:function(){return z(t)},style:{marginInlineStart:"8px",padding:0,overflow:"hidden",fontSize:"12px",lineHeight:"12px",backgroundColor:"transparent",border:"none",outline:"none",cursor:"pointer"},children:(0,F.jsx)("span",{style:{color:"rgba(0, 0, 0, 0.45)",transition:"color 0.2s"},children:(0,F.jsx)("svg",{fillRule:"evenodd",viewBox:"64 64 896 896",focusable:"false",width:"1em",height:"1em",fill:"currentColor",children:(0,F.jsx)("path",{d:"M799.86 166.31c.02 0 .04.02.08.06l57.69 57.7c.04.03.05.05.06.08a.12.12 0 010 .06c0 .03-.02.05-.06.09L569.93 512l287.7 287.7c.04.04.05.06.06.09a.12.12 0 010 .07c0 .02-.02.04-.06.08l-57.7 57.69c-.03.04-.05.05-.07.06a.12.12 0 01-.07 0c-.03 0-.05-.02-.09-.06L512 569.93l-287.7 287.7c-.04.04-.06.05-.09.06a.12.12 0 01-.07 0c-.02 0-.04-.02-.08-.06l-57.69-57.7c-.04-.03-.05-.05-.06-.07a.12.12 0 010-.07c0-.03.02-.05.06-.09L454.07 512l-287.7-287.7c-.04-.04-.05-.06-.06-.09a.12.12 0 010-.07c0-.02.02-.04.06-.08l57.7-57.69c.03-.04.05-.05.07-.06a.12.12 0 01.07 0c.03 0 .05.02.09.06L512 454.07l287.7-287.7c.04-.04.06-.05.09-.06a.12.12 0 01.07 0z"})})})})]})},t)}))}),(0,F.jsx)(h.A,{className:"pl-[13px]",layout:"vertical",onFinish:o()(a()().mark((function e(){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Z());case 1:case"end":return e.stop()}}),e)}))),onReset:O,submitter:{render:function(e,t){return[t[1],t[0],(0,F.jsx)(y.ZP,{onClick:o()(a()().mark((function e(){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d.current.handleOpen();case 1:case"end":return e.stop()}}),e)}))),children:_},"msigProposal"),(0,F.jsx)(y.ZP,{onClick:o()(a()().mark((function e(){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m.current.handleOpen();case 1:case"end":return e.stop()}}),e)}))),children:C},"msigPubkey"),(0,F.jsx)(y.ZP,{onClick:o()(a()().mark((function e(){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g.current.handleOpen();case 1:case"end":return e.stop()}}),e)}))),children:M},"msigTransaction")]}}}),(0,F.jsx)(W,{ref:d}),(0,F.jsx)(re,{ref:m}),(0,F.jsx)(he,{ref:g}),l]})},ve=(0,w.memo)(be),ke=function(){var e=(0,b.useSelector)((function(e){return e.contract.decodeData})),t=(0,b.useIntl)().formatMessage({id:"contract.intlDecodeResult"});return(0,F.jsxs)("div",{className:"tab-action",children:[(0,F.jsx)("div",{className:"hardline text-lg font-semibold mb-3 mt-3",children:t}),(0,F.jsx)("div",{className:"px-[13px]",children:(0,F.jsx)("pre",{children:e})})]})},ye=(0,w.memo)(ke),je=function(){var e=(0,b.useSelector)((function(e){return e.contract.encodeData})),t=(0,b.useIntl)().formatMessage({id:"contract.intlEncodeResult"});return(0,F.jsxs)("div",{className:"tab-action",children:[(0,F.jsx)("div",{className:"hardline text-lg font-semibold mb-3 mt-3",children:t}),(0,F.jsxs)("div",{className:"px-[13px]",children:[(0,F.jsx)("div",{className:"text-base font-semibold",children:"Action:"}),(0,F.jsx)("pre",{children:e.action}),(0,F.jsx)("div",{className:"text-base font-semibold",children:"Transaction:"}),(0,F.jsx)("pre",{children:e.transaction}),(0,F.jsx)("div",{className:"text-base font-semibold",children:"SigningData:"}),(0,F.jsx)("div",{className:" break-words mb-3",children:e.signingData}),(0,F.jsx)("div",{className:"text-base font-semibold",children:"SigningDigest:"}),(0,F.jsx)("pre",{children:e.signingDigest}),(0,F.jsx)("div",{className:"text-base font-semibold",children:"SignedTransaction:"}),(0,F.jsx)("pre",{children:e.signedTransaction}),(0,F.jsx)("div",{className:"text-base font-semibold",children:"PackedTransaction:"}),(0,F.jsx)("pre",{children:e.packedTransaction}),(0,F.jsx)("div",{className:"text-base font-semibold",children:"Transaction ID:"}),(0,F.jsx)("pre",{children:e.transactionId})]})]})},Se=(0,w.memo)(je),Pe=w.forwardRef((function(e,t){var r=(0,b.useDispatch)(),n=k.ZP.useMessage(),s=c()(n,2),i=s[0],u=s[1],l=(0,b.useSelector)((function(e){return e.contract.abi})),m=(0,b.useSelector)((function(e){return e.contract.actionSelection})),d=(0,b.useIntl)(),f=d.formatMessage({id:"contract.intlDecode"}),g=d.formatMessage({id:"common.intlInputException"}),x=d.formatMessage({id:"contract.intlDecodeSuccess"}),h=(0,w.useRef)(),y=(0,w.useState)(!1),j=c()(y,2),S=j[0],P=j[1],C=(0,w.useCallback)((function(){P(!0)}),[]);(0,w.useImperativeHandle)(t,(function(){return{handleOpen:C}}));var _=(0,w.useCallback)(function(){var e=o()(a()().mark((function e(t){var n,s;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=v.ei.decode({data:t.input,abi:l,type:m}),s=JSON.stringify(n,null,2),r(p.N.setDecodeData(s)),r(p.N.setBatchActions([])),r(p.N.setEncodeData(void 0)),i.success("".concat(x)),e.abrupt("return",!0);case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0.message),i.error(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),[l,m]);return(0,F.jsxs)(N.Y,{formRef:h,title:f,open:S,onFinish:_,onOpenChange:function(e){P(e)},layout:"horizontal",width:"600px",children:[(0,F.jsx)(K.Z,{placeholder:"example: 000000000090b1ca10270000000000000444465300000000",name:"input",fieldProps:{autoSize:{minRows:5},allowClear:!0,autoFocus:!1,size:"large"},rules:[{required:!0,whitespace:!0,message:"".concat(g),pattern:/^[a-fA-F0-9]+$/}]}),u]})})),we=(0,w.memo)(Pe);D().extend(I());var Ne=w.forwardRef((function(e,t){var r=k.ZP.useMessage(),n=c()(r,2),s=n[0],i=n[1],u=(0,b.useSelector)((function(e){return e.contract.abi})),l=(0,b.useSelector)((function(e){return e.contract.actionSelection})),m=(0,b.useSelector)((function(e){return e.global.account})),p=(0,b.useSelector)((function(e){return e.global.session})),g=(0,b.useSelector)((function(e){return e.contract.fields})),h=(0,b.useSelector)((function(e){return e.contract.contract})),y=(0,w.useState)(!1),P=c()(y,2),M=P[0],Z=P[1],z=(0,w.useState)(),O=c()(z,2),A=O[0],E=O[1],q=(0,w.useState)(new Set),R=c()(q,2),I=R[0],J=R[1],H=(0,w.useRef)(),B=(0,w.useRef)(),W=(0,w.useState)(!1),L=c()(W,2),U=L[0],Q=L[1],G=(0,b.useIntl)(),K=G.formatMessage({id:"contract.intlCreateProposal"}),X=G.formatMessage({id:"common.intlInputException"}),ee=G.formatMessage({id:"account.intlPermissionNotExist"}),te=G.formatMessage({id:"contract.intlCreate"}),re=G.formatMessage({id:"contract.intlExpirationError"}),ne=G.formatMessage({id:"contract.intlExpiration"}),ae=G.formatMessage({id:"contract.intlPermission"}),se=G.formatMessage({id:"common.intlTxSuccess"}),oe=G.formatMessage({id:"common.intlTxFail"}),ie=G.formatMessage({id:"common.intlPleaseConnectWallet"}),ce=G.formatMessage({id:"common.intlPleaseConnectNetwork"}),ue=G.formatMessage({id:"contract.intlProposer"}),le=G.formatMessage({id:"contract.intlProposalName"}),me=G.formatMessage({id:"contract.intlMsigAccount"}),de=G.formatMessage({id:"contract.intlRequested"}),pe=G.formatMessage({id:"contract.intlMsigAccountWeightInsufficient"}),fe=G.formatMessage({id:"contract.intlProposalNamePlaceholder"}),ge=(0,w.useCallback)((function(e,t){E(e),J(t),Q(!0)}),[]);(0,w.useImperativeHandle)(t,(function(){return{handleOpen:ge}}));var xe=(0,w.useCallback)(function(){var e=o()(a()().mark((function e(t){var r,n,o,i,x,b,k,y,j,S,P,w,N,C,_,M,Z,z,O,F,E,T,q,R,$,Y,J,H,V,B,W,L,U;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p&&p.broadcast){e.next=5;break}return s.error("".concat(ie)),e.abrupt("return");case 5:if(m){e.next=8;break}return s.error("".concat(ce)),e.abrupt("return");case 8:return n=t.proposer,o=t.proposalName,i=t.msigAccount,x=t.msigPermission,b=[],t.requested.forEach((function(e){b.find((function(t){return t.actor===e.requestedAccount&&t.permission===e.requestedPermission}))||b.push({actor:e.requestedAccount,permission:e.requestedPermission})})),k=D()(t.expiration).utc().format("YYYY-MM-DDTHH:mm:ss"),e.next=17,(0,f.zI)(p.client.v1.chain.get_account(i));case 17:if(y=e.sent,j=c()(y,2),S=j[0],P=j[1],!S){e.next=26;break}return s.error(S),e.abrupt("return",!1);case 26:w=!1,N=0;case 28:if(!(N<P.permissions.length)){e.next=51;break}if(P.permissions[N].perm_name.toString()!==x){e.next=48;break}C=P.permissions[N].required_auth.keyThreshold,_=P.permissions[N].required_auth.accounts,M=0,Z=0;case 34:if(!(Z<b.length)){e.next=43;break}for(z=!1,O=0;O<_.length;O++)b[Z].actor===_[O].permission.actor.toString()&&b[Z].permission===_[O].permission.permission.toString()&&(z=!0,M+=_[O].weight.toNumber());if(z){e.next=40;break}return s.error("".concat(ee)),e.abrupt("return",!1);case 40:Z++,e.next=34;break;case 43:if(!(M<C)){e.next=46;break}return s.error("".concat(pe)),e.abrupt("return",!1);case 46:return w=!0,e.abrupt("break",51);case 48:N++,e.next=28;break;case 51:if(w){e.next=54;break}return s.error("".concat(ee)),e.abrupt("return",!1);case 54:return F=null===(r=A.current)||void 0===r?void 0:r.getFieldsValue(),E=/.+\?$/,T=/.+\$$/,q=Object.assign({},F),Object.keys(q).forEach((function(e){I.has(e)&&(q[e]=JSON.parse(q[e]))})),Object.keys(q).forEach((function(e){var t=g.find((function(t){return t.name===e}));t&&E.test(t.type)?void 0!==q[e]&&String(q[e]).trim()||(q[e]=null):t&&T.test(t.type)&&(q[e]="")})),R={account:h,name:l,authorization:[{actor:i,permission:x}],data:q},$=v.aU.from(R,u),e.next=64,p.client.v1.chain.get_info();case 64:return Y=e.sent,J=Y.getTransactionHeader(),H=v.YW.from(d()(d()({},J),{},{expiration:k,actions:[$]})),V={action:{account:"eosio.msig",name:"propose",authorization:[p.permissionLevel],data:{proposer:n,proposal_name:o,requested:b,trx:H.toJSON()}}},e.next=70,(0,f.zI)(p.transact(V));case 70:return B=e.sent,W=c()(B,2),L=W[0],U=W[1],L?s.error(L):U&&U.response?s.success("".concat(se)):s.error("".concat(oe)),e.abrupt("return",!0);case 76:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[p,A,I,g,h,m]),he=(0,w.useCallback)(o()(a()().mark((function e(){var t,r,n,o,i,u,l,m,d,g,x;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Z(!0),r=null===(t=B.current)||void 0===t?void 0:t.getFieldsValue(),n=r.msigAccount,o=r.msigPermission,i={},e.next=7,(0,f.zI)(p.client.v1.chain.get_account(n));case 7:if(u=e.sent,l=c()(u,2),m=l[0],d=l[1],!m){e.next=17;break}return s.error(m),Z(!1),e.abrupt("return",!1);case 17:g=!1,x=0;case 19:if(!(x<d.permissions.length)){e.next=27;break}if(d.permissions[x].perm_name.toString()!==o){e.next=24;break}return i=d.permissions[x].required_auth,g=!0,e.abrupt("break",27);case 24:x++,e.next=19;break;case 27:if(g){e.next=31;break}return s.error("".concat(ee)),Z(!1),e.abrupt("return",!1);case 31:Z(!1),H.current.handleOpen(i,B);case 33:case"end":return e.stop()}}),e)}))),[p]);return(0,F.jsxs)(N.Y,{formRef:B,title:K,open:U,onFinish:xe,onOpenChange:function(e){Q(e)},initialValues:{proposer:m?m.accountName.toString():""},submitter:{searchConfig:{submitText:te},render:function(e,t){return[t[0],t[1]]}},layout:"vertical",width:"500px",modalProps:{style:{top:25}},children:[(0,F.jsx)(x.Z,{disabled:!0,name:"proposer",label:ue,placeholder:"example: dfsdeveloper",fieldProps:{autoFocus:!1,size:"large"},rules:[{required:!0,whitespace:!0,message:"".concat(X),pattern:/^[a-z1-5.]{1,12}$/}]}),(0,F.jsx)(x.Z,{name:"proposalName",label:le,placeholder:fe,fieldProps:{autoFocus:!1,size:"large"},rules:[{required:!0,whitespace:!0,message:"".concat(X),pattern:/^[a-z1-5.]{1,12}$/}]}),(0,F.jsxs)(j.Z,{gutter:10,children:[(0,F.jsx)(S.Z,{lg:{span:"16"},md:{span:"16"},sm:{span:"16"},xs:{span:"16"},children:(0,F.jsx)(x.Z,{name:"msigAccount",label:me,placeholder:"ex: dfsdeveloper",fieldProps:{autoFocus:!1,size:"large"},rules:[{required:!0,whitespace:!0,message:"".concat(X),pattern:/^[a-z1-5.]{1,12}$/}]})}),(0,F.jsx)(S.Z,{lg:{span:"8"},md:{span:"8"},sm:{span:"8"},xs:{span:"8"},children:(0,F.jsx)(x.Z,{name:"msigPermission",label:(0,F.jsxs)("div",{className:"flex items-center",children:[ae,M?(0,F.jsx)($.Z,{spin:M,className:"ml-3 text-blue-600"}):(0,F.jsx)(Y.Z,{className:"ml-3 text-blue-600 hover:cursor-pointer",onClick:he})]}),placeholder:"ex: active",fieldProps:{autoFocus:!1,size:"large"},rules:[{required:!0,whitespace:!0,message:"".concat(X),pattern:/^[a-z1-5.]{1,12}$/}]})})]}),(0,F.jsx)(C.Z,{bordered:!0,bodyStyle:{paddingInline:"12px",paddingBlock:"6px"},className:"mb-3 requestedAccount",children:(0,F.jsx)(_.u,{name:"requested",min:1,creatorButtonProps:!1,itemContainerRender:function(e){return(0,F.jsx)("div",{children:e})},initialValue:[{requestedAccount:"",permission:""}],children:(0,F.jsxs)(j.Z,{gutter:10,children:[(0,F.jsx)(S.Z,{lg:{span:"16"},md:{span:"16"},sm:{span:"16"},xs:{span:"16"},children:(0,F.jsx)(x.Z,{name:"requestedAccount",label:de,placeholder:"ex: dfsdeveloper",fieldProps:{autoFocus:!1,size:"large"},rules:[{required:!0,whitespace:!0,message:"".concat(X),pattern:/^[a-z1-5.]{1,12}$/}]})}),(0,F.jsx)(S.Z,{lg:{span:"8"},md:{span:"8"},sm:{span:"8"},xs:{span:"8"},children:(0,F.jsx)(x.Z,{name:"requestedPermission",label:ae,placeholder:"ex: active",fieldProps:{autoFocus:!1,size:"large"},rules:[{required:!0,whitespace:!0,message:"".concat(X),pattern:/^[a-z1-5.]{1,12}$/}]})})]})})}),(0,F.jsx)(T,{width:"lg",name:"expiration",label:ne,rules:[{required:!0,validator:function(e,t){try{return t?t.unix()<D()().unix()?Promise.reject(re):Promise.resolve(""):Promise.reject(X)}catch(e){return Promise.reject(e.message)}}}]}),(0,F.jsx)(V,{ref:H}),i]})})),Ce=(0,w.memo)(Ne);D().extend(I());var _e=w.forwardRef((function(e,t){var r=k.ZP.useMessage(),n=c()(r,2),s=n[0],i=n[1],u=(0,b.useSelector)((function(e){return e.contract.abi})),m=(0,b.useSelector)((function(e){return e.contract.actionSelection})),p=(0,b.useSelector)((function(e){return e.global.account})),h=(0,b.useSelector)((function(e){return e.global.session})),j=(0,b.useSelector)((function(e){return e.contract.fields})),S=(0,b.useSelector)((function(e){return e.contract.contract})),P=(0,b.useSelector)((function(e){return e.global.privateKey})),C=(0,w.useState)(),_=c()(C,2),M=_[0],Z=_[1],z=(0,w.useState)(new Set),O=c()(z,2),A=O[0],E=O[1],T=(0,w.useRef)(),q=(0,b.useIntl)(),R=q.formatMessage({id:"contract.intlCreateTransaction"}),I=q.formatMessage({id:"common.intlInputException"}),$=q.formatMessage({id:"account.intlPermissionNotExist"}),Y=q.formatMessage({id:"contract.intlCreate"}),J=q.formatMessage({id:"contract.intlCreateAndSign"}),H=q.formatMessage({id:"contract.intlExpiration"}),V=q.formatMessage({id:"contract.intlFreeCpu"}),B=q.formatMessage({id:"contract.intlAccount"}),W=q.formatMessage({id:"contract.intlPermission"}),L=q.formatMessage({id:"contract.intlFreeCpuLimit"}),U=q.formatMessage({id:"common.intlPleaseConnectWallet"}),Q=q.formatMessage({id:"common.intlPleaseConnectNetwork"}),K=(0,w.useRef)(),X=(0,w.useState)(!1),te=c()(X,2),re=te[0],ne=te[1],ae=(0,w.useCallback)((function(e,t){Z(e),E(t),ne(!0)}),[]);(0,w.useImperativeHandle)(t,(function(){return{handleOpen:ae}}));var se=(0,w.useCallback)(function(){var e=o()(a()().mark((function e(t){var r,n,o,i,g,x,b,k,y,w,N,C,_,Z,z,O,F,E,q,R,I,Y,J,H,V,B,W,G,K;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h&&h.broadcast){e.next=5;break}return s.error("".concat(U)),e.abrupt("return");case 5:if(p){e.next=8;break}return s.error("".concat(Q)),e.abrupt("return");case 8:return n=t.account,o=t.permission,i=D()().add(t.expiration,"minutes").utc().format("YYYY-MM-DDTHH:mm:ss"),g=t.freeCpu,x=1,e.next=15,(0,f.zI)(h.client.v1.chain.get_account(n));case 15:if(b=e.sent,k=c()(b,2),y=k[0],w=k[1],!y){e.next=24;break}return s.error(y),e.abrupt("return",!1);case 24:N=!1,C=0;case 26:if(!(C<w.permissions.length)){e.next=34;break}if(w.permissions[C].perm_name.toString()!==o){e.next=31;break}return x=w.permissions[C].required_auth.keyThreshold,N=!0,e.abrupt("break",34);case 31:C++,e.next=26;break;case 34:if(N){e.next=37;break}return s.error("".concat($)),e.abrupt("return",!1);case 37:if(_=null===(r=M.current)||void 0===r?void 0:r.getFieldsValue(),Z=/.+\?$/,z=/.+\$$/,O=Object.assign({},_),Object.keys(O).forEach((function(e){A.has(e)&&(O[e]=JSON.parse(O[e]))})),Object.keys(O).forEach((function(e){var t=j.find((function(t){return t.name===e}));t&&Z.test(t.type)?void 0!==O[e]&&String(O[e]).trim()||(O[e]=null):t&&z.test(t.type)&&(O[e]="")})),!g||"active"===o||"owner"===o){e.next=46;break}return s.error("".concat(L)),e.abrupt("return",!1);case 46:return F={account:S,name:m,authorization:[{actor:n,permission:o}],data:O},E=v.aU.from(F,u),q={account:"dfsfreecpu11",name:"freecpu",authorization:[{actor:"dfs.service",permission:"cpu"},{actor:n,permission:o}],data:f._9.from({user:n})},R=v.aU.from(q),J=[],e.next=53,h.client.v1.chain.get_info();case 53:return H=e.sent,V=H.getTransactionHeader(),g?(I=v.YW.from(d()(d()({},V),{},{expiration:i,actions:[R,E]})),J[0]=P.signDigest(I.signingDigest(h.chain.id.toString()))):I=v.YW.from(d()(d()({},V),{},{expiration:i,actions:[E]})),e.next=58,(0,f.zI)(h.transact({transaction:I},{broadcast:!1,transactPlugins:[]}));case 58:if(B=e.sent,W=c()(B,2),G=W[0],K=W[1],!G){e.next=65;break}return s.error(G),e.abrupt("return",!1);case 65:Y=v.uQ.from(d()(d()({},I),{},{signatures:[].concat(J,l()(K.signatures))})),T.current.handleOpen(Y,i,n,o,x);case 67:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[h,M,A,j,S,P,p]),oe=(0,w.useCallback)(o()(a()().mark((function e(){var t,r,n,o,i,l,p,g,x,b,k,y,w,N,C,_,Z,z,O,F,E,q,R,I,Y,J,H,V;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(t=K.current)||void 0===t||t.validateFields(),o=null===(r=K.current)||void 0===r?void 0:r.getFieldsValue(),i=o.account,l=o.permission,p=D()().add(o.expiration,"minutes").utc().format("YYYY-MM-DDTHH:mm:ss"),g=o.freeCpu,x=1,e.next=9,(0,f.zI)(h.client.v1.chain.get_account(i));case 9:if(b=e.sent,k=c()(b,2),y=k[0],w=k[1],!y){e.next=18;break}return s.error(y),e.abrupt("return",!1);case 18:N=!1,C=0;case 20:if(!(C<w.permissions.length)){e.next=28;break}if(w.permissions[C].perm_name.toString()!==l){e.next=25;break}return x=w.permissions[C].required_auth.keyThreshold,N=!0,e.abrupt("break",28);case 25:C++,e.next=20;break;case 28:if(N){e.next=31;break}return s.error("".concat($)),e.abrupt("return",!1);case 31:if(_=null===(n=M.current)||void 0===n?void 0:n.getFieldsValue(),Z=/.+\?$/,z=/.+\$$/,O=Object.assign({},_),Object.keys(O).forEach((function(e){A.has(e)&&(O[e]=JSON.parse(O[e]))})),Object.keys(O).forEach((function(e){var t=j.find((function(t){return t.name===e}));t&&Z.test(t.type)?void 0!==O[e]&&String(O[e]).trim()||(O[e]=null):t&&z.test(t.type)&&(O[e]="")})),!g||"active"===l||"owner"===l){e.next=40;break}return s.error("".concat(L)),e.abrupt("return",!1);case 40:return F={account:S,name:m,authorization:[{actor:i,permission:l}],data:O},E=v.aU.from(F,u),q={account:"dfsfreecpu11",name:"freecpu",authorization:[{actor:"dfs.service",permission:"cpu"},{actor:i,permission:l}],data:f._9.from({user:i})},R=v.aU.from(q),e.next=46,h.client.v1.chain.get_info();case 46:J=e.sent,H=J.getTransactionHeader(),g?(I=v.YW.from(d()(d()({},H),{},{expiration:p,actions:[R,E]})),V=P.signDigest(I.signingDigest(h.chain.id.toString())),Y=v.uQ.from(d()(d()({},I),{},{signatures:[V]}))):(I=v.YW.from(d()(d()({},H),{},{expiration:p,actions:[E]})),Y=v.uQ.from(d()(d()({},I),{},{signatures:[]}))),T.current.handleOpen(Y,p,i,l,x);case 50:case"end":return e.stop()}}),e)}))),[h,M,A,j,S,P]);return(0,F.jsxs)(N.Y,{formRef:K,title:R,open:re,onFinish:se,onOpenChange:function(e){ne(e)},initialValues:{freeCpu:!0,expiration:60},submitter:{searchConfig:{submitText:J},render:function(e,t){return[t[0],(0,F.jsx)(y.ZP,{onClick:oe,children:Y},"import"),t[1]]}},layout:"vertical",width:"400px",children:[(0,F.jsx)(x.Z,{name:"account",label:B,placeholder:"example: dfsdeveloper",fieldProps:{autoFocus:!1,size:"large"},rules:[{required:!0,whitespace:!0,message:"".concat(I),pattern:/^[a-z1-5.]{1,12}$/}]}),(0,F.jsx)(x.Z,{name:"permission",label:W,placeholder:"example: active",fieldProps:{autoFocus:!1,size:"large"},rules:[{required:!0,whitespace:!0,message:"".concat(I),pattern:/^[a-z1-5.]{1,12}$/}]}),(0,F.jsx)(G,{name:"expiration",label:H,marks:{10:"10",30:"30",60:"60"},min:10,max:60,fieldProps:{autoFocus:!1},rules:[{required:!0,whitespace:!0,message:"".concat(I),pattern:/^\d+$/}]}),(0,F.jsx)(g.Z,{name:"freeCpu",label:V}),(0,F.jsx)(ee,{ref:T}),i]})})),Me=(0,w.memo)(_e);D().extend(I());var Ze=w.forwardRef((function(e,t){var r=k.ZP.useMessage(),n=c()(r,2),s=n[0],i=n[1],u=(0,b.useSelector)((function(e){return e.contract.abi})),m=(0,b.useSelector)((function(e){return e.contract.actionSelection})),p=(0,b.useSelector)((function(e){return e.global.account})),h=(0,b.useSelector)((function(e){return e.global.session})),P=(0,b.useSelector)((function(e){return e.contract.fields})),M=(0,b.useSelector)((function(e){return e.contract.contract})),Z=(0,b.useSelector)((function(e){return e.global.privateKey})),z=(0,w.useState)(),O=c()(z,2),A=O[0],E=O[1],T=(0,w.useState)(new Set),q=c()(T,2),R=q[0],I=q[1],$=(0,w.useRef)(),Y=(0,w.useRef)(),J=(0,w.useState)(!1),H=c()(J,2),V=H[0],B=H[1],W=(0,b.useIntl)(),L=W.formatMessage({id:"contract.intlCreateTransaction"}),U=W.formatMessage({id:"common.intlInputException"}),Q=W.formatMessage({id:"account.intlPermissionNotExist"}),K=W.formatMessage({id:"contract.intlCreate"}),X=W.formatMessage({id:"contract.intlExpiration"}),ee=W.formatMessage({id:"contract.intlPermission"}),te=W.formatMessage({id:"common.intlPleaseConnectWallet"}),re=W.formatMessage({id:"common.intlPleaseConnectNetwork"}),ne=W.formatMessage({id:"contract.intlCreateAndSign"}),ae=W.formatMessage({id:"contract.intlFreeCpu"}),se=W.formatMessage({id:"contract.intlFreeCpuLimit"}),oe=W.formatMessage({id:"contract.intlRequested"}),ie=(0,w.useCallback)((function(e,t){E(e),I(t),B(!0)}),[]);(0,w.useImperativeHandle)(t,(function(){return{handleOpen:ie}}));var ce=(0,w.useCallback)(function(){var e=o()(a()().mark((function e(t){var r,n,o,i,g,x,b,k,y,j,S,w,N,C,_,z,O,F,E,T,q,I,Y,J,H,V,B,W;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h&&h.broadcast){e.next=5;break}return s.error("".concat(te)),e.abrupt("return");case 5:if(p){e.next=8;break}return s.error("".concat(re)),e.abrupt("return");case 8:n=t.freeCpu,o=D()().add(t.expiration,"minutes").utc().format("YYYY-MM-DDTHH:mm:ss"),i=[],t.requested.forEach((function(e){i.find((function(t){return t.actor===e.requestedAccount&&t.permission===e.requestedPermission}))||i.push({actor:e.requestedAccount,permission:e.requestedPermission})})),g=0;case 13:if(!(g<i.length)){e.next=40;break}return e.next=16,(0,f.zI)(h.client.v1.chain.get_account(i[g].actor));case 16:if(x=e.sent,b=c()(x,2),k=b[0],y=b[1],!k){e.next=25;break}return s.error(k),e.abrupt("return",!1);case 25:j=!1,S=0;case 27:if(!(S<y.permissions.length)){e.next=34;break}if(y.permissions[S].perm_name.toString()!==i[g].permission){e.next=31;break}return j=!0,e.abrupt("break",34);case 31:S++,e.next=27;break;case 34:if(j){e.next=37;break}return s.error("".concat(Q)),e.abrupt("return",!1);case 37:g++,e.next=13;break;case 40:if(w=null===(r=A.current)||void 0===r?void 0:r.getFieldsValue(),N=/.+\?$/,C=/.+\$$/,_=Object.assign({},w),Object.keys(_).forEach((function(e){R.has(e)&&(_[e]=JSON.parse(_[e]))})),Object.keys(_).forEach((function(e){var t=P.find((function(t){return t.name===e}));t&&N.test(t.type)?void 0!==_[e]&&String(_[e]).trim()||(_[e]=null):t&&C.test(t.type)&&(_[e]="")})),!n){e.next=50;break}if("active"===i[0].permission||"owner"===i[0].permission){e.next=50;break}return s.error("".concat(se)),e.abrupt("return",!1);case 50:return z={account:M,name:m,authorization:i,data:_},O=v.aU.from(z,u),F={account:"dfsfreecpu11",name:"freecpu",authorization:[{actor:"dfs.service",permission:"cpu"},i[0]],data:f._9.from({user:i[0].actor})},E=v.aU.from(F),I=[],e.next=57,h.client.v1.chain.get_info();case 57:return Y=e.sent,J=Y.getTransactionHeader(),n?(T=v.YW.from(d()(d()({},J),{},{expiration:o,actions:[E,O]})),I[0]=Z.signDigest(T.signingDigest(h.chain.id.toString()))):T=v.YW.from(d()(d()({},J),{},{expiration:o,actions:[O]})),e.next=62,(0,f.zI)(h.transact({transaction:T},{broadcast:!1,transactPlugins:[]}));case 62:if(H=e.sent,V=c()(H,2),B=V[0],W=V[1],!B){e.next=69;break}return s.error(B),e.abrupt("return",!1);case 69:q=v.uQ.from(d()(d()({},T),{},{signatures:[].concat(I,l()(W.signatures))})),$.current.handleOpen(q,o,i);case 71:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[h,A,R,P,M,p]),ue=(0,w.useCallback)(o()(a()().mark((function e(){var t,r,n,o,i,l,p,g,x,b,k,y,j,S,w,N,C,_,z,O,F,E,T,q,I,J,H;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null===(t=Y.current)||void 0===t||t.validateFields(),o=null===(r=Y.current)||void 0===r?void 0:r.getFieldsValue(),i=o.freeCpu,l=D()().add(o.expiration,"minutes").utc().format("YYYY-MM-DDTHH:mm:ss"),p=[],o.requested.forEach((function(e){p.find((function(t){return t.actor===e.requestedAccount&&t.permission===e.requestedPermission}))||p.push({actor:e.requestedAccount,permission:e.requestedPermission})})),g=0;case 7:if(!(g<p.length)){e.next=34;break}return e.next=10,(0,f.zI)(h.client.v1.chain.get_account(p[g].actor));case 10:if(x=e.sent,b=c()(x,2),k=b[0],y=b[1],!k){e.next=19;break}return s.error(k),e.abrupt("return",!1);case 19:j=!1,S=0;case 21:if(!(S<y.permissions.length)){e.next=28;break}if(y.permissions[S].perm_name.toString()!==p[g].permission){e.next=25;break}return j=!0,e.abrupt("break",28);case 25:S++,e.next=21;break;case 28:if(j){e.next=31;break}return s.error("".concat(Q)),e.abrupt("return",!1);case 31:g++,e.next=7;break;case 34:if(w=null===(n=A.current)||void 0===n?void 0:n.getFieldsValue(),N=/.+\?$/,C=/.+\$$/,_=Object.assign({},w),Object.keys(_).forEach((function(e){R.has(e)&&(_[e]=JSON.parse(_[e]))})),Object.keys(_).forEach((function(e){var t=P.find((function(t){return t.name===e}));t&&N.test(t.type)?void 0!==_[e]&&String(_[e]).trim()||(_[e]=null):t&&C.test(t.type)&&(_[e]="")})),!i){e.next=44;break}if("active"===p[0].permission||"owner"===p[0].permission){e.next=44;break}return s.error("".concat(se)),e.abrupt("return",!1);case 44:return z={account:M,name:m,authorization:p,data:_},O=v.aU.from(z,u),F={account:"dfsfreecpu11",name:"freecpu",authorization:[{actor:"dfs.service",permission:"cpu"},p[0]],data:f._9.from({user:p[0].actor})},E=v.aU.from(F),e.next=50,h.client.v1.chain.get_info();case 50:I=e.sent,J=I.getTransactionHeader(),i?(T=v.YW.from(d()(d()({},J),{},{expiration:l,actions:[E,O]})),H=Z.signDigest(T.signingDigest(h.chain.id.toString())),q=v.uQ.from(d()(d()({},T),{},{signatures:[H]}))):(T=v.YW.from(d()(d()({},J),{},{expiration:l,actions:[O]})),q=v.uQ.from(d()(d()({},T),{},{signatures:[]}))),$.current.handleOpen(q,l,p);case 54:case"end":return e.stop()}}),e)}))),[h,A,R,P,M,Z]);return(0,F.jsxs)(N.Y,{formRef:Y,title:L,open:V,onFinish:ce,onOpenChange:function(e){B(e)},initialValues:{freeCpu:!0,expiration:60},submitter:{searchConfig:{submitText:ne},render:function(e,t){return[t[0],(0,F.jsx)(y.ZP,{onClick:ue,children:K},"import"),t[1]]}},layout:"vertical",width:"500px",modalProps:{style:{top:25}},children:[(0,F.jsx)(C.Z,{bordered:!0,bodyStyle:{paddingInline:"12px",paddingBlock:"6px"},className:"mb-3 requestedAccount",children:(0,F.jsx)(_.u,{name:"requested",min:1,creatorButtonProps:!1,itemContainerRender:function(e){return(0,F.jsx)("div",{children:e})},initialValue:[{requestedAccount:"",permission:""}],children:(0,F.jsxs)(j.Z,{gutter:10,children:[(0,F.jsx)(S.Z,{lg:{span:"16"},md:{span:"16"},sm:{span:"16"},xs:{span:"16"},children:(0,F.jsx)(x.Z,{name:"requestedAccount",label:oe,placeholder:"ex: dfsdeveloper",fieldProps:{autoFocus:!1,size:"large"},rules:[{required:!0,whitespace:!0,message:"".concat(U),pattern:/^[a-z1-5.]{1,12}$/}]})}),(0,F.jsx)(S.Z,{lg:{span:"8"},md:{span:"8"},sm:{span:"8"},xs:{span:"8"},children:(0,F.jsx)(x.Z,{name:"requestedPermission",label:ee,placeholder:"ex: active",fieldProps:{autoFocus:!1,size:"large"},rules:[{required:!0,whitespace:!0,message:"".concat(U),pattern:/^[a-z1-5.]{1,12}$/}]})})]})})}),(0,F.jsx)(G,{name:"expiration",label:X,marks:{10:"10",30:"30",60:"60"},min:10,max:60,fieldProps:{autoFocus:!1},rules:[{required:!0,whitespace:!0,message:"".concat(U),pattern:/^\d+$/}]}),(0,F.jsx)(g.Z,{name:"freeCpu",label:ae}),(0,F.jsx)(fe,{ref:$}),i]})})),ze=(0,w.memo)(Ze),Oe=function(){var e=(0,b.useSelector)((function(e){return e.contract.readOnlyData})),t=(0,b.useIntl)().formatMessage({id:"contract.intlReadOnlyResult"});return(0,F.jsxs)("div",{className:"tab-action",children:[(0,F.jsx)("div",{className:"hardline text-lg font-semibold mb-3 mt-3",children:t}),(0,F.jsxs)("div",{className:"px-[13px] break-words",children:[!!e.action_traces[0].error_code&&(0,F.jsxs)("div",{children:[(0,F.jsx)("div",{className:"text-base font-semibold",children:"error_code"}),(0,F.jsx)("pre",{children:e.action_traces[0].error_code})]}),!!e.action_traces[0].return_value_hex_data&&(0,F.jsxs)("div",{children:[(0,F.jsx)("div",{className:"text-base font-semibold",children:"return_value_hex_data："}),(0,F.jsx)("pre",{children:e.action_traces[0].return_value_hex_data})]}),!!e.action_traces[0].return_value_data&&(0,F.jsxs)("div",{children:[(0,F.jsx)("div",{className:"text-base font-semibold",children:"return_value_data"}),(0,F.jsx)("pre",{children:e.action_traces[0].return_value_data})]}),(0,F.jsx)("div",{className:"text-base font-semibold",children:"console："}),(0,F.jsx)("div",{className:"mb-3",children:e.action_traces[0].console}),(0,F.jsx)("div",{className:"text-base font-semibold",children:"processed："}),(0,F.jsx)("pre",{children:JSON.stringify(e,null,2)})]})]})},Fe=(0,w.memo)(Oe),Ae=function(){var e,t=(0,w.useRef)(),r=(0,w.useRef)(),n=(0,w.useRef)(),s=(0,w.useRef)(),i=(0,w.useRef)(),u=(0,b.useDispatch)(),m=(0,w.useState)(new Set),N=c()(m,1)[0],C=(0,w.useState)(!1),_=c()(C,2),M=_[0],Z=_[1],z=(0,b.useSelector)((function(e){return e.contract.abi})),O=(0,b.useSelector)((function(e){return e.contract.actionSelection})),A=(0,b.useSelector)((function(e){return e.contract.actionType})),E=(0,b.useSelector)((function(e){return e.global.session})),T=(0,b.useSelector)((function(e){return e.global.account})),q=(0,b.useSelector)((function(e){return e.contract.contract})),D=(0,b.useSelector)((function(e){return e.contract.batchActions})),R=(0,b.useSelector)((function(e){return e.contract.encodeData})),I=(0,b.useSelector)((function(e){return e.contract.decodeData})),$=(0,b.useSelector)((function(e){return e.contract.readOnlyData})),Y=(0,b.useSelector)((function(e){return e.contract.fields})),J=k.ZP.useMessage(),H=c()(J,2),V=H[0],B=H[1],W=(0,b.useIntl)(),L=W.formatMessage({id:"common.intlCopySuccess"}),U=W.formatMessage({id:"contract.intlSelectAction"}),Q=W.formatMessage({id:"contract.intlEnterData"}),G=W.formatMessage({id:"common.intlCopy"}),K=W.formatMessage({id:"common.intlTxSuccess"}),X=W.formatMessage({id:"common.intlTxFail"}),ee=W.formatMessage({id:"common.intlPleaseConnectWallet"}),te=W.formatMessage({id:"common.intlPleaseConnectNetwork"}),re=W.formatMessage({id:"contract.intlAdd"}),ne=W.formatMessage({id:"contract.intlEncode"}),ae=W.formatMessage({id:"contract.intlDecode"}),se=W.formatMessage({id:"contract.intlReadOnly"}),oe=W.formatMessage({id:"contract.intlEncodeSuccess"}),ie=W.formatMessage({id:"contract.intlReadOnlySuccess"}),ce=W.formatMessage({id:"contract.intlMsigPubkey"}),ue=W.formatMessage({id:"contract.intlMsigProposal"}),le=W.formatMessage({id:"contract.intlMsigTransaction"}),me=(0,w.useCallback)((function(e,t){var r=/(\$|\?)$/g,n=/^[a-z1-5.]{1,12}$/,a=/^\d+$/,s=/^-?\d+$/,o=/^(-?\d+)(.\d+)?$/,i=/^([0-9a-fA-F][0-9a-fA-F])+$/,c=/^\d+,[A-Z]+$/;if(r.test(e.message)&&!t)return Promise.resolve();switch(e.message.replace(r,"")){case"string":return Promise.resolve("");case"name":try{return n.test(t)?Promise.resolve(v.VG.from(t)):Promise.reject(e.message=String(n))}catch(t){return Promise.reject(e.message=t.message)}case"asset":try{return Promise.resolve(v.xR.from(t))}catch(t){return Promise.reject(e.message=t.message)}case"checksum160":try{return Promise.resolve(v.b9.from(t))}catch(t){return Promise.reject(e.message=t.message)}case"checksum256":try{return Promise.resolve(v.Nz.from(t))}catch(t){return Promise.reject(e.message=t.message)}case"checksum512":try{return Promise.resolve(v.W4.from(t))}catch(t){return Promise.reject(e.message=t.message)}case"uint8":try{return a.test(t)?Promise.resolve(v._A.from(t)):Promise.reject(e.message=String(a))}catch(t){return Promise.reject(e.message=t.message)}case"uint16":try{return a.test(t)?Promise.resolve(v.j8.from(t)):Promise.reject(e.message=String(a))}catch(t){return Promise.reject(e.message=t.message)}case"uint32":try{return a.test(t)?Promise.resolve(v.xH.from(t)):Promise.reject(e.message=String(a))}catch(t){return Promise.reject(e.message=t.message)}case"uint64":try{return a.test(t)?Promise.resolve(v.zM.from(t)):Promise.reject(e.message=String(a))}catch(t){return Promise.reject(e.message=t.message)}case"uint128":try{return a.test(t)?Promise.resolve(v.pB.from(t)):Promise.reject(e.message=String(a))}catch(t){return Promise.reject(e.message=t.message)}case"varuint":try{return a.test(t)?Promise.resolve(v.mj.from(t)):Promise.reject(e.message=String(a))}catch(t){return Promise.reject(e.message=t.message)}case"varuint16":try{return a.test(t)?Promise.resolve(v.mj.from(t)):Promise.reject(e.message=String(a))}catch(t){return Promise.reject(e.message=t.message)}case"varuint32":try{return a.test(t)?Promise.resolve(v.mj.from(t)):Promise.reject(e.message=String(a))}catch(t){return Promise.reject(e.message=t.message)}case"varuint64":try{return a.test(t)?Promise.resolve(v.mj.from(t)):Promise.reject(e.message=String(a))}catch(t){return Promise.reject(e.message=t.message)}case"varuint128":try{return a.test(t)?Promise.resolve(v.mj.from(t)):Promise.reject(e.message=String(a))}catch(t){return Promise.reject(e.message=t.message)}case"int8":try{return s.test(t)?Promise.resolve(v.tJ.from(t)):Promise.reject(e.message=String(a))}catch(t){return Promise.reject(e.message=t.message)}case"int16":try{return s.test(t)?Promise.resolve(v.k6.from(t)):Promise.reject(e.message=String(a))}catch(t){return Promise.reject(e.message=t.message)}case"int32":try{return s.test(t)?Promise.resolve(v.Vq.from(t)):Promise.reject(e.message=String(a))}catch(t){return Promise.reject(e.message=t.message)}case"int64":try{return s.test(t)?Promise.resolve(v.ni.from(t)):Promise.reject(e.message=String(a))}catch(t){return Promise.reject(e.message=t.message)}case"int128":try{return s.test(t)?Promise.resolve(v.Gm.from(t)):Promise.reject(e.message=String(a))}catch(t){return Promise.reject(e.message=t.message)}case"varint":try{return s.test(t)?Promise.resolve(v.yN.from(t)):Promise.reject(e.message=String(a))}catch(t){return Promise.reject(e.message=t.message)}case"varint16":try{return s.test(t)?Promise.resolve(v.yN.from(t)):Promise.reject(e.message=String(a))}catch(t){return Promise.reject(e.message=t.message)}case"varint32":try{return s.test(t)?Promise.resolve(v.yN.from(t)):Promise.reject(e.message=String(a))}catch(t){return Promise.reject(e.message=t.message)}case"varint64":try{return s.test(t)?Promise.resolve(v.yN.from(t)):Promise.reject(e.message=String(a))}catch(t){return Promise.reject(e.message=t.message)}case"varint128":try{return s.test(t)?Promise.resolve(v.yN.from(t)):Promise.reject(e.message=String(a))}catch(t){return Promise.reject(e.message=t.message)}case"float32":try{return o.test(t)?Promise.resolve(v.yA.from(t)):Promise.reject(e.message=String(o))}catch(t){return Promise.reject(e.message=t.message)}case"float64":try{return o.test(t)?Promise.resolve(v.Dh.from(t)):Promise.reject(e.message=String(o))}catch(t){return Promise.reject(e.message=t.message)}case"bytes":try{return i.test(t)?Promise.resolve(v.Jj.from(t)):Promise.reject(e.message=String(i))}catch(t){return Promise.reject(e.message=t.message)}case"block_timestamp_type":try{return a.test(t)?Promise.resolve(v.wm.from(Number(t))):Promise.reject(e.message=String(a))}catch(t){return Promise.reject(e.message=t.message)}case"time_point":try{return a.test(t)?Promise.resolve(v.hI.from(Number(t))):Promise.reject(e.message=String(a))}catch(t){return Promise.reject(e.message=t.message)}case"time_point_sec":try{return a.test(t)?Promise.resolve(v.AQ.from(Number(t))):Promise.reject(e.message=String(a))}catch(t){return Promise.reject(e.message=t.message)}case"public_key":try{return Promise.resolve(v.nh.from(t))}catch(t){return Promise.reject(e.message=t.message)}case"symbol":try{return c.test(t)?Promise.resolve(v.xR.Symbol.from(t)):Promise.reject(e.message=String(c))}catch(t){return Promise.reject(e.message=t.message)}default:try{return JSON.parse(t),N.add(e.field),Promise.resolve()}catch(t){return Promise.reject(e.message=t.message)}}}),[O,N]),de=(0,w.useCallback)((function(e){switch(e.replace(/(\$|\?)$/g,"")){case"name":return"Enter account name...";case"asset":return"example: 1.00000000 DFS";case"uint8":case"uint16":case"uint32":case"uint64":case"uint128":case"varuint":case"varuint16":case"varuint32":case"varuint64":case"varuint128":case"int8":case"int16":case"int32":case"int64":case"int128":case"varint":case"varint16":case"varint32":case"varint64":case"varint128":case"float32":case"float64":return"Enter number...";case"string":return"Enter string...";case"permission_level":return'example: {"actor": "foo", "permission": "active"}';case"bytes":return"example: 1234abcdff";case"checksum256":return"example: 73e4385a2708e6d7048834fbc1079f2fabb17b3c125b146af438971e90716c4d";case"authority":return'example: {"threshold": 1, "keys": [{"key": "EOS6RrvujLQN1x5Tacbep1KAk8zzKpSThAQXBCKYFfGUYeABhJRin", "weight": 1}], "accounts": [], "waits": []}';case"symbol":return"example: 8,DFS";case"name[]":return'example: ["david", "mary"]';case"asset[]":return'example: ["1.00000000 DFS", "2.00000000 USDT"]';case"uint8[]":case"uint16[]":case"uint32[]":case"uint64[]":case"uint128[]":case"varuint[]":case"varuint16[]":case"varuint32[]":case"varuint64[]":case"varuint128[]":return"example: [12, 34]";case"int8[]":case"int16[]":case"int32[]":case"int64[]":case"int128[]":case"varint[]":case"varint16[]":case"varint32[]":case"varint64[]":case"varint128[]":return"example: [12, -34]";case"float32[]":case"float64[]":return"example: [12.12, -34.34]";case"string[]":return'example: ["abc", "def"]';case"permission_level[]":return'example: [{"actor": "foo", "permission": "active"}, {"actor": "foo", "permission": "active"}]';case"bytes[]":return'example: ["123abc", "456def"]';case"checksum256[]":return'example: ["73e4385a2708e6d7048834fbc1079f2fabb17b3c125b146af438971e90716c4d", "73e4385a2708e6d7048834fbc1079f2fabb17b3c125b146af438971e90716c4d"]';case"symbol[]":return'example: ["8,DFS", "8,USDT"]';default:return"Enter ".concat(e,"...")}}),[]),pe=(0,w.useCallback)((function(){var e=/.+(\$|\?)$/;return Y.map((function(t,r){return"bool"===t.type?(0,F.jsx)(g.Z,{name:t.name,label:(0,F.jsx)("span",{className:"font-semibold",children:t.name})},r):(0,F.jsx)(x.Z,{placeholder:de(t.type),name:t.name,label:(0,F.jsx)("span",{className:"font-semibold",children:t.name}),rules:[{required:!e.test(t.type),message:t.type,validator:me}],hasFeedback:!0,fieldProps:{allowClear:!0,autoFocus:!1,addonAfter:t.type,size:"large"}},r)}))}),[z,O,A,Y]),fe=(0,w.useCallback)(function(){var e=o()(a()().mark((function e(t){var r,n,s,o,i,u,l,m,p,g;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(E&&E.broadcast){e.next=5;break}return V.error("".concat(ee)),e.abrupt("return");case 5:if(T){e.next=8;break}return V.error("".concat(te)),e.abrupt("return");case 8:return r={},n=/.+\?$/,s=/.+\$$/,Y.forEach((function(e){s.test(e.type)?r[e.name]="":n.test(e.type)&&(r[e.name]=null)})),o=Object.assign(d()({},r),t),Object.keys(o).forEach((function(e){N.has(e)&&(o[e]=JSON.parse(o[e]))})),Object.keys(o).forEach((function(e){var t=Y.find((function(t){return t.name===e}));t&&n.test(t.type)&&(String(o[e]).trim()||(o[e]=null))})),i={account:q,name:O,authorization:[E.permissionLevel],data:o},u=v.aU.from(i,z),e.next=19,(0,f.zI)(E.transact({actions:[u]}));case 19:l=e.sent,m=c()(l,2),p=m[0],g=m[1],p?V.error(p):g&&g.response?V.success("".concat(K)):V.error("".concat(X));case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[O,z,N,q,E,T,Y]),ge=(0,w.useCallback)(o()(a()().mark((function e(){var r,n,s,o,i,c;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null===(r=t.current)||void 0===r?void 0:r.getFieldsValue(),s=/.+\?$/,o=/.+\$$/,i=Object.assign({},n),Object.keys(i).forEach((function(e){N.has(e)&&(i[e]=JSON.parse(i[e]))})),Object.keys(i).forEach((function(e){var t=Y.find((function(t){return t.name===e}));t&&s.test(t.type)?void 0!==i[e]&&String(i[e]).trim()||(i[e]=null):t&&o.test(t.type)&&(i[e]="")})),E.broadcast){e.next=11;break}return e.next=9,window.navigator.clipboard.writeText(JSON.stringify(i));case 9:e.next=14;break;case 11:return c={account:q,name:O,authorization:[{actor:E.actor,permission:E.permission}],data:i},e.next=14,window.navigator.clipboard.writeText(JSON.stringify(c,null,2));case 14:V.success("".concat(L));case 15:case"end":return e.stop()}}),e)}))),[V,E,q,O,Y]),xe=(0,w.useCallback)(o()(a()().mark((function e(){var r,n,s,o,i,c,m,d;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(r=t.current)||void 0===r?void 0:r.validateFields();case 2:if(E&&E.broadcast){e.next=7;break}return V.error("".concat(ee)),e.abrupt("return");case 7:if(T){e.next=10;break}return V.error("".concat(te)),e.abrupt("return");case 10:s=null===(n=t.current)||void 0===n?void 0:n.getFieldsValue(),o=/.+\?$/,i=/.+\$$/,c=Object.assign({},s),Object.keys(c).forEach((function(e){N.has(e)&&(c[e]=JSON.parse(c[e]))})),Object.keys(c).forEach((function(e){var t=Y.find((function(t){return t.name===e}));t&&o.test(t.type)?void 0!==c[e]&&String(c[e]).trim()||(c[e]=null):t&&i.test(t.type)&&(c[e]="")})),m={account:q,name:O,authorization:[{actor:E.actor,permission:E.permission}],data:c},d=v.aU.from(m,z),u(p.N.setEncodeData(void 0)),u(p.N.setDecodeData(void 0)),u(p.N.setReadOnlyData(void 0)),u(p.N.setBatchActions([].concat(l()(D),[{untypedAction:JSON.stringify(m),typedAction:JSON.stringify(d)}])));case 22:case"end":return e.stop()}}),e)}))),[V,z,E,T,q,O,D,Y]),he=(0,w.useCallback)(o()(a()().mark((function e(){var r,n,s,o,i,l,m,g,x,h,b,k,y,j,S,P,w,C,_,M,Z,F,A,T;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(r=t.current)||void 0===r?void 0:r.validateFields();case 2:if(s=null===(n=t.current)||void 0===n?void 0:n.getFieldsValue(),o=/.+\?$/,i=/.+\$$/,l=Object.assign({},s),Object.keys(l).forEach((function(e){N.has(e)&&(l[e]=JSON.parse(l[e]))})),Object.keys(l).forEach((function(e){var t=Y.find((function(t){return t.name===e}));t&&o.test(t.type)?void 0!==l[e]&&String(l[e]).trim()||(l[e]=null):t&&i.test(t.type)&&(l[e]="")})),m=E.broadcast?[E.permissionLevel]:[],g={account:q,name:O,authorization:m,data:l},x=v.aU.from(g,z),h=JSON.stringify(x,null,2),b={expiration:"1970-01-01T00:00:00",ref_block_num:0,ref_block_prefix:0,max_net_usage_words:0,max_cpu_usage_ms:0,delay_sec:0,context_free_actions:[],transaction_extensions:[]},k=v.YW.from(d()(d()({},b),{},{actions:[x]})),y=JSON.stringify(k,null,2),j=k.id.toString(),S="",P="",w="",C="",!E||!E.broadcast){e.next=27;break}return e.next=23,(0,f.zI)(E.transact({actions:[x]},{broadcast:!1,transactPlugins:[]}));case 23:_=e.sent,M=c()(_,2),(Z=M[1])&&(k=Z.resolved.transaction,y=JSON.stringify(k,null,2),F=Z.signatures[0],A=v.uQ.from(d()(d()({},k),{},{signatures:[F]})),T=v.f1.fromSigned(A),S=JSON.stringify(A,null,2),P=JSON.stringify(T,null,2),w=Z.resolved.signingData.toString(),C=Z.resolved.signingDigest.toString());case 27:u(p.N.setEncodeData({action:h,transaction:y,transactionId:j,signedTransaction:S,packedTransaction:P,signingData:w,signingDigest:C})),u(p.N.setBatchActions([])),u(p.N.setDecodeData(void 0)),u(p.N.setReadOnlyData(void 0)),V.success("".concat(oe));case 32:case"end":return e.stop()}}),e)}))),[O,z,N,q,E,Y]),be=(0,w.useCallback)(o()(a()().mark((function e(){var r,n,s,o,i,l,m,g,x,h,b,k,y,j,S,P;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(r=t.current)||void 0===r?void 0:r.validateFields();case 2:return Z(!0),s=null===(n=t.current)||void 0===n?void 0:n.getFieldsValue(),o=/.+\?$/,i=/.+\$$/,l=Object.assign({},s),Object.keys(l).forEach((function(e){N.has(e)&&(l[e]=JSON.parse(l[e]))})),Object.keys(l).forEach((function(e){var t=Y.find((function(t){return t.name===e}));t&&o.test(t.type)?void 0!==l[e]&&String(l[e]).trim()||(l[e]=null):t&&i.test(t.type)&&(l[e]="")})),m={account:q,name:O,authorization:[],data:l},g=v.aU.from(m,z),e.next=13,E.client.v1.chain.get_info();case 13:return x=e.sent,h=x.getTransactionHeader(),b=v.YW.from(d()(d()({},h),{},{actions:[g]})),k=v.uQ.from(d()(d()({},b),{},{signatures:[]})),e.next=19,(0,f.zI)(E.client.v1.chain.send_read_only_transaction(k));case 19:y=e.sent,j=c()(y,2),S=j[0],P=j[1],S?V.error(S):(V.success("".concat(ie)),u(p.N.setReadOnlyData(P.processed))),Z(!1);case 25:case"end":return e.stop()}}),e)}))),[O,z,N,q,E,Y]),ke=(0,w.useCallback)((function(){var e;null===(e=t.current)||void 0===e||e.resetFields(),u(p.N.setEncodeData(void 0)),u(p.N.setDecodeData(void 0)),u(p.N.setReadOnlyData(void 0))}),[]),je=(0,w.useCallback)((function(e){var t,r=null==z||null===(t=z.structs)||void 0===t?void 0:t.find((function(t){return t.name===e.type.toString()})),n=null==r?void 0:r.fields;u(p.N.setFields(n)),u(p.N.setActionSelection(e.name.toString())),u(p.N.setActionType(e.type.toString())),ke()}),[ke,Y,z]),Pe=(0,w.useCallback)(function(){var e=o()(a()().mark((function e(r){var n,s,o,i,c,m,d,f;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("context_free_actions"!==r.key){e.next=23;break}return e.next=3,null===(n=t.current)||void 0===n?void 0:n.validateFields();case 3:if(E&&E.broadcast){e.next=8;break}return V.error("".concat(ee)),e.abrupt("return");case 8:if(T){e.next=11;break}return V.error("".concat(te)),e.abrupt("return");case 11:o=null===(s=t.current)||void 0===s?void 0:s.getFieldsValue(),i=/.+\?$/,c=/.+\$$/,m=Object.assign({},o),Object.keys(m).forEach((function(e){N.has(e)&&(m[e]=JSON.parse(m[e]))})),Object.keys(m).forEach((function(e){var t=Y.find((function(t){return t.name===e}));t&&i.test(t.type)?void 0!==m[e]&&String(m[e]).trim()||(m[e]=null):t&&c.test(t.type)&&(m[e]="")})),d={account:q,name:O,authorization:[],data:m},f=v.aU.from(d,z),u(p.N.setEncodeData(void 0)),u(p.N.setDecodeData(void 0)),u(p.N.setReadOnlyData(void 0)),u(p.N.setBatchActions([].concat(l()(D),[{untypedAction:JSON.stringify(d),typedAction:JSON.stringify(f)}])));case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[V,z,E,T,q,O,D,Y]),Ne={items:[{label:"Context Free Actions",key:"context_free_actions"}],onClick:Pe};return(0,F.jsxs)("div",{className:"tab-action",children:[(0,F.jsx)("div",{className:"hardline text-lg font-semibold mb-3",children:U}),(0,F.jsx)("div",{className:"flex flex-start flex-wrap pl-[13px]",children:null==z||null===(e=z.actions)||void 0===e?void 0:e.map((function(e,t){return(0,F.jsx)(y.ZP,{className:"w-[140px] mr-2 mb-2",ghost:O!==e.name.toString(),type:"primary",size:"large",onClick:function(){return je(e)},children:e.name.toString()},t)}))}),!!O&&(0,F.jsxs)("div",{children:[(0,F.jsx)("div",{className:"hardline text-lg font-semibold mb-2 mt-3",children:Q}),(0,F.jsx)(j.Z,{gutter:10,className:"w-full",children:(0,F.jsx)(S.Z,{lg:{span:"12"},md:{span:"20"},sm:{span:"20"},xs:{span:"24"},children:(0,F.jsx)(h.A,{formRef:t,className:"pl-[13px]",layout:"vertical",onFinish:function(){var e=o()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fe(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onReset:function(){return ke()},submitter:{render:function(e,c){return(0,F.jsxs)("div",{className:"flex flex-wrap",style:{marginTop:"10px"},children:[(0,F.jsx)("div",{className:"mr-[8px] mt-[14px]",children:c[1]}),(0,F.jsx)("div",{className:"mr-[8px] mt-[14px]",children:c[0]}),(0,F.jsx)(y.ZP,{className:"mr-[8px] mt-[14px]",onClick:ge,children:G},"copy"),(0,F.jsx)("div",{children:(0,F.jsx)(P.Z.Button,{className:"mr-[8px] mt-[14px]",menu:Ne,onClick:xe,children:re},"add")}),(0,F.jsx)(y.ZP,{className:"mr-[8px] mt-[14px]",onClick:he,children:ne},"encode"),(0,F.jsx)(y.ZP,{className:"mr-[8px] mt-[14px]",onClick:function(){return r.current.handleOpen()},children:ae},"decode"),(0,F.jsx)(y.ZP,{className:"mr-[8px] mt-[14px]",onClick:o()(a()().mark((function e(){var r;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(r=t.current)||void 0===r?void 0:r.validateFields();case 2:s.current.handleOpen(t,N);case 3:case"end":return e.stop()}}),e)}))),children:ue},"msigProposal"),(0,F.jsx)(y.ZP,{className:"mr-[8px] mt-[14px]",onClick:o()(a()().mark((function e(){var r;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(r=t.current)||void 0===r?void 0:r.validateFields();case 2:n.current.handleOpen(t,N);case 3:case"end":return e.stop()}}),e)}))),children:ce},"msigPubkey"),(0,F.jsx)(y.ZP,{className:"mr-[8px] mt-[14px]",onClick:o()(a()().mark((function e(){var r;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(r=t.current)||void 0===r?void 0:r.validateFields();case 2:i.current.handleOpen(t,N);case 3:case"end":return e.stop()}}),e)}))),children:le},"msigTx"),(0,F.jsx)(y.ZP,{className:"mr-[8px] mt-[14px]",onClick:be,loading:M,children:se},"readonly")]})}},children:pe()})})})]}),(0,F.jsx)(Me,{ref:n}),(0,F.jsx)(Ce,{ref:s}),(0,F.jsx)(we,{ref:r}),(0,F.jsx)(ze,{ref:i}),!!I&&(0,F.jsx)(ye,{}),!!R&&(0,F.jsx)(Se,{}),!!$&&(0,F.jsx)(Fe,{}),!!D.length&&(0,F.jsx)(ve,{}),B]})},Ee=(0,w.memo)(Ae),Te=r(64317),qe=r(92340),De=r(72269),Re=r(57953),Ie=r(96486),$e=r(86615),Ye=r(48764).Buffer,Je=w.forwardRef((function(e,t){var r=k.ZP.useMessage(),n=c()(r,2),s=n[0],i=n[1],u=(0,b.useSelector)((function(e){return e.contract.abi})),l=(0,b.useSelector)((function(e){return e.contract.tableSelection})),m=(0,w.useState)("example: 000000000090b1ca10270000000000000444465300000000"),d=c()(m,2),p=d[0],f=d[1],g=(0,b.useIntl)(),x=g.formatMessage({id:"contract.intlDecode"}),h=g.formatMessage({id:"contract.intlDecodeResult"}),y=g.formatMessage({id:"common.intlInputException"}),j=g.formatMessage({id:"contract.intlDecodeSuccess"}),S=g.formatMessage({id:"contract.intlEnterData"}),P=g.formatMessage({id:"contract.intlCharEncode"}),C=(0,w.useRef)(),_=(0,w.useState)(!1),M=c()(_,2),Z=M[0],z=M[1],O=(0,w.useCallback)((function(){z(!0)}),[]);(0,w.useImperativeHandle)(t,(function(){return{handleOpen:O}}));var A=(0,w.useCallback)(function(){var e=o()(a()().mark((function e(t){var r,n,o,i,c,m;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.input,o=t.charEncode,c="","hex"===o?(i=Ye.from(n,"hex"),c="base64: "+i.toString("base64")+"\n\n"):(i=Ye.from(n,"base64"),c="hex: "+i.toString("hex")+"\n\n"),m=v.ei.decode({data:i,abi:u,type:u.tables.find((function(e){return e.name.toString()===l})).type}),c+=JSON.stringify(m,null,2),null===(r=C.current)||void 0===r||r.setFieldValue("result",c),s.success("".concat(j)),e.abrupt("return",!1);case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0.message),s.error(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),[u,l]);return(0,F.jsxs)(N.Y,{className:"decodeTable",formRef:C,title:x,open:Z,onFinish:A,onOpenChange:function(e){z(e)},layout:"vertical",width:"700px",modalProps:{style:{top:25}},initialValues:{charEncode:"hex"},children:[(0,F.jsx)(K.Z,{label:S,name:"input",placeholder:p,fieldProps:{autoSize:{minRows:5},allowClear:!0,autoFocus:!1,size:"large"},rules:[{required:!0,whitespace:!0,message:"".concat(y),pattern:/^[A-Za-z0-9+/=]+$/}]}),(0,F.jsx)($e.Z.Group,{name:"charEncode",label:P,options:[{label:"hex",value:"hex"},{label:"base64",value:"base64"}],fieldProps:{onChange:function(e){"hex"===e.target.value?f("example: 000000000090b1ca10270000000000000444465300000000"):f("example: AADdPv9bIkj/WwAAAAAAAAAAAA==")}},rules:[{required:!0,whitespace:!0,message:"".concat(y),pattern:/^hex|base64$/}]}),(0,F.jsx)(K.Z,{label:h,name:"result",placeholder:"",fieldProps:{autoSize:{minRows:10},allowClear:!1,autoFocus:!1,size:"large",readOnly:!0}}),i]})})),He=(0,w.memo)(Je),Ve=function(){var e,t=(0,b.useDispatch)(),r=(0,w.useRef)(),n=(0,b.useSelector)((function(e){return e.contract.abi})),s=(0,b.useSelector)((function(e){return e.contract.contract})),i=(0,b.useSelector)((function(e){return e.global.session})),u=(0,b.useSelector)((function(e){return e.contract.tableSelection})),l=(0,b.useSelector)((function(e){return e.contract.tableDataSource})),m=(0,b.useSelector)((function(e){return e.contract.tableColumns})),v=(0,b.useSelector)((function(e){return e.contract.tableByScope})),j=(0,b.useSelector)((function(e){return e.contract.tableParams})),S=(0,b.useSelector)((function(e){return e.contract.tableByScopeParams})),P=k.ZP.useMessage(),N=c()(P,2),C=N[0],_=N[1],M=(0,w.useState)(!1),Z=c()(M,2),z=Z[0],O=Z[1],A=(0,b.useIntl)(),E=A.formatMessage({id:"common.intlCopySuccess"}),T=A.formatMessage({id:"contract.intlSelectTable"}),q=A.formatMessage({id:"contract.intlEnterParameters"}),D=A.formatMessage({id:"common.intlCopy"}),R=A.formatMessage({id:"contract.intlTableResult"}),I=A.formatMessage({id:"contract.intlNoData"}),$=A.formatMessage({id:"contract.intlDecode"}),Y=(0,w.useRef)(),J=(0,w.useCallback)(function(){var e=o()(a()().mark((function e(r){var n,s,o,u,l,m,g,x;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],s=[],O(!0),e.next=5,(0,f.zI)(i.client.v1.chain.get_table_rows(r));case 5:if(o=e.sent,u=c()(o,2),l=u[0],m=u[1],O(!1),!l){e.next=13;break}return C.error(l),e.abrupt("return");case 13:if((g=m.rows).length){e.next=18;break}return t(p.N.setTableColumns(n)),t(p.N.setTableDataSource(g)),e.abrupt("return");case 18:r.json?(x=Object.keys(g[0]),n.push({title:"#",dataIndex:"_key",key:"_key",width:"50px",align:"center",render:function(e,t,r){return(0,F.jsx)("span",{children:r+1})}}),x.forEach((function(e){n.push({title:e,dataIndex:e,key:e,render:function(t,r){return(0,Ie.isObject)(r[e])?(0,F.jsx)("span",{children:JSON.stringify(r[e])}):(0,F.jsx)("span",{children:r[e]})}})})),r.show_payer?(n.push({title:"payer",dataIndex:"payer",key:"payer",render:function(e,t){return(0,F.jsx)("span",{children:t.payer})}}),g.forEach((function(e,t){g[t]._key=t,s.push(d()(d()({},g[t]),{},{payer:m.ram_payers[t].toString()}))}))):g.forEach((function(e,t){g[t]._key=t,s.push(d()({},g[t]))}))):(n.push({title:"#",dataIndex:"_key",key:"_key",width:"50px",align:"center",render:function(e,t,r){return(0,F.jsx)("span",{children:r+1})}}),n.push({title:"bytes",dataIndex:"bytes",key:"bytes",render:function(e,t){return(0,F.jsx)("span",{children:t.bytes})}}),r.show_payer?(n.push({title:"payer",dataIndex:"payer",key:"payer",render:function(e,t){return(0,F.jsx)("span",{children:t.payer})}}),g.forEach((function(e,t){s.push({_key:t,bytes:e,payer:m.ram_payers[t].toString()})}))):g.forEach((function(e,t){s.push({_key:t,bytes:e})}))),t(p.N.setTableColumns(n)),t(p.N.setTableDataSource(s));case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[i,C]),H=(0,w.useCallback)(function(){var e=o()(a()().mark((function e(r){var n,s,o,u,l,m,g,x;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],s=[],O(!0),e.next=5,(0,f.zI)(i.client.v1.chain.get_table_by_scope(r));case 5:if(o=e.sent,u=c()(o,2),l=u[0],m=u[1],O(!1),!l){e.next=13;break}return O(!1),e.abrupt("return");case 13:if((g=JSON.parse(JSON.stringify(m.rows))).length){e.next=18;break}return t(p.N.setTableColumns(n)),t(p.N.setTableDataSource(g)),e.abrupt("return");case 18:x=Object.keys(g[0]),n.push({title:"#",dataIndex:"_key",key:"_key",width:"50px",align:"center",render:function(e,t,r){return(0,F.jsx)("span",{children:r+1})}}),x.forEach((function(e){n.push({title:e,dataIndex:e,key:e,render:function(t,r){return(0,Ie.isObject)(r[e])?(0,F.jsx)("span",{children:JSON.stringify(r[e])}):(0,F.jsx)("span",{children:r[e]})}})})),g.forEach((function(e,t){g[t]._key=t,s.push(d()({},g[t]))})),t(p.N.setTableColumns(n)),t(p.N.setTableDataSource(s));case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[i,C]),V=(0,w.useCallback)(o()(a()().mark((function e(){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v?H(S):J(j);case 1:case"end":return e.stop()}}),e)}))),[j,S,v,J,H]),B=(0,w.useCallback)((function(e){var r=d()(d()({},j),{},{code:s,table:e.name.toString(),scope:j.scope?j.scope:s}),n=d()(d()({},S),{},{code:s,table:e.name.toString()});t(p.N.setTableSelection(e.name.toString())),t(p.N.setTableParams(r)),t(p.N.setTableByScopeParams(n)),v?H(n):J(r)}),[s,J,H,j,S]),W=(0,w.useCallback)((function(e){t(p.N.setTableByScope(e)),u&&(e?H(S):J(j))}),[u,j,S]),L=(0,w.useCallback)((function(e,r){if(v){var n={};e.hasOwnProperty("lower_bound2")?n.lower_bound=e.lower_bound2:e.hasOwnProperty("upper_bound2")?n.upper_bound=e.upper_bound2:e.hasOwnProperty("limit2")?n.limit=e.limit2:e.hasOwnProperty("reverse2")?n.reverse=e.reverse2:e.hasOwnProperty("time_limit_ms2")&&(n.time_limit_ms=e.time_limit_ms2),t(p.N.setTableByScopeParams(d()(d()({},S),n)))}else t(p.N.setTableParams(d()(d()({},j),r)))}),[v,j,S]),U=(0,w.useCallback)(o()(a()().mark((function e(){var t;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},v?Object.keys(S).forEach((function(e){S[e]&&(t[e]=S[e])})):Object.keys(j).forEach((function(e){j[e]&&(t[e]=j[e])})),e.next=4,window.navigator.clipboard.writeText(JSON.stringify(t));case 4:C.success("".concat(E));case 5:case"end":return e.stop()}}),e)}))),[C,v,j,S]);return(0,F.jsxs)("div",{className:"tab-table",children:[(0,F.jsxs)("div",{className:"hardline text-lg font-semibold mb-3",children:[(0,F.jsx)("span",{children:T}),(0,F.jsx)("span",{className:"ml-[30px] mr-3",children:"Table by Scope"}),(0,F.jsx)(De.Z,{value:v,onChange:W})]}),(0,F.jsx)("div",{className:"flex flex-start flex-wrap pl-[13px]",children:null==n||null===(e=n.tables)||void 0===e?void 0:e.map((function(e,t){return(0,F.jsx)(y.ZP,{className:"w-[140px] mr-2 mb-2",ghost:u!==e.name.toString(),type:"primary",size:"large",onClick:function(){return B(e)},children:e.name.toString()},t)}))}),!!u&&(0,F.jsxs)("div",{children:[(0,F.jsx)("div",{className:"hardline text-lg font-semibold mb-2 mt-3",children:q}),(0,F.jsx)(h.A,{initialValues:{scope:void 0===j.scope?s:j.scope,lower_bound:j.lower_bound,upper_bound:j.upper_bound,limit:j.limit,reverse:j.reverse,index_position:j.index_position,key_type:j.key_type,json:j.json,show_payer:j.show_payer,time_limit_ms:j.time_limit_ms,lower_bound2:S.lower_bound,upper_bound2:S.upper_bound,limit2:S.limit,reverse2:S.reverse,time_limit_ms2:S.time_limit_ms},className:"pl-[13px]",formRef:r,layout:"vertical",onValuesChange:L,onFinish:o()(a()().mark((function e(){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",V());case 1:case"end":return e.stop()}}),e)}))),submitter:{render:function(e,t){return[(0,F.jsx)(Re.Z,{spinning:z,size:"small",children:t[1]},"comfirm"),(0,F.jsx)(y.ZP,{onClick:U,children:D},"copy"),(0,F.jsx)(y.ZP,{onClick:function(){return Y.current.handleOpen()},children:$},"decode")]}},children:v?(0,F.jsxs)(h.A.Group,{children:[(0,F.jsx)(x.Z,{name:"lower_bound2",label:"Lower Bound",placeholder:"Search...",fieldProps:{autoFocus:!1,size:"large"}}),(0,F.jsx)(x.Z,{name:"upper_bound2",label:"Upper Bound",placeholder:"Search...",fieldProps:{size:"large"}}),(0,F.jsx)(x.Z,{name:"limit2",label:"Limit",placeholder:"Search...",transform:function(e){return Number(e)},fieldProps:{type:"number",size:"large"}}),(0,F.jsx)(x.Z,{name:"time_limit_ms2",label:"Time_Limit_MS",placeholder:"100",transform:function(e){return Number(e)},fieldProps:{type:"number",size:"large"}}),(0,F.jsx)(g.Z,{name:"reverse2",label:"Reverse",fieldProps:{onClick:function(){var e;return null===(e=r.current)||void 0===e?void 0:e.submit()}}})]}):(0,F.jsxs)(h.A.Group,{children:[(0,F.jsx)(x.Z,{name:"scope",label:"Scope",placeholder:"Search...",fieldProps:{defaultValue:"".concat(s),autoFocus:!1,size:"large"}}),(0,F.jsx)(x.Z,{name:"lower_bound",label:"Lower Bound",placeholder:"Search...",fieldProps:{size:"large"}}),(0,F.jsx)(x.Z,{name:"upper_bound",label:"Upper Bound",placeholder:"Search...",fieldProps:{size:"large"}}),(0,F.jsx)(x.Z,{name:"limit",label:"Limit",placeholder:"Search...",transform:function(e){return Number(e)},fieldProps:{type:"number",size:"large"}}),(0,F.jsx)(x.Z,{name:"time_limit_ms",label:"Time_Limit_MS",placeholder:"100",transform:function(e){return Number(e)},fieldProps:{type:"number",size:"large"}}),(0,F.jsx)(Te.Z,{name:"index_position",label:"Index Position",placeholder:"Select...",options:["primary","secondary","tertiary","fourth","fifth","sixth","seventh","eighth","ninth","tenth"],fieldProps:{size:"large"}}),(0,F.jsx)(Te.Z,{name:"key_type",label:"Key Type",placeholder:"Select...",options:["name","i64","i128","float64","float128","ripemd160","sha256"],fieldProps:{size:"large"}}),(0,F.jsxs)(h.A.Group,{children:[(0,F.jsx)(g.Z,{name:"reverse",label:"Reverse",fieldProps:{onClick:function(){var e;return null===(e=r.current)||void 0===e?void 0:e.submit()}}}),(0,F.jsx)(g.Z,{name:"show_payer",label:"Show Payer",fieldProps:{onClick:function(){var e;return null===(e=r.current)||void 0===e?void 0:e.submit()}}}),(0,F.jsx)(g.Z,{name:"json",label:"JSON",fieldProps:{defaultValue:!0,onClick:function(){var e;return null===(e=r.current)||void 0===e?void 0:e.submit()}}})]})]})}),(0,F.jsx)("div",{className:"hardline text-lg font-semibold mb-2 mt-3",children:R}),l.length?(0,F.jsx)(qe.Z,{loading:{spinning:z,size:"large"},rowKey:"_key",scroll:{x:!0},size:"small",columns:m,dataSource:l,defaultData:[],search:!1,options:!1,pagination:!1}):(0,F.jsx)("div",{className:"text-base pl-[13px]",children:I})]}),(0,F.jsx)(He,{ref:Y}),_]})},Be=(0,w.memo)(Ve),We=r(57132),Le=r(11774),Ue=r(69677),Qe=r(92398),Ge=r(79123),Ke=(r(20034),r(31145),function(){var e=k.ZP.useMessage(),t=c()(e,2),r=t[0],n=t[1],s=(0,b.useDispatch)(),i=(0,b.useSelector)((function(e){return e.global.session})),u=(0,b.useSelector)((function(e){return e.global.contractKit})),l=(0,b.useSelector)((function(e){return e.contract.rawAbi})),m=(0,b.useSelector)((function(e){return e.contract.contract})),d=(0,b.useSelector)((function(e){return e.contract.tableSelection})),g=(0,b.useSelector)((function(e){return e.contract.actionSelection})),x=(0,b.useSelector)((function(e){return e.contract.activeKey})),h=(0,w.useState)(""),v=c()(h,2),y=v[0],j=v[1],S=(0,w.useState)(!1),P=c()(S,2),N=P[0],_=P[1],M=(0,b.useSearchParams)(),Z=c()(M,2),z=Z[0],O=Z[1],A=z.get("tab")?z.get("tab"):void 0,E=(0,b.useIntl)(),T=E.formatMessage({id:"contract.intlContract"}),q=E.formatMessage({id:"contract.intlSearch"}),D=E.formatMessage({id:"contract.intlAccountFormatError"}),R=E.formatMessage({id:"contract.intlNonContractAccount"}),I=E.formatMessage({id:"contract.intlSearchContract"}),$=E.formatMessage({id:"common.intlCopySuccess"}),Y=(0,w.useCallback)(function(){var e=o()(a()().mark((function e(t,n){var s,o,u,l;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(/^[a-z1-5.]{1,12}$/.test(t)){e.next=8;break}if(t||n.hasOwnProperty("type")){e.next=4;break}return e.abrupt("return",!1);case 4:return r.error("".concat(D)),e.abrupt("return",!1);case 8:return e.next=10,(0,f.zI)(i.client.v1.chain.get_abi(t));case 10:if(s=e.sent,o=c()(s,2),u=o[0],l=o[1],!u){e.next=17;break}return r.error(u),e.abrupt("return",!1);case 17:if(u||!l.hasOwnProperty("abi")){e.next=21;break}return e.abrupt("return",!0);case 21:return r.error("".concat(R)),e.abrupt("return",!1);case 23:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),[i,r]),J=(0,w.useCallback)(function(){var e=o()(a()().mark((function e(t,n){var o,i,l,m,d,g;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u){e.next=19;break}return _(!0),e.next=4,Y(t,n);case 4:if(e.sent){e.next=7;break}return _(!1),e.abrupt("return");case 7:return e.next=9,(0,f.zI)(u.load(t));case 9:o=e.sent,i=c()(o,2),l=i[0],m=i[1],l?r.error(l):(d=m.abi.toJSON(),g=JSON.stringify(d),g=JSON.parse(g),s(p.N.setContract(t)),s(p.N.setABI(d)),s(p.N.setRawABI(g)),s(p.N.setActionType("")),s(p.N.setActionSelection("")),s(p.N.setTableSelection("")),s(p.N.setTableDataSource([])),s(p.N.setTableColumns([])),s(p.N.setTableByScope(!1)),s(p.N.setTableParams({code:"",table:"",scope:void 0,lower_bound:void 0,upper_bound:void 0,limit:100,reverse:void 0,index_position:void 0,key_type:"i64",json:!0,show_payer:void 0,time_limit_ms:10})),s(p.N.setTableByScopeParams({code:"",table:"",lower_bound:void 0,upper_bound:void 0,limit:100,reverse:void 0,time_limit_ms:10}))),j(""),s(p.N.setEncodeData(void 0)),s(p.N.setDecodeData(void 0)),s(p.N.setReadOnlyData(void 0)),_(!1);case 19:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),[u,Y,r]),H=(0,w.useCallback)((0,Ie.debounce)(function(){var e=o()(a()().mark((function e(t){var r,n,s,o,u;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.target.value,/^[a-z1-5.]{1,12}$/.test(r)){e.next=6;break}0===r.trim().length?j(""):j("error"),e.next=13;break;case 6:return e.next=8,(0,f.zI)(i.client.v1.chain.get_abi(r));case 8:n=e.sent,s=c()(n,2),o=s[0],u=s[1],!o&&u.hasOwnProperty("abi")?j(""):j("error");case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),1e3),[i]),V=(0,w.useMemo)((function(){return"tables"===x&&d?m+"::"+d:"actions"===x&&g?m+"::"+g:m||""}),[x,d,g,m]),B=(0,w.useCallback)(o()(a()().mark((function e(){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.navigator.clipboard.writeText(JSON.stringify(l));case 2:r.success("".concat($));case 3:case"end":return e.stop()}}),e)}))),[l]),W=[{key:"tables",label:(0,F.jsx)("span",{className:"text-lg font-semibold",children:"Tables"}),children:!!l&&(0,F.jsx)(Be,{})},{key:"actions",label:(0,F.jsx)("span",{className:"text-lg font-semibold",children:"Actions"}),children:!!l&&(0,F.jsx)(Ee,{})},{key:"abi",label:(0,F.jsx)("span",{className:"text-lg font-semibold",children:"ABI"}),children:!!l&&(0,F.jsxs)("div",{className:"pl-[13px]",children:[(0,F.jsx)(We.Z,{className:"cursor-pointer",style:{color:"#1677ff"},onClick:B}),(0,F.jsx)(Ge.ZP,{className:"text-lg",src:l,collapsed:!1,displaySize:!0,enableClipboard:!1})]})},{key:"tip",label:(0,F.jsx)("span",{className:"text-lg font-semibold",children:V}),disabled:!0}],L=(0,w.useCallback)((function(e,t){var r={};e&&(r.search=e),r.tab=t||x,O(r)}),[x]);return(0,w.useEffect)((function(){var e=z.get("search"),t=z.get("tab");t&&s(p.N.setActiveKey(t)),e&&J(e,""),L(e,t)}),[J]),(0,w.useEffect)((function(){L(m||"",x)}),[m,x,L]),(0,F.jsxs)(Le._z,{className:"contract",ghost:!0,children:[(0,F.jsxs)(C.Z,{title:(0,F.jsx)("div",{className:"hardline font-semibold text-lg mb-3",children:I}),children:[(0,F.jsx)(Ue.Z.Search,{className:"",loading:N,addonBefore:(0,F.jsx)(Re.Z,{spinning:N,children:T}),placeholder:"Search...",allowClear:!0,enterButton:q,size:"large",status:y,onSearch:J,onChange:H}),(0,F.jsx)(Qe.Z,{className:"mt-2",defaultActiveKey:"tables",items:W,activeKey:A,onChange:function(e){return s(p.N.setActiveKey(e))}})]}),n]})})},20034:function(){},31145:function(){},64599:function(e,t,r){var n=r(96263);e.exports=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=n(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var a=0,s=function(){};return{s:s,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw o}}}},e.exports.__esModule=!0,e.exports.default=e.exports}}]);