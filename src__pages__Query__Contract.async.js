"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[110],{64317:function(e,r,t){var n=t(1413),a=t(91),s=t(22270),c=t(62435),o=t(66758),i=t(56499),u=t(86074),l=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],m=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],d=function(e,r){var t=e.fieldProps,m=e.children,d=e.params,p=e.proFieldProps,f=e.mode,h=e.valueEnum,g=e.request,b=e.showSearch,x=e.options,v=(0,a.Z)(e,l),y=(0,c.useContext)(o.Z);return(0,u.jsx)(i.Z,(0,n.Z)((0,n.Z)({valueEnum:(0,s.h)(h),request:g,params:d,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,n.Z)({options:x,mode:f,showSearch:b,getPopupContainer:y.getPopupContainer},t),ref:r,proFieldProps:p},v),{},{children:m}))},p=c.forwardRef((function(e,r){var t=e.fieldProps,l=e.children,d=e.params,p=e.proFieldProps,f=e.mode,h=e.valueEnum,g=e.request,b=e.options,x=(0,a.Z)(e,m),v=(0,n.Z)({options:b,mode:f||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},t),y=(0,c.useContext)(o.Z);return(0,u.jsx)(i.Z,(0,n.Z)((0,n.Z)({valueEnum:(0,s.h)(h),request:g,params:d,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,n.Z)({getPopupContainer:y.getPopupContainer},v),ref:r,proFieldProps:p},x),{},{children:l}))})),f=c.forwardRef(d);f.SearchSelect=p,f.displayName="ProFormComponent",r.Z=f},90672:function(e,r,t){var n=t(1413),a=t(91),s=t(62435),c=t(56499),o=t(86074),i=["fieldProps","proFieldProps"],u=function(e,r){var t=e.fieldProps,s=e.proFieldProps,u=(0,a.Z)(e,i);return(0,o.jsx)(c.Z,(0,n.Z)({ref:r,valueType:"textarea",fieldProps:t,proFieldProps:s},u))};r.Z=s.forwardRef(u)},69095:function(e,r,t){t.r(r),t.d(r,{default:function(){return Se}});var n=t(15009),a=t.n(n),s=t(99289),c=t.n(s),o=t(5574),i=t.n(o),u=t(19632),l=t.n(u),m=t(97857),d=t.n(m),p=t(80107),f=t(64119),h=t(1413),g=t(91),b=t(62435),x=t(56499),v=t(86074),y=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],j=b.forwardRef((function(e,r){var t=e.fieldProps,n=e.unCheckedChildren,a=e.checkedChildren,s=e.proFieldProps,c=(0,g.Z)(e,y);return(0,v.jsx)(x.Z,(0,h.Z)({valueType:"switch",fieldProps:(0,h.Z)({unCheckedChildren:n,checkedChildren:a},t),ref:r,valuePropName:"checked",proFieldProps:s,filedConfig:{valuePropName:"checked",ignoreWidth:!0,customLightMode:!0}},c))})),S=t(5966),P=t(97269),k=t(59530),N=t(80507),w=t(45360),C=t(15867),_=t(71230),O=t(15746),Z=function(){var e=(0,k.useDispatch)(),r=(0,k.useSelector)((function(e){return e.contract.batchActions})),t=(0,k.useSelector)((function(e){return e.global.session})),n=(0,k.useSelector)((function(e){return e.global.account})),s=w.ZP.useMessage(),o=i()(s,2),u=o[0],l=o[1],m=(0,k.useIntl)(),d=m.formatMessage({id:"contract.intlBatchActions"}),h=m.formatMessage({id:"common.intlTxSuccess"}),g=m.formatMessage({id:"common.intlTxFail"}),x=m.formatMessage({id:"common.intlPleaseConnectWallet"}),y=m.formatMessage({id:"common.intlPleaseConnectNetwork"}),j=(0,b.useCallback)(c()(a()().mark((function e(){var s,c,o,l,m;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.broadcast){e.next=5;break}return u.error("".concat(x)),e.abrupt("return");case 5:if(n){e.next=8;break}return u.error("".concat(y)),e.abrupt("return");case 8:return s=[],r.forEach((function(e){s.push(JSON.parse(e.typedAction))})),e.next=12,(0,f.zI)(t.transact({actions:s}));case 12:c=e.sent,o=i()(c,2),l=o[0],m=o[1],l?u.error(l):m&&m.response?u.success("".concat(h)):u.error("".concat(g));case 17:case"end":return e.stop()}}),e)}))),[t,n,r]),S=(0,b.useCallback)((function(t){var n=r.filter((function(e,r){return r!==t}));e(p.N.setBatchActions(n))}),[r]),N=(0,b.useCallback)((function(){e(p.N.setBatchActions([]))}),[]);return(0,v.jsxs)("div",{className:"tab-action",children:[(0,v.jsx)("div",{className:"hardline text-lg font-semibold mb-3 mt-3",children:"".concat(d,"(").concat(r.length,")")}),(0,v.jsx)("div",{className:"px-[13px]",children:r.map((function(e,r){return(0,v.jsx)("div",{className:"mb-2",children:(0,v.jsxs)("div",{style:{background:"#e6f4ff",border:"1px solid #91caff",boxSizing:"border-box",margin:"0",padding:"8px 12px",color:"rgba(0, 0, 0, 0.88)",fontSize:"14px",lineHeight:"1.5714285714285714",listStyle:"none",position:"relative",display:"flex",alignItems:"center",wordWrap:"break-word",borderRadius:"8px"},children:[(0,v.jsx)("div",{style:{flex:1,minWidth:0,boxSizing:"border-box"},children:e.untypedAction}),(0,v.jsx)("button",{type:"button",onClick:function(){return S(r)},style:{marginInlineStart:"8px",padding:0,overflow:"hidden",fontSize:"12px",lineHeight:"12px",backgroundColor:"transparent",border:"none",outline:"none",cursor:"pointer"},children:(0,v.jsx)("span",{style:{color:"rgba(0, 0, 0, 0.45)",transition:"color 0.2s"},children:(0,v.jsx)("svg",{fillRule:"evenodd",viewBox:"64 64 896 896",focusable:"false",width:"1em",height:"1em",fill:"currentColor",children:(0,v.jsx)("path",{d:"M799.86 166.31c.02 0 .04.02.08.06l57.69 57.7c.04.03.05.05.06.08a.12.12 0 010 .06c0 .03-.02.05-.06.09L569.93 512l287.7 287.7c.04.04.05.06.06.09a.12.12 0 010 .07c0 .02-.02.04-.06.08l-57.7 57.69c-.03.04-.05.05-.07.06a.12.12 0 01-.07 0c-.03 0-.05-.02-.09-.06L512 569.93l-287.7 287.7c-.04.04-.06.05-.09.06a.12.12 0 01-.07 0c-.02 0-.04-.02-.08-.06l-57.69-57.7c-.04-.03-.05-.05-.06-.07a.12.12 0 010-.07c0-.03.02-.05.06-.09L454.07 512l-287.7-287.7c-.04-.04-.05-.06-.06-.09a.12.12 0 010-.07c0-.02.02-.04.06-.08l57.7-57.69c.03-.04.05-.05.07-.06a.12.12 0 01.07 0c.03 0 .05.02.09.06L512 454.07l287.7-287.7c.04-.04.06-.05.09-.06a.12.12 0 01.07 0z"})})})})]})},r)}))}),(0,v.jsx)(P.A,{className:"pl-[13px]",layout:"vertical",onFinish:c()(a()().mark((function e(){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",j());case 1:case"end":return e.stop()}}),e)}))),onReset:N}),l]})},M=(0,b.memo)(Z),T=function(){var e=(0,k.useSelector)((function(e){return e.contract.decodeData})),r=(0,k.useIntl)().formatMessage({id:"contract.intlDecodeResult"});return(0,v.jsxs)("div",{className:"tab-action",children:[(0,v.jsx)("div",{className:"hardline text-lg font-semibold mb-3 mt-3",children:r}),(0,v.jsx)("div",{className:"px-[13px]",children:(0,v.jsx)("pre",{children:e})})]})},F=(0,b.memo)(T),D=function(){var e=(0,k.useSelector)((function(e){return e.contract.encodeData})),r=(0,k.useIntl)().formatMessage({id:"contract.intlEncodeResult"});return(0,v.jsxs)("div",{className:"tab-action",children:[(0,v.jsx)("div",{className:"hardline text-lg font-semibold mb-3 mt-3",children:r}),(0,v.jsxs)("div",{className:"px-[13px]",children:[(0,v.jsx)("div",{className:"text-base font-semibold",children:"Action:"}),(0,v.jsx)("pre",{children:e.action}),(0,v.jsx)("div",{className:"text-base font-semibold",children:"Transaction:"}),(0,v.jsx)("pre",{children:e.transaction}),(0,v.jsx)("div",{className:"text-base font-semibold",children:"SigningData:"}),(0,v.jsx)("div",{className:" break-words mb-3",children:e.signingData}),(0,v.jsx)("div",{className:"text-base font-semibold",children:"SigningDigest:"}),(0,v.jsx)("pre",{children:e.signingDigest}),(0,v.jsx)("div",{className:"text-base font-semibold",children:"SignedTransaction:"}),(0,v.jsx)("pre",{children:e.signedTransaction}),(0,v.jsx)("div",{className:"text-base font-semibold",children:"PackedTransaction:"}),(0,v.jsx)("pre",{children:e.packedTransaction}),(0,v.jsx)("div",{className:"text-base font-semibold",children:"Transaction ID:"}),(0,v.jsx)("pre",{children:e.transactionId})]})]})},E=(0,b.memo)(D),A=t(37476),I=t(90672),z=b.forwardRef((function(e,r){var t=(0,k.useDispatch)(),n=w.ZP.useMessage(),s=i()(n,2),o=s[0],u=s[1],l=(0,k.useSelector)((function(e){return e.contract.abi})),m=(0,k.useSelector)((function(e){return e.contract.actionSelection})),d=(0,k.useIntl)(),f=d.formatMessage({id:"contract.intlDecode"}),h=d.formatMessage({id:"common.intlInputException"}),g=d.formatMessage({id:"contract.intlDecodeSuccess"}),x=(0,b.useRef)(),y=(0,b.useState)(!1),j=i()(y,2),S=j[0],P=j[1],C=(0,b.useCallback)((function(){P(!0)}),[]);(0,b.useImperativeHandle)(r,(function(){return{handleOpen:C}}));var _=(0,b.useCallback)(function(){var e=c()(a()().mark((function e(r){var n,s;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=N.ei.decode({data:r.input,abi:l,type:m}),s=JSON.stringify(n,null,2),t(p.N.setDecodeData(s)),t(p.N.setBatchActions([])),t(p.N.setEncodeData(void 0)),o.success("".concat(g)),e.abrupt("return",!0);case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0.message),o.error(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(r){return e.apply(this,arguments)}}(),[l,m]);return(0,v.jsxs)(A.Y,{formRef:x,title:f,open:S,onFinish:_,onOpenChange:function(e){P(e)},layout:"horizontal",width:"600px",children:[(0,v.jsx)(I.Z,{placeholder:"example: 000000000090b1ca10270000000000000444465300000000",name:"input",fieldProps:{autoSize:{minRows:5},allowClear:!0,autoFocus:!1},rules:[{required:!0,whitespace:!0,message:"".concat(h),pattern:/^[a-fA-F0-9]+$/}]}),u]})})),R=(0,b.memo)(z),$=t(72004),J=t.n($),B=t(12444),Y=t.n(B),V=t(31996),L=t.n(V),q=t(26037),H=t.n(q),U=t(9783),W=t.n(U),K=["fieldProps","proFieldProps","min","max","step","marks","vertical","range"],G=b.forwardRef((function(e,r){var t=e.fieldProps,n=e.proFieldProps,a=e.min,s=e.max,c=e.step,o=e.marks,i=e.vertical,u=e.range,l=(0,g.Z)(e,K);return(0,v.jsx)(x.Z,(0,h.Z)({valueType:"slider",fieldProps:(0,h.Z)((0,h.Z)({},t),{},{min:a,max:s,step:c,marks:o,vertical:i,range:u,style:null==t?void 0:t.style}),ref:r,proFieldProps:n,filedConfig:{ignoreWidth:!0}},l))})),Q=t(27484),X=t.n(Q),ee=t(70178),re=t.n(ee);X().extend(re());var te=b.forwardRef((function(e,r){var t=w.ZP.useMessage(),n=i()(t,2),s=n[0],o=n[1],u=(0,b.useRef)(),l=(0,b.useState)(!1),m=i()(l,2),d=m[0],p=m[1],f=(0,b.useState)(""),h=i()(f,2),g=h[0],x=h[1],y=(0,b.useState)(""),j=i()(y,2),S=j[0],P=j[1],N=(0,b.useState)(1),_=i()(N,2),O=_[0],Z=_[1],M=(0,b.useState)(""),T=i()(M,2),F=T[0],D=T[1],E=(0,b.useState)(""),z=i()(E,2),R=z[0],$=z[1],J=(0,k.useIntl)(),B=J.formatMessage({id:"common.intlCopySuccess"}),Y=J.formatMessage({id:"common.intlCopy"}),V=J.formatMessage({id:"common.intlExport"}),L=J.formatMessage({id:"contract.intlSignedTransaction"}),q=(0,b.useCallback)((function(e,r,t,n,a){var s;null===(s=u.current)||void 0===s||s.setFieldValue("content",JSON.stringify(e,null,2)),x(JSON.stringify(e,null,2)),P(r),Z(a),D(t),$(n),p(!0)}),[]);(0,b.useImperativeHandle)(r,(function(){return{handleOpen:q}}));var H=(0,b.useCallback)(c()(a()().mark((function e(){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.navigator.clipboard.writeText(g);case 2:s.success("".concat(B));case 3:case"end":return e.stop()}}),e)}))),[g]),U=(0,b.useCallback)((function(){var e="data:,".concat(g),r=document.createElement("a");r.href=e,r.download="".concat(F,"@").concat(R,"_threshold@").concat(O,"_expiration@").concat(S,"_msig.json"),r.click()}),[g,S,O,F,R]);return(0,v.jsxs)(A.Y,{formRef:u,title:L,open:d,onOpenChange:function(e){p(e)},submitter:{render:function(e,r){return[r[0],(0,v.jsx)(C.ZP,{onClick:H,children:Y},"copy"),(0,v.jsx)(C.ZP,{type:"primary",onClick:U,children:V},"export")]}},layout:"vertical",width:"700px",modalProps:{style:{top:25}},children:[(0,v.jsx)(I.Z,{name:"content",fieldProps:{autoSize:{minRows:5},allowClear:!1,autoFocus:!1,onChange:void 0,value:g}}),o]})})),ne=(0,b.memo)(te);X().extend(re());var ae=function(e){L()(t,e);var r=H()(t);function t(){return Y()(this,t),r.apply(this,arguments)}return J()(t)}(N.AU);W()(ae,"abiName","freecpu"),W()(ae,"abiFields",[{name:"user",type:N.VG}]);var se=b.forwardRef((function(e,r){var t=w.ZP.useMessage(),n=i()(t,2),s=n[0],o=n[1],u=(0,k.useSelector)((function(e){return e.contract.abi})),m=(0,k.useSelector)((function(e){return e.contract.actionSelection})),p=(0,k.useSelector)((function(e){return e.global.session})),h=(0,k.useSelector)((function(e){return e.contract.fields})),g=(0,k.useSelector)((function(e){return e.contract.contract})),x=(0,k.useSelector)((function(e){return e.global.privateKey})),y=(0,b.useState)(),P=i()(y,2),_=P[0],O=P[1],Z=(0,b.useState)(new Set),M=i()(Z,2),T=M[0],F=M[1],D=(0,b.useRef)(),E=(0,k.useIntl)(),I=E.formatMessage({id:"contract.intlCreateTransaction"}),z=E.formatMessage({id:"common.intlInputException"}),R=E.formatMessage({id:"account.intlPermissionNotExist"}),$=E.formatMessage({id:"contract.intlCreate"}),J=E.formatMessage({id:"contract.intlCreateAndSign"}),B=E.formatMessage({id:"contract.intlExpiration"}),Y=E.formatMessage({id:"contract.intlFreeCpu"}),V=E.formatMessage({id:"contract.intlAccount"}),L=E.formatMessage({id:"contract.intlPermission"}),q=(0,b.useRef)(),H=(0,b.useState)(!1),U=i()(H,2),W=U[0],K=U[1],Q=(0,b.useCallback)((function(e,r){O(e),F(r),K(!0)}),[]);(0,b.useImperativeHandle)(r,(function(){return{handleOpen:Q}}));var ee=(0,b.useCallback)(function(){var e=c()(a()().mark((function e(r){var t,n,c,o,b,v,y,j,S,P,k,w,C,O,Z,M,F,E,A,I,z,$,J,B,Y,V,L,q,H;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.account,c=r.permission,o=X()().add(r.expiration,"minutes").utc().format("YYYY-MM-DDTHH:mm:ss"),b=r.freeCpu,j=[],S=1,e.next=8,(0,f.zI)(p.client.v1.chain.get_account(n));case 8:if(P=e.sent,k=i()(P,2),w=k[0],C=k[1],!w){e.next=17;break}return s.error(w),e.abrupt("return",!1);case 17:O=!1,Z=0;case 19:if(!(Z<C.permissions.length)){e.next=27;break}if(C.permissions[Z].perm_name.toString()!==c){e.next=24;break}return S=C.permissions[Z].required_auth.keyThreshold,O=!0,e.abrupt("break",27);case 24:Z++,e.next=19;break;case 27:if(O){e.next=30;break}return s.error("".concat(R)),e.abrupt("return",!1);case 30:return M=null===(t=_.current)||void 0===t?void 0:t.getFieldsValue(),F=/.+\?$/,E=/.+\$$/,A=Object.assign({},M),Object.keys(A).forEach((function(e){T.has(e)&&(A[e]=JSON.parse(A[e]))})),Object.keys(A).forEach((function(e){var r=h.find((function(r){return r.name===e}));r&&F.test(r.type)?void 0!==A[e]&&String(A[e]).trim()||(A[e]=null):r&&E.test(r.type)&&(A[e]="")})),I={account:g,name:m,authorization:[{actor:n,permission:c}],data:A},z=N.aU.from(I,u),$={account:"dfsfreecpu11",name:"freecpu",authorization:[{actor:"dfs.service",permission:"cpu"},{actor:n,permission:c}],data:ae.from({user:n})},J=N.aU.from($),e.next=42,p.client.v1.chain.get_info();case 42:return B=e.sent,Y=B.getTransactionHeader(),b?(v=N.YW.from(d()(d()({},Y),{},{expiration:o,actions:[J,z]})),j[0]=x.signDigest(v.signingDigest(p.chain.id.toString()))):v=N.YW.from(d()(d()({},Y),{},{expiration:o,actions:[z]})),e.next=47,(0,f.zI)(p.transact({transaction:v},{broadcast:!1,transactPlugins:[]}));case 47:if(V=e.sent,L=i()(V,2),q=L[0],H=L[1],!q){e.next=54;break}return s.error(q),e.abrupt("return",!1);case 54:y=N.uQ.from(d()(d()({},v),{},{signatures:[].concat(j,l()(H.signatures))})),D.current.handleOpen(y,o,n,c,S);case 56:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),[p,_,T,h,g,x]),re=(0,b.useCallback)(c()(a()().mark((function e(){var r,t,n,c,o,l,b,v,y,j,S,P,k,w,C,O,Z,M,F,E,A,I,z,$,J,B,Y,V;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(r=q.current)||void 0===r||r.validateFields(),c=null===(t=q.current)||void 0===t?void 0:t.getFieldsValue(),o=c.account,l=c.permission,b=X()().add(c.expiration,"minutes").utc().format("YYYY-MM-DDTHH:mm:ss"),v=c.freeCpu,S=1,e.next=9,(0,f.zI)(p.client.v1.chain.get_account(o));case 9:if(P=e.sent,k=i()(P,2),w=k[0],C=k[1],!w){e.next=18;break}return s.error(w),e.abrupt("return",!1);case 18:O=!1,Z=0;case 20:if(!(Z<C.permissions.length)){e.next=28;break}if(C.permissions[Z].perm_name.toString()!==l){e.next=25;break}return S=C.permissions[Z].required_auth.keyThreshold,O=!0,e.abrupt("break",28);case 25:Z++,e.next=20;break;case 28:if(O){e.next=31;break}return s.error("".concat(R)),e.abrupt("return",!1);case 31:return M=null===(n=_.current)||void 0===n?void 0:n.getFieldsValue(),F=/.+\?$/,E=/.+\$$/,A=Object.assign({},M),Object.keys(A).forEach((function(e){T.has(e)&&(A[e]=JSON.parse(A[e]))})),Object.keys(A).forEach((function(e){var r=h.find((function(r){return r.name===e}));r&&F.test(r.type)?void 0!==A[e]&&String(A[e]).trim()||(A[e]=null):r&&E.test(r.type)&&(A[e]="")})),I={account:g,name:m,authorization:[{actor:o,permission:l}],data:A},z=N.aU.from(I,u),$={account:"dfsfreecpu11",name:"freecpu",authorization:[{actor:"dfs.service",permission:"cpu"},{actor:o,permission:l}],data:ae.from({user:o})},J=N.aU.from($),e.next=43,p.client.v1.chain.get_info();case 43:B=e.sent,Y=B.getTransactionHeader(),v?(y=N.YW.from(d()(d()({},Y),{},{expiration:b,actions:[J,z]})),V=x.signDigest(y.signingDigest(p.chain.id.toString())),j=N.uQ.from(d()(d()({},y),{},{signatures:[V]}))):(y=N.YW.from(d()(d()({},Y),{},{expiration:b,actions:[z]})),j=N.uQ.from(d()(d()({},y),{},{signatures:[]}))),D.current.handleOpen(j,b,o,l,S);case 47:case"end":return e.stop()}}),e)}))),[p,_,T,h,g,x]);return(0,v.jsxs)(A.Y,{formRef:q,title:I,open:W,onFinish:ee,onOpenChange:function(e){K(e)},initialValues:{freeCpu:!0,expiration:60},submitter:{searchConfig:{submitText:J},render:function(e,r){return[r[0],(0,v.jsx)(C.ZP,{onClick:re,children:$},"import"),r[1]]}},layout:"vertical",width:"400px",children:[(0,v.jsx)(S.Z,{name:"account",label:V,placeholder:"example: dfsdeveloper",fieldProps:{autoFocus:!1},rules:[{required:!0,whitespace:!0,message:"".concat(z),pattern:/^[a-z1-5.]{1,12}$/}]}),(0,v.jsx)(S.Z,{name:"permission",label:L,placeholder:"example: active",fieldProps:{autoFocus:!1},rules:[{required:!0,whitespace:!0,message:"".concat(z),pattern:/^[a-z1-5.]{1,12}$/}]}),(0,v.jsx)(G,{name:"expiration",label:B,marks:{10:"10",30:"30",60:"60"},min:10,max:60,fieldProps:{autoFocus:!1},rules:[{required:!0,whitespace:!0,message:"".concat(z),pattern:/^\d+$/}]}),(0,v.jsx)(j,{name:"freeCpu",label:Y}),(0,v.jsx)(ne,{ref:D}),o]})})),ce=(0,b.memo)(se),oe=function(){var e,r=(0,b.useRef)(),t=(0,b.useRef)(),n=(0,b.useRef)(),s=(0,k.useDispatch)(),o=(0,b.useState)(new Set),u=i()(o,1)[0],m=(0,k.useSelector)((function(e){return e.contract.abi})),h=(0,k.useSelector)((function(e){return e.contract.actionSelection})),g=(0,k.useSelector)((function(e){return e.contract.actionType})),x=(0,k.useSelector)((function(e){return e.global.session})),y=(0,k.useSelector)((function(e){return e.global.account})),Z=(0,k.useSelector)((function(e){return e.contract.contract})),T=(0,k.useSelector)((function(e){return e.contract.batchActions})),D=(0,k.useSelector)((function(e){return e.contract.encodeData})),A=(0,k.useSelector)((function(e){return e.contract.decodeData})),I=(0,k.useSelector)((function(e){return e.contract.fields})),z=w.ZP.useMessage(),$=i()(z,2),J=$[0],B=$[1],Y=(0,k.useIntl)(),V=Y.formatMessage({id:"common.intlCopySuccess"}),L=Y.formatMessage({id:"contract.intlSelectAction"}),q=Y.formatMessage({id:"contract.intlEnterData"}),H=Y.formatMessage({id:"common.intlCopy"}),U=Y.formatMessage({id:"common.intlTxSuccess"}),W=Y.formatMessage({id:"common.intlTxFail"}),K=Y.formatMessage({id:"common.intlPleaseConnectWallet"}),G=Y.formatMessage({id:"common.intlPleaseConnectNetwork"}),Q=Y.formatMessage({id:"contract.intlAdd"}),X=Y.formatMessage({id:"contract.intlEncode"}),ee=Y.formatMessage({id:"contract.intlDecode"}),re=Y.formatMessage({id:"contract.intlEncodeSuccess"}),te=Y.formatMessage({id:"contract.intlMsig"}),ne=(0,b.useCallback)((function(e,r){var t=/(\$|\?)$/g,n=/^[a-z1-5.]{1,12}$/,a=/^\d+$/,s=/^-?\d+$/,c=/^(-?\d+)(.\d+)?$/,o=/^([0-9a-fA-F][0-9a-fA-F])+$/;if(t.test(e.message)&&!r)return Promise.resolve();switch(e.message.replace(t,"")){case"string":return Promise.resolve("");case"name":try{return n.test(r)?Promise.resolve(N.VG.from(r)):Promise.reject(e.message=String(n))}catch(r){return Promise.reject(e.message=r.message)}case"asset":try{return Promise.resolve(N.xR.from(r))}catch(r){return Promise.reject(e.message=r.message)}case"checksum160":try{return Promise.resolve(N.b9.from(r))}catch(r){return Promise.reject(e.message=r.message)}case"checksum256":try{return Promise.resolve(N.Nz.from(r))}catch(r){return Promise.reject(e.message=r.message)}case"checksum512":try{return Promise.resolve(N.W4.from(r))}catch(r){return Promise.reject(e.message=r.message)}case"uint8":try{return a.test(r)?Promise.resolve(N._A.from(r)):Promise.reject(e.message=String(a))}catch(r){return Promise.reject(e.message=r.message)}case"uint16":try{return a.test(r)?Promise.resolve(N.j8.from(r)):Promise.reject(e.message=String(a))}catch(r){return Promise.reject(e.message=r.message)}case"uint32":try{return a.test(r)?Promise.resolve(N.xH.from(r)):Promise.reject(e.message=String(a))}catch(r){return Promise.reject(e.message=r.message)}case"uint64":try{return a.test(r)?Promise.resolve(N.zM.from(r)):Promise.reject(e.message=String(a))}catch(r){return Promise.reject(e.message=r.message)}case"uint128":try{return a.test(r)?Promise.resolve(N.pB.from(r)):Promise.reject(e.message=String(a))}catch(r){return Promise.reject(e.message=r.message)}case"varuint":try{return a.test(r)?Promise.resolve(N.mj.from(r)):Promise.reject(e.message=String(a))}catch(r){return Promise.reject(e.message=r.message)}case"varuint16":try{return a.test(r)?Promise.resolve(N.mj.from(r)):Promise.reject(e.message=String(a))}catch(r){return Promise.reject(e.message=r.message)}case"varuint32":try{return a.test(r)?Promise.resolve(N.mj.from(r)):Promise.reject(e.message=String(a))}catch(r){return Promise.reject(e.message=r.message)}case"varuint64":try{return a.test(r)?Promise.resolve(N.mj.from(r)):Promise.reject(e.message=String(a))}catch(r){return Promise.reject(e.message=r.message)}case"varuint128":try{return a.test(r)?Promise.resolve(N.mj.from(r)):Promise.reject(e.message=String(a))}catch(r){return Promise.reject(e.message=r.message)}case"int8":try{return s.test(r)?Promise.resolve(N.tJ.from(r)):Promise.reject(e.message=String(a))}catch(r){return Promise.reject(e.message=r.message)}case"int16":try{return s.test(r)?Promise.resolve(N.k6.from(r)):Promise.reject(e.message=String(a))}catch(r){return Promise.reject(e.message=r.message)}case"int32":try{return s.test(r)?Promise.resolve(N.Vq.from(r)):Promise.reject(e.message=String(a))}catch(r){return Promise.reject(e.message=r.message)}case"int64":try{return s.test(r)?Promise.resolve(N.ni.from(r)):Promise.reject(e.message=String(a))}catch(r){return Promise.reject(e.message=r.message)}case"int128":try{return s.test(r)?Promise.resolve(N.Gm.from(r)):Promise.reject(e.message=String(a))}catch(r){return Promise.reject(e.message=r.message)}case"varint":try{return s.test(r)?Promise.resolve(N.yN.from(r)):Promise.reject(e.message=String(a))}catch(r){return Promise.reject(e.message=r.message)}case"varint16":try{return s.test(r)?Promise.resolve(N.yN.from(r)):Promise.reject(e.message=String(a))}catch(r){return Promise.reject(e.message=r.message)}case"varint32":try{return s.test(r)?Promise.resolve(N.yN.from(r)):Promise.reject(e.message=String(a))}catch(r){return Promise.reject(e.message=r.message)}case"varint64":try{return s.test(r)?Promise.resolve(N.yN.from(r)):Promise.reject(e.message=String(a))}catch(r){return Promise.reject(e.message=r.message)}case"varint128":try{return s.test(r)?Promise.resolve(N.yN.from(r)):Promise.reject(e.message=String(a))}catch(r){return Promise.reject(e.message=r.message)}case"float32":try{return c.test(r)?Promise.resolve(N.yA.from(r)):Promise.reject(e.message=String(c))}catch(r){return Promise.reject(e.message=r.message)}case"float64":try{return c.test(r)?Promise.resolve(N.Dh.from(r)):Promise.reject(e.message=String(c))}catch(r){return Promise.reject(e.message=r.message)}case"bytes":try{return o.test(r)?Promise.resolve(N.Jj.from(r)):Promise.reject(e.message=String(o))}catch(r){return Promise.reject(e.message=r.message)}case"block_timestamp_type":try{return a.test(r)?Promise.resolve(N.wm.from(Number(r))):Promise.reject(e.message=String(a))}catch(r){return Promise.reject(e.message=r.message)}case"time_point":try{return a.test(r)?Promise.resolve(N.hI.from(Number(r))):Promise.reject(e.message=String(a))}catch(r){return Promise.reject(e.message=r.message)}case"time_point_sec":try{return a.test(r)?Promise.resolve(N.AQ.from(Number(r))):Promise.reject(e.message=String(a))}catch(r){return Promise.reject(e.message=r.message)}case"public_key":try{return Promise.resolve(N.nh.from(r))}catch(r){return Promise.reject(e.message=r.message)}default:try{return JSON.parse(r),u.add(e.field),Promise.resolve()}catch(r){return Promise.reject(e.message=r.message)}}}),[h,u]),ae=(0,b.useCallback)((function(e){switch(e.replace(/(\$|\?)$/g,"")){case"name":return"Enter account name...";case"asset":return"example: 1.00000000 DFS";case"uint8":case"uint16":case"uint32":case"uint64":case"uint128":case"varuint":case"varuint16":case"varuint32":case"varuint64":case"varuint128":case"int8":case"int16":case"int32":case"int64":case"int128":case"varint":case"varint16":case"varint32":case"varint64":case"varint128":case"float32":case"float64":return"Enter number...";case"string":return"Enter string...";case"permission_level":return'example: {"actor": "foo", "permission": "active"}';case"bytes":return"example: 1234abcdff";case"checksum256":return"example: 73e4385a2708e6d7048834fbc1079f2fabb17b3c125b146af438971e90716c4d";case"authority":return'example: {"threshold": 1, "keys": [{"key": "EOS6RrvujLQN1x5Tacbep1KAk8zzKpSThAQXBCKYFfGUYeABhJRin", "weight": 1}], "accounts": [], "waits": []}';case"name[]":return'example: ["david", "mary"]';case"asset[]":return'example: ["1.00000000 DFS", "2.00000000 USDT"]';case"uint8[]":case"uint16[]":case"uint32[]":case"uint64[]":case"uint128[]":case"varuint[]":case"varuint16[]":case"varuint32[]":case"varuint64[]":case"varuint128[]":return"example: [12, 34]";case"int8[]":case"int16[]":case"int32[]":case"int64[]":case"int128[]":case"varint[]":case"varint16[]":case"varint32[]":case"varint64[]":case"varint128[]":return"example: [12, -34]";case"float32[]":case"float64[]":return"example: [12.12, -34.34]";case"string[]":return'example: ["abc", "def"]';case"permission_level[]":return'example: [{"actor": "foo", "permission": "active"}, {"actor": "foo", "permission": "active"}]';case"bytes[]":return'example: ["123abc", "456def"]';case"checksum256[]":return'example: ["73e4385a2708e6d7048834fbc1079f2fabb17b3c125b146af438971e90716c4d", "73e4385a2708e6d7048834fbc1079f2fabb17b3c125b146af438971e90716c4d"]';default:return"Enter ".concat(e,"...")}}),[]),se=(0,b.useCallback)((function(){var e=/.+(\$|\?)$/;return I.map((function(r,t){return"bool"===r.type?(0,v.jsx)(j,{name:r.name,label:(0,v.jsx)("span",{className:"font-semibold",children:r.name})},t):(0,v.jsx)(S.Z,{placeholder:ae(r.type),name:r.name,label:(0,v.jsx)("span",{className:"font-semibold",children:r.name}),rules:[{required:!e.test(r.type),message:r.type,validator:ne}],hasFeedback:!0,fieldProps:{allowClear:!0,autoFocus:!1,addonAfter:r.type,size:"large"}},t)}))}),[m,h,g,I]),oe=(0,b.useCallback)(function(){var e=c()(a()().mark((function e(r){var t,n,s,c,o,l,p,g,b,v;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x&&x.broadcast){e.next=5;break}return J.error("".concat(K)),e.abrupt("return");case 5:if(y){e.next=8;break}return J.error("".concat(G)),e.abrupt("return");case 8:return t={},n=/.+\?$/,s=/.+\$$/,I.forEach((function(e){s.test(e.type)?t[e.name]="":n.test(e.type)&&(t[e.name]=null)})),c=Object.assign(d()({},t),r),Object.keys(c).forEach((function(e){u.has(e)&&(c[e]=JSON.parse(c[e]))})),Object.keys(c).forEach((function(e){var r=I.find((function(r){return r.name===e}));r&&n.test(r.type)&&(String(c[e]).trim()||(c[e]=null))})),o={account:Z,name:h,authorization:[x.permissionLevel],data:c},l=N.aU.from(o,m),e.next=19,(0,f.zI)(x.transact({actions:[l]}));case 19:p=e.sent,g=i()(p,2),b=g[0],v=g[1],b?J.error(b):v&&v.response?J.success("".concat(U)):J.error("".concat(W));case 24:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),[h,m,u,Z,x,y,I]),ie=(0,b.useCallback)(c()(a()().mark((function e(){var t,n,s,c,o,i;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null===(t=r.current)||void 0===t?void 0:t.getFieldsValue(),s=/.+\?$/,c=/.+\$$/,o=Object.assign({},n),Object.keys(o).forEach((function(e){u.has(e)&&(o[e]=JSON.parse(o[e]))})),Object.keys(o).forEach((function(e){var r=I.find((function(r){return r.name===e}));r&&s.test(r.type)?void 0!==o[e]&&String(o[e]).trim()||(o[e]=null):r&&c.test(r.type)&&(o[e]="")})),x.broadcast){e.next=11;break}return e.next=9,window.navigator.clipboard.writeText(JSON.stringify(o));case 9:e.next=14;break;case 11:return i={account:Z,name:h,authorization:[{actor:x.actor,permission:x.permission}],data:o},e.next=14,window.navigator.clipboard.writeText(JSON.stringify(i,null,2));case 14:J.success("".concat(V));case 15:case"end":return e.stop()}}),e)}))),[J,x,Z,h,I]),ue=(0,b.useCallback)(c()(a()().mark((function e(){var t,n,c,o,i,d,f,g;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=r.current)||void 0===t?void 0:t.validateFields();case 2:if(x&&x.broadcast){e.next=7;break}return J.error("".concat(K)),e.abrupt("return");case 7:if(y){e.next=10;break}return J.error("".concat(G)),e.abrupt("return");case 10:c=null===(n=r.current)||void 0===n?void 0:n.getFieldsValue(),o=/.+\?$/,i=/.+\$$/,d=Object.assign({},c),Object.keys(d).forEach((function(e){u.has(e)&&(d[e]=JSON.parse(d[e]))})),Object.keys(d).forEach((function(e){var r=I.find((function(r){return r.name===e}));r&&o.test(r.type)?void 0!==d[e]&&String(d[e]).trim()||(d[e]=null):r&&i.test(r.type)&&(d[e]="")})),f={account:Z,name:h,authorization:[{actor:x.actor,permission:x.permission}],data:d},g=N.aU.from(f,m),s(p.N.setEncodeData(void 0)),s(p.N.setDecodeData(void 0)),s(p.N.setBatchActions([].concat(l()(T),[{untypedAction:JSON.stringify(f),typedAction:JSON.stringify(g)}])));case 21:case"end":return e.stop()}}),e)}))),[J,m,x,y,Z,h,T,I]),le=(0,b.useCallback)(c()(a()().mark((function e(){var t,n,c,o,l,g,b,v,y,j,S,P,k,w,C,_,O,M,T,F,D,E,A,z;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=r.current)||void 0===t?void 0:t.validateFields();case 2:if(c=null===(n=r.current)||void 0===n?void 0:n.getFieldsValue(),o=/.+\?$/,l=/.+\$$/,g=Object.assign({},c),Object.keys(g).forEach((function(e){u.has(e)&&(g[e]=JSON.parse(g[e]))})),Object.keys(g).forEach((function(e){var r=I.find((function(r){return r.name===e}));r&&o.test(r.type)?void 0!==g[e]&&String(g[e]).trim()||(g[e]=null):r&&l.test(r.type)&&(g[e]="")})),b=x.broadcast?[x.permissionLevel]:[],v={account:Z,name:h,authorization:b,data:g},y=N.aU.from(v,m),j=JSON.stringify(y,null,2),S={expiration:"1970-01-01T00:00:00",ref_block_num:0,ref_block_prefix:0,max_net_usage_words:0,max_cpu_usage_ms:0,delay_sec:0,context_free_actions:[],transaction_extensions:[]},P=N.YW.from(d()(d()({},S),{},{actions:[y]})),k=JSON.stringify(P,null,2),w=P.id.toString(),C="",_="",O="",M="",!x||!x.broadcast){e.next=27;break}return e.next=23,(0,f.zI)(x.transact({actions:[y]},{broadcast:!1,transactPlugins:[]}));case 23:T=e.sent,F=i()(T,2),(D=F[1])&&(P=D.resolved.transaction,k=JSON.stringify(P,null,2),E=D.signatures[0],A=N.uQ.from(d()(d()({},P),{},{signatures:[E]})),z=N.f1.fromSigned(A),C=JSON.stringify(A,null,2),_=JSON.stringify(z,null,2),O=D.resolved.signingData.toString(),M=D.resolved.signingDigest.toString());case 27:s(p.N.setEncodeData({action:j,transaction:k,transactionId:w,signedTransaction:C,packedTransaction:_,signingData:O,signingDigest:M})),s(p.N.setBatchActions([])),s(p.N.setDecodeData(void 0)),J.success("".concat(re));case 31:case"end":return e.stop()}}),e)}))),[h,m,u,Z,x,I]),me=(0,b.useCallback)((function(){var e;null===(e=r.current)||void 0===e||e.resetFields(),s(p.N.setEncodeData(void 0))}),[]),de=(0,b.useCallback)((function(e){var r,t=null==m||null===(r=m.structs)||void 0===r?void 0:r.find((function(r){return r.name===e.type.toString()})),n=null==t?void 0:t.fields;s(p.N.setFields(n)),s(p.N.setActionSelection(e.name.toString())),s(p.N.setActionType(e.type.toString())),me()}),[me,I,m]);return(0,v.jsxs)("div",{className:"tab-action",children:[(0,v.jsx)("div",{className:"hardline text-lg font-semibold mb-3",children:L}),(0,v.jsx)("div",{className:"flex flex-start flex-wrap pl-[13px]",children:null==m||null===(e=m.actions)||void 0===e?void 0:e.map((function(e,r){return(0,v.jsx)(C.ZP,{className:"w-[150px] mr-2 mb-2",ghost:h!==e.name.toString(),type:"primary",size:"large",onClick:function(){return de(e)},children:e.name.toString()},r)}))}),!!h&&(0,v.jsxs)("div",{children:[(0,v.jsx)("div",{className:"hardline text-lg font-semibold mb-2 mt-3",children:q}),(0,v.jsx)(_.Z,{gutter:10,className:"w-full",children:(0,v.jsx)(O.Z,{lg:{span:"12"},md:{span:"20"},sm:{span:"20"},xs:{span:"24"},children:(0,v.jsx)(P.A,{formRef:r,className:"pl-[13px]",layout:"vertical",onFinish:function(){var e=c()(a()().mark((function e(r){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",oe(r));case 1:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),onReset:function(){return me()},submitter:{render:function(e,s){return(0,v.jsxs)("div",{className:"flex flex-wrap",style:{marginTop:"10px"},children:[(0,v.jsx)("div",{className:"mr-[8px] mt-[14px]",children:s[1]}),(0,v.jsx)("div",{className:"mr-[8px] mt-[14px]",children:s[0]}),(0,v.jsx)(C.ZP,{className:"mr-[8px] mt-[14px]",onClick:ie,children:H},"copy"),(0,v.jsx)(C.ZP,{className:"mr-[8px] mt-[14px]",onClick:ue,children:Q},"add"),(0,v.jsx)(C.ZP,{className:"mr-[8px] mt-[14px]",onClick:le,children:X},"encode"),(0,v.jsx)(C.ZP,{className:"mr-[8px] mt-[14px]",onClick:function(){return t.current.handleOpen()},children:ee},"decode"),(0,v.jsx)(C.ZP,{className:"mr-[8px] mt-[14px]",onClick:c()(a()().mark((function e(){var t;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=r.current)||void 0===t?void 0:t.validateFields();case 2:n.current.handleOpen(r,u);case 3:case"end":return e.stop()}}),e)}))),children:te},"msig")]})}},children:se()})})})]}),(0,v.jsx)(ce,{ref:n}),(0,v.jsx)(R,{ref:t}),!!A&&(0,v.jsx)(F,{}),!!D&&(0,v.jsx)(E,{}),!!T.length&&(0,v.jsx)(M,{}),B]})},ie=(0,b.memo)(oe),ue=t(64317),le=t(92340),me=t(72269),de=t(96486),pe=function(){var e,r=(0,k.useDispatch)(),t=(0,b.useRef)(),n=(0,k.useSelector)((function(e){return e.contract.abi})),s=(0,k.useSelector)((function(e){return e.contract.contract})),o=(0,k.useSelector)((function(e){return e.global.session})),u=(0,k.useSelector)((function(e){return e.contract.tableSelection})),l=(0,k.useSelector)((function(e){return e.contract.tableDataSource})),m=(0,k.useSelector)((function(e){return e.contract.tableColumns})),h=(0,k.useSelector)((function(e){return e.contract.tableByScope})),g=(0,k.useSelector)((function(e){return e.contract.tableParams})),x=(0,k.useSelector)((function(e){return e.contract.tableByScopeParams})),y=w.ZP.useMessage(),N=i()(y,2),_=N[0],O=N[1],Z=(0,b.useState)(!1),M=i()(Z,2),T=M[0],F=M[1],D=(0,k.useIntl)(),E=D.formatMessage({id:"common.intlCopySuccess"}),A=D.formatMessage({id:"contract.intlSelectTable"}),I=D.formatMessage({id:"contract.intlEnterParameters"}),z=D.formatMessage({id:"common.intlCopy"}),R=D.formatMessage({id:"contract.intlTableResult"}),$=D.formatMessage({id:"contract.intlNoData"}),J=(0,b.useCallback)(function(){var e=c()(a()().mark((function e(t){var n,s,c,u,l,m,h,g;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],s=[],F(!0),e.next=5,(0,f.zI)(o.client.v1.chain.get_table_rows(t));case 5:if(c=e.sent,u=i()(c,2),l=u[0],m=u[1],F(!1),!l){e.next=13;break}return _.error(l),e.abrupt("return");case 13:if((h=m.rows).length){e.next=18;break}return r(p.N.setTableColumns(n)),r(p.N.setTableDataSource(h)),e.abrupt("return");case 18:t.json?(g=Object.keys(h[0]),n.push({title:"#",dataIndex:"_key",key:"_key",width:"50px",align:"center",render:function(e,r,t){return(0,v.jsx)("span",{children:t+1})}}),g.forEach((function(e){n.push({title:e,dataIndex:e,key:e,render:function(r,t){return(0,de.isObject)(t[e])?(0,v.jsx)("span",{children:JSON.stringify(t[e])}):(0,v.jsx)("span",{children:t[e]})}})})),t.show_payer?(n.push({title:"payer",dataIndex:"payer",key:"payer",render:function(e,r){return(0,v.jsx)("span",{children:r.payer})}}),h.forEach((function(e,r){h[r]._key=r,s.push(d()(d()({},h[r]),{},{payer:m.ram_payers[r].toString()}))}))):h.forEach((function(e,r){h[r]._key=r,s.push(d()({},h[r]))}))):(n.push({title:"#",dataIndex:"_key",key:"_key",width:"50px",align:"center",render:function(e,r,t){return(0,v.jsx)("span",{children:t+1})}}),n.push({title:"bytes",dataIndex:"bytes",key:"bytes",render:function(e,r){return(0,v.jsx)("span",{children:r.bytes})}}),t.show_payer?(n.push({title:"payer",dataIndex:"payer",key:"payer",render:function(e,r){return(0,v.jsx)("span",{children:r.payer})}}),h.forEach((function(e,r){s.push({_key:r,bytes:e,payer:m.ram_payers[r].toString()})}))):h.forEach((function(e,r){s.push({_key:r,bytes:e})}))),r(p.N.setTableColumns(n)),r(p.N.setTableDataSource(s));case 21:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),[o,_]),B=(0,b.useCallback)(function(){var e=c()(a()().mark((function e(t){var n,s,c,u,l,m,h,g;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],s=[],F(!0),e.next=5,(0,f.zI)(o.client.v1.chain.get_table_by_scope(t));case 5:if(c=e.sent,u=i()(c,2),l=u[0],m=u[1],F(!1),!l){e.next=13;break}return F(!1),e.abrupt("return");case 13:if((h=JSON.parse(JSON.stringify(m.rows))).length){e.next=18;break}return r(p.N.setTableColumns(n)),r(p.N.setTableDataSource(h)),e.abrupt("return");case 18:g=Object.keys(h[0]),n.push({title:"#",dataIndex:"_key",key:"_key",width:"50px",align:"center",render:function(e,r,t){return(0,v.jsx)("span",{children:t+1})}}),g.forEach((function(e){n.push({title:e,dataIndex:e,key:e,render:function(r,t){return(0,de.isObject)(t[e])?(0,v.jsx)("span",{children:JSON.stringify(t[e])}):(0,v.jsx)("span",{children:t[e]})}})})),h.forEach((function(e,r){h[r]._key=r,s.push(d()({},h[r]))})),r(p.N.setTableColumns(n)),r(p.N.setTableDataSource(s));case 24:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),[o,_]),Y=(0,b.useCallback)(c()(a()().mark((function e(){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h?B(x):J(g);case 1:case"end":return e.stop()}}),e)}))),[g,x,h,J,B]),V=(0,b.useCallback)((function(e){var t=d()(d()({},g),{},{code:s,table:e.name.toString(),scope:g.scope?g.scope:s}),n=d()(d()({},x),{},{code:s,table:e.name.toString()});r(p.N.setTableSelection(e.name.toString())),r(p.N.setTableParams(t)),r(p.N.setTableByScopeParams(n)),h?B(n):J(t)}),[s,J,B,g,x]),L=(0,b.useCallback)((function(e){r(p.N.setTableByScope(e)),u&&(e?B(x):J(g))}),[u,g,x]),q=(0,b.useCallback)((function(e,t){if(h){var n={};e.hasOwnProperty("lower_bound2")?n.lower_bound=e.lower_bound2:e.hasOwnProperty("upper_bound2")?n.upper_bound=e.upper_bound2:e.hasOwnProperty("limit2")?n.limit=e.limit2:e.hasOwnProperty("reverse2")&&(n.reverse=e.reverse2),r(p.N.setTableByScopeParams(d()(d()({},x),n)))}else r(p.N.setTableParams(d()(d()({},g),t)))}),[h,g,x]),H=(0,b.useCallback)(c()(a()().mark((function e(){var r;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},h?Object.keys(x).forEach((function(e){x[e]&&(r[e]=x[e])})):Object.keys(g).forEach((function(e){g[e]&&(r[e]=g[e])})),e.next=4,window.navigator.clipboard.writeText(JSON.stringify(r));case 4:_.success("".concat(E));case 5:case"end":return e.stop()}}),e)}))),[_,h,g,x]);return(0,v.jsxs)("div",{className:"tab-table",children:[(0,v.jsxs)("div",{className:"hardline text-lg font-semibold mb-3",children:[(0,v.jsx)("span",{children:A}),(0,v.jsx)("span",{className:"ml-[30px] mr-3",children:"Table by Scope"}),(0,v.jsx)(me.Z,{value:h,onChange:L})]}),(0,v.jsx)("div",{className:"flex flex-start flex-wrap pl-[13px]",children:null==n||null===(e=n.tables)||void 0===e?void 0:e.map((function(e,r){return(0,v.jsx)(C.ZP,{className:"w-[150px] mr-2 mb-2",ghost:u!==e.name.toString(),type:"primary",size:"large",onClick:function(){return V(e)},children:e.name.toString()},r)}))}),!!u&&(0,v.jsxs)("div",{children:[(0,v.jsx)("div",{className:"hardline text-lg font-semibold mb-2 mt-3",children:I}),(0,v.jsx)(P.A,{initialValues:{scope:void 0===g.scope?s:g.scope,lower_bound:g.lower_bound,upper_bound:g.upper_bound,limit:g.limit,reverse:g.reverse,index_position:g.index_position,json:g.json,show_payer:g.show_payer,lower_bound2:x.lower_bound,upper_bound2:x.upper_bound,limit2:x.limit,reverse2:x.reverse},className:"pl-[13px]",formRef:t,layout:"vertical",onValuesChange:q,onFinish:c()(a()().mark((function e(){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Y());case 1:case"end":return e.stop()}}),e)}))),submitter:{render:function(e,r){return[r[1],(0,v.jsx)(C.ZP,{onClick:H,children:z},"copy")]}},children:h?(0,v.jsxs)(P.A.Group,{children:[(0,v.jsx)(S.Z,{name:"lower_bound2",label:"Lower Bound",placeholder:"Search...",fieldProps:{autoFocus:!1}}),(0,v.jsx)(S.Z,{name:"upper_bound2",label:"Upper Bound",placeholder:"Search..."}),(0,v.jsx)(S.Z,{name:"limit2",label:"Limit",placeholder:"Search...",transform:function(e){return Number(e)},fieldProps:{type:"number"}}),(0,v.jsx)(j,{name:"reverse2",label:"Reverse",fieldProps:{onClick:function(){var e;return null===(e=t.current)||void 0===e?void 0:e.submit()}}})]}):(0,v.jsxs)(P.A.Group,{children:[(0,v.jsx)(S.Z,{name:"scope",label:"Scope",placeholder:"Search...",fieldProps:{defaultValue:"".concat(s),autoFocus:!1}}),(0,v.jsx)(S.Z,{name:"lower_bound",label:"Lower Bound",placeholder:"Search..."}),(0,v.jsx)(S.Z,{name:"upper_bound",label:"Upper Bound",placeholder:"Search..."}),(0,v.jsx)(S.Z,{name:"limit",label:"Limit",placeholder:"Search...",transform:function(e){return Number(e)},fieldProps:{type:"number"}}),(0,v.jsx)(ue.Z,{name:"Index Position",label:"index_position",placeholder:"Search...",options:["primary","secondary","tertiary","fourth","fifth","sixth","seventh","eighth","ninth","tenth"]}),(0,v.jsxs)(P.A.Group,{children:[(0,v.jsx)(j,{name:"reverse",label:"Reverse",fieldProps:{onClick:function(){var e;return null===(e=t.current)||void 0===e?void 0:e.submit()}}}),(0,v.jsx)(j,{name:"show_payer",label:"Show Payer",fieldProps:{onClick:function(){var e;return null===(e=t.current)||void 0===e?void 0:e.submit()}}}),(0,v.jsx)(j,{name:"json",label:"JSON",fieldProps:{defaultValue:!0,onClick:function(){var e;return null===(e=t.current)||void 0===e?void 0:e.submit()}}})]})]})}),(0,v.jsx)("div",{className:"hardline text-lg font-semibold mb-2 mt-3",children:R}),l.length?(0,v.jsx)(le.Z,{loading:T,rowKey:"_key",scroll:{x:!0},size:"small",columns:m,dataSource:l,defaultData:[],search:!1,options:!1,pagination:!1}):(0,v.jsx)("div",{className:"text-base pl-[13px]",children:$})]}),O]})},fe=(0,b.memo)(pe),he=t(57132),ge=t(11774),be=t(38345),xe=t(69677),ve=t(57953),ye=t(92398),je=t(79123),Se=(t(20034),t(31145),function(){var e=w.ZP.useMessage(),r=i()(e,2),t=r[0],n=r[1],s=(0,k.useDispatch)(),o=(0,k.useSelector)((function(e){return e.global.session})),u=(0,k.useSelector)((function(e){return e.global.contractKit})),l=(0,k.useSelector)((function(e){return e.contract.rawAbi})),m=(0,k.useSelector)((function(e){return e.contract.contract})),d=(0,k.useSelector)((function(e){return e.contract.tableSelection})),h=(0,k.useSelector)((function(e){return e.contract.actionSelection})),g=(0,k.useSelector)((function(e){return e.contract.activeKey})),x=(0,b.useState)(""),y=i()(x,2),j=y[0],S=y[1],P=(0,b.useState)(!1),N=i()(P,2),C=N[0],_=N[1],O=(0,k.useSearchParams)(),Z=i()(O,2),M=Z[0],T=Z[1],F=(0,k.useIntl)(),D=F.formatMessage({id:"contract.intlContract"}),E=F.formatMessage({id:"contract.intlSearch"}),A=F.formatMessage({id:"contract.intlAccountFormatError"}),I=F.formatMessage({id:"contract.intlNonContractAccount"}),z=F.formatMessage({id:"contract.intlSearchContract"}),R=F.formatMessage({id:"common.intlCopySuccess"}),$=(0,b.useCallback)(function(){var e=c()(a()().mark((function e(r,n){var s,c,u,l;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(/^[a-z1-5.]{1,12}$/.test(r)){e.next=8;break}if(r||n.hasOwnProperty("type")){e.next=4;break}return e.abrupt("return",!1);case 4:return t.error("".concat(A)),e.abrupt("return",!1);case 8:return e.next=10,(0,f.zI)(o.client.v1.chain.get_abi(r));case 10:if(s=e.sent,c=i()(s,2),u=c[0],l=c[1],!u){e.next=17;break}return t.error(u),e.abrupt("return",!1);case 17:if(u||!l.hasOwnProperty("abi")){e.next=21;break}return e.abrupt("return",!0);case 21:return t.error("".concat(I)),e.abrupt("return",!1);case 23:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),[o,t]),J=(0,b.useCallback)(function(){var e=c()(a()().mark((function e(r,n){var c,o,l,m,d,h;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u){e.next=16;break}return _(!0),e.next=4,$(r,n);case 4:if(e.sent){e.next=7;break}return _(!1),e.abrupt("return");case 7:return e.next=9,(0,f.zI)(u.load(r));case 9:c=e.sent,o=i()(c,2),l=o[0],m=o[1],l?t.error(l):(d=m.abi.toJSON(),h=JSON.stringify(d),h=JSON.parse(h),s(p.N.setContract(r)),s(p.N.setABI(d)),s(p.N.setRawABI(h)),s(p.N.setActionType("")),s(p.N.setActionSelection("")),s(p.N.setTableSelection("")),s(p.N.setTableDataSource([])),s(p.N.setTableColumns([])),s(p.N.setTableByScope(!1)),s(p.N.setTableParams({code:"",table:"",scope:void 0,lower_bound:void 0,upper_bound:void 0,limit:100,reverse:void 0,index_position:void 0,json:!0,show_payer:void 0})),s(p.N.setTableByScopeParams({code:"",table:"",lower_bound:void 0,upper_bound:void 0,limit:100,reverse:void 0}))),S(""),_(!1);case 16:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),[u,$,t]),B=(0,b.useCallback)((0,de.debounce)(function(){var e=c()(a()().mark((function e(r){var t,n,s,c,u;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.target.value,/^[a-z1-5.]{1,12}$/.test(t)){e.next=6;break}0===t.trim().length?S(""):S("error"),e.next=13;break;case 6:return e.next=8,(0,f.zI)(o.client.v1.chain.get_abi(t));case 8:n=e.sent,s=i()(n,2),c=s[0],u=s[1],!c&&u.hasOwnProperty("abi")?S(""):S("error");case 13:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),1e3),[o]),Y=(0,b.useMemo)((function(){return"tables"===g&&d?m+"::"+d:"actions"===g&&h?m+"::"+h:m||""}),[g,d,h,m]),V=(0,b.useCallback)(c()(a()().mark((function e(){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.navigator.clipboard.writeText(JSON.stringify(l));case 2:t.success("".concat(R));case 3:case"end":return e.stop()}}),e)}))),[l]),L=[{key:"tables",label:(0,v.jsx)("span",{className:"text-lg font-semibold",children:"Tables"}),children:!!l&&(0,v.jsx)(fe,{})},{key:"actions",label:(0,v.jsx)("span",{className:"text-lg font-semibold",children:"Actions"}),children:!!l&&(0,v.jsx)(ie,{})},{key:"abi",label:(0,v.jsx)("span",{className:"text-lg font-semibold",children:"ABI"}),children:!!l&&(0,v.jsxs)("div",{className:"pl-[13px]",children:[(0,v.jsx)(he.Z,{className:"cursor-pointer",style:{color:"#1677ff"},onClick:V}),(0,v.jsx)(je.ZP,{className:"text-lg",src:l,collapsed:3,displaySize:!0,enableClipboard:!1})]})},{key:"tip",label:(0,v.jsx)("span",{className:"text-lg font-semibold",children:Y}),disabled:!0}],q=(0,b.useCallback)((function(e,r){var t={};e&&(t.search=e),t.tab=r||g,T(t)}),[g]);return(0,b.useEffect)((function(){var e=M.get("search"),r=M.get("tab");r&&s(p.N.setActiveKey(r)),e&&J(e,""),q(e,r)}),[J]),(0,b.useEffect)((function(){q(m||"",g)}),[m,g,q]),(0,v.jsxs)(ge._z,{className:"contract",ghost:!0,children:[(0,v.jsxs)(be.Z,{children:[(0,v.jsx)("div",{className:"hardline text-lg font-semibold mb-3",children:z}),(0,v.jsx)(xe.Z.Search,{className:"pl-[13px] ",loading:C,addonBefore:(0,v.jsx)(ve.Z,{spinning:C,children:D}),placeholder:"Search...",allowClear:!0,enterButton:E,size:"large",status:j,onSearch:J,onChange:B}),(0,v.jsx)(ye.Z,{className:"mt-2",defaultActiveKey:"tables",items:L,activeKey:g,onChange:function(e){return s(p.N.setActiveKey(e))}})]}),n]})})},31145:function(){}}]);