"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[989],{90672:function(e,r,n){var t=n(1413),a=n(91),s=n(62435),o=n(56499),i=n(86074),l=["fieldProps","proFieldProps"],u=function(e,r){var n=e.fieldProps,s=e.proFieldProps,u=(0,a.Z)(e,l);return(0,i.jsx)(o.Z,(0,t.Z)({ref:r,valueType:"textarea",fieldProps:n,proFieldProps:s},u))};r.Z=s.forwardRef(u)},5966:function(e,r,n){var t=n(97685),a=n(1413),s=n(91),o=n(21770),i=n(22150),l=n(55241),u=n(97435),c=n(62435),d=n(56499),p=n(86074),f=["fieldProps","proFieldProps"],m=["fieldProps","proFieldProps"],g="text",v=function(e){var r=(0,o.Z)(e.open||!1,{value:e.open,onChange:e.onOpenChange}),n=(0,t.Z)(r,2),s=n[0],u=n[1];return(0,p.jsx)(i.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(r){var n,t=r.getFieldValue(e.name||[]);return(0,p.jsx)(l.Z,(0,a.Z)((0,a.Z)({getPopupContainer:function(e){return e&&e.parentNode?e.parentNode:e},onOpenChange:u,content:(0,p.jsxs)("div",{style:{padding:"4px 0"},children:[null===(n=e.statusRender)||void 0===n?void 0:n.call(e,t),e.strengthText?(0,p.jsx)("div",{style:{marginTop:10},children:(0,p.jsx)("span",{children:e.strengthText})}):null]}),overlayStyle:{width:240},placement:"right"},e.popoverProps),{},{open:s,children:e.children}))}})},h=function(e){var r=e.fieldProps,n=e.proFieldProps,t=(0,s.Z)(e,f);return(0,p.jsx)(d.Z,(0,a.Z)({valueType:g,fieldProps:r,filedConfig:{valueType:g},proFieldProps:n},t))};h.Password=function(e){var r=e.fieldProps,n=e.proFieldProps,o=(0,s.Z)(e,m),i=(0,c.useState)(!1),l=(0,t.Z)(i,2),f=l[0],h=l[1];return null!=r&&r.statusRender&&o.name?(0,p.jsx)(v,{name:o.name,statusRender:null==r?void 0:r.statusRender,popoverProps:null==r?void 0:r.popoverProps,strengthText:null==r?void 0:r.strengthText,open:f,onOpenChange:h,children:(0,p.jsx)(d.Z,(0,a.Z)({valueType:"password",fieldProps:(0,a.Z)((0,a.Z)({},(0,u.Z)(r,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(e){var n;null==r||null===(n=r.onBlur)||void 0===n||n.call(r,e),h(!1)},onClick:function(e){var n;null==r||null===(n=r.onClick)||void 0===n||n.call(r,e),h(!0)}}),proFieldProps:n,filedConfig:{valueType:g}},o))}):(0,p.jsx)(d.Z,(0,a.Z)({valueType:"password",fieldProps:r,proFieldProps:n,filedConfig:{valueType:g}},o))},h.displayName="ProFormComponent",r.Z=h},34821:function(e,r,n){n.r(r),n.d(r,{default:function(){return _}});var t=n(15009),a=n.n(t),s=n(97857),o=n.n(s),i=n(99289),l=n.n(i),u=n(5574),c=n.n(u),d=n(72004),p=n.n(d),f=n(12444),m=n.n(f),g=n(31996),v=n.n(g),h=n(26037),x=n.n(h),b=n(9783),y=n.n(b),P=n(64119),k=n(11774),w=n(38345),F=n(97269),Z=n(5966),j=n(90672),S=n(59530),C=n(80507),R=n(45360),I=n(15867),z=n(62435),M=n(86074),T=function(e){v()(n,e);var r=x()(n);function n(){return m()(this,n),r.apply(this,arguments)}return p()(n)}(C.AU);y()(T,"abiName","retire"),y()(T,"abiFields",[{name:"quantity",type:C.xR},{name:"memo",type:"string"}]);var _=function(){var e=R.ZP.useMessage(),r=c()(e,2),n=r[0],t=r[1],s=(0,S.useSelector)((function(e){return e.global.session})),i=(0,S.useSelector)((function(e){return e.global.account})),u=(0,z.useRef)(),d=(0,z.useRef)(),p=(0,z.useRef)(),f=(0,z.useState)(""),m=c()(f,2),g=m[0],v=m[1],h=(0,z.useState)(!0),x=c()(h,2),b=x[0],y=x[1],_=(0,S.useIntl)(),q=_.formatMessage({id:"common.intlCopy"}),N=_.formatMessage({id:"verify.intlSignSuccess"}),A=_.formatMessage({id:"verify.intlSignFail"}),V=_.formatMessage({id:"common.intlCopySuccess"}),K=_.formatMessage({id:"common.intlInputException"}),D=_.formatMessage({id:"verify.intlVerifySignature"}),B=_.formatMessage({id:"verify.intlSign"}),L=_.formatMessage({id:"common.intlPleaseConnectWallet"}),O=_.formatMessage({id:"common.intlPleaseConnectNetwork"}),U=_.formatMessage({id:"verify.intlRawInfo"}),E=_.formatMessage({id:"verify.intlSignInfo"}),Q=_.formatMessage({id:"verify.intlVerifyAccount"}),W=_.formatMessage({id:"common.intlResult"}),G=_.formatMessage({id:"verify.intlAccountInfo"}),H=_.formatMessage({id:"verify.intlPublicKey"}),J=(0,z.useCallback)(function(){var e=l()(a()().mark((function e(r){var t,l,d,p,f,m,g,v,h,x,b,y,k;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s&&s.broadcast){e.next=5;break}return n.error("".concat(L)),e.abrupt("return");case 5:if(i){e.next=8;break}return n.error("".concat(O)),e.abrupt("return");case 8:return t={action:{account:"eosio.token",name:"retire",authorization:[s.permissionLevel],data:{quantity:"0.00000000 DFS",memo:r.rawInfo}}},e.next=11,(0,P.zI)(s.transact(t,{broadcast:!1,transactPlugins:[]}));case 11:return l=e.sent,d=c()(l,2),p=d[0],f=d[1],p?n.error(p):f?(g=f.resolved.transaction,v=f.signatures[0],h=C.uQ.from(o()(o()({},g),{},{signatures:[v]})),x=C.f1.fromSigned(h),b=x.packed_context_free_data.toString(),y=x.packed_trx.toString(),k=v+"-"+b+"-"+y,null===(m=u.current)||void 0===m||m.setFieldValue("signInfo",k),n.success("".concat(N))):n.error("".concat(A)),e.abrupt("return",!0);case 17:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),[s,i]),X=(0,z.useCallback)(function(){var e=l()(a()().mark((function e(r){var t,o,i,l,u,d,f,m,g,h,x,b,k,w,F,Z,j,S,R,I,z,M,_,q,N,A,V;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s){e.next=3;break}return n.error("".concat(L)),e.abrupt("return");case 3:if(o=r.rawInfo,i=r.targetAccount,l=r.signInfo.split("-"),u=l[0],d=l[1],f=l[2],m={signatures:[u],compression:1,packed_context_free_data:d,packed_trx:f},g=C.f1.from(m),h=g.getTransaction(),x=h.actions[0].authorization,b=C.aU.from({account:"eosio.token",name:"retire",authorization:x,data:T.from({quantity:"0.00000000 DFS",memo:o})}),h.actions[0]=b,k=h.signingDigest(s.chain.id),w=C.Pc.from(u),F=w.recoverDigest(k),Z=F.toLegacyString(),j=F.toString(),S=x[0].actor.toString(),R=x[0].permission.toString(),I=!1,null===(t=p.current)||void 0===t||t.setFieldsValue({accountInfo:x[0].toString(),publicKey1:Z,publicKey2:j}),i!==S){e.next=51;break}return e.next=27,(0,P.zI)(s.client.v1.chain.get_account(S));case 27:if(z=e.sent,M=c()(z,2),_=M[0],q=M[1],!_){e.next=35;break}n.error(_),e.next=51;break;case 35:N=0;case 36:if(!(N<q.permissions.length)){e.next=51;break}if(q.permissions[N].perm_name.toString()!==R){e.next=48;break}A=q.permissions[N].required_auth.keys,V=0;case 41:if(!(V<A.length)){e.next=48;break}if(A[V].key.toString()!==Z&&A[V].key.toString()!==j){e.next=45;break}return I=!0,e.abrupt("break",48);case 45:V++,e.next=41;break;case 48:N++,e.next=36;break;case 51:return v(I?"":"error"),y(!1),setTimeout((function(){var e;null===(e=p.current)||void 0===e||e.validateFields()}),100),e.abrupt("return",!0);case 55:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),[s]),Y=(0,z.useCallback)((function(){var e,r;null===(e=d.current)||void 0===e||e.resetFields(),null===(r=p.current)||void 0===r||r.resetFields(),y(!0),v("")}),[]),$=(0,z.useCallback)(l()(a()().mark((function e(){var r,t;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=null===(r=u.current)||void 0===r?void 0:r.getFieldValue("signInfo"),e.next=3,window.navigator.clipboard.writeText(t);case 3:n.success("".concat(V));case 4:case"end":return e.stop()}}),e)}))),[]);return(0,M.jsxs)(k._z,{className:"verify",ghost:!0,children:[(0,M.jsxs)("div",{className:"flex justify-evenly flex-wrap items-start",children:[(0,M.jsxs)(w.Z,{className:"mb-4",title:(0,M.jsx)("span",{className:" font-semibold text-lg hardline",children:D}),style:{width:"450px"},bodyStyle:{paddingBlockEnd:"0px"},children:[(0,M.jsxs)(F.A,{formRef:d,onFinish:function(){var e=l()(a()().mark((function e(r){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",X(r));case 1:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),onReset:Y,children:[(0,M.jsx)(Z.Z,{name:"rawInfo",label:U,fieldProps:{size:"large",autoFocus:!1},rules:[{required:!0,whitespace:!0,message:"".concat(K)}]}),(0,M.jsx)(j.Z,{name:"signInfo",label:E,fieldProps:{autoSize:{minRows:7},autoFocus:!1,allowClear:!0},rules:[{required:!0,whitespace:!0,message:"".concat(K)}]}),(0,M.jsx)(Z.Z,{name:"targetAccount",label:Q,fieldProps:{size:"large",autoFocus:!1},rules:[{required:!0,whitespace:!0,message:"".concat(K)}]})]}),(0,M.jsx)("div",{className:" font-semibold text-lg hardline mb-[16px] mt-[24px]",children:W}),(0,M.jsxs)(F.A,{formRef:p,submitter:!1,children:[(0,M.jsx)(Z.Z,{name:"accountInfo",label:G,placeholder:"",disabled:b,fieldProps:{size:"large",autoFocus:!1,allowClear:!1,status:g},rules:[{required:!0,whitespace:!0,validator:function(){return"error"===g?Promise.reject():Promise.resolve()}}],hasFeedback:!0}),(0,M.jsx)(j.Z,{name:"publicKey1",label:"".concat(H)+"(Legacy)",placeholder:"",disabled:b,fieldProps:{autoSize:{minRows:3},size:"large",autoFocus:!1,status:g},rules:[{required:!0,whitespace:!0,validator:function(){return"error"===g?Promise.reject():Promise.resolve()}}],hasFeedback:!0}),(0,M.jsx)(j.Z,{name:"publicKey2",label:H,placeholder:"",status:"error",disabled:b,fieldProps:{autoSize:{minRows:3},size:"large",autoFocus:!1,status:g},rules:[{required:!0,whitespace:!0,validator:function(){return"error"===g?Promise.reject():Promise.resolve()}}],hasFeedback:!0})]})]}),(0,M.jsx)(w.Z,{title:(0,M.jsx)("span",{className:" font-semibold text-lg hardline",children:B}),style:{width:"450px"},children:(0,M.jsxs)(F.A,{formRef:u,onFinish:function(){var e=l()(a()().mark((function e(r){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",J(r));case 1:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),submitter:{render:function(e,r){return[r[1],r[0],(0,M.jsx)(I.ZP,{onClick:$,children:q},"copy")]}},children:[(0,M.jsx)(Z.Z,{name:"rawInfo",label:U,fieldProps:{size:"large",autoFocus:!1},rules:[{required:!0,whitespace:!0,message:"".concat(K)}]}),(0,M.jsx)(j.Z,{name:"signInfo",disabled:!0,label:E,placeholder:"",fieldProps:{autoSize:{minRows:7},autoFocus:!1}})]})})]}),t]})}}}]);