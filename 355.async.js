(self.webpackChunk=self.webpackChunk||[]).push([[355],{63434:function(e,t,r){"use strict";var n=r(1413),a=r(91),o=r(22270),i=r(84567),c=r(62435),s=r(90789),u=r(56499),l=r(86074),d=["options","fieldProps","proFieldProps","valueEnum"],f=c.forwardRef((function(e,t){var r=e.options,i=e.fieldProps,c=e.proFieldProps,s=e.valueEnum,f=(0,a.Z)(e,d);return(0,l.jsx)(u.Z,(0,n.Z)({ref:t,valueType:"checkbox",valueEnum:(0,o.h)(s,void 0),fieldProps:(0,n.Z)({options:r},i),lightProps:(0,n.Z)({labelFormatter:function(){return(0,l.jsx)(u.Z,(0,n.Z)({ref:t,valueType:"checkbox",mode:"read",valueEnum:(0,o.h)(s,void 0),filedConfig:{customLightMode:!0},fieldProps:(0,n.Z)({options:r},i),proFieldProps:c},f))}},f.lightProps),proFieldProps:c},f))})),p=c.forwardRef((function(e,t){var r=e.fieldProps,a=e.children;return(0,l.jsx)(i.Z,(0,n.Z)((0,n.Z)({ref:t},r),{},{children:a}))})),m=(0,s.G)(p,{valuePropName:"checked"});m.Group=f,t.Z=m},355:function(e,t,r){"use strict";r.d(t,{Wo:function(){return f},ox:function(){return te},kh:function(){return j},Wr:function(){return w},tw:function(){return _},SX:function(){return Y}});var n=r(62435),a=r(5574),o=r.n(a),i=[["Y",31536e6],["M",2592e6],["D",864e5],["H",36e5],["m",6e4],["s",1e3],["S",1]];function c(e,t){var r=t.format,n=void 0===r?"":r,a=new Date(e).getTime(),c=Date.now();return function(e,t){var r=e,n=/\[[^\]]*]/g,a=(t.match(n)||[]).map((function(e){return e.slice(1,-1)})),c=t.replace(n,"[]"),s=i.reduce((function(e,t){var n=o()(t,2),a=n[0],i=n[1];if(e.includes(a)){var c=Math.floor(r/i);return r-=c*i,e.replace(new RegExp("".concat(a,"+"),"g"),(function(e){var t=e.length;return c.toString().padStart(t,"0")}))}return e}),c),u=0;return s.replace(n,(function(){var e=a[u];return u+=1,e}))}(Math.max(a-c,0),n)}var s=r(75633),u=r(51409),l=r(86074);var d=function(e){var t=e.value,r=e.format,a=void 0===r?"HH:mm:ss":r,o=e.onChange,i=e.onFinish,d=e.className,f=(0,s.N)(),p=n.useRef(null),m=function(){var e=function(e){return new Date(e).getTime()}(t);e>=Date.now()&&(p.current=(0,u.Zi)((function(){f(),null==o||o(e-Date.now()),e<Date.now()&&(null==i||i(),p.current&&((0,u.cv)(p.current),p.current=null))}),33.333333333333336))};return n.useEffect((function(){return m(),function(){p.current&&((0,u.cv)(p.current),p.current=null)}}),[t]),(0,l.jsx)("div",{className:d,children:c(t,{format:a})})},f=n.memo(d),p=r(98097),m=r(59530),x=r(27484),h=r.n(x),v=r(70178),b=r.n(v);h().extend(b());var y=(0,n.forwardRef)((function(){var e=(0,m.useSelector)((function(e){return e.ppp.project})),t=(0,m.useSelector)((function(e){return e.ppp.projectNftLoading})),r=(0,n.useMemo)((function(){return[{title:"项目ID",dataIndex:"id",key:"id",render:function(e,t){return(0,l.jsx)("span",{children:t.id})}},{title:"项目名称",dataIndex:"projectName",key:"projectName",render:function(e,t){return(0,l.jsx)("span",{children:t.projectName})}},{title:"项目描述",dataIndex:"desc",key:"desc",render:function(e,t){return(0,l.jsx)("span",{children:t.desc})}},{title:"NFT名称",dataIndex:"nftName",key:"nftName",render:function(e,t){return(0,l.jsx)("span",{children:t.nftName})}},{title:"代币名称",dataIndex:"tokenNameRelease",key:"tokenNameRelease",render:function(e,t){return(0,l.jsx)("span",{children:t.tokenNameRelease})}},{title:"创建者",dataIndex:"creator",key:"creator",render:function(e,t){return(0,l.jsx)("span",{children:t.creator})}},{title:"NFT初始发行量",dataIndex:"initNftNumber",key:"initNftNumber",render:function(e,t){return(0,l.jsx)("div",{children:t.initNftNumber})}},{title:"NFT流通量",dataIndex:"nftSupply",key:"nftSupply",render:function(e,t){return(0,l.jsx)("div",{children:t.nftSupply})}},{title:"NFT最大发行量",dataIndex:"nftMaxSupply",key:"nftMaxSupply",render:function(e,t){return(0,l.jsx)("div",{children:t.nftMaxSupply})}},{title:"NFT初始价格",dataIndex:"initNftPrice",key:"initNftPrice",render:function(e,t){return(0,l.jsx)("div",{children:t.initNftPrice})}},{title:"分裂价格",dataIndex:"splitNftPrice",key:"splitNftPrice",render:function(e,t){return(0,l.jsx)("div",{children:t.splitNftPrice})}},{title:"每轮时间",dataIndex:"secPerRound",key:"secPerRound",render:function(e,t){return(0,l.jsx)("div",{children:t.secPerRound})}},{title:"NFT每轮涨幅",dataIndex:"increasePerRound",key:"increasePerRound",render:function(e,t){return(0,l.jsx)("div",{children:t.increasePerRound})}},{title:"NFT交易手续费",dataIndex:"tradeFeeRatio",key:"tradeFeeRatio",render:function(e,t){return(0,l.jsx)("div",{children:t.tradeFeeRatio})}},{title:"NFT销毁时间",dataIndex:"secToBurnNft",key:"secToBurnNft",render:function(e,t){return(0,l.jsx)("div",{children:t.secToBurnNft})}},{title:"销毁兑换",dataIndex:"tokenPerNft",key:"tokenPerNft",render:function(e,t){return(0,l.jsx)("div",{children:t.tokenPerNft})}},{title:"创建时间",dataIndex:"createTime",key:"createTime",render:function(e,t){return(0,l.jsx)("div",{children:t.createTime})}},{title:"利润率",dataIndex:"profitRate",key:"profitRate",render:function(e,t){return(0,l.jsx)("div",{children:t.profitRate})}},{title:"Website",dataIndex:"website",key:"website",render:function(e,t){return(0,l.jsx)("div",{children:t.website})}},{title:"Twitter",dataIndex:"twitter",key:"twitter",render:function(e,t){return(0,l.jsx)("div",{children:t.twitter})}},{title:"Telegram",dataIndex:"telegram",key:"telegram",render:function(e,t){return(0,l.jsx)("div",{children:t.telegram})}}]}),[e]);return(0,l.jsx)("div",{className:"ml-3",children:(0,l.jsx)(p.vY,{loading:t,columns:r,dataSource:e})})})),j=(0,n.memo)(y),k=r(92340);h().extend(b());var g=(0,n.forwardRef)((function(){var e=(0,m.useSelector)((function(e){return e.ppp.projectNftGrow})),t=(0,m.useSelector)((function(e){return e.ppp.projectSecPerRound})),r=(0,m.useSelector)((function(e){return e.ppp.projectNftLoading})),a=(0,m.useSelector)((function(e){return e.ppp.project})),o=(0,n.useMemo)((function(){return[{title:"#",dataIndex:"key",key:"key",render:function(e,t,r){return(0,l.jsx)("span",{children:r+1})}},{title:"轮次时间(".concat(t/3600,"小时)"),dataIndex:"time",key:"time",render:function(e,t){return(0,l.jsx)("div",{children:t.time})}},{title:"NFT数量",dataIndex:"count",key:"count",render:function(e,t){return(0,l.jsx)("div",{children:t.count})}},{title:"NFT市值",dataIndex:"asset",key:"asset",render:function(e,t){return(0,l.jsx)("div",{children:t.asset})}},{title:"手续费(".concat((2*a.tradeFeeRatioValue/3*100).toFixed(2),"%)"),dataIndex:"asset",key:"asset",render:function(e,t){return(0,l.jsx)("div",{children:t.tradeFee})}},{title:"奖励池(".concat((a.tradeFeeRatioValue/3*100).toFixed(2),"%)"),dataIndex:"asset",key:"asset",render:function(e,t){return(0,l.jsx)("div",{children:t.rewordPool})}},{title:"协议费(0.5%)",dataIndex:"asset",key:"asset",render:function(e,t){return(0,l.jsx)("div",{children:t.protocolFee})}}]}),[t,a]);return(0,l.jsx)("div",{className:"ppp-tab-grow",children:(0,l.jsx)(k.Z,{loading:{spinning:r,size:"large"},scroll:{x:!0},size:"small",columns:o,dataSource:e,defaultData:[],options:!1,search:!1,tableAlertRender:!1,tableAlertOptionRender:!1,pagination:!1})})})),w=(0,n.memo)(g),N=r(15009),I=r.n(N),S=r(99289),T=r.n(S),R=r(40956),F=r(87462),P={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h360c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H184V184h656v320c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V144c0-17.7-14.3-32-32-32zM653.3 599.4l52.2-52.2a8.01 8.01 0 00-4.7-13.6l-179.4-21c-5.1-.6-9.5 3.7-8.9 8.9l21 179.4c.8 6.6 8.9 9.4 13.6 4.7l52.4-52.4 256.2 256.2c3.1 3.1 8.2 3.1 11.3 0l42.4-42.4c3.1-3.1 3.1-8.2 0-11.3L653.3 599.4z"}}]},name:"select",theme:"outlined"},C=r(84089),M=function(e,t){return n.createElement(C.Z,(0,F.Z)({},e,{ref:t,icon:P}))};var Z=n.forwardRef(M),E=r(45360),D=r(15867),z=r(51165),O=r(64119);h().extend(b());var V=function(e){var t=(0,m.useDispatch)(),r=(0,m.useNavigate)(),a=E.ZP.useMessage(),i=o()(a,2),c=i[0],s=i[1],u=(0,m.useSelector)((function(e){return e.ppp.projectNft})),d=(0,m.useSelector)((function(e){return e.ppp.project})),p=(0,m.useSelector)((function(e){return e.ppp.projectNftReset})),x=(0,m.useSelector)((function(e){return e.ppp.projectId})),v=(0,m.useSelector)((function(e){return e.ppp.projectSecToBurnNft})),b=(0,m.useSelector)((function(e){return e.ppp.projectAccountFilter})),y=(0,m.useSelector)((function(e){return e.ppp.projectNftLoading})),j=(0,m.useSelector)((function(e){return e.ppp.projectProfitRate})),g=(0,m.useSelector)((function(e){return e.ppp.projectTotalHolder})),w=(0,m.useSelector)((function(e){return e.global.session})),N=(0,m.useSelector)((function(e){return e.global.account})),S=(0,m.useSelector)((function(e){return e.ppp.projectTotalInvest})),F=(0,m.useSelector)((function(e){return e.ppp.projectTotalValue})),P=(0,n.useState)([]),C=o()(P,2),M=C[0],V=C[1],_=(0,m.useIntl)(),U=_.formatMessage({id:"tokens.intlUpdate"}),H=_.formatMessage({id:"common.intlPleaseConnectWallet"}),L=_.formatMessage({id:"common.intlPleaseConnectNetwork"}),A=_.formatMessage({id:"common.intlTransferSuccess"}),G=_.formatMessage({id:"common.intlTransferFail"}),q=(0,n.useCallback)((function(e){var r=e.owner,n=u.filter((function(e){return e.owner===r}));t(R.N.setProjectNft(n))}),[u]),Y=(0,n.useCallback)((function(){t(R.N.setProjectNft(p))}),[p]),W=(0,n.useCallback)(T()(I()().mark((function t(){var r,n,a,i,s,l,f,p;return I()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(w&&w.broadcast){t.next=5;break}return c.error("".concat(H)),t.abrupt("return");case 5:if(N){t.next=8;break}return c.error("".concat(L)),t.abrupt("return");case 8:if(M.length){t.next=11;break}return c.error("复选项不能为空"),t.abrupt("return");case 11:if(r=d.tokenName,n="","DFS"!==r){t.next=17;break}n="eosio.token",t.next=28;break;case 17:if("USDT"!==r){t.next=21;break}n="usdtusdtusdt",t.next=28;break;case 21:if("ORDI"!==r){t.next=25;break}n="ordiordiordi",t.next=28;break;case 25:return c.error("不支持当前项目"),console.log("不支持当前项目"),t.abrupt("return");case 28:return a=u.filter((function(e){return M.includes(e.id)})),i=[],a.forEach((function(e){i.push({account:n,name:"transfer",authorization:[w.permissionLevel],data:{from:w.actor,to:"dfs3protocol",quantity:e.current_price,memo:"buy:".concat(e.id)}})})),t.next=33,(0,O.zI)(w.transact({actions:i}));case 33:if(s=t.sent,l=o()(s,2),f=l[0],p=l[1],!f){t.next=42;break}return c.error(f),t.abrupt("return");case 42:if(!p||!p.response){t.next=46;break}c.success("".concat(A)),t.next=48;break;case 46:return c.error("".concat(G)),t.abrupt("return");case 48:e.handleGetProjectNft(x);case 49:case"end":return t.stop()}}),t)}))),[w,M,u,d,e,x]),B=(0,n.useCallback)(T()(I()().mark((function t(){var r,n,a,i,s,l;return I()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(w&&w.broadcast){t.next=5;break}return c.error("".concat(H)),t.abrupt("return");case 5:if(N){t.next=8;break}return c.error("".concat(L)),t.abrupt("return");case 8:if(M.length){t.next=11;break}return c.error("复选项不能为空"),t.abrupt("return");case 11:return r=u.filter((function(e){return M.includes(e.id)})),n=[],r.forEach((function(e){n.push({account:"dfs3protocol",name:"split",authorization:[w.permissionLevel],data:{assetid:e.id}})})),t.next=16,(0,O.zI)(w.transact({actions:n}));case 16:if(a=t.sent,i=o()(a,2),s=i[0],l=i[1],!s){t.next=25;break}return c.error(s),t.abrupt("return");case 25:if(!l||!l.response){t.next=29;break}c.success("".concat(A)),t.next=31;break;case 29:return c.error("".concat(G)),t.abrupt("return");case 31:e.handleGetProjectNft(x);case 32:case"end":return t.stop()}}),t)}))),[w,M,u,d,e,x]),X=(0,n.useCallback)(T()(I()().mark((function t(){var r,n,a,i,s,l;return I()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(w&&w.broadcast){t.next=5;break}return c.error("".concat(H)),t.abrupt("return");case 5:if(N){t.next=8;break}return c.error("".concat(L)),t.abrupt("return");case 8:if(M.length){t.next=11;break}return c.error("复选项不能为空"),t.abrupt("return");case 11:return r=u.filter((function(e){return M.includes(e.id)})),n=[],r.forEach((function(e){n.push({account:"dfs3protocol",name:"burn",authorization:[w.permissionLevel],data:{assetid:e.id}})})),t.next=16,(0,O.zI)(w.transact({actions:n}));case 16:if(a=t.sent,i=o()(a,2),s=i[0],l=i[1],!s){t.next=25;break}return c.error(s),t.abrupt("return");case 25:if(!l||!l.response){t.next=29;break}c.success("".concat(A)),t.next=31;break;case 29:return c.error("".concat(G)),t.abrupt("return");case 31:e.handleGetProjectNft(x);case 32:case"end":return t.stop()}}),t)}))),[w,M,u,d,e,x]),K=(0,n.useMemo)((function(){return[{title:"#",dataIndex:"key",key:"key",search:!1,render:function(e,t,r){return(0,l.jsx)("span",{children:r+1})}},{title:"ID",dataIndex:"id",key:"id",search:!1,render:function(e,t){return(0,l.jsx)("div",{children:t.id})}},{title:"CID",dataIndex:"cid",key:"cid",search:!1,render:function(e,t){return(0,l.jsxs)("div",{children:["#",t.cid]})}},{title:"状态",dataIndex:"status",key:"status",filters:[{text:"可买",value:"buy"},{text:"已售",value:"sell"},{text:"可拆分",value:"split"},{text:"可销毁",value:"burn"}],onFilter:function(e,t){return"buy"===e?t.status.includes("可买"):"sell"===e?"已售"===t.status:"split"===e?"可拆分"===t.status:"burn"!==e||t.status.includes("可销毁")},sorter:function(e,t){return e.status.localeCompare(t.status)},search:!1,render:function(e,t){return(0,l.jsx)("div",{children:t.status})}},{title:"持有者(".concat(g,")"),dataIndex:"owner",key:"owner",filters:b,onFilter:function(e,t){return e===t.owner},sorter:function(e,t){return e.owner.localeCompare(t.owner)},render:function(e,t){return(0,l.jsx)("a",{onClick:function(){return r("/query/account?search=".concat(t.owner,"&tab=info"))},children:t.owner})}},{title:"投入成本(".concat(S.toFixed(0),")"),dataIndex:"invest",key:"invest",sorter:function(e,t){return e.invest.localeCompare(t.invest)},search:!1,render:function(e,t){return(0,l.jsx)("div",{children:t.invest})}},{title:"当前价格(".concat(F.toFixed(0),")"),dataIndex:"current_price",key:"current_price",sorter:function(e,t){return e.current_price.localeCompare(t.current_price)},search:!1,render:function(e,t){return(0,l.jsx)("div",{children:t.current_price})}},{title:"卖出利润(".concat(j.toFixed(2),"%)"),dataIndex:"profit",key:"profit",sorter:function(e,t){return e.profit.localeCompare(t.profit)},search:!1,render:function(e,t){return(0,l.jsx)("div",{children:t.profit})}},{title:"购买时间",dataIndex:"last_trade",key:"last_trade",sorter:function(e,t){return h()(t.last_trade).valueOf()-h()(e.last_trade).valueOf()},search:!1,render:function(e,t){var r=h().utc(t.last_trade).local().format("YYYY-MM-DDTHH:mm:ss");return(0,l.jsx)("div",{children:r})}},{title:"销毁时间",dataIndex:"last_trade",key:"last_trade",sorter:function(e,t){return h()(e.last_trade).valueOf()-h()(t.last_trade).valueOf()},search:!1,render:function(e,t){var r=h().utc(t.last_trade).add(v,"seconds").local().format("YYYY-MM-DDTHH:mm:ss");return(0,l.jsx)("div",{children:r})}},{title:"销毁倒计时",dataIndex:"last_trade",key:"last_trade",search:!1,render:function(e,t){var r=h().utc(t.last_trade).add(v,"seconds").local().valueOf();return(0,l.jsx)(f,{value:r})}}]}),[v,b,j,g,F]);return(0,l.jsxs)("div",{className:"ppp-tab-nft",children:[(0,l.jsx)(k.Z,{loading:{spinning:y,size:"large"},scroll:{x:!0},size:"small",columns:K,dataSource:u,defaultData:[],search:{defaultCollapsed:!1,layout:"horizontal",labelWidth:"auto",collapseRender:!1,className:"p-[0px]",optionRender:function(t,r,n){return[n[1],(0,l.jsx)(D.ZP,{type:"primary",onClick:function(){e.handleGetProjectNft(x)},children:U},"update"),n[0]]}},rowSelection:{type:"checkbox",selectedRowKeys:M,onChange:function(e){V(e)}},onSubmit:q,onReset:Y,options:!1,tableAlertRender:!1,tableAlertOptionRender:!1,pagination:!1}),!!M.length&&(0,l.jsxs)(z.Z.Group,{trigger:"click",type:"primary",style:{insetInlineEnd:50},icon:(0,l.jsx)(Z,{}),children:[(0,l.jsx)(z.Z,{type:"primary",description:"购买",onClick:W},"1"),(0,l.jsx)(z.Z,{type:"primary",description:"拆分",onClick:B},"2"),(0,l.jsx)(z.Z,{type:"primary",description:"销毁",onClick:X},"3")]}),s]})},_=(0,n.memo)(V),U=r(7134),H=r(62120),L={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 310H732.4c13.6-21.4 21.6-46.8 21.6-74 0-76.1-61.9-138-138-138-41.4 0-78.7 18.4-104 47.4-25.3-29-62.6-47.4-104-47.4-76.1 0-138 61.9-138 138 0 27.2 7.9 52.6 21.6 74H144c-17.7 0-32 14.3-32 32v200c0 4.4 3.6 8 8 8h40v344c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V550h40c4.4 0 8-3.6 8-8V342c0-17.7-14.3-32-32-32zm-334-74c0-38.6 31.4-70 70-70s70 31.4 70 70-31.4 70-70 70h-70v-70zm-138-70c38.6 0 70 31.4 70 70v70h-70c-38.6 0-70-31.4-70-70s31.4-70 70-70zM180 482V378h298v104H180zm48 68h250v308H228V550zm568 308H546V550h250v308zm48-376H546V378h298v104z"}}]},name:"gift",theme:"outlined"},A=function(e,t){return n.createElement(C.Z,(0,F.Z)({},e,{ref:t,icon:L}))};var G=n.forwardRef(A);h().extend(b());var q=function(e){var t=(0,m.useDispatch)(),r=(0,m.useNavigate)(),a=(0,m.useSelector)((function(e){return e.ppp.projectNftRank})),o=(0,m.useSelector)((function(e){return e.ppp.projectNftRankReset})),i=(0,m.useSelector)((function(e){return e.ppp.projectId})),c=(0,m.useSelector)((function(e){return e.ppp.projectAccountFilter})),s=(0,m.useSelector)((function(e){return e.ppp.projectNftLoading})),u=(0,m.useSelector)((function(e){return e.ppp.projectTotalHolder})),d=(0,m.useSelector)((function(e){return e.ppp.projectTotalInvest})),f=(0,m.useSelector)((function(e){return e.ppp.projectTotalProfit})),p=(0,m.useSelector)((function(e){return e.ppp.projectRewardPool})),x=(0,m.useSelector)((function(e){return e.ppp.projectNftSupply})),h=(0,n.useRef)(),v=(0,m.useIntl)().formatMessage({id:"tokens.intlUpdate"}),b=(0,n.useCallback)((function(e){var r=e.owner,n=a.filter((function(e){return e.owner===r}));t(R.N.setProjectNftRank(n))}),[a]),y=(0,n.useCallback)((function(){t(R.N.setProjectNftRank(o))}),[o]),j=(0,n.useCallback)((function(t,r,n){return[n[1],(0,l.jsx)(D.ZP,{type:"primary",onClick:function(){e.handleGetProjectNft(i)},children:v},"update"),n[0]]}),[e,i]),g=(0,n.useMemo)((function(){return[{title:"#",dataIndex:"key",key:"key",search:!1,render:function(e,t,r){return(0,l.jsx)("span",{children:r+1})}},{title:"持有者(".concat(u,")"),dataIndex:"owner",key:"owner",filters:c,onFilter:function(e,t){return e===t.owner},sorter:function(e,t){return e.owner.localeCompare(t.owner)},render:function(e,t){return(0,l.jsx)("a",{onClick:function(){return r("/query/account?search=".concat(t.owner,"&tab=info"))},children:t.owner})}},{title:"持有数量(".concat(x,")"),dataIndex:"number",key:"number",sorter:function(e,t){return e.number-t.number},search:!1,render:function(e,t){return(0,l.jsx)("div",{children:t.number})}},{title:"持有占比",dataIndex:"percent",key:"percent",search:!1,render:function(e,t){return(0,l.jsxs)("div",{children:[t.percent.toFixed(2),"%"]})}},{title:"投入成本(".concat(d.toFixed(0),")"),dataIndex:"invest",key:"invest",sorter:function(e,t){return e.invest-t.invest},search:!1,render:function(e,t){return(0,l.jsx)("div",{children:t.investAsset})}},{title:"卖出利润(".concat(f.toFixed(0),")"),dataIndex:"profit",key:"profit",sorter:function(e,t){return e.profit-t.profit},search:!1,render:function(e,t){return(0,l.jsx)("div",{children:t.profitAsset})}},{title:"销毁奖励(DFS本位)",dataIndex:"burnRewardDfs",key:"burnRewardDfs",search:!1,render:function(e,t){return(0,l.jsxs)("div",{children:[(0,O.CE)(t.burnRewardDfs)," DFS"]})}},{title:"销毁奖励(USDT本位)",dataIndex:"burnRewardUsdt",key:"burnRewardUsdt",search:!1,render:function(e,t){return(0,l.jsxs)("div",{children:[(0,O.CE)(t.burnRewardUsdt)," USDT"]})}}]}),[c,f,d,u,x]),w=(0,n.useMemo)((function(){return[{title:"#",dataIndex:"key",key:"key",render:function(e,t,r){return(0,l.jsx)("span",{children:r+1})}},{title:"名称",dataIndex:"sym",key:"sym",render:function(e,t){var r=t.logo;return(0,l.jsxs)("div",{children:[(0,l.jsx)(U.C,{className:"mr-2",size:"default",src:r}),(0,l.jsx)("span",{children:t.sym})]})}},{title:"数量",dataIndex:"balance",key:"balance",render:function(e,t){return(0,l.jsx)("div",{children:t.balance})}},{title:"价值(USDT本位)",dataIndex:"usdtValue",key:"usdtValue",render:function(e,t){return(0,l.jsxs)("div",{children:[(0,O.CE)(t.usdtValue)," USDT"]})}},{title:"价值(DFS本位)",dataIndex:"dfsValue",key:"dfsValue",render:function(e,t){return(0,l.jsxs)("div",{children:[(0,O.CE)(t.dfsValue)," DFS"]})}}]}),[]);return(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"ppp-tab-pool mt-2",children:[(0,l.jsx)("div",{className:" font-semibold text-base hardline ml-2 mb-1",children:"奖励池"}),(0,l.jsx)(k.Z,{loading:{spinning:s,size:"large"},scroll:{x:!0},size:"small",columns:w,dataSource:p,defaultData:[],search:!1,options:!1,tableAlertRender:!1,tableAlertOptionRender:!1,pagination:!1,summary:function(e){var t=0,r=0;return e.forEach((function(e){t+=e.usdtValue,r+=e.dfsValue})),(0,l.jsxs)(H.Z.Summary.Row,{children:[(0,l.jsx)(H.Z.Summary.Cell,{index:0}),(0,l.jsx)(H.Z.Summary.Cell,{index:1,children:(0,l.jsx)("span",{className:"font-semibold",children:"汇 总"})}),(0,l.jsx)(H.Z.Summary.Cell,{index:2}),(0,l.jsx)(H.Z.Summary.Cell,{index:3,children:(0,l.jsxs)("span",{className:"font-semibold",children:[(0,O.CE)(t)," USDT"]})}),(0,l.jsx)(H.Z.Summary.Cell,{index:4,children:(0,l.jsxs)("span",{className:"font-semibold",children:[(0,O.CE)(r)," DFS"]})})]})}})]}),(0,l.jsxs)("div",{className:"ppp-tab-rank mt-3",children:[(0,l.jsx)("div",{className:"font-semibold text-base hardline ml-2",children:"持有者排名"}),(0,l.jsx)(k.Z,{loading:{spinning:s,size:"large"},scroll:{x:!0},size:"small",columns:g,dataSource:a,defaultData:[],search:{defaultCollapsed:!1,layout:"horizontal",labelWidth:"auto",collapseRender:!1,className:"p-[0px]",optionRender:j},onSubmit:b,onReset:y,options:!1,tableAlertRender:!1,tableAlertOptionRender:!1,pagination:!1})]}),109===i&&(0,l.jsx)(z.Z,{icon:(0,l.jsx)(G,{}),type:"primary",style:{insetInlineEnd:50},onClick:function(){return h.current.handleOpen()}}),(0,l.jsx)(te,{ref:h})]})},Y=(0,n.memo)(q),W=r(37476),B=r(31199),X=r(63434),K=r(5966),$=r(90672),J=r(83062),Q=r(25035),ee=n.forwardRef((function(e,t){var r=E.ZP.useMessage(),a=o()(r,2),i=a[0],c=a[1],s=(0,m.useSelector)((function(e){return e.global.session})),u=(0,m.useSelector)((function(e){return e.global.account})),d=(0,m.useSelector)((function(e){return e.ppp.projectNft})),f=(0,m.useSelector)((function(e){return e.ppp.projectNextRound})),p=(0,m.useSelector)((function(e){return e.ppp.projectSecPerRound})),x=(0,n.useState)([]),v=o()(x,2),b=v[0],y=v[1],j=(0,m.useIntl)(),k=j.formatMessage({id:"coffee.inputException"}),g=j.formatMessage({id:"common.intlPleaseConnectWallet"}),w=j.formatMessage({id:"common.intlPleaseConnectNetwork"}),N=j.formatMessage({id:"common.intlTransferSuccess"}),S=j.formatMessage({id:"common.intlTransferFail"}),R=(0,n.useRef)(),F=(0,n.useState)(!1),P=o()(F,2),C=P[0],M=P[1],Z=(0,n.useCallback)(function(){var e=T()(I()().mark((function e(t){var r,n,a,o,c,u,m,x,v,b,j,k;return I()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,o=0,c=5,u=[],m=[],x=[],v={},b=h()(f.value).subtract(p,"seconds").valueOf(),d.forEach((function(e){var t=h().utc(e.last_trade).local().valueOf(),r=e.owner;t<b||(v.hasOwnProperty(r)||(v[r]=0),v[r]+=1,o+=1)})),!t){e.next=13;break}c=t,e.next=18;break;case 13:return o<300?c=5:o>=300&&o<600?c=10:o>=600&&o<1200?c=20:o>=1200&&o<2400?c=40:o>=2400&&(c=80),e.next=16,s.client.v1.chain.get_currency_balance("dfsppptokens","dogsbouns123","DOGS");case 16:k=e.sent,null===(j=R.current)||void 0===j||j.setFieldValue("balance",k[0].toString());case 18:Object.keys(v).forEach((function(e){v[e]>=c&&u.push({account:e,count:v[e]})})),u.sort((function(e,t){return t.count-e.count})),u.forEach((function(e){x.push(e.account),m.push({label:(0,l.jsxs)("div",{className:"flex justify-between w-[300px]",children:[(0,l.jsx)("div",{children:e.account}),(0,l.jsx)("div",{children:e.count})]}),value:e.account})})),y(m),null===(r=R.current)||void 0===r||r.setFieldValue("accounts",x),null===(n=R.current)||void 0===n||n.setFieldValue("count",o),null===(a=R.current)||void 0===a||a.setFieldValue("condition",c),e.next=30;break;case 27:e.prev=27,e.t0=e.catch(0),(0,O.Tv)(e.t0,i);case 30:case"end":return e.stop()}}),e,null,[[0,27]])})));return function(t){return e.apply(this,arguments)}}(),[s,d,p,f]),D=(0,n.useCallback)((function(){M(!0),Z()}),[Z]);(0,n.useImperativeHandle)(t,(function(){return{handleOpen:D}}));var z=(0,n.useCallback)(function(){var e=T()(I()().mark((function e(t){var r,n,a,c,l,d,f,p;return I()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s&&s.broadcast){e.next=5;break}return i.error("".concat(g)),e.abrupt("return");case 5:if(u){e.next=8;break}return i.error("".concat(w)),e.abrupt("return");case 8:return r=t.accounts,n=t.memo,a=n?n.trim():"",c=[],r.forEach((function(e){c.push({account:"dfsppptokens",name:"transfer",authorization:[s.permissionLevel],data:{from:s.actor,to:e,quantity:"1.00000000 DOGS",memo:a}})})),e.next=14,(0,O.zI)(s.transact({actions:c}));case 14:if(l=e.sent,d=o()(l,2),f=d[0],p=d[1],!f){e.next=23;break}return i.error(f),e.abrupt("return");case 23:if(!p||!p.response){e.next=27;break}i.success("".concat(N)),e.next=29;break;case 27:return i.error("".concat(S)),e.abrupt("return");case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[u,s]),V=(0,n.useCallback)((function(e){if(e.hasOwnProperty("condition")){var t,r=null===(t=R.current)||void 0===t?void 0:t.getFieldValue("condition");Z(r)}}),[Z]);return(0,l.jsxs)(W.Y,{formRef:R,title:"DOGS抢图奖励",open:C,onFinish:z,onOpenChange:function(e){M(e)},onValuesChange:V,initialValues:{count:0},layout:"vertical",width:"400px",modalProps:{destroyOnClose:!0,style:{top:25}},submitter:{searchConfig:{submitText:"发送"}},children:[(0,l.jsx)(B.Z,{name:"count",label:"当前NFT总量",placeholder:"自动生成，无需输入",fieldProps:{size:"large",autoFocus:!1,defaultValue:0,readOnly:!0}}),(0,l.jsx)(B.Z,{name:"condition",label:(0,l.jsxs)("div",{children:["奖励条件 (大于等于)",(0,l.jsx)(J.Z,{placement:"topLeft",title:"图片如果到了拆分点没有拆分，当前轮会计算在内，但下一轮则不会计算。图片如果在当前轮没有卖出，下一轮也不会计算在内",children:(0,l.jsx)(Q.Z,{className:"ml-[8px] hover:cursor-pointer",style:{color:"#1677ff"}})})]}),placeholder:"持有图片数量",min:5,rules:[{required:!0,message:"".concat(k),whitespace:!0,pattern:/^\d+$/}],fieldProps:{autoFocus:!0,size:"large"}}),(0,l.jsx)(X.Z.Group,{name:"accounts",label:(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{children:"获奖账号 "}),b.length?"(".concat(b.length,")"):""]}),options:b,rules:[{required:!0,whitespace:!0,message:"".concat(k),pattern:/.*/}]}),(0,l.jsx)(K.Z,{name:"balance",label:"奖励账号余额 (dogsbouns123)",placeholder:"自动生成，无需输入",fieldProps:{size:"large",autoFocus:!1,defaultValue:"",readOnly:!0}}),(0,l.jsx)($.Z,{name:"memo",label:"Memo",placeholder:"留言信息",fieldProps:{size:"large",autoFocus:!1,allowClear:!0,defaultValue:"",autoSize:{minRows:1}}}),c]})})),te=(0,n.memo)(ee)},76650:function(e,t){!function(e){"use strict";var t=function(e){return function(t){var r=e(t);return t.add(r),r}},r=function(e){return function(t,r){return e.set(t,r),r}},n=void 0===Number.MAX_SAFE_INTEGER?9007199254740991:Number.MAX_SAFE_INTEGER,a=536870912,o=2*a,i=function(e,t){return function(r){var i=t.get(r),c=void 0===i?r.size:i<o?i+1:0;if(!r.has(c))return e(r,c);if(r.size<a){for(;r.has(c);)c=Math.floor(Math.random()*o);return e(r,c)}if(r.size>n)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;r.has(c);)c=Math.floor(Math.random()*n);return e(r,c)}},c=new WeakMap,s=r(c),u=i(s,c),l=t(u);e.addUniqueNumber=l,e.generateUniqueNumber=u}(t)},51409:function(e,t,r){"use strict";r.d(t,{cv:function(){return o},gr:function(){return i},Zi:function(){return c},iK:function(){return s}});var n=r(76650);const a=((e,t)=>{let r=null;return()=>{if(null!==r)return r;const n=new Blob([t],{type:"application/javascript; charset=utf-8"}),a=URL.createObjectURL(n);return r=e(a),setTimeout((()=>URL.revokeObjectURL(a))),r}})((e=>{const t=new Map([[0,()=>{}]]),r=new Map([[0,()=>{}]]),a=new Map,o=new Worker(e);o.addEventListener("message",(({data:e})=>{if(void 0!==(n=e).method&&"call"===n.method){const{params:{timerId:n,timerType:o}}=e;if("interval"===o){const e=t.get(n);if(void 0===typeof e)throw new Error("The timer is in an undefined state.");if("number"==typeof e){const t=a.get(e);if(void 0===t||t.timerId!==n||t.timerType!==o)throw new Error("The timer is in an undefined state.")}else"function"==typeof e&&e()}else if("timeout"===o){const e=r.get(n);if(void 0===typeof e)throw new Error("The timer is in an undefined state.");if("number"==typeof e){const t=a.get(e);if(void 0===t||t.timerId!==n||t.timerType!==o)throw new Error("The timer is in an undefined state.")}else"function"==typeof e&&(e(),r.delete(n))}}else{if(!(e=>"number"==typeof e.id&&"boolean"==typeof e.result)(e)){const{error:{message:t}}=e;throw new Error(t)}{const{id:n}=e,o=a.get(n);if(void 0===o)throw new Error("The timer is in an undefined state.");const{timerId:i,timerType:c}=o;a.delete(n),"interval"===c?t.delete(i):r.delete(i)}}var n}));return{clearInterval:e=>{if("function"==typeof t.get(e)){const r=(0,n.generateUniqueNumber)(a);a.set(r,{timerId:e,timerType:"interval"}),t.set(e,r),o.postMessage({id:r,method:"clear",params:{timerId:e,timerType:"interval"}})}},clearTimeout:e=>{if("function"==typeof r.get(e)){const t=(0,n.generateUniqueNumber)(a);a.set(t,{timerId:e,timerType:"timeout"}),r.set(e,t),o.postMessage({id:t,method:"clear",params:{timerId:e,timerType:"timeout"}})}},setInterval:(e,r=0,...a)=>{const i=(0,n.generateUniqueNumber)(t);return t.set(i,(()=>{e(...a),"function"==typeof t.get(i)&&o.postMessage({id:null,method:"set",params:{delay:r,now:performance.timeOrigin+performance.now(),timerId:i,timerType:"interval"}})})),o.postMessage({id:null,method:"set",params:{delay:r,now:performance.timeOrigin+performance.now(),timerId:i,timerType:"interval"}}),i},setTimeout:(e,t=0,...a)=>{const i=(0,n.generateUniqueNumber)(r);return r.set(i,(()=>e(...a))),o.postMessage({id:null,method:"set",params:{delay:t,now:performance.timeOrigin+performance.now(),timerId:i,timerType:"timeout"}}),i}}}),'(()=>{"use strict";const e=new Map,t=new Map,r=t=>{const r=e.get(t);return void 0!==r&&(clearTimeout(r),e.delete(t),!0)},s=e=>{const r=t.get(e);return void 0!==r&&(clearTimeout(r),t.delete(e),!0)},o=(e,t)=>{const r=performance.now(),s=e+t-r-performance.timeOrigin;return{expected:r+s,remainingDelay:s}},i=(e,t,r,s)=>{const o=r-performance.now();o>0?e.set(t,setTimeout(i,o,e,t,r,s)):(e.delete(t),postMessage({id:null,method:"call",params:{timerId:t,timerType:s}}))};addEventListener("message",(({data:n})=>{try{if("clear"===n.method){const{id:e,params:{timerId:t,timerType:o}}=n;if("interval"===o)postMessage({id:e,result:r(t)});else{if("timeout"!==o)throw new Error(\'The given type "\'.concat(o,\'" is not supported\'));postMessage({id:e,result:s(t)})}}else{if("set"!==n.method)throw new Error(\'The given method "\'.concat(n.method,\'" is not supported\'));{const{params:{delay:r,now:s,timerId:a,timerType:m}}=n;if("interval"===m)((t,r,s)=>{const{expected:n,remainingDelay:a}=o(t,s);e.set(r,setTimeout(i,a,e,r,n,"interval"))})(r,a,s);else{if("timeout"!==m)throw new Error(\'The given type "\'.concat(m,\'" is not supported\'));((e,r,s)=>{const{expected:n,remainingDelay:a}=o(e,s);t.set(r,setTimeout(i,a,t,r,n,"timeout"))})(r,a,s)}}}}catch(e){postMessage({error:{message:e.message},id:n.id,result:null})}}))})();'),o=e=>a().clearInterval(e),i=e=>a().clearTimeout(e),c=(...e)=>a().setInterval(...e),s=(...e)=>a().setTimeout(...e)}}]);