"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3235],{6466:function(t,e,n){n.d(e,{Z:function(){return y}});var a=n(4942),r=n(1413),s=n(91),c=n(28459),o=n(93967),i=n.n(o),l=n(62435),u=n(63330),d=n(44962),p=n(98082),f=function(t){return(0,a.Z)({},t.componentCls,{display:"flex",flexDirection:"column",justifyContent:"flex-end",marginBlock:t.marginLG,marginInline:0,color:t.colorText,fontWeight:"500",fontSize:"20px",lineHeight:"38px"})};var m=n(86074),x=function(t){var e=t.className,n=t.style,a=void 0===n?{}:n,s=t.children,o=(0,(0,l.useContext)(c.ZP.ConfigContext).getPrefixCls)("pro-card-operation"),u=function(t){return(0,p.Xj)("ProCardOperation",(function(e){var n=(0,r.Z)((0,r.Z)({},e),{},{componentCls:".".concat(t)});return[f(n)]}))}(o),d=u.wrapSSR,x=u.hashId,h=i()(o,e,x);return d((0,m.jsx)("div",{className:h,style:a,children:s}))},h=n(10357),k=function(t){return(0,a.Z)({},t.componentCls,{"&-chart":{display:"flex",flexDirection:"column",marginBlockStart:8,marginBlockEnd:8,"&-left":{marginBlockStart:0,marginInlineEnd:"16px"},"&-right":{marginBlockStart:0,marginInlineStart:"16px"}},"&-content":{display:"flex",flexDirection:"column","&-horizontal":(0,a.Z)({flexDirection:"row"},"".concat(t.componentCls,"-chart"),{alignItems:"center",alignSelf:"flex-start"})},"&-footer":{marginBlockStart:8,paddingBlockStart:"16px",borderBlockStart:"rgba(0, 0, 0, 0.08) solid ".concat(t.colorBorder)}})};var v=["children","statistic","className","chart","chartPlacement","footer"],S=function(t){var e,n=t.children,o=t.statistic,d=t.className,f=t.chart,x=t.chartPlacement,S=t.footer,y=(0,s.Z)(t,v),g=(0,(0,l.useContext)(c.ZP.ConfigContext).getPrefixCls)("pro-statistic-card"),b=function(t){return(0,p.Xj)("StatisticCard",(function(e){var n=(0,r.Z)((0,r.Z)({},e),{},{componentCls:".".concat(t)});return[k(n)]}))}(g),C=b.wrapSSR,Z=b.hashId,j=i()(g,d,Z),w=o&&(0,m.jsx)(h.Z,(0,r.Z)({layout:"vertical"},o)),N=i()("".concat(g,"-chart"),Z,(e={},(0,a.Z)(e,"".concat(g,"-chart-left"),"left"===x&&f&&o),(0,a.Z)(e,"".concat(g,"-chart-right"),"right"===x&&f&&o),e)),D=f&&(0,m.jsx)("div",{className:N,children:f}),I=i()("".concat(g,"-content "),Z,(0,a.Z)({},"".concat(g,"-content-horizontal"),"left"===x||"right"===x)),B=(D||w)&&("left"===x?(0,m.jsxs)("div",{className:I,children:[D,w]}):(0,m.jsxs)("div",{className:I,children:[w,D]})),E=S&&(0,m.jsx)("div",{className:"".concat(g,"-footer ").concat(Z).trim(),children:S});return C((0,m.jsxs)(u.Z,(0,r.Z)((0,r.Z)({className:j},y),{},{children:[B,n,E]})))};S.Statistic=h.Z,S.Divider=d.Z,S.Operation=x,S.isProCard=!0,S.Group=function(t){return(0,m.jsx)(S,(0,r.Z)({bodyStyle:{padding:0}},t))};var y=S},10357:function(t,e,n){n.d(e,{Z:function(){return v}});var a=n(1413),r=n(4942),s=n(91),c=n(25035),o=n(28459),i=n(83062),l=n(40411),u=n(55054),d=n(93967),p=n.n(d),f=n(62435),m=n(98082),x=function(t){var e,n,a;return(0,r.Z)({},t.componentCls,(a={display:"flex",fontSize:t.fontSize,"& + &":{marginBlockStart:4},"&-tip":{marginInlineStart:4},"&-wrapper":(0,r.Z)({display:"flex",width:"100%"},"".concat(t.componentCls,"-status"),{width:"14px"}),"&-icon":{marginInlineEnd:16},"&-trend-icon":{width:0,height:0,borderInlineEnd:"3.5px solid transparent",borderBlockEnd:"9px solid #000",borderInlineStart:"3.5px solid transparent","&-up":{transform:"rotate(0deg)"},"&-down":{transform:"rotate(180deg)"}},"&-content":(0,r.Z)({width:"100%"},"".concat(t.antCls,"-statistic-content"),{"&-value-int":{fontSize:t.fontSizeHeading3}}),"&-description":{width:"100%"}},(0,r.Z)(a,"".concat(t.antCls,"-statistic-title"),{color:t.colorText}),(0,r.Z)(a,"&-trend-up",(0,r.Z)({},"".concat(t.antCls,"-statistic-content"),(0,r.Z)({color:"#f5222d"},"".concat(t.componentCls,"-trend-icon"),{borderBlockEndColor:"#f5222d"}))),(0,r.Z)(a,"&-trend-down",(0,r.Z)({},"".concat(t.antCls,"-statistic-content"),(0,r.Z)({color:"#389e0d"},"".concat(t.componentCls,"-trend-icon"),{borderBlockEndColor:"#52c41a"}))),(0,r.Z)(a,"& &-layout-horizontal",(e={display:"flex",justifyContent:"space-between"},(0,r.Z)(e,"".concat(t.antCls,"-statistic-title"),{marginBlockEnd:0}),(0,r.Z)(e,"".concat(t.antCls,"-statistic-content-value"),{fontWeight:500}),(0,r.Z)(e,"".concat(t.antCls,"-statistic-title,").concat(t.antCls,"-statistic-content,").concat(t.antCls,"-statistic-content-suffix,").concat(t.antCls,"-statistic-content-prefix,").concat(t.antCls,"-statistic-content-value-decimal"),{fontSize:t.fontSize}),e)),(0,r.Z)(a,"& &-layout-inline",(n={display:"inline-flex",color:t.colorTextSecondary},(0,r.Z)(n,"".concat(t.antCls,"-statistic-title"),{marginInlineEnd:"6px",marginBlockEnd:0}),(0,r.Z)(n,"".concat(t.antCls,"-statistic-content"),{color:t.colorTextSecondary}),(0,r.Z)(n,"".concat(t.antCls,"-statistic-title,").concat(t.antCls,"-statistic-content,").concat(t.antCls,"-statistic-content-suffix,").concat(t.antCls,"-statistic-content-prefix,").concat(t.antCls,"-statistic-content-value-decimal"),{fontSize:t.fontSizeSM}),n)),a))};var h=n(86074),k=["className","layout","style","description","children","title","tip","status","trend","prefix","icon"],v=function(t){var e,n=t.className,d=t.layout,v=void 0===d?"inline":d,S=t.style,y=t.description,g=(t.children,t.title),b=t.tip,C=t.status,Z=t.trend,j=t.prefix,w=t.icon,N=(0,s.Z)(t,k),D=(0,(0,f.useContext)(o.ZP.ConfigContext).getPrefixCls)("pro-card-statistic"),I=function(t){return(0,m.Xj)("Statistic",(function(e){var n=(0,a.Z)((0,a.Z)({},e),{},{componentCls:".".concat(t)});return[x(n)]}))}(D),B=I.wrapSSR,E=I.hashId,M=p()(D,n,E),P=p()("".concat(D,"-status"),E),T=p()("".concat(D,"-icon"),E),R=p()("".concat(D,"-wrapper"),E),z=p()("".concat(D,"-content"),E),F=p()(E,(e={},(0,r.Z)(e,"".concat(D,"-layout-").concat(v),v),(0,r.Z)(e,"".concat(D,"-trend-").concat(Z),Z),e)),O=b&&(0,h.jsx)(i.Z,{title:b,children:(0,h.jsx)(c.Z,{className:"".concat(D,"-tip ").concat(E).trim()})}),_=p()("".concat(D,"-trend-icon"),E,(0,r.Z)({},"".concat(D,"-trend-icon-").concat(Z),Z)),A=Z&&(0,h.jsx)("div",{className:_}),H=C&&(0,h.jsx)("div",{className:P,children:(0,h.jsx)(l.Z,{status:C,text:null})}),q=w&&(0,h.jsx)("div",{className:T,children:w});return B((0,h.jsxs)("div",{className:M,style:S,children:[q,(0,h.jsxs)("div",{className:R,children:[H,(0,h.jsxs)("div",{className:z,children:[(0,h.jsx)(u.Z,(0,a.Z)({title:(g||O)&&(0,h.jsxs)(h.Fragment,{children:[g,O]}),prefix:(A||j)&&(0,h.jsxs)(h.Fragment,{children:[A,j]}),className:F},N)),y&&(0,h.jsx)("div",{className:"".concat(D,"-description ").concat(E).trim(),children:y})]})]})]}))}},43007:function(t,e,n){n.r(e),n.d(e,{default:function(){return E}});var a=n(15009),r=n.n(a),s=n(99289),c=n.n(s),o=n(5574),i=n.n(o),l=n(5621),u=n(64119),d=n(11774),p=n(38345),f=n(6466),m=n(92340),x=n(59530),h=n(45360),k=n(34041),v=n(7134),S=n(57953),y=n(71230),g=n(15746),b=n(15867),C=n(9669),Z=n.n(C),j=n(27484),w=n.n(j),N=n(70178),D=n.n(N),I=n(62435),B=n(86074);w().extend(D());var E=function(){var t=(0,x.useDispatch)(),e=h.ZP.useMessage(),n=i()(e,2),a=n[0],s=n[1],o=(0,x.useNavigate)(),C=(0,x.useSelector)((function(t){return t.global.host})),j=(0,x.useSelector)((function(t){return t.global.contractKit})),w=(0,I.useState)(!1),N=i()(w,2),D=N[0],E=N[1],M=(0,x.useSelector)((function(t){return t.statistics.holderDataSource})),P=(0,x.useSelector)((function(t){return t.statistics.holderDataSourceReset})),T=(0,x.useSelector)((function(t){return t.statistics.token})),R=(0,I.useState)(0),z=i()(R,2),F=z[0],O=z[1],_=(0,I.useState)(0),A=i()(_,2),H=A[0],q=A[1],U=(0,I.useState)(0),G=i()(U,2),J=G[0],W=G[1],X=(0,I.useState)(0),$=i()(X,2),L=$[0],V=$[1],K=(0,I.useState)({}),Q=i()(K,2),Y=Q[0],tt=Q[1],et=(0,x.useIntl)(),nt=et.formatMessage({id:"tokens.intlHolder"}),at=et.formatMessage({id:"tokens.intlHold"}),rt=et.formatMessage({id:"tokens.intlLiq"}),st=et.formatMessage({id:"tokens.intlTotalValue"}),ct=et.formatMessage({id:"tokens.intlRatio"}),ot=et.formatMessage({id:"tokens.intlSupply"}),it=et.formatMessage({id:"tokens.intlMarketCap"}),lt=et.formatMessage({id:"tokens.intlPrice"}),ut=et.formatMessage({id:"tokens.intlRank"}),dt=et.formatMessage({id:"tokens.intlUpdate"}),pt=et.formatMessage({id:"tokens.intlTotalBal"}),ft=(0,I.useCallback)(function(){var t=c()(r()().mark((function t(e){var n,s,c,o,l,d,p,f,m,x;return r()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=[],s=1e3,c="",o="";case 4:return t.next=7,(0,u.zI)(Z().post("".concat(C,"/v2/chain/get_scope_rows"),{code:T.contract,table:"accounts",lower_bound:c,primary_lower_bound:o,limit:s,index_position:"primary",key_type:"name"}));case 7:if(l=t.sent,d=i()(l,2),p=d[0],f=d[1],p||200!==f.status){t.next=22;break}for(m=f.data.rows,x=0;x<m.length;++x)m[x].data.balance.split(" ")[1]===e&&n.push({account:m[x].scope,balance:m[x].data.balance});if(!f.data.more){t.next=19;break}c=f.data.next_key,o=f.data.next_primary_key,t.next=20;break;case 19:return t.abrupt("break",26);case 20:t.next=24;break;case 22:return a.error(p),t.abrupt("break",26);case 24:t.next=4;break;case 26:return t.abrupt("return",n);case 27:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[a,T]),mt=(0,I.useCallback)(c()(r()().mark((function t(){var e,n,a,s,c,o,i;return r()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j.load("swapswapswap");case 2:return e=t.sent,n=e.table("markets"),t.next=6,n.all();case 6:return a=t.sent,s=a.find((function(t){return t.mid.toNumber()===Number(T.mid)})),"usdtusdtusdt-USDT",o="eosio.token-DFS",i=[],(c={})["usdtusdtusdt-USDT"]=1,c[o]=(0,u.ri)(a[0].reserve0)/(0,u.ri)(a[0].reserve1),a.forEach((function(t){var e=t.contract0.toString()+"-"+t.sym0.toString().split(",")[1],n=t.contract1.toString()+"-"+t.sym1.toString().split(",")[1],a=(0,u.ri)(t.reserve0),r=(0,u.ri)(t.reserve1);"eosio.token"===t.contract0.toString()?c.hasOwnProperty(n)||(c[n]=a/r*c[o]):"eosio.token"===t.contract1.toString()?c.hasOwnProperty(e)||(c[e]=r/a*c[o]):"usdtusdtusdt"===t.contract0.toString()?c.hasOwnProperty(n)||(c[n]=a/r):"usdtusdtusdt"===t.contract1.toString()?c.hasOwnProperty(e)||(c[e]=r/a):i.push({key0:e,key1:n,value0:a,value1:r})})),i.forEach((function(t){c.hasOwnProperty(t.key0)&&!c.hasOwnProperty(t.key1)?c[t.key1]=t.value0/t.value1*c[t.key0]:!c.hasOwnProperty(t.key0)&&c.hasOwnProperty(t.key1)?c[t.key0]=t.value1/t.value0*c[t.key1]:c.hasOwnProperty(t.key0)||c.hasOwnProperty(t.key1)||(c[t.key0]=0,c[t.key1]=0)})),t.abrupt("return",{tokenPriceMap:c,marketData:s});case 17:case"end":return t.stop()}}),t)}))),[j,T]),xt=(0,I.useCallback)(c()(r()().mark((function t(){var e,n,a;return r()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j.load("swapswapswap");case 2:return e=t.sent,n=e.table("liquidity"),t.next=6,n.all({scope:T.mid});case 6:return a=t.sent,t.abrupt("return",a);case 8:case"end":return t.stop()}}),t)}))),[j,T]),ht=(0,I.useCallback)(c()(r()().mark((function t(){var e,n,a;return r()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j.load(T.contract);case 2:return e=t.sent,n=e.table("stat"),t.next=6,n.all({scope:T.symbol});case 6:return a=t.sent,t.abrupt("return",[parseFloat(a[0].supply.toString()),parseFloat(a[0].max_supply.toString())]);case 8:case"end":return t.stop()}}),t)}))),[j,T]),kt=(0,I.useCallback)(c()(r()().mark((function e(){var n,s,c,o,d,p,f,m,x,h,k,v,S,y;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,E(!0),n={},s={},c=[],e.next=7,mt();case 7:return o=e.sent,d=o.tokenPriceMap,p=o.marketData,e.next=12,ft(T.symbol);case 12:return f=e.sent,e.next=15,xt();case 15:return m=e.sent,e.next=18,ht();case 18:for(x=e.sent,h=i()(x,1),k=h[0],f.forEach((function(t){n[t.account]=Number(t.balance.split(" ")[0])})),m.forEach((function(t){var e=parseFloat(p.liquidity_token.toString()),n=parseFloat(p.reserve0.value.toString()),a=parseFloat(p.reserve1.value.toString()),r=parseFloat(t.token.toString())/e,c=0;c=p.sym0.toString()===T.symbol?n*r:a*r;var o=t.owner.toString();s[o]=c})),v=T.contract+"-"+T.symbol,Object.keys(n).forEach((function(t,e){var a=n[t],r=s[t]?s[t]:0;a+r>0&&c.push({key:e,rank:e,account:t,hold:a,liq:r,totalBal:a+r,value:(a+r)*d[v],ratio:(a+r)/k})})),S=c.sort((function(t,e){return e.value-t.value})),y=0;y<S.length;y++)S[y].rank=y;t(l.N.setHolderDataSource(S)),t(l.N.setHolderDataSourceReset(S)),O(S.length),q(k*d[v]),W(k),V(d[v]),E(!1),e.next=40;break;case 36:e.prev=36,e.t0=e.catch(0),E(!1),(0,u.Tv)(e.t0,a);case 40:case"end":return e.stop()}}),e,null,[[0,36]])}))),[ft,mt,ht,xt,T]),vt=(0,I.useCallback)((function(e){var n=e.account,a=M.filter((function(t){return t.account===n}));t(l.N.setHolderDataSource(a))}),[M]),St=(0,I.useCallback)((function(){t(l.N.setHolderDataSource(P))}),[P]),yt=(0,I.useCallback)(c()(r()().mark((function t(){var e,n,a,s;return r()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j.load("dfs3protocol");case 2:return e=t.sent,n=e.table("projects"),t.next=6,n.all();case 6:a=t.sent,s={},a.forEach((function(t){var e=t.max_token_supply.symbol.name;s[e]=t.token_url})),tt(s);case 10:case"end":return t.stop()}}),t)}))),[j]),gt=(0,I.useMemo)((function(){return[{title:"".concat(ut),dataIndex:"key",key:"key",search:!1,render:function(t,e){return(0,B.jsx)("span",{children:e.rank+1})}},{title:"".concat(nt),dataIndex:"account",key:"account",render:function(t,e){return(0,B.jsx)("a",{onClick:function(){return o("/query/account?search=".concat(e.account,"&tab=info"))},children:e.account})}},{title:"".concat(at),dataIndex:"hold",key:"hold",search:!1,sorter:function(t,e){return e.hold-t.hold},render:function(t,e){return(0,B.jsx)("span",{children:(0,u.CE)(e.hold)})}},{title:"".concat(rt," (").concat(T.pair,")"),dataIndex:"liq",key:"liq",search:!1,sorter:function(t,e){return e.liq-t.liq},render:function(t,e){return(0,B.jsx)("span",{children:(0,u.CE)(e.liq)})}},{title:"".concat(pt),dataIndex:"totalBal",key:"totalBal",search:!1,sorter:function(t,e){return e.totalBal-t.totalBal},render:function(t,e){return(0,B.jsx)("span",{children:(0,u.CE)(e.totalBal)})}},{title:"".concat(st),dataIndex:"value",key:"value",search:!1,sorter:function(t,e){return e.value-t.value},render:function(t,e){return(0,B.jsx)("span",{children:(0,u.CE)(e.value,"$")})}},{title:"".concat(ct),dataIndex:"ratio",key:"ratio",search:!1,sorter:function(t,e){return e.ratio-t.ratio},render:function(t,e){return(0,B.jsxs)("span",{children:[(0,u.CE)(100*e.ratio),"%"]})}}]}),[T]);return(0,I.useEffect)((function(){j&&yt()}),[j,yt]),(0,I.useEffect)((function(){j&&kt()}),[j,kt]),(0,B.jsxs)(d._z,{className:"tokens",ghost:!0,children:[(0,B.jsx)(k.default,{defaultValue:"".concat(T.contract,"-").concat(T.symbol,"-").concat(T.mid,"-").concat(T.pair),size:"large",style:{width:"100%"},className:"mb-3",onChange:function(e){var n=e.split("-"),a=i()(n,4),r=a[0],s=a[1],c=a[2],o=a[3];t(l.N.setToken({contract:r,symbol:s,mid:c,pair:o}))},options:[{value:"eosio.token-DFS-1-USDT/DFS",label:"DFS"},{value:"jiutokenmain-JIU-24-DFS/JIU",label:"JIU"},{value:"btcbtcbtcbtc-BTC-7-DFS/BTC",label:"BTC"},{value:"ordiordiordi-ORDI-8-DFS/ORDI",label:"ORDI"},{value:"satsstasstas-SATS-9-DFS/SATS",label:"SATS"},{value:"ratsratsrats-RATS-10-DFS/RATS",label:"RATS"},{value:"mmssmmssmmss-MMSS-11-DFS/MMSS",label:"MMSS"},{value:"dfsppptokens-RICH-25-DFS/RICH",label:"RICH"},{value:"dfsppptokens-MAGA-26-USDT/MAGA",label:"MAGA"},{value:"dfsppptokens-DOIT-90-DFS/DOIT",label:"DOIT"}],optionRender:function(t){var e=t.key.split("-"),n=i()(e,2),a=n[0],r=n[1],s=a+"-"+r,c="dfsppptokens"===a?Y[r]:"https://dfs.land/assets/tokens/"+s+".png";return(0,B.jsxs)("div",{className:"flex items-center",children:[(0,B.jsx)(v.C,{className:"mr-2",size:"default",src:c}),(0,B.jsx)("span",{children:t.key.split("-")[1]})]})}}),(0,B.jsx)(S.Z,{size:"large",spinning:D,children:(0,B.jsx)(p.Z,{headerBordered:!0,headStyle:{justifyContent:"center"},className:"mb-3",children:(0,B.jsxs)(y.Z,{gutter:10,children:[(0,B.jsx)(g.Z,{lg:{span:"6"},md:{span:"12"},sm:{span:"12"},xs:{span:"12"},children:(0,B.jsx)(f.Z,{layout:"center",statistic:{title:(0,B.jsx)("div",{className:"text-center",children:ot}),value:(0,u.CE)(J)}})}),(0,B.jsx)(g.Z,{lg:{span:"6"},md:{span:"12"},sm:{span:"12"},xs:{span:"12"},children:(0,B.jsx)(f.Z,{layout:"center",statistic:{title:(0,B.jsx)("div",{className:"text-center",children:lt}),value:(0,u.CE)(L,"$")}})}),(0,B.jsx)(g.Z,{lg:{span:"6"},md:{span:"12"},sm:{span:"12"},xs:{span:"12"},children:(0,B.jsx)(f.Z,{layout:"center",statistic:{title:(0,B.jsx)("div",{className:"text-center",children:it}),value:(0,u.CE)(H,"$")}})}),(0,B.jsx)(g.Z,{lg:{span:"6"},md:{span:"12"},sm:{span:"12"},xs:{span:"12"},children:(0,B.jsx)(f.Z,{layout:"center",statistic:{title:(0,B.jsx)("div",{className:"text-center",children:nt}),value:F}})})]})})}),(0,B.jsx)(m.Z,{className:"mb-3",scroll:{x:!0},size:"small",columns:gt,dataSource:M,defaultData:[],search:{defaultCollapsed:!1,layout:"horizontal",labelWidth:"auto",collapseRender:!1,className:"p-[0px]",optionRender:function(t,e,n){return[n[1],(0,B.jsx)(b.ZP,{onClick:function(){E(!0),kt()},children:dt},"update"),n[0]]}},onSubmit:vt,onReset:St,options:!1,pagination:{pageSize:100},tableAlertRender:!1,tableAlertOptionRender:!1,loading:{spinning:D,size:"large"}}),s]})}}}]);