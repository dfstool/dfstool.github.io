"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3235],{6466:function(t,e,n){n.d(e,{Z:function(){return g}});var a=n(4942),r=n(1413),s=n(91),c=n(28459),o=n(93967),i=n.n(o),l=n(62435),u=n(63330),d=n(44962),p=n(98082),f=function(t){return(0,a.Z)({},t.componentCls,{display:"flex",flexDirection:"column",justifyContent:"flex-end",marginBlock:t.marginLG,marginInline:0,color:t.colorText,fontWeight:"500",fontSize:"20px",lineHeight:"38px"})};var x=n(86074),m=function(t){var e=t.className,n=t.style,a=void 0===n?{}:n,s=t.children,o=(0,(0,l.useContext)(c.ZP.ConfigContext).getPrefixCls)("pro-card-operation"),u=function(t){return(0,p.Xj)("ProCardOperation",(function(e){var n=(0,r.Z)((0,r.Z)({},e),{},{componentCls:".".concat(t)});return[f(n)]}))}(o),d=u.wrapSSR,m=u.hashId,h=i()(o,e,m);return d((0,x.jsx)("div",{className:h,style:a,children:s}))},h=n(10357),v=function(t){return(0,a.Z)({},t.componentCls,{"&-chart":{display:"flex",flexDirection:"column",marginBlockStart:8,marginBlockEnd:8,"&-left":{marginBlockStart:0,marginInlineEnd:"16px"},"&-right":{marginBlockStart:0,marginInlineStart:"16px"}},"&-content":{display:"flex",flexDirection:"column","&-horizontal":(0,a.Z)({flexDirection:"row"},"".concat(t.componentCls,"-chart"),{alignItems:"center",alignSelf:"flex-start"})},"&-footer":{marginBlockStart:8,paddingBlockStart:"16px",borderBlockStart:"rgba(0, 0, 0, 0.08) solid ".concat(t.colorBorder)}})};var k=["children","statistic","className","chart","chartPlacement","footer"],S=function(t){var e,n=t.children,o=t.statistic,d=t.className,f=t.chart,m=t.chartPlacement,S=t.footer,g=(0,s.Z)(t,k),y=(0,(0,l.useContext)(c.ZP.ConfigContext).getPrefixCls)("pro-statistic-card"),C=function(t){return(0,p.Xj)("StatisticCard",(function(e){var n=(0,r.Z)((0,r.Z)({},e),{},{componentCls:".".concat(t)});return[v(n)]}))}(y),b=C.wrapSSR,Z=C.hashId,j=i()(y,d,Z),w=o&&(0,x.jsx)(h.Z,(0,r.Z)({layout:"vertical"},o)),N=i()("".concat(y,"-chart"),Z,(e={},(0,a.Z)(e,"".concat(y,"-chart-left"),"left"===m&&f&&o),(0,a.Z)(e,"".concat(y,"-chart-right"),"right"===m&&f&&o),e)),D=f&&(0,x.jsx)("div",{className:N,children:f}),I=i()("".concat(y,"-content "),Z,(0,a.Z)({},"".concat(y,"-content-horizontal"),"left"===m||"right"===m)),B=(D||w)&&("left"===m?(0,x.jsxs)("div",{className:I,children:[D,w]}):(0,x.jsxs)("div",{className:I,children:[w,D]})),P=S&&(0,x.jsx)("div",{className:"".concat(y,"-footer ").concat(Z).trim(),children:S});return b((0,x.jsxs)(u.Z,(0,r.Z)((0,r.Z)({className:j},g),{},{children:[B,n,P]})))};S.Statistic=h.Z,S.Divider=d.Z,S.Operation=m,S.isProCard=!0,S.Group=function(t){return(0,x.jsx)(S,(0,r.Z)({bodyStyle:{padding:0}},t))};var g=S},10357:function(t,e,n){n.d(e,{Z:function(){return k}});var a=n(1413),r=n(4942),s=n(91),c=n(25035),o=n(28459),i=n(83062),l=n(40411),u=n(55054),d=n(93967),p=n.n(d),f=n(62435),x=n(98082),m=function(t){var e,n,a;return(0,r.Z)({},t.componentCls,(a={display:"flex",fontSize:t.fontSize,"& + &":{marginBlockStart:4},"&-tip":{marginInlineStart:4},"&-wrapper":(0,r.Z)({display:"flex",width:"100%"},"".concat(t.componentCls,"-status"),{width:"14px"}),"&-icon":{marginInlineEnd:16},"&-trend-icon":{width:0,height:0,borderInlineEnd:"3.5px solid transparent",borderBlockEnd:"9px solid #000",borderInlineStart:"3.5px solid transparent","&-up":{transform:"rotate(0deg)"},"&-down":{transform:"rotate(180deg)"}},"&-content":(0,r.Z)({width:"100%"},"".concat(t.antCls,"-statistic-content"),{"&-value-int":{fontSize:t.fontSizeHeading3}}),"&-description":{width:"100%"}},(0,r.Z)(a,"".concat(t.antCls,"-statistic-title"),{color:t.colorText}),(0,r.Z)(a,"&-trend-up",(0,r.Z)({},"".concat(t.antCls,"-statistic-content"),(0,r.Z)({color:"#f5222d"},"".concat(t.componentCls,"-trend-icon"),{borderBlockEndColor:"#f5222d"}))),(0,r.Z)(a,"&-trend-down",(0,r.Z)({},"".concat(t.antCls,"-statistic-content"),(0,r.Z)({color:"#389e0d"},"".concat(t.componentCls,"-trend-icon"),{borderBlockEndColor:"#52c41a"}))),(0,r.Z)(a,"& &-layout-horizontal",(e={display:"flex",justifyContent:"space-between"},(0,r.Z)(e,"".concat(t.antCls,"-statistic-title"),{marginBlockEnd:0}),(0,r.Z)(e,"".concat(t.antCls,"-statistic-content-value"),{fontWeight:500}),(0,r.Z)(e,"".concat(t.antCls,"-statistic-title,").concat(t.antCls,"-statistic-content,").concat(t.antCls,"-statistic-content-suffix,").concat(t.antCls,"-statistic-content-prefix,").concat(t.antCls,"-statistic-content-value-decimal"),{fontSize:t.fontSize}),e)),(0,r.Z)(a,"& &-layout-inline",(n={display:"inline-flex",color:t.colorTextSecondary},(0,r.Z)(n,"".concat(t.antCls,"-statistic-title"),{marginInlineEnd:"6px",marginBlockEnd:0}),(0,r.Z)(n,"".concat(t.antCls,"-statistic-content"),{color:t.colorTextSecondary}),(0,r.Z)(n,"".concat(t.antCls,"-statistic-title,").concat(t.antCls,"-statistic-content,").concat(t.antCls,"-statistic-content-suffix,").concat(t.antCls,"-statistic-content-prefix,").concat(t.antCls,"-statistic-content-value-decimal"),{fontSize:t.fontSizeSM}),n)),a))};var h=n(86074),v=["className","layout","style","description","children","title","tip","status","trend","prefix","icon"],k=function(t){var e,n=t.className,d=t.layout,k=void 0===d?"inline":d,S=t.style,g=t.description,y=(t.children,t.title),C=t.tip,b=t.status,Z=t.trend,j=t.prefix,w=t.icon,N=(0,s.Z)(t,v),D=(0,(0,f.useContext)(o.ZP.ConfigContext).getPrefixCls)("pro-card-statistic"),I=function(t){return(0,x.Xj)("Statistic",(function(e){var n=(0,a.Z)((0,a.Z)({},e),{},{componentCls:".".concat(t)});return[m(n)]}))}(D),B=I.wrapSSR,P=I.hashId,E=p()(D,n,P),M=p()("".concat(D,"-status"),P),z=p()("".concat(D,"-icon"),P),T=p()("".concat(D,"-wrapper"),P),R=p()("".concat(D,"-content"),P),F=p()(P,(e={},(0,r.Z)(e,"".concat(D,"-layout-").concat(k),k),(0,r.Z)(e,"".concat(D,"-trend-").concat(Z),Z),e)),O=C&&(0,h.jsx)(i.Z,{title:C,children:(0,h.jsx)(c.Z,{className:"".concat(D,"-tip ").concat(P).trim()})}),_=p()("".concat(D,"-trend-icon"),P,(0,r.Z)({},"".concat(D,"-trend-icon-").concat(Z),Z)),q=Z&&(0,h.jsx)("div",{className:_}),A=b&&(0,h.jsx)("div",{className:M,children:(0,h.jsx)(l.Z,{status:b,text:null})}),H=w&&(0,h.jsx)("div",{className:z,children:w});return B((0,h.jsxs)("div",{className:E,style:S,children:[H,(0,h.jsxs)("div",{className:T,children:[A,(0,h.jsxs)("div",{className:R,children:[(0,h.jsx)(u.Z,(0,a.Z)({title:(y||O)&&(0,h.jsxs)(h.Fragment,{children:[y,O]}),prefix:(q||j)&&(0,h.jsxs)(h.Fragment,{children:[q,j]}),className:F},N)),g&&(0,h.jsx)("div",{className:"".concat(D,"-description ").concat(P).trim(),children:g})]})]})]}))}},43007:function(t,e,n){n.r(e),n.d(e,{default:function(){return P}});var a=n(15009),r=n.n(a),s=n(99289),c=n.n(s),o=n(5574),i=n.n(o),l=n(5621),u=n(64119),d=n(11774),p=n(38345),f=n(6466),x=n(92340),m=n(59530),h=n(45360),v=n(34041),k=n(7134),S=n(57953),g=n(71230),y=n(15746),C=n(15867),b=n(9669),Z=n.n(b),j=n(27484),w=n.n(j),N=n(70178),D=n.n(N),I=n(62435),B=n(86074);w().extend(D());var P=function(){var t=(0,m.useDispatch)(),e=h.ZP.useMessage(),n=i()(e,2),a=n[0],s=n[1],o=(0,m.useNavigate)(),b=(0,m.useSelector)((function(t){return t.global.host})),j=(0,m.useSelector)((function(t){return t.global.contractKit})),w=(0,I.useState)(!1),N=i()(w,2),D=N[0],P=N[1],E=(0,m.useSelector)((function(t){return t.statistics.holderDataSource})),M=(0,m.useSelector)((function(t){return t.statistics.holderDataSourceReset})),z=(0,m.useSelector)((function(t){return t.statistics.token})),T=(0,I.useState)(0),R=i()(T,2),F=R[0],O=R[1],_=(0,I.useState)(0),q=i()(_,2),A=q[0],H=q[1],U=(0,I.useState)(0),J=i()(U,2),W=J[0],X=J[1],$=(0,I.useState)(0),G=i()($,2),L=G[0],V=G[1],K=(0,m.useIntl)(),Q=K.formatMessage({id:"tokens.intlHolder"}),Y=K.formatMessage({id:"tokens.intlHold"}),tt=K.formatMessage({id:"tokens.intlLiq"}),et=K.formatMessage({id:"tokens.intlTotalValue"}),nt=K.formatMessage({id:"tokens.intlRatio"}),at=K.formatMessage({id:"tokens.intlSupply"}),rt=K.formatMessage({id:"tokens.intlMarketCap"}),st=K.formatMessage({id:"tokens.intlPrice"}),ct=K.formatMessage({id:"tokens.intlRank"}),ot=K.formatMessage({id:"tokens.intlUpdate"}),it=K.formatMessage({id:"tokens.intlTotalBal"}),lt=(0,I.useCallback)(c()(r()().mark((function t(){var e,n,s,c,o,l,d,p,f,x;return r()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=[],n=1e3,s="",c="";case 4:return t.next=7,(0,u.zI)(Z().post("".concat(b,"/v2/chain/get_scope_rows"),{code:z.contract,table:"accounts",lower_bound:s,primary_lower_bound:c,limit:n,index_position:"primary",key_type:"name"}));case 7:if(o=t.sent,l=i()(o,2),d=l[0],p=l[1],d||200!==p.status){t.next=22;break}for(f=p.data.rows,x=0;x<f.length;++x)e.push({account:f[x].scope,balance:f[x].data.balance});if(!p.data.more){t.next=19;break}s=p.data.next_key,c=p.data.next_primary_key,t.next=20;break;case 19:return t.abrupt("break",26);case 20:t.next=24;break;case 22:return a.error(d),t.abrupt("break",26);case 24:t.next=4;break;case 26:return t.abrupt("return",e);case 27:case"end":return t.stop()}}),t)}))),[a,z]),ut=(0,I.useCallback)(c()(r()().mark((function t(){var e,n,a,s,c,o,i;return r()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j.load("swapswapswap");case 2:return e=t.sent,n=e.table("markets"),t.next=6,n.all();case 6:return a=t.sent,s=a.find((function(t){return t.mid.toNumber()===Number(z.mid)})),"usdtusdtusdt-USDT",o="eosio.token-DFS",i=[],(c={})["usdtusdtusdt-USDT"]=1,c[o]=a[0].reserve0.value/a[0].reserve1.value,a.forEach((function(t){var e=t.contract0.toString()+"-"+t.sym0.toString().split(",")[1],n=t.contract1.toString()+"-"+t.sym1.toString().split(",")[1];"eosio.token"===t.contract0.toString()?c.hasOwnProperty(n)||(c[n]=t.reserve0.value/t.reserve1.value*c[o]):"eosio.token"===t.contract1.toString()?c.hasOwnProperty(e)||(c[e]=t.reserve1.value/t.reserve0.value*c[o]):"usdtusdtusdt"===t.contract0.toString()?c.hasOwnProperty(n)||(c[n]=t.reserve0.value/t.reserve1.value):"usdtusdtusdt"===t.contract1.toString()?c.hasOwnProperty(e)||(c[e]=t.reserve1.value/t.reserve0.value):i.push({key0:e,key1:n,value0:t.reserve0.value,value1:t.reserve1.value})})),i.forEach((function(t){c.hasOwnProperty(t.key0)&&!c.hasOwnProperty(t.key1)?c[t.key1]=t.value0/t.value1*c[t.key0]:!c.hasOwnProperty(t.key0)&&c.hasOwnProperty(t.key1)?c[t.key0]=t.value1/t.value0*c[t.key1]:c.hasOwnProperty(t.key0)||c.hasOwnProperty(t.key1)||(c[t.key0]=0,c[t.key1]=0)})),t.abrupt("return",{tokenPriceMap:c,marketData:s});case 17:case"end":return t.stop()}}),t)}))),[j,z]),dt=(0,I.useCallback)(c()(r()().mark((function t(){var e,n,a;return r()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j.load("swapswapswap");case 2:return e=t.sent,n=e.table("liquidity"),t.next=6,n.all({scope:z.mid});case 6:return a=t.sent,t.abrupt("return",a);case 8:case"end":return t.stop()}}),t)}))),[j,z]),pt=(0,I.useCallback)(c()(r()().mark((function t(){var e,n,a;return r()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j.load(z.contract);case 2:return e=t.sent,n=e.table("stat"),t.next=6,n.all({scope:z.symbol});case 6:return a=t.sent,t.abrupt("return",[parseFloat(a[0].supply.toString()),parseFloat(a[0].max_supply.toString())]);case 8:case"end":return t.stop()}}),t)}))),[j,z]),ft=(0,I.useCallback)(c()(r()().mark((function e(){var n,s,c,o,d,p,f,x,m,h,v,k,S,g;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,P(!0),n={},s={},c=[],e.next=7,ut();case 7:return o=e.sent,d=o.tokenPriceMap,p=o.marketData,e.next=12,lt();case 12:return f=e.sent,e.next=15,dt();case 15:return x=e.sent,e.next=18,pt();case 18:for(m=e.sent,h=i()(m,1),v=h[0],f.forEach((function(t){n[t.account]=Number(t.balance.split(" ")[0])})),x.forEach((function(t){var e=parseFloat(p.liquidity_token.toString()),n=parseFloat(p.reserve0.value.toString()),a=parseFloat(p.reserve1.value.toString()),r=parseFloat(t.token.toString())/e,c=0;c=p.sym0.toString()===z.symbol?n*r:a*r;var o=t.owner.toString();s[o]=c})),k=z.contract+"-"+z.symbol,Object.keys(n).forEach((function(t,e){var a=n[t],r=s[t]?s[t]:0;a+r>0&&c.push({key:e,rank:e,account:t,hold:a,liq:r,totalBal:a+r,value:(a+r)*d[k],ratio:(a+r)/v})})),S=c.sort((function(t,e){return e.value-t.value})),g=0;g<S.length;g++)S[g].rank=g;t(l.N.setHolderDataSource(S)),t(l.N.setHolderDataSourceReset(S)),O(S.length),H(v*d[k]),X(v),V(d[k]),P(!1),e.next=40;break;case 36:e.prev=36,e.t0=e.catch(0),P(!1),(0,u.Tv)(e.t0,a);case 40:case"end":return e.stop()}}),e,null,[[0,36]])}))),[lt,ut,pt,dt,z]),xt=(0,I.useCallback)((function(e){var n=e.account,a=E.filter((function(t){return t.account===n}));t(l.N.setHolderDataSource(a))}),[E]),mt=(0,I.useCallback)((function(){t(l.N.setHolderDataSource(M))}),[M]),ht=(0,I.useMemo)((function(){return[{title:"".concat(ct),dataIndex:"key",key:"key",search:!1,render:function(t,e){return(0,B.jsx)("span",{children:e.rank+1})}},{title:"".concat(Q),dataIndex:"account",key:"account",render:function(t,e){return(0,B.jsx)("a",{onClick:function(){return o("/query/account?search=".concat(e.account,"&tab=info"))},children:e.account})}},{title:"".concat(Y),dataIndex:"hold",key:"hold",search:!1,sorter:function(t,e){return e.hold-t.hold},render:function(t,e){return(0,B.jsx)("span",{children:(0,u.CE)(e.hold)})}},{title:"".concat(tt," (").concat(z.pair,")"),dataIndex:"liq",key:"liq",search:!1,sorter:function(t,e){return e.liq-t.liq},render:function(t,e){return(0,B.jsx)("span",{children:(0,u.CE)(e.liq)})}},{title:"".concat(it),dataIndex:"totalBal",key:"totalBal",search:!1,sorter:function(t,e){return e.totalBal-t.totalBal},render:function(t,e){return(0,B.jsx)("span",{children:(0,u.CE)(e.totalBal)})}},{title:"".concat(et),dataIndex:"value",key:"value",search:!1,sorter:function(t,e){return e.value-t.value},render:function(t,e){return(0,B.jsx)("span",{children:(0,u.CE)(e.value,"$")})}},{title:"".concat(nt),dataIndex:"ratio",key:"ratio",search:!1,sorter:function(t,e){return e.ratio-t.ratio},render:function(t,e){return(0,B.jsxs)("span",{children:[(0,u.CE)(100*e.ratio),"%"]})}}]}),[z]);return(0,I.useEffect)((function(){j&&ft()}),[j,ft]),(0,B.jsxs)(d._z,{className:"tokens",ghost:!0,children:[(0,B.jsx)(v.default,{defaultValue:"".concat(z.contract,"-").concat(z.symbol,"-").concat(z.mid,"-").concat(z.pair),size:"large",style:{width:"100%"},className:"mb-3",onChange:function(e){var n=e.split("-"),a=i()(n,4),r=a[0],s=a[1],c=a[2],o=a[3];t(l.N.setToken({contract:r,symbol:s,mid:c,pair:o}))},options:[{value:"eosio.token-DFS-1-USDT/DFS",label:"DFS"},{value:"jiutokenmain-JIU-24-DFS/JIU",label:"JIU"},{value:"btcbtcbtcbtc-BTC-7-DFS/BTC",label:"BTC"},{value:"ordiordiordi-ORDI-8-DFS/ORDI",label:"ORDI"},{value:"satsstasstas-SATS-9-DFS/SATS",label:"SATS"},{value:"ratsratsrats-RATS-10-DFS/RATS",label:"RATS"},{value:"mmssmmssmmss-MMSS-11-DFS/MMSS",label:"MMSS"}],optionRender:function(t){var e=t.key.split("-"),n=i()(e,2),a="https://dfs.land/assets/tokens/"+(n[0]+"-"+n[1])+".png";return(0,B.jsxs)("div",{className:"flex items-center",children:[(0,B.jsx)(k.C,{className:"mr-2",size:"default",src:a}),(0,B.jsx)("span",{children:t.key.split("-")[1]})]})}}),(0,B.jsx)(S.Z,{size:"large",spinning:D,children:(0,B.jsx)(p.Z,{headerBordered:!0,headStyle:{justifyContent:"center"},className:"mb-3",children:(0,B.jsxs)(g.Z,{gutter:10,children:[(0,B.jsx)(y.Z,{lg:{span:"6"},md:{span:"12"},sm:{span:"12"},xs:{span:"12"},children:(0,B.jsx)(f.Z,{layout:"center",statistic:{title:(0,B.jsx)("div",{className:"text-center",children:at}),value:(0,u.CE)(W)}})}),(0,B.jsx)(y.Z,{lg:{span:"6"},md:{span:"12"},sm:{span:"12"},xs:{span:"12"},children:(0,B.jsx)(f.Z,{layout:"center",statistic:{title:(0,B.jsx)("div",{className:"text-center",children:st}),value:(0,u.CE)(L,"$")}})}),(0,B.jsx)(y.Z,{lg:{span:"6"},md:{span:"12"},sm:{span:"12"},xs:{span:"12"},children:(0,B.jsx)(f.Z,{layout:"center",statistic:{title:(0,B.jsx)("div",{className:"text-center",children:rt}),value:(0,u.CE)(A,"$")}})}),(0,B.jsx)(y.Z,{lg:{span:"6"},md:{span:"12"},sm:{span:"12"},xs:{span:"12"},children:(0,B.jsx)(f.Z,{layout:"center",statistic:{title:(0,B.jsx)("div",{className:"text-center",children:Q}),value:F}})})]})})}),(0,B.jsx)(x.Z,{className:"mb-3",scroll:{x:!0},size:"small",columns:ht,dataSource:E,defaultData:[],search:{defaultCollapsed:!1,layout:"horizontal",labelWidth:"auto",collapseRender:!1,className:"p-[0px]",optionRender:function(t,e,n){return[n[1],(0,B.jsx)(C.ZP,{onClick:function(){P(!0),ft()},children:ot},"update"),n[0]]}},onSubmit:xt,onReset:mt,options:!1,pagination:{pageSize:100},tableAlertRender:!1,tableAlertOptionRender:!1,loading:{spinning:D,size:"large"}}),s]})}}}]);